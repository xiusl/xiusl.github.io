{"posts":[{"title":"å¤§æ•°æ®æ¶æ„è®¾è®¡","text":"å¤§æ•°æ®å¸¦æ¥çš„ä¸‰å¤§æŒ‘æˆ˜ å¦‚ä½•åˆ©ç”¨ä¿¡æ¯æŠ€æœ¯ç­‰æ‰‹æ®µå¤„ç†éç»“æ„åŒ–å’ŒåŠç»“æ„åŒ–æ•°æ® å¦‚ä½•æ¢ç´¢å¤§æ•°æ®å¤æ‚æ€§ã€ä¸ç¡®å®šæ€§ç‰¹å¾æè¿°çš„åˆ»ç”»æ–¹æ³•åŠå¤§æ•°æ®çš„ç³»ç»Ÿå»ºæ¨¡ æ•°æ®å¼‚æ„æ€§ä¸å†³ç­–å¼‚æ„æ€§çš„å…³ç³»å¯¹å¤§æ•°æ®çŸ¥è¯†å‘ç°ä¸ç®¡ç†å†³ç­–çš„å½±å“ å¤§æ•°æ®å¤„ç†ç³»ç»Ÿæ¶æ„ç‰¹å¾ 1.é²æ£’æ€§å’Œå®¹é”™æ€§ 2.ä½å»¶è¿Ÿè¯»å–å’Œæ›´æ–°èƒ½åŠ› 3.æ¨ªå‘æ‰©å®¹ 4.é€šç”¨æ€§ 5.å»¶å±•æ€§ 6.å³å¸­æŸ¥è¯¢èƒ½åŠ› 7.æœ€å°‘ç»´æŠ¤èƒ½åŠ› 8.å¯è°ƒè¯•æ€§ Lambda æ¶æ„ è®¾è®¡ç›®çš„åœ¨äºæä¾›ä¸€ä¸ªèƒ½æ»¡è¶³å¤§æ•°æ®ç³»ç»Ÿå…³é”®ç‰¹æ€§çš„æ¶æ„ï¼ŒåŒ…æ‹¬é«˜å®¹é”™ã€ä½å»¶è¿Ÿã€å¯æ‰©å±• æ•´åˆç¦»çº¿è®¡ç®—ä¸å®æ—¶è®¡ç®—ï¼Œèåˆä¸å¯å˜æ€§ã€è¯»å†™åˆ†ç¦»å’Œå¤æ‚æ€§éš”ç¦»ç­‰åŸåˆ™ æ˜¯ç”¨äºåŒæ—¶å¤„ç†ç¦»çº¿æ•°æ®å’Œå®æ—¶æ•°æ®çš„ã€å¯å®¹é”™çš„ã€å¯æ‰©å±•çš„åˆ†å¸ƒå¼ç³»ç»Ÿ å…·å¤‡å¼ºé²æ£’æ€§ï¼Œæä¾›ä½å»¶è¿Ÿå’ŒæŒç»­æ›´æ–° åº”ç”¨åœºæ™¯ï¼šæœºå™¨å­¦ä¹ ã€ç‰©è”ç½‘ã€æµå¤„ç† æ¶æ„å¯åˆ†è§£ä¸ºä¸‰å±‚ï¼šæ‰¹å¤„ç†å±‚ã€åŠ é€Ÿå±‚ã€æœåŠ¡å±‚ æ‰¹å¤„ç†å±‚ï¼ˆBatch Layerï¼‰ï¼šå­˜å‚¨æ•°æ®é›†ï¼Œåœ¨æ•°æ®é›†ä¸Šé¢„å…ˆè®¡ç®—æŸ¥è¯¢å‡½æ•°ï¼Œå¹¶åè§æŸ¥è¯¢å¯¹åº”çš„Viewå¯ä»¥å¾ˆå¥½å¤„ç†ç¦»çº¿æ•°æ®æ ¹æ®å…¨ä½“ç¦»çº¿æ•°æ®ç›´æ¥å¾—åˆ° Batch View åŠ é€Ÿå±‚ï¼ˆSpeed Layerï¼‰ï¼šå¤„ç†çš„æ˜¯æœ€è¿‘å¢é‡æ•°æ®æµï¼Œä¸ºäº†æ•ˆç‡ï¼Œåœ¨æ¥å—åˆ°æ–°çš„æ•°æ®åä¼šä¸æ–­æ›´æ–° Real-tiem View æœåŠ¡å±‚ï¼ˆServing Layerï¼‰ï¼šåˆå¹¶Batch View å’Œ Real-time View ä¸­çš„ç»“æœæ•°æ®é›†åˆ°æœ€ç»ˆæ•°æ®é›†ï¼Œç”¨äºå“åº”ç”¨æˆ·çš„æŸ¥è¯¢è¯·æ±‚ åœ¨è¿™ç§Lambda æ¶æ„ä¸­ Hadoop (HDFS) ç”¨äºå­˜å‚¨ä¸»æ•°æ®é›† Sparkï¼ˆæˆ–Storm) å¯æ„æˆé€Ÿåº¦å±‚ HBaseï¼ˆæˆ–Cassandra) ä½œä¸ºæœåŠ¡å±‚ï¼Œç”±Hiveåˆ›å»ºå¯æŸ¥è¯¢çš„è§†å›¾ Hadoop æ˜¯é€‚åˆè¿è¡Œåœ¨é€šç”¨ç¡¬ä»¶ä¸Šçš„åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿã€‚HDFS æ˜¯ä¸€ä¸ªå…·æœ‰é«˜åº¦å®¹é”™æ€§çš„ç³»ç»Ÿï¼Œèƒ½å¤Ÿæä¾›é«˜ååé‡çš„æ•°æ®è®¿é—®ï¼Œéå¸¸é€‚åˆå¤§è§„æ¨¡æ•°æ®é›†ä¸Šçš„åº”ç”¨Apache Spark æ˜¯ä¸“ä¸ºå¤§è§„æ¨¡æ•°æ®å¤„ç†è€Œè®¾è®¡çš„å¿«é€Ÿé€šç”¨çš„è®¡ç®—å¼•æ“ï¼Œä¸­é—´æ•°æ®ç»“æœå¯ä»¥ä¿å­˜åœ¨å†…å­˜ï¼Œèƒ½æ›´å¥½çš„é€‚ç”¨äºæ•°æ®æŒ–æ˜ä¸æœºå™¨å­¦ä¹ ç­‰éœ€è¦è¿­ä»£çš„ Map Reduce ç®—æ³•HBase-Hadoop Database æ˜¯ä¸€ä¸ªé«˜å¯é æ€§ã€é«˜æ€§èƒ½ã€é¢å‘åˆ—ã€å¯ä¼¸ç¼©çš„åˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿï¼Œå¯åœ¨å»‰ä»·PCServerä¸Šæ­å»ºèµ·å¤§è§„æ¨¡ç»“æ„åŒ–å­˜å‚¨é›†ç¾¤ Lambda æ¶æ„çš„ä¼˜ç‚¹ï¼šå®¹é”™æ€§å¥½ã€æŸ¥è¯¢çµæ´»åº¦é«˜ã€æ˜“ä¼¸ç¼©ã€æ˜“æ‰©å±•ç¼ºç‚¹ï¼šå…¨åœºæ™¯è¦†ç›–å¸¦æ¥çš„ç¼–ç å¼€é”€ï¼ˆéœ€è¦åŒæ—¶ç»´æŠ¤ä¸€å¥—å®æ—¶è®¡ç®—å’Œä¸€å¥—å­˜é‡è®¡ç®—ä»£ç ï¼‰ï¼Œé’ˆå¯¹å…·ä½“åœºæ™¯é‡æ–°ç¦»çº¿è®­ç»ƒä¸€éçš„ç›Šå¤„ä¸å¤§ï¼Œé‡æ–°éƒ¨ç½²å’Œè¿ç§»æˆæœ¬å¾ˆé«˜ã€‚ äº‹ä»¶æº¯æºï¼ˆEvent Sourcingï¼‰ä¸ Lambda æ¶æ„Event Sourcing æœ¬è´¨ä¸Šæ˜¯ä¸€ç§æ•°æ®æŒä¹…åŒ–çš„æ–¹å¼ï¼Œå…¶ç”±ä¸‰ä¸ªæ ¸å¿ƒè§‚ç‚¹æ„æˆ1ï¼‰æ•´ä¸ªç³»ç»Ÿä»¥äº‹ä»¶ä¸ºé©±åŠ¨ï¼Œæ‰€æœ‰äº‹ç‰©éƒ½ç”±äº‹ä»¶é©±åŠ¨æ¥å®Œæˆ2ï¼‰äº‹ä»¶æ˜¯æ ¸å¿ƒã€‚ç³»ç»Ÿçš„æ•°æ®ä»¥äº‹ä»¶ä¸ºåŸºç¡€ï¼Œäº‹ä»¶è¦ä¿å­˜åœ¨æŸç§å­˜å‚¨ä¸Š3ï¼‰ä¸šåŠ¡æ•°æ®åªæ˜¯ä¸€äº›ç”±äº‹ä»¶äº§ç”Ÿçš„è§†å›¾ï¼Œä¸ä¸€å®šè¦ä¿å­˜åˆ°æ•°æ®åº“ä¸­Lambda ä¸­å¯¹æ•°æ®é›†å­˜å‚¨ä½¿ç”¨çš„æ¦‚å¿µæœˆ Event Sourcing ä¸­çš„æ€æƒ³å®Œå…¨ä¸€è‡´ï¼Œä½¿ç”¨ç»Ÿä¸€çš„æ•°æ®æ¨¡å‹å¯¹æ•°æ®å¤„ç†äº‹ä»¶æœ¬èº«è¿›è¡Œå®šä¹‰å‘ç”Ÿé”™è¯¯çš„æ—¶å€™ï¼Œèƒ½å¤Ÿé€šè¿‡æ¨¡å‹æ‰¾åˆ°é”™è¯¯å‘ç”Ÿçš„åŸå› ï¼Œå¯¹è¿™ä¸€äº‹ä»¶è¿›è¡Œé‡æ–°è®¡ç®—ï¼Œæ¢å¤ç³»ç»Ÿçš„æ­£ç¡®çŠ¶æ€ï¼Œå®ç°äº†å®¹é”™æ€§ CQRS ä¸ Lambda æ¶æ„CQRS æ¶æ„åˆ†ç¦»äº†å¯¹æ•°æ®è¿›è¡Œçš„è¯»æ“ä½œå’Œå†™æ“ä½œï¼Œå°†èƒ½å¤Ÿæ”¹å˜æ•°æ®æ¨¡å‹çŠ¶æ€çš„å‘½ä»¤ä¸æ¨¡å‹çŠ¶æ€æŸ¥è¯¢æ“ä½œå®ç°äº†åˆ†ç¦»ï¼Œæ˜¯é¢†åŸŸé©±åŠ¨è®¾è®¡çš„ä¸€ä¸ªæ¶æ„æ¨¡å¼ï¼Œè§£å†³æ•°æ®åº“æŠ¥è¡¨çš„è¾“å‡ºå¤„ç†æ–¹å¼Lambda æ¶æ„ä¸­ï¼Œæ•°æ®çš„ä¿®æ”¹é€šè¿‡æ‰¹å¤„ç†å’Œæµå¤„ç†å®ç°ï¼Œé€šè¿‡å†™æ“ä½œå°†æ•°æ®è½¬æ¢æˆæŸ¥è¯¢æ—¶æ‰€å¯¹åº”çš„Viewï¼Œå¯¹æ•°æ®æŸ¥è¯¢æ—¶æ˜¯é€šè¿‡ View ç›´æ¥å¾—åˆ°ç»“æœï¼Œå®é™…ä¸Šæ˜¯ä¸€ç§å½¢å¼çš„è¯»å†™åˆ†ç¦» Kappa æ¶æ„åœ¨ Lambda æ¶æ„çš„åŸºç¡€ä¸Šè¿›è¡Œäº†ä¼˜åŒ–ï¼Œåˆ é™¤äº† Batch Layer çš„æ¶æ„ï¼Œå°†æ•°æ®é€šé“ä»¥æ¶ˆæ¯é˜Ÿåˆ—è¿›è¡Œæ›¿ä»£ä¾æ—§ä»¥æµå¤„ç†ä¸ºä¸»ï¼Œæ•°æ®åœ¨æ•°æ®æ¹–é¢è¿›è¡Œäº†å­˜å‚¨ï¼Œéœ€è¦è¿›è¡Œç¦»çº¿åˆ†ææˆ–å†æ¬¡è®¡ç®—æ—¶ï¼Œå°†æ•°æ®æ¹–çš„æ•°æ®å†æ¬¡ç»è¿‡æ¶ˆæ¯é˜Ÿåˆ—é‡æ’­ä¸€æ¬¡è¾“å…¥æ•°æ®ç›´æ¥ç”±å®æ—¶å±‚çš„å®æ—¶æ•°æ®å¤„ç†å¼•æ“å¯¹æºæºä¸æ–­çš„æºæ•°æ®è¿›è¡Œå¤„ç† ä»ä½¿ç”¨åœºæ™¯ä¸Šå¯¹æ¯”ï¼š1ï¼‰Kappa ä¸æ˜¯ Lambda çš„æ›¿ä»£æ¶æ„ï¼Œè€Œæ˜¯å…¶ç®€åŒ–ç‰ˆæœ¬ï¼ŒKappa æ”¾å¼ƒäº†å¯¹æ‰¹å¤„ç†çš„æ”¯æŒï¼Œæ›´æ“…é•¿ä¸šåŠ¡æœ¬èº«ä¸ºå¢é‡æ•°æ®å†™å…¥åœºæ™¯çš„åˆ†æéœ€æ±‚2ï¼‰Lambda ç›´æ¥æ”¯æŒæ‰¹å¤„ç†ï¼Œæ›´é€‚åˆå¯¹å†å²æ•°æ®åˆ†ææŸ¥è¯¢çš„åœºæ™¯ Kappa æ¶æ„çš„ä¼˜ç‚¹ï¼šå°†å®æ—¶å’Œç¦»çº¿ä»£ç ç»Ÿä¸€èµ·æ¥ç¼ºç‚¹ï¼š1ï¼‰æ¶ˆæ¯ä¸­é—´ä»¶ç¼“å­˜æ•°æ®é‡å’Œå›æº¯æ•°æ®ç”±æ€§èƒ½ç“¶é¢ˆ2ï¼‰é‡åˆ°å¤§é‡ä¸åŒå®æ—¶æµè¿›è¡Œå…³è”æ—¶ï¼Œéå¸¸ä¾èµ–å®æ—¶è®¡ç®—ç³»ç»Ÿçš„èƒ½åŠ›ï¼Œå¾ˆå¯èƒ½å› ä¸ºæ•°æ®æµå…ˆåé¡ºåºé—®é¢˜ï¼Œå¯¼è‡´æ•°æ®ä¸¢å¤±3ï¼‰æŠ›å¼ƒäº†ç¦»çº¿è®¡ç®—æ›´åŠ ç¨³å®šå¯é çš„ç‰¹ç‚¹ Kappa+ æ¶æ„æµå¼æ•°æ®å¤„ç†æ¶æ„ï¼Œæ ¸å¿ƒæ€æƒ³æ˜¯è®©æµè®¡ç®—æ¡†æ¶ç›´æ¥è¯» HDFS é‡Œçš„æ•°æ®ä»“åº“æ•°æ®ï¼Œä¸€å¹¶å®ç°å®æ—¶è®¡ç®—å’Œå†å²æ•°æ® backfll è®¡ç®—å°†ä¸åŒæºçš„æ•°æ®é€šè¿‡ Kafka å¯¼å…¥åˆ° Hadoop ä¸­ï¼Œé€šè¿‡ HDFS æ¥å­˜å‚¨ä¸­é—´æ•°æ®ï¼Œå†é€šè¿‡ spark å¯¹æ•°æ®è¿›è¡Œåˆ†æå¤„ç†ï¼Œæœ€åäº¤ç”±ä¸Šå±‚ä¸šåŠ¡æŸ¥è¯¢ æ··åˆåˆ†æç³»ç»Ÿçš„Kappaæ¶æ„Lambda å’Œ Kappa éƒ½æœ‰å±•ç¤ºå±‚çš„å›°éš¾ç‚¹ï¼Œå¦‚ä½•æ”¯æŒçƒ­ç‚¹æ•°æ®çš„æŸ¥è¯¢åˆ†æï¼Œè§£å†³æ–¹æ¡ˆæ˜¯åœ¨ Kappa åŸºç¡€ä¸Šè¡ç”Ÿæ•°æ®åˆ†ææµç¨‹åŸºäº Kafka + Flink æ„å»º Kappa æµè®¡ç®—æ•°æ®æ¶æ„ï¼Œé’ˆå¯¹ Kappa åˆ†æèƒ½åŠ›ä¸è¶³ï¼Œåˆ©ç”¨ Kafka å¯¹æ¥ ES å®æ—¶åˆ†æå¼•æ“ï¼Œéƒ¨åˆ†å¼¥è¡¥å…¶æ•°æ®åˆ†æèƒ½åŠ›ä½† ES ä¹Ÿåªé€‚åˆå¯¹åˆç†æ•°æ®é‡çº§çš„çƒ­ç‚¹æ•°æ®è¿›è¡Œç´¢å¼•ï¼Œæ— æ³•è¦†ç›–æ‰€æœ‰æ‰¹å¤„ç†ç›¸å…³çš„åˆ†æéœ€æ±‚ï¼Œæ˜¯ Kappa å’Œ lambda çš„æŠ˜ä¸­æ–¹æ¡ˆ å¯¹æ¯”å’Œé€‰æ‹©1ï¼‰ä¸šåŠ¡éœ€æ±‚ä¸æŠ€æœ¯è¦æ±‚ï¼š ä¸šåŠ¡å¯¹ä¸ Hadoopã€Sparkã€Strom ç­‰å…³é”®æŠ€æœ¯ç”±å¼ºåˆ¶ä¾èµ–é€‰æ‹© lambda å¤„ç†æ•°æ®åå¥½äºæµå¼è®¡ç®—ï¼Œä¾èµ– Flink è®¡ç®—å¼•æ“ï¼Œé€‰æ‹© Kappa2ï¼‰å¤æ‚åº¦ é¡¹ç›®ä¸­é¢‘ç¹å¯¹ç®—æ³•æ¨¡å‹å‚æ•°è¿›è¡Œä¿®æ”¹ï¼Œç®—æ³•æ¨¡å‹æ”¯æŒåŒæ—¶æ‰§è¡Œæ‰¹å¤„ç†å’Œæµå¼è®¡ç®—ï¼Œç³»ç»Ÿç”¨ä¸€ä»½ä»£ç è¿›è¡Œæ•°æ®å¤„ç† Kappa3ï¼‰å¼€æ”¾ç»´æŠ¤æˆæœ¬ lambda éœ€è¦æœ‰ä¸€å®šç¨‹åº¦çš„å¼€å‘ç»´æŠ¤æˆæœ¬ï¼ŒåŒ…æ‹¬äº†ä¸¤å¥—ç³»ç»Ÿçš„å¼€å‘ã€éƒ¨ç½²ã€æµ‹è¯•ã€ç»´æŠ¤ Kappa åªéœ€è¦ç»´æŠ¤ä¸€å¥—ç³»ç»Ÿ4ï¼‰å†å²æ•°æ®å¤„ç†èƒ½åŠ› é¢‘ç¹æ¥è§¦æµ·é‡æ•°æ®é›†è¿›è¡Œåˆ†æï¼Œlambda å§‹ç»ˆä½¿ç”¨å°è§„æ¨¡æ•°æ®é›†ï¼Œæµå¤„ç†ç³»ç»Ÿå®Œå…¨å¯æ˜¯ä½¿ç”¨ï¼Œé€‰æ‹© Kappa","link":"/2024/10/16/19%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/"},{"title":"gitea çš„ä½¿ç”¨","text":"æ­å»ºè‡ªå·±çš„ git ä»“åº“ï¼Œä½¿ç”¨ gitea ä½¿ç”¨ dockerdocker-compose.yml æ–‡ä»¶ 123456789101112131415161718192021222324252627282930version: &quot;3&quot;networks: gitea: external: falseservices: server: image: gitea/gitea:1.19.3 container_name: gitea environment: - USER_UID=1000 - USER_GID=1000 - GITEA__database__DB_TYPE=mysql - GITEA__database__HOST=192.168.0.36:3306 - GITEA__database__NAME=gitea - GITEA__database__USER=gitea - GITEA__database__PASSWD=gitea110 - DOMAIN=192.168.0.36:8030 - SSH_DOMAIN=192.168.0.36:222 restart: always networks: - gitea volumes: - ./giteadata:/data - /etc/timezone:/etc/timezone:ro - /etc/localtime:/etc/localtime:ro ports: - &quot;8030:3000&quot; - &quot;222:22&quot; æ³¨æ„âš ï¸ï¼šä¸€å®šè¦æŠŠæ•°æ®æŒ‚åœ¨åˆ°ä¸»æœºä¸Šï¼Œä¸ç„¶ä¼šå¯¼è‡´æ•°æ®ä¸¢å¤± 12volumes: - ./giteadata:/data gitea 1.19.3æ”¯æŒä½œä¸ºåŒ…ç®¡ç†ä»“åº“ gitea packages æ”¯æŒç±»ä¼¼äº github çš„ action gitea actions ç®€å•çš„åº”ç”¨ä¸‹è½½å¯¹åº”çš„ act_runnerï¼Œåœ°å€ act_runner download æ³¨å†Œå¹¶å¯åŠ¨ 123./act_runner register --no-interactive --instance &lt;instance&gt; --token &lt;token&gt;./act_runner daemon åˆ›å»ºä¸€ä¸ª Spring demo é¡¹ç›®ï¼Œåœ¨é¡¹ç›®ä¸­æ–°å»º gitea/workflows/deploy.yml 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475name: Gitea Maven Demorun-name: ${{ gitea.actor }} ğŸš€on: [push]jobs: Explore-Gitea-Actions: runs-on: ubuntu-latest container: # å¸¦æœ‰ docker ç¯å¢ƒçš„å®¹å™¨ image: catthehacker/ubuntu:act-latest # æŒä¹…åŒ–å·¥å…·ç›®å½• volumes: - ubuntu_hostedtoolcache:/opt/hostedtoolcache steps: - uses: actions/checkout@v3 # ä¸‹è½½ java JDK 8 - run: | download_url=&quot;http://192.168.0.35:5244/d/mac/OpenJDK8U-jdk_x64_linux_hotspot_8u372b07.tar.gz&quot; wget -O $RUNNER_TEMP/java_package.tar.gz $download_url # è®¾ç½® java ç¯å¢ƒ - name: Set up JDK 8 uses: actions/setup-java@v3 with: java-version: '8' distribution: 'jdkfile' jdkFile: ${{ runner.temp }}/java_package.tar.gz cache: 'maven' # é…ç½® maven - name: Set up Maven uses: http://192.168.0.36:8030/actions/setup-maven@v4.7 with: maven-version: 3.8.2 - name: maven-settings-xml-action uses: http://192.168.0.36:8030/actions/maven-settings-xml-action@v20 with: repositories: | [ { &quot;id&quot;: &quot;aliyunpublic&quot;, &quot;name&quot;: &quot;aliyun Public&quot;, &quot;url&quot;: &quot;https://maven.aliyun.com/repository/public&quot;, &quot;releases&quot;: { &quot;enabled&quot;: &quot;true&quot; }, &quot;snapshots&quot;: { &quot;enabled&quot;: &quot;true&quot; } } ] mirrors: &gt; [ { &quot;id&quot;: &quot;aliyunpublic&quot;, &quot;mirrorOf&quot;: &quot;*&quot;, &quot;url&quot;: &quot;https://maven.aliyun.com/repository/public&quot; } ] # mvn build - name: Build with Maven run: mvn clean package # gitea docker registry login - name: Login to GitHub Container Registry uses: docker/login-action@v2 with: registry: 192.168.0.36:8030 username: xiusl password: ${{ security.REGISTRY_PWD }} # docker build and push - name: Build docker run: | docker build -t 192.168.0.36:8030/xiusl/demo:latest . docker push 192.168.0.36:8030/xiusl/demo:latest âš ï¸ æœ¬åœ°çš„ docker registry æ²¡æœ‰ httpsï¼Œå› æ­¤åœ¨ docker çš„ daemon.json ä¸­éœ€è¦å¢åŠ ä¿¡ä»» 12345{&quot;insecure-registries&quot;: [ &quot;192.168.0.36:8030&quot; ]}","link":"/2023/05/15/230516-gitea-use/"},{"title":"git çš„ä½¿ç”¨","text":"è®°å½• git çš„ä¸€äº›ä½¿ç”¨æ–¹æ³• æäº¤éƒ¨åˆ†æ–‡ä»¶1234567891011# æ·»åŠ éœ€è¦æäº¤çš„æ–‡ä»¶git add dir/file# å¿½ç•¥å…¶ä»–æ–‡ä»¶git stash -u -k# æäº¤ä¿¡æ¯git commit -m &quot;xxxxx&quot;# æ¢å¤git stash pop git stash çš„ä½¿ç”¨ 1234567891011121314151617181920212223# ä¿å­˜è‰ç¨¿å¹¶æ·»åŠ å¤‡æ³¨ï¼Œæœ‰äº†å¤‡æ³¨å¯ä»¥æ–¹ä¾¿æŸ¥æ‰¾git stash save &quot;message&quot;# æŸ¥çœ‹å·²ç»ä¿å­˜çš„è‰ç¨¿git stash list# æŸ¥çœ‹è‰ç¨¿çš„æ”¹åŠ¨git stash show# æŸ¥çœ‹ç¬¬ n ä¸ªè‰ç¨¿git stash show stash@{n}# åº”ç”¨æŸä¸ªè‰ç¨¿ï¼Œä¸ä¼šåœ¨è‰ç¨¿åˆ—è¡¨åˆ é™¤ï¼Œé»˜è®¤æ˜¯ç¬¬ä¸€ä¸ªï¼Œä½¿ç”¨ stash@{n} æ¥æŒ‡å®šç¬¬å‡ ä¸ªgit stash apply# åº”ç”¨æŸä¸ªè‰ç¨¿ï¼Œå¹¶åœ¨è‰ç¨¿åˆ—è¡¨åˆ é™¤ï¼Œé»˜è®¤æ˜¯ç¬¬ä¸€ä¸ªï¼Œä½¿ç”¨ stash@{n} æ¥æŒ‡å®šç¬¬å‡ ä¸ªgit stash pop # åˆ é™¤æŸä¸ªè‰ç¨¿git stash drop stash@{n} # æ¸…ç†æ‰€æœ‰è‰ç¨¿git stash clear","link":"/2023/05/17/230517-gituse/"},{"title":"éƒ¨ç½²è‡ªå·±çš„ sentry æœåŠ¡","text":"è‡ªå»º sentry æœåŠ¡ï¼Œä½œä¸ºé”™è¯¯ä¿¡æ¯ç›‘æ§ã€‚é‡‡ç”¨çš„æ˜¯æ—§çš„ 9.1.2 ç‰ˆæœ¬ï¼Œå¦‚éœ€æœ€æ–°ç‰ˆæœ¬ï¼Œå‚è€ƒå®˜æ–¹æ–‡æ¡£ã€‚ æ¨èåœ¨ Debain ç³»ç»Ÿä¸Šè¿›è¡Œéƒ¨ç½²ï¼Œä¹‹å‰ä½¿ç”¨äº† REHL ç³»åˆ—çš„ç³»ç»Ÿï¼Œself-hosted-912-web æœåŠ¡ä¼šåˆ†é…å’Œå ç”¨å¾ˆå¤§çš„å†…å­˜ï¼Œå…·ä½“ä»€ä¹ˆåŸå› è¿˜ä¸æ¸…æ¥šã€‚ ä¸»æœºä¸Šéœ€è¦å®‰è£…å¥½ docker æœåŠ¡ åœ¨ github ä¸Šä¸‹è½½å®˜æ–¹æä¾›çš„éƒ¨ç½²è„šæœ¬ï¼ˆé™„ï¼šä¸‹è½½åœ°å€ï¼‰ï¼Œè§£å‹æ–‡ä»¶ã€‚ ç”±äºç›®å‰å®‰è£…çš„ docker compose æ˜¯æœ€æ–°çš„ç‰ˆæœ¬ï¼Œéœ€è¦ä¿®æ”¹ install.sh ä¸­çš„éƒ¨åˆ†ä»£ç ï¼Œä¸»è¦æ˜¯æ›¿æ¢ docker-compose ä¸º docker composeï¼Œå®Œæˆä»£ç å‚è€ƒ install.sh 12345678# line 24: get docker compose versionCOMPOSE_VERSION=$(docker compose version --short || echo '')# line 68: docker-compose to docker composeSECRET_KEY=$(docker compose run --rm web config generate-secret-key 2&gt; /dev/null | tail -n1 | sed -e 's/[\\/&amp;]/\\\\&amp;/g')# line 75, 83: docker-compose to docker compose# ... æ‰§è¡Œä¿®æ”¹åçš„ install.sh è„šæœ¬ 1./install.sh è„šæœ¬æ‰§è¡Œè¿‡ç¨‹ä¸­ä¼šæç¤ºæ˜¯å¦åˆ›å»º sentry è´¦å·ï¼Œå¯ä»¥é€‰æ‹©åœ¨è¿™ä¸ªåœ°æ–¹åˆ›å»º è„šæœ¬æ‰§è¡Œå®Œæˆåï¼Œå¯åŠ¨æœåŠ¡ 1docker compose up -d æŸ¥è¯¢æœåŠ¡çŠ¶æ€ï¼Œæ­£å¸¸ä¼šæœ‰ä»¥ä¸‹ 7 ä¸ªæœåŠ¡è¿è¡Œ 12345678CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES9b1e803d7dcf self-hosted-912-worker &quot;/entrypoint.sh run â€¦&quot; 15 hours ago Up 15 hours 9000/tcp self-hosted-912-worker-16b4977a45949 self-hosted-912-web &quot;/entrypoint.sh run â€¦&quot; 15 hours ago Up 15 hours 0.0.0.0:9000-&gt;9000/tcp, :::9000-&gt;9000/tcp self-hosted-912-web-1199f1760fc26 self-hosted-912-cron &quot;/entrypoint.sh run â€¦&quot; 15 hours ago Up 15 hours 9000/tcp self-hosted-912-cron-11d2cf8c084ce postgres:9.5 &quot;docker-entrypoint.sâ€¦&quot; 15 hours ago Up 15 hours 5432/tcp self-hosted-912-postgres-1b0d87c431e33 memcached:1.5-alpine &quot;docker-entrypoint.sâ€¦&quot; 15 hours ago Up 15 hours 11211/tcp self-hosted-912-memcached-10b0077bfe895 redis:3.2-alpine &quot;docker-entrypoint.sâ€¦&quot; 15 hours ago Up 15 hours 6379/tcp self-hosted-912-redis-10e90ca779b36 tianon/exim4 &quot;docker-entrypoint.sâ€¦&quot; 15 hours ago Up 15 hours 25/tcp self-hosted-912-smtp-1 é€šè¿‡ç½‘é¡µæ‰“å¼€ http://your-host-ip:9000 ç™»å½•åˆ›å»ºå¥½çš„è´¦å·å°±å¯ä»¥ä½¿ç”¨äº† å¯ä»¥åœ¨å‰é¢åŠ ä¸€å±‚ nginx ä»£ç†ï¼Œå®ç°è‡ªå®šä¹‰åŸŸåå’Œ https è®¿é—® 12345678910111213141516171819202122server{ listen 80; listen 443 ssl; server_name sentry.you-domain.com; ssl_certificate cert/you-domain.crt; ssl_certificate_key cert/you-domain.key; ssl_session_cache shared:SSL:1m; ssl_session_timeout 5m; ssl_ciphers HIGH:!aNULL:!MD5; ssl_prefer_server_ciphers on; location / { proxy_set_header X-Forwarded-Host $host; proxy_set_header X-Forwarded-Server $host; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header X-Real-IP $remote_addr; proxy_set_header Host $host; proxy_pass http://127.0.0.1:9000; }} linux å¢åŠ  swap ç©ºé—´ 1234567891011121314# åˆ†é…ç©ºé—´fallocate -l 8G /swapspace# å¢åŠ æƒé™chmod 600 /swapspace# æ ¼å¼åŒ–æ–‡ä»¶mkswap /swapspace# å¯ç”¨äº¤æ¢ç©ºé—´swapon /swapspace# å¼€å¯è‡ªåŠ¨å¯åŠ¨echo &quot;/swapspace swap swap defaults 0 0&quot; | tee -a /etc/fstab# æ£€æŸ¥æ˜¯å¦ç”Ÿæ•ˆswapon --showfree -h","link":"/2023/07/01/230701-self-host-sentry/"},{"title":"be-hacker","text":"è¯»äº†ä¸€ç‰‡å¦‚ä½•æˆä¸ºä¸€åé»‘å®¢çš„æ–‡ç« ï¼Œè§‰å¾—å¯¹æŠ€æœ¯å­¦ä¹ ç”¨å¸®åŠ©ï¼ŒæŠŠä¸€äº›å†…å®¹æ‘˜å½•åœ¨è¿™é‡Œã€‚åŸæ–‡è¯‘æ–‡åœ¨ä¸‹é¢çš„é“¾æ¥ã€‚ å¦‚ä½•æˆä¸ºä¸€åé»‘å®¢ ä½ å¿…é¡»å»ºç«‹å¯¹äºè‡ªå·±å­¦ä¹ èƒ½åŠ›çš„ä¿¡å¿µâ€”â€”å°±ç®—ä½ æŒæ¡çš„çŸ¥è¯†ä¸è¶³ä»¥è§£å†³å½“å‰çš„é—®é¢˜ï¼Œå¦‚æœä½ ä»é—®é¢˜çš„ä¸€å°éƒ¨åˆ†ä¸‹æ‰‹å¹¶ä»ä¸­å­¦ä¹ ï¼Œä½ å°†å­¦åˆ°è¶³å¤Ÿçš„çŸ¥è¯†ç”¨æ¥è§£å†³ä¸‹ä¸€éƒ¨åˆ†â€”â€”ä»¥æ­¤ç±»æ¨ï¼Œç›´åˆ°æ•´ä¸ªé—®é¢˜éƒ½è¢«ä½ è§£å†³ä¸ºæ­¢ã€‚ å­¦ä¹ ç¼–ç¨‹å°±è±¡å­¦ä¹ è‡ªç„¶è¯­è¨€å†™ä½œä¸€æ ·ã€‚æœ€å¥½çš„åšæ³•æ˜¯è¯»ä¸€äº›å¤§å¸ˆçš„åè‘—ï¼Œè¯•ç€è‡ªå·±å†™ç‚¹ä¸œè¥¿ï¼Œå†è¯»äº›ï¼Œå†å†™ç‚¹ï¼Œå†è¯»äº›ï¼Œå†å†™ç‚¹â€¦â€¦å¦‚æ­¤å¾€å¤ï¼Œç›´åˆ°ä½ çš„æ–‡ç« å…·å¤‡èŒƒæ–‡çš„åŠ›é‡å’Œæ„Ÿè§‰ä¸ºæ­¢ã€‚ é»‘å®¢çš„åŸºæœ¬æŠ€èƒ½ å­¦ä¹ å¦‚ä½•ç¼–ç¨‹ã€‚ å­¦ä¹ ä½¿ç”¨å¼€æº Unix ç³»ç»Ÿã€‚ å­¦ä¼šä½¿ç”¨ä¸‡ç»´ç½‘ä»¥åŠç¼–å†™ HTMLã€‚ å­¦ä¹ è‹±è¯­ï¼Œå¦‚æœä½ çš„æ°´å¹³ä¸å¤Ÿç”¨çš„è¯ã€‚ TODO å­¦ä¼šç”¨æ¯è¯­æµç•…åœ°å†™ä½œã€‚å°½ç®¡å¾ˆå¤šäººè®¤ä¸ºç¨‹åºå‘˜å†™ä¸å‡ºå¥½æ–‡ç« ï¼Œä½†æ˜¯æœ‰ç›¸å½“æ•°é‡çš„é»‘å®¢ï¼ˆåŒ…æ‹¬æ‰€æœ‰æˆ‘çŸ¥é“çš„æœ€æ£’çš„é»‘å®¢ï¼‰éƒ½æ˜¯å¾ˆæœ‰èƒ½åŠ›çš„å†™æ‰‹ã€‚ é˜…è¯»ç§‘å¹»å°è¯´ã€‚å‚åŠ ç§‘å¹»å°è¯´è®¨è®ºä¼šã€‚ï¼ˆè¿™æ˜¯ä¸€ä¸ªè®¤è¯†é»‘å®¢å’Œå‡†é»‘å®¢çš„å¥½æ–¹æ³•ï¼‰ å­¦ä¹ ä¸€ç§æ­¦æœ¯ã€‚æ­¦æœ¯ä¸­éœ€è¦çš„ç²¾ç¥è‡ªå¾‹èƒ½åŠ›å’Œé»‘å®¢åœ¨è¿™æ–¹é¢çš„éœ€æ±‚éå¸¸ç›¸ä¼¼ã€‚é»‘ä¸­æœ€å—æ¬¢è¿çš„æ­¦æœ¯æ˜¯æ¥è‡ªäºšæ´²çš„ç©ºæ‰‹æ ¼æ–—ç±»æ­¦æœ¯ï¼Œä¾‹å¦‚è·†æ‹³é“ã€ç©ºæ‰‹é“ã€æ­¦æœ¯ã€åˆæ°”é“ã€æŸ”æœ¯ç­‰ã€‚è¥¿å¼å‡»å‰‘å’Œäºšæ´²å‰‘æœ¯ä¹Ÿæœ‰ä¸å°‘çš„è·Ÿéšè€…ã€‚1990 å¹´åæœŸä»¥æ¥ï¼Œåœ¨å¯ä»¥åˆæ³•ä½¿ç”¨æªæ”¯çš„åœ°æ–¹ï¼Œå°„å‡»å—æ¬¢è¿çš„ç¨‹åº¦ä¹Ÿè¶Šæ¥è¶Šé«˜äº†ã€‚å¤§éƒ¨åˆ†é»‘å®¢å–œæ¬¢çš„æ­¦æœ¯ç±»å‹éƒ½æ˜¯é‚£äº›å¼ºè°ƒç²¾ç¥çš„è‡ªå¾‹ï¼Œæ”¾æ¾çš„æ„è¯†ï¼Œä»¥åŠæ„å¿µçš„æ§åˆ¶ï¼Œè€Œä¸ä»…ä»…æ˜¯å•çº¯çš„åŠ›é‡ã€è¿åŠ¨ç²¾ç¥ã€ä»¥åŠèº«ä½“çš„å¼ºå¥ã€‚ å®å®åœ¨åœ¨å­¦ä¹ ä¸€ç§å†¥æƒ³ä¿®ç‚¼ã€‚å¤šå¹´ä»¥æ¥é»‘å®¢ä¸­æœ€å—æ¬¢è¿çš„å½¢å¼æ˜¯å‚ç¦…ã€‚ï¼ˆå¾ˆé‡è¦çš„ä¸€ç‚¹æ˜¯ï¼Œå‚ç¦…å’Œå®—æ•™å¯ä»¥è¯´æ˜¯ç‹¬ç«‹çš„ï¼Œä½ ä¸éœ€è¦æ¥å—ä¸€ç§æ–°å®—æ•™ï¼Œæˆ–è€…æ”¾å¼ƒç°æœ‰çš„å®—æ•™ä¿¡ä»°ï¼Œå°±èƒ½åšå‚ç¦…çš„ä¿®ç‚¼ã€‚å…¶ä»–çš„å½¢å¼ä¹Ÿè®¸ä¹Ÿç®¡ç”¨ï¼Œä½†æ³¨æ„ä¸€å®šè¦æŒ‘é‚£äº›é è°±çš„ï¼Œä¸éœ€è¦ä½ ç›¸ä¿¡ä¸ç€è¾¹é™…çš„äº‹ç‰©çš„å†¥æƒ³æ–¹å¼æ¥æ¼”ç»ƒã€‚ æé«˜è‡ªå·±å¯¹åŒå…³è¯­å’Œæ–‡å­—æ¸¸æˆçš„é‰´èµèƒ½åŠ›ã€‚ NOTDO ä¸è¦ä½¿ç”¨æ„šè ¢çš„ï¼Œå“—ä¼—å–å® çš„IDæˆ–æ˜µç§°ã€‚ ä¸è¦å·å…¥ Usenetï¼ˆæˆ–ä»»ä½•å…¶ä»–åœ°æ–¹ï¼‰çš„éª‚æˆ˜ã€‚ ä¸è¦è‡ªç§°ä¸ºâ€œcyberpunkï¼ˆç½‘ç»œæœ‹å…‹ï¼‰â€ï¼Œä¹Ÿä¸è¦æµªè´¹æ—¶é—´å’Œé‚£äº›äººæ‰“äº¤é“ã€‚ ä¸è¦è®©ä½ çš„ email æˆ–è€…å¸–å­ä¸­å……æ»¡é”™è¯¯çš„æ‹¼å†™å’Œè¯­æ³•ã€‚ Pythonï¼ŒJavaï¼ŒC/C++ï¼ŒPerl å’Œ LISP Unix think: è®²åˆ°çš„ä¸€äº›ä¸œè¥¿å¹¶ä¸å±€é™äºå¦‚ä½•æˆä¸ºé»‘å®¢ã€‚","link":"/2017/06/28/be-hacker/"},{"title":"block &amp; delegate &amp; notification ç‰¹ç‚¹å’ŒåŒºåˆ«","text":"iOS ä¸­ä¸‰ç§å›è°ƒçš„ç‰¹ç‚¹ã€åŒºåˆ«å’Œä½¿ç”¨åœºæ™¯çš„æ€»ç»“ã€‚ ç‰¹ç‚¹å’ŒåŒºåˆ« block ç®€å•æ˜“ç”¨ï¼Œå¯ä»¥ç›´æ¥è®¿é—®ä¸Šä¸‹æ–‡çš„å˜é‡ï¼Œä¸éœ€è¦é¢å¤–å­˜å‚¨ä¸´æ—¶å˜é‡ï¼Œä»£ç é˜…è¯»è¿ç»­ã€‚ delegate æ¯”è¾ƒå¤æ‚ï¼Œéœ€è¦å£°æ˜å’Œå®ç°æ¥å£ï¼Œè€Œä¸”ä¸¤è€…ä¸åœ¨åŒä¸€æ–‡ä»¶ä¸­ï¼Œéœ€è¦è·³è½¬æ–‡ä»¶ï¼Œè¿˜å¯èƒ½éœ€è¦å­˜å‚¨ä¸´æ—¶å˜é‡ã€‚ notification è¾ƒä¸ºå¤æ‚ï¼Œéœ€è¦å®šä¹‰é€šçŸ¥ç±»å‹ï¼ŒåŒæ ·é€šçŸ¥çš„å‘é€å’Œæ¥æ”¶ä¸åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ã€‚ é—®é¢˜ block è™½ç„¶ç®€å•ï¼Œä½†ä¼šå­˜åœ¨å¾ªç¯å¼•ç”¨çš„é—®é¢˜ã€‚ delegate éœ€è¦å¯¹æ–¹æ³•è¿›è¡Œæ£€éªŒ respondsToSelector:ã€‚ notification éœ€è¦æ³¨æ„ä»–çš„å¤šå¯¹å¤šç‰¹æ€§ï¼Œé€šçŸ¥çš„ç§»é™¤ï¼ˆiOS 9 ä¹‹åä¸éœ€è¦ï¼Ÿï¼‰ã€‚ delegate çš„è¿è¡Œæˆæœ¬ä½ï¼Œblock çš„è¿è¡Œæˆæœ¬é«˜ï¼Œblock åœ¨å‡ºæ ˆçš„æ—¶å€™éœ€è¦å°†ä½¿ç”¨çš„æ•°æ®ä»æ ˆåŒºæ‹·è´åˆ°å †åŒºï¼Œè€Œ delegate åªæ˜¯ä¿å­˜ä¸€ä¸ªæŒ‡é’ˆè€Œå·²ã€‚ åœºæ™¯ å½“åªæœ‰1ã€2ä¸ªå›è°ƒæ—¶ä½¿ç”¨ blockï¼Œ3ä¸ªä»¥ä¸Šçš„è¯ä½¿ç”¨ delegateã€‚ é¿å…å¾ªç¯å¼•ç”¨çš„æ—¶å€™ä½¿ç”¨ delegateã€‚ æ ¹æ®å›è°ƒçš„æ€§è´¨æ¥é€‰æ‹© å›è°ƒä¸å®šæœŸè§¦å‘ï¼Œæˆ–è€…ä¼šå¤šæ¬¡è§¦å‘ï¼Œdelegate æ›´åŠ åˆé€‚ã€‚ å›è°ƒæ˜¯ä¸€æ¬¡æ€§çš„ï¼Œå•çº¿æ€§ï¼ˆä¸€å¯¹ä¸€è¿™ç§ï¼‰çš„å…³ç³»ï¼Œblock æ›´åŠ åˆé€‚ã€‚ å›è°ƒæ˜¯å¹¿æ’­æ€§è´¨çš„ï¼Œéœ€è¦å¤šä¸ªç±»åŒæ—¶æ”¶åˆ°ï¼Œnotification æ›´åŠ åˆé€‚ã€‚ æ€»ç»“ é€šè¿‡ä¸åŒæ‰§è¡Œçº¿ï¼ˆä¸€å¯¹ä¸€ï¼Œä¸€å¯¹å¤šï¼‰ã€ä¸åŒçš„æ‰§è¡Œæ¬¡æ•°ã€ä¸åŒçš„æ‰§è¡Œæ•°é‡æ¥åˆ¤æ–­ä½¿ç”¨å“ªä¸€ç§å›è°ƒã€‚ å‚è€ƒ https://www.zhihu.com/question/29023547https://blog.csdn.net/u010670946/article/details/71340711","link":"/2019/04/02/block-delegate-notification/"},{"title":"centos-flask-nginx","text":"åœ¨ centos7 ä¸Šä½¿ç”¨ nginx + uwsgi éƒ¨ç½² flask åº”ç”¨ å®‰è£… zsh å’Œ ohmyzsh 12yum install -y zshsh -c &quot;$(curl -fsSL https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh)&quot; å®‰è£…ä¸€äº›éœ€è¦çš„åº“ 123yum groupinstall -y &quot;Development tools&quot;yum install -y zlib-devel bzip2-devel pcre-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel libffi-devel å®‰è£… Python3ï¼Œè¿™é‡Œç¼–è¯‘å®‰è£…ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ yum æ¥å®‰è£… 1234567891011wget http://python.org/ftp/python/3.7.1/Python-3.7.1.tar.xzxz -d Python3.7.1.tar.xztar -xvf Python3.7.1.tarcd Python3.7.1./configure --prefix=/usr/localmake &amp;&amp; make install å»ºç«‹è½¯è¿æ¥ 123ln -s /usr/local/bin/python3 /usr/bin/python# ln: æ— æ³•åˆ›å»ºç¬¦å·é“¾æ¥&quot;/usr/bin/python&quot;: æ–‡ä»¶å·²å­˜åœ¨# rm /usr/bin/python ä¿®å¤ yumã€firewall-cmd ç­‰ 123456vim /usr/bin/yum#! /usr/bin/python =&gt; /usr/bin/python2vim /usr/libexec/urlgrabber-ext-down#! /usr/bin/python =&gt; /usr/bin/python2vim vim /usr/bin/firewall-cmd#!/usr/bin/python -Es =&gt; #!/usr/bin/python2 -Es å®‰è£… uwsgi 1pip3 install uwsgi å®‰è£… Python è™šæ‹Ÿç¯å¢ƒ virtualenv 1pip3 install virtualenv æ ¹ç›®å½•ä¸‹åˆ›å»ºå·¥ä½œæ–‡ä»¶å¤¹ï¼Œè™šæ‹Ÿç¯å¢ƒ 12345cd /mkdir projectcd projectvirtualenv env --python=/youpython3path/python3source env/bin/activate å®‰è£… flask 12echo flask &gt; requirements.txtpip install -r requirements.txt åˆ›å»ºä¸€ä¸ªç®€å•flask åº”ç”¨ vim manage.py 1234567from flask import Flaskapp = Flask(__name__)@app.route(&quot;/&quot;)def index(): return &quot;Hello&quot; åˆ›å»º uwsgi é…ç½®æ–‡ä»¶ uwsgi.ini 123456789101112131415161718[uwsgi]socket = 127.0.0.1:9090master = truevhost = trueno-stie = trueworkers = 2reload-mercy = 10vacuum = truemax-requests = 1000limit-as = 2048buffer-size = 30000daemonize = /var/log/uwsgi.logchdir = /projectvirtualenv = /project/envwsgi-file = manage.pycallable = apppidfile = /run/uwsgi.pid å®‰è£… nginx 1yum install -y nginx ä¿®æ”¹ nginx é…ç½® vim /etc/nginx/nginx.conf 12345678910111213141516171819202122server { listen 80 default_server; listen [::]:80 default_server; server_name _;# root /usr/share/nginx/html; # Load configuration files for the default server block. include /etc/nginx/default.d/*.conf; location / { uwsgi_pass 127.0.0.1:9090; include uwsgi_params; }# error_page 404 /404.html;# location = /40x.html {# }# error_page 500 502 503 504 /50x.html;# location = /50x.html {# }} æµ‹è¯• nginx é…ç½®æ˜¯å¦æ­£ç¡® nginx -t 12nginx: the configuration file /etc/nginx/nginx.conf syntax is oknginx: configuration file /etc/nginx/nginx.conf test is successful nginx ä¸€äº›æ“ä½œ 12nginxnginx -s reload å¼€å¯ uwsgi 1uwsgi -i /etc/uwsgi.ini é‡å¯ uwsgi 1uwsgi --reload run/uwsgi.pid","link":"/2019/01/21/centos-flask-nginx/"},{"title":"datastruct-pycook","text":"python cookbook datastruct è§£å‹åºåˆ—èµ‹å€¼ç»™å¤šä¸ªå˜é‡ å˜é‡çš„ä¸ªæ•°å’Œåºåˆ—å…ƒç´ çš„ä¸ªæ•°ä¸åŒ¹é… åªè§£å‹ä¸€éƒ¨åˆ†1234data = [&quot;abc&quot;, 10, 22.1, (2018, 12, 12)]_, shares, prices, _= dataprint(shares) # 10print(prices) # 22.1 è§£å‹å¯è¿­ä»£å¯¹è±¡èµ‹å€¼ç»™å¤šä¸ªå˜é‡ æ˜Ÿå·(*)è¡¨è¾¾å¼12345record = ('Dave', 'dave@example.com', '213-123-1421', '312-423-1511')name, email, *phone_numbers = recordprint(name) # Daveprint(email) # deve@example.comprint(phone_numbers) # ['213-123-1421', '312-423-1511'] æ˜Ÿå·è¡¨è¾¾å¼è§£å‹å‡ºæ¥çš„æ°¸è¿œæ˜¯åˆ—è¡¨ç±»å‹ è¿­ä»£å…ƒç´ ä¸ºå¯å˜é•¿å…ƒç»„çš„åºåˆ—1234567891011121314151617records = [ ('foo', 1, 2), ('bar', 'hello'), ('foo', 3, 5)]def do_foo(x, y): return x+ydef do_bar(str): print(str)for tag, *args in records: if tag == 'foo': do_foo(*args) elif tag == 'bar': do_bar(*args) æ˜Ÿå·è¡¨è¾¾å¼æ“ä½œå­—ç¬¦chuan12345line = 'nobody:*:-2:-2:Unprivileged User:/var/empty:/usr/bin/false'uname, *fields, homedir, sh = line.split(':')print(uname) # 'nobody'print(homedir) # '/var/empty'print(sh) # '/usr/bin/false' è§£å‹å¹¶ä¸¢å¼ƒä¸€äº›å…ƒç´ ï¼Œ _ or ign(ignore)1234record = ('abc', 12, 23.1, (12, 12, 2018))name, *_, (*_, year) = recordprint(name) # 'abc'print(year) # 2012 ä¿ç•™æœ€å N ä¸ªå…ƒç´  ä¿ç•™æœ‰é™å†å²è®°å½• collections.deque12345678910111213141516from collections import dequedef search(lines, pattern, history=5): previous_lines = deque(maxlen=history) for line in lines: if pattern in line: yield line, previous_lines previous_lines.append(line)if __name__ == '__main__': with open(r'../../cookbook/somefile.txt') as f: for line, prevlines in search(f, 'python', 5): for pline in prevlines: print(pline, end='') print(line, end='') print('-' * 20) deque(maxlen=N) ä¼šåˆ›å»ºä¸€ä¸ªå›ºå®šå¤§å°çš„é˜Ÿåˆ—ï¼Œå½“æ–°çš„å…ƒç´ åŠ å…¥å¹¶ä¸”é˜Ÿåˆ—å·²æ»¡çš„æ—¶å€™ï¼Œæœ€è€çš„å…ƒç´ ä¼šè‡ªåŠ¨è¢«ç§»é™¤1234567q = deque(maxlen=3)q.append(1)q.append(2)q.append(3)print(q) # deque([1, 2, 3], maxlen=3)q.append(4)print(q) # deque([2, 3, 4], maxlen=4) deque() ä¸è®¾ç½®æœ€å¤§é•¿åº¦ï¼Œå°†ä¼šåˆ›å»ºä¸€ä¸ªæ— é™å¤§å°é˜Ÿåˆ—ï¼Œå¯ä»¥åœ¨ä¸¤ç«¯å¢åˆ å…ƒç´ 1234567891011q = deque()q.append(1)q.append(2)q.append(3)print(q) # deque([1, 2, 3])q.appendleft(4)print(q) # deque([4, 1, 2, 3])q.pop()print(q) # deque([4, 1, 2])q.popleft()print(q) # deque([1, 2]) æŸ¥æ‰¾æœ€å¤§æˆ–æœ€å°çš„ N ä¸ªå…ƒç´  heapq æ¨¡å—çš„ nlargest() å’Œ nsmallest() ä¸¤ä¸ªå‡½æ•° å‡½æ•°å¯ä»¥æ¥å—ä¸€ä¸ªå…³é”®å­—å‚æ•°ï¼Œç”¨äºå¤æ‚çš„æ•°æ®ç»“æ„12345678910111213141516import heapqnums = [1, 8, 3, 23, 4, -1, 12, 34, 54, 3]print(heapq.nlargest(3, nums)) # [54, 34, 23]print(heapq.nsmallest(3, nums)) # [-1, 1, 3]portfolio = [ {'name': 'IBM', 'shares': 100, 'price': 91.1}, {'name': 'AAPL', 'shares': 50, 'price': 543.22}, {'name': 'FB', 'shares': 200, 'price': 21.09}, {'name': 'HPQ', 'shares': 35, 'price': 31.75}, {'name': 'YHOO', 'shares': 45, 'price': 16.35}, {'name': 'ACME', 'shares': 75, 'price': 115.69}]cheap = heapq.nsmallest(3, portfolio, key=lambda s: s['price'])expensive = heapq.nlargest(3, portfolio, key=lambda s: s['price']) å‡½æ•°çš„åº•å±‚å®ç°æ˜¯å°†é›†åˆè¿›è¡Œå †æ’åºå†æ”¾å…¥åˆ—è¡¨ä¸­ å †æ’åºçš„ç‰¹å¾æ˜¯ heap[0] å§‹ç»ˆæ˜¯æœ€å°çš„å…ƒç´  â€¦ æŸ¥æ‰¾å…ƒç´ ä¸ªæ•°ç›¸å¯¹æ¯”è¾ƒå°‘çš„æ—¶å€™ï¼Œå‡½æ•° nlargest() å’Œ nsmallest() æ˜¯å¾ˆåˆé€‚çš„ å¦‚æœä½ ä»…ä»…æŸ¥æ‰¾å”¯ä¸€çš„æœ€å°æˆ–æœ€å¤§çš„å…ƒç´ çš„è¯ï¼Œä½¿ç”¨ min() å’Œ max() ä¼šæ›´å¿«ä¸€äº› å¦‚æœæŸ¥æ‰¾å…ƒç´ çš„ä¸ªæ•°å’Œé›†åˆçš„å¤§å°æ¥è¿‘çš„è¯ï¼Œé€šå¸¸å…ˆæ’åºè¿™ä¸ªé›†åˆç„¶ååœ¨ä½¿ç”¨åˆ‡ç‰‡æ“ä½œä¼šæ›´å¿« å®ç°ä¼˜å…ˆçº§é˜Ÿåˆ— ä½¿ç”¨ heapq å®ç°ç®€å•çš„ä¼˜å…ˆçº§é˜Ÿåˆ—123456789101112131415161718192021222324252627282930import heapqclass PriorityQueue: def __init__(self): self._queue = [] self._index = 0 def push(self, item, priority): heapq.heappush(self._queue, (-priority, self._index, item)) self._index += 1 def pop(self): return heapq.heappop(self._queue)[-1]class Item: def __init__(self, name): self.name = name def __repr__(self): return 'Item({!r})'.format(self.name)q = PriorityQueue()q.push(Item('foo'), 1)q.push(Item('bar'), 5)q.push(Item('spam'), 4)q.push(Item('grok'), 1)print(q.pop())print(q.pop())print(q.pop())print(q.pop()) å­—å…¸æ’åº ä½¿ç”¨ collections æ¨¡å—ä¸­çš„ OrderedDict ç±»ï¼Œæ§åˆ¶ä¸€ä¸ªå­—å…¸ä¸­å…ƒç´ çš„é¡ºåº12345678910from collections import OrderedDictd = OrderedDict()d['foo'] = 1d['bar'] = 2d['spam'] = 3d['grok'] = 4for key in d: print(key, d[key]) å½“éœ€è¦åºåˆ—åŒ–æˆ–ç¼–ç æˆå…¶ä»–æ ¼å¼çš„æ˜ å°„çš„æ—¶å€™ï¼ŒOrderedDict æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚ä¾‹å¦‚ç²¾ç¡®æ§åˆ¶ JSON ç¼–ç åå­—æ®µçš„é¡ºåº12import jsonjson.dumps(d) OrderedDict çš„å†…éƒ¨ç»´æŠ¤ç€ä¸€ä¸ªå¾ˆå…·é”®æ’å…¥é¡ºåºæ’åºçš„åŒå‘é“¾è¡¨ã€‚æ¯æ¬¡ä¸€ä¸ªæ–°å…ƒç´ æ’å…¥çš„æ—¶å€™ï¼Œå®ƒä¼šæ”¾åˆ°é“¾è¡¨çš„å°¾éƒ¨ã€‚å¯¹ä¸€ä¸ªå·²ç»å­˜åœ¨çš„é”®çš„é‡å¤èµ‹å€¼ä¸ä¼šæ”¹å˜é”®çš„é¡ºåº ä¸€ä¸ª OrderedDict çš„å¤§å°æ˜¯ä¸€ä¸ªæ™®é€šå­—å…¸çš„ä¸¤å€ï¼Œå› ä¸ºå®ƒå†…éƒ¨ç»´æŠ¤è¿™å¦ä¸€ä¸ªé“¾è¡¨ï¼Œå½“åœ¨å¤„ç†å¤§é‡æ•°æ®çš„æ—¶å€™éœ€è¦è€ƒè™‘å†…å­˜æ¶ˆè€— å­—å…¸çš„è¿ç®— å­—å…¸ä¸­æ‰§è¡Œè¿ç®—æ“ä½œï¼Œæœ€å€¼ã€æ’åºç­‰ ä½¿ç”¨ zip() å‡½æ•°å°†é”®å’Œå€¼ç¿»è½¬123456789prices = { 'ACME': 45.23, 'AAPL': 612.78, 'IBM': 205.55, 'HPQ': 37.20, 'FB': 10.75}min_price = min(zip(prices.values(), prices.keys()))max_price = max(zip(prices.values(), prices.keys())) ç±»ä¼¼çš„å¯ä»¥ä½¿ç”¨ sorted() å‡½æ•°æ¥æ’åºå­—å…¸æ•°æ® éœ€è¦æ³¨æ„ zip() å‡½æ•°åˆ›å»ºçš„æ˜¯ä¸€ä¸ªåªèƒ½è®¿é—®ä¸€æ¬¡çš„è¿­ä»£å™¨123prices_and_names = zip(prices.values(), prices.keys())print(min(prices_and_name))print(max(Prices_and_name)) # ValueError max arg is an empty sequence åœ¨ä¸€ä¸ªå­—å…¸ä¸Šæ‰§è¡Œæ™®é€šçš„æ•°å­¦è¿ç®—ï¼Œåªä¼šä½œç”¨åœ¨é”®ä¸Š12min(prices) # 'AAPL'max(prices) # 'IBM' å½“è€ƒè™‘ä½¿ç”¨ values() æ–¹æ³•è§£å†³çš„æ—¶å€™ï¼Œæ— æ³•è·å–å¯¹åº”é”®çš„ä¿¡æ¯12min(prices.values()) # 10.75max(prices.values()) # 612.78 ä½¿ç”¨ min() å’Œ max() å‡½æ•°ä¸­çš„å‚æ•° key å¯ä»¥è·å–å¯¹åº”çš„é”®çš„ä¿¡æ¯ï¼Œä½†åˆæ— æ³•ä¸€æ¬¡æ€§è·å–å¯¹åº”å€¼å¾—ä¿¡æ¯1234min(prices, key=lambda k: prices[k]) # 'FB'max(prices, key=lambda k: prices[k]) # 'AAPL'min_value = prices[min(prices, key=lambda k: pirces[k])] åœ¨ä½¿ç”¨(å€¼,é”®)å¯¹çš„æ—¶ï¼Œå¤šä¸ªå®ä½“æ‹¥æœ‰ç›¸åŒå€¼å¾—æ—¶å€™ï¼Œé”®ä¼šå†³å®šè¿”å›ç»“æœ123prices = {'AAA': 45.23, 'ZZZ', 45.23}min(zip(prices.values(), prices.keys())) # (45.23, 'AAA')max(zip(prices.values(), prices.keys())) # (45.23, 'ZZZ') æŸ¥æ‰¾ä¸¤ä¸ªå­—å…¸çš„ç›¸åŒç‚¹ é€šè¿‡é›†åˆæ“ä½œæ¥è·å–å­—å…¸ç›¸åŒçš„é”®ã€ç›¸åŒçš„å€¼12345a = {'x': 1, 'y': 2, 'z': 3}b = {'w': 10, 'x': 11, 'y': 2}print(a.keys() &amp; b.keys()) # {'x', 'y'}print(a.keys() - b.keys()) # {'z'}print(a.items() &amp; b.items()) # {('y', 2)} ä¿®æ”¹æˆ–è¿‡æ»¤å­—å…¸å…ƒç´ 12c = { key:a[key] for key in a.keys() - {'z', 'w'}}print(c) # {'x': 1, 'y': 2} å­—å…¸çš„é”®å¯ä»¥ç›´æ¥æ‰§è¡Œé›†åˆçš„è¿ç®—æ“ä½œï¼Œä¸éœ€è¦è½¬æ¢ä¸º set å­—å…¸çš„å€¼æ˜¯ä¸æ”¯æŒç›´æ¥è¿›è¡Œé›†åˆæ“ä½œçš„ï¼Œéœ€è¦è½¬æ¢ä¸º set æ‰å¯ä»¥ åˆ é™¤åºåˆ—ç›¸åŒå…ƒç´ å¹¶ä¿æŒé¡ºåº åºåˆ—ä¸Šçš„å€¼éƒ½æ˜¯ hashable ç±»å‹ï¼Œå¯ä»¥ä½¿ç”¨é›†åˆæˆ–è€…ç”Ÿæˆå™¨æ¥è§£å†³123456789def dedupe(items): seen = set() for item in items: if item not in seen: yield item seen.add(item)a = [1, 5, 2, 1, 9, 1, 5, 10]print(list(dedupe(a)) # [1, 5, 2, 9, 10] å…ƒç´ ä¸å¯ä»¥å“ˆå¸Œæ—¶12345678910111213def dedupe(items, key=None): seen = set() for item in items: val = item if key is None else key(item) if val not in seen: yield item seen.add(val)a = [{'x': 1, 'y': 2}, {'x': 1, 'y': 3}, {'x': 1,'y': 2}, {'x': 2, 'y': 4}]print(list(dedupe(a, key=lambda d: (d['x'], d['y']))))# [{'x': 1, 'y': 2}, {'x': 1, 'y': 3}, {'x': 2, 'y': 4}]print(list(dedupe(a, key=lambda d: d['x'])))# [{'x': 1, 'y': 2}, {'x': 2, 'y': 4}] å‘½ååˆ‡ç‰‡ ç¡¬ç¼–ç åˆ‡ç‰‡ä¸‹æ ‡ï¼ˆå›ºå®šå­—ç¬¦ä¸²æå–æŒ‡å®šä½ç½®çš„å­—æ®µï¼‰123456record = '...............100.........513.25.........'cost = int(record[15:18]) * float(record[27:33])SHARES = slice(15, 18)PRICE = slice(27, 33)cost = int(record[SHARES]) * float(record[PRICE]) å†…ç½®çš„ slice() å‡½æ•°åˆ›å»ºä¸€ä¸ªåˆ‡ç‰‡å¯¹è±¡ï¼Œå¯ä»¥è¢«ç”¨åœ¨ä»»ä½•å…è®¸ä½¿ç”¨åˆ‡ç‰‡çš„åœ°æ–¹12345678items = [0, 1, 2, 3, 4, 5, 6]a = slice(2, 4)print(items[2:4]) # [2, 3]print(items[a]) # [2, 3]items[a] = [10, 11]print(items[a]) # [10, 11]del items[a]print(items) # [0, 1, 4, 5, 6] åˆ‡ç‰‡å¯¹è±¡çš„å±æ€§å¯ä»¥è·å–ç›¸åº”çš„ä¿¡æ¯1234a = slice(5, 50, 2)print(a.start) # 5print(a.stop) # 50print(a.step) # 2 åˆ‡ç‰‡å¯¹è±¡çš„ indices(size) æ–¹æ³•å¯ä»¥å°†å®ƒæ˜ å°„åˆ°ä¸€ä¸ªç¡®å®šå¤§å°çš„åºåˆ—ä¸Š1234567s = 'HelloWorld'print(a.indices(len(s))) # (5, 10, 2)for i in range(*a.indices(len(s))): print(s[i])# W# r# d","link":"/2019/01/12/datastruct-pycook/"},{"title":"å®å’Œå¸¸é‡ï¼ˆObjective-Cï¼‰","text":"å¯¹äºå®ã€å¸¸é‡ä½¿ç”¨çš„ä¸€äº›ç¬”è®° å® å®šä¹‰ 123#define å®å è¯­å¥#define PI 3.1415 åœ¨ç¨‹åºçš„é¢„å¤„ç†é˜¶æ®µï¼Œæ‰€æœ‰ä½¿ç”¨å®çš„åœ°æ–¹ï¼Œéƒ½ä¼šè¢«å®ååé¢çš„è¯­å¥æ›¿æ¢ å¤šè¡Œçš„æƒ…å†µä½¿ç”¨åæ–œçº¿\\é“¾æ¥ 12#define SOME &quot;too many \\chars&quot; å‘½åæ˜¯ä½¿ç”¨å¤§å†™å­—æ¯ å¸¦æœ‰å‚æ•°çš„å® 1#define ANHLE2RADIAN(a) (PI*(a)/108) å¯å˜å®...ã€__VA_ARGS__ 1#define LOG(x, ...) NSLog(x, ##__VA_ARGS__) æ‹¬å·() å¸¸é‡ ä½¿ç”¨ const ä¿®é¥° åªä¼šåˆ†é…ä¸€å—ç©ºé—´ ä¼šè¿›è¡Œç±»å‹æ£€æŸ¥ ä¸èƒ½å®šä¹‰æ–¹æ³• const ä½ç½®ï¼Œä¸€èˆ¬ä½¿ç”¨ç¬¬ä¸‰ç§æ–¹æ³•å®šä¹‰ 123456// *BaseUrl ä¸èƒ½ä¿®æ”¹ï¼ŒBaseUrl å¯ä»¥ä¿®æ”¹const NSString *BaseUrl = @&quot;http://api.someweb.com&quot;;// *BaseUrl ä¸èƒ½ä¿®æ”¹ï¼ŒBaseUrl å¯ä»¥ä¿®æ”¹NSString const *BaseUrl = @&quot;http://api.comeweb.com&quot;;// *BaseUrl å¯ä»¥ä¿®æ”¹ï¼ŒBaseUrl ä¸èƒ½ä¿®æ”¹NSString *const BaseUrl = @&quot;http://api.comeweb.com&quot;; åœ¨.hä¸­ä½¿ç”¨externæä¾›ç»™å¤–éƒ¨ä½¿ç”¨ æ¯”è¾ƒ å°½é‡å¤šä½¿ç”¨å¸¸é‡æ¥æ›¿æ¢å®å®šä¹‰ï¼Œåœ¨ä½¿ç”¨å®çš„æ—¶å€™æ€è€ƒæ˜¯å¦å¯ä»¥ä½¿ç”¨å¸¸é‡æ¥æ›¿æ¢ å®åœ¨é¢„å¤„ç†é˜¶æ®µä¼šè¿›è¡Œæ–‡æœ¬æ›¿æ¢ï¼Œåœ¨å®ä¿®æ”¹åä¼šé‡æ–°ç¼–è¯‘ï¼Œå½±å“ç¼–è¯‘é€Ÿåº¦ å¤§é‡çš„ä½¿ç”¨å®ä¼šå¢å¤§äºŒè¿›åˆ¶æ–‡ä»¶çš„å¤§å° å®å¯ä»¥å®šä¹‰ä¸€äº›æ–¹æ³• å®å¯ä»¥é‡å®šä¹‰ï¼ŒxCodeä¼šæç¤ºè­¦å‘Š","link":"/2018/08/15/define-const/"},{"title":"Xcode12 æ¨¡æ‹Ÿå™¨ç¼–è¯‘æŠ¥é”™","text":"é¡¹ç›®ä»£ç åœ¨ Xcode 12 ç‰ˆæœ¬æ¨¡æ‹Ÿå™¨ç¼–è¯‘æŠ¥é”™è®°å½• æŠ¥é”™ä¿¡æ¯No architectures to compile for (ONLY_ACTIVE_ARCH=YES, active arch=x86_64, VALID_ARCHS=armv7 armv7s arm64). åŸå› åˆ†æXcode 12 å»æ‰äº† Valid Architecturesï¼Œæ¨¡æ‹Ÿå™¨çš„æŒ‡ä»¤é›†ä¸º x86_64 è§£å†³æ–¹æ³•åœ¨ Build Setting -&gt; User-Defined -&gt; VALID_ARCHS å¢åŠ  x86_64 å…³äºæŒ‡ä»¤é›† 1234567891011arm64: iPhone6s, iphone6s plus, iPhone6, iPhone6 plus, iPhone5Sarmv7s: iPhone5, iPhone5Carmv7: iPhone4, iPhone4Si386 æ˜¯é’ˆå¯¹ intel é€šç”¨å¾®å¤„ç†å™¨32ä½å¤„ç†å™¨x86_64 æ˜¯é’ˆå¯¹ x86 æ¶æ„çš„64ä½å¤„ç†å™¨æ¨¡æ‹Ÿå™¨32ä½å¤„ç†å™¨æµ‹è¯•éœ€è¦ i386 æ¶æ„æ¨¡æ‹Ÿå™¨64ä½å¤„ç†å™¨æµ‹è¯•éœ€è¦ x86_64 æ¶æ„çœŸæœº32ä½å¤„ç†å™¨éœ€è¦ armv7,æˆ–è€… armv7s æ¶æ„çœŸæœº64ä½å¤„ç†å™¨éœ€è¦ arm64 æ¶æ„","link":"/2020/09/27/fix-xcode12/"},{"title":"git ssh çš„é…ç½®","text":"git ssh çš„é…ç½®ï¼Œå¤šä¸ª git ä»“åº“ ssh key é…ç½®ç”Ÿæˆ SSH key1ssh-keygen -t rsa -C &quot;xiushilin@hotmail.com&quot; å¤šä¸ª git æœåŠ¡å™¨ æ–°å»º ~/.ssh/config 1234567891011121314Host github.com HostName github.com User git IdentityFile ~/.ssh/id_rsaHost git.dev.tencent.com HostName git.dev.tencent.com User git IdentityFile ~/.ssh/tencent_rsaHost git2.dev.tencent.com HostName git.dev.tencent.com User git IdentityFile ~/.ssh/tencent2_rsa Host åˆ«åï¼Œcloneæ—¶æ›¿æ¢ä¸ºè¿™ä¸ª HostName gitä»“åº“çš„åœ°å€ User ä¸€èˆ¬ä¸ºgit IdentityField å…¬é’¥æ–‡ä»¶ æµ‹è¯• 123ssh -T git@github.comssh -T git@git.dev.tencent.comssh -T git@git2.dev.tencent.com","link":"/2019/04/29/git-ssh-config/"},{"title":"gRPC ç¬”è®° - ä¸€å…ƒRPC","text":"éœ€è¦åšçš„ å®šä¹‰ä¸€ä¸ª proto æœåŠ¡ï¼ŒåŒ…å«åˆ›å»ºä¸€å°ä¾¿æºè®¡ç®—æœºçš„ä¸€å…ƒ RPC å®ç°ä¸€ä¸ªæœåŠ¡å™¨æ¥å¤„ç†è¯·æ±‚ï¼Œå¹¶å°†ä¿¡æ¯ä¿å­˜åˆ°å†…å­˜ä¸­ å®ç°ä¸€ä¸ªå®¢æˆ·ç«¯å»è°ƒç”¨è¿™ä¸ªæœåŠ¡ ä¸ºå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„äº¤äº’ç¼–å†™å•å…ƒæµ‹è¯• å­¦ä¹ å¦‚ä½•å¤„ç†é”™è¯¯ï¼Œè¿”å›å¯¹åº”çš„é”™è¯¯ç ï¼Œå’Œ gRPC çš„ deadline å®šä¹‰ proto æœåŠ¡ åœ¨ proto ç›®å½•ä¸‹æ–°å»º laptop_service.protoï¼Œå®šä¹‰ä¸€ä¸ª laptop æœåŠ¡ã€‚ åŒ…æ‹¬äº†ä¸€ä¸ªè¯·æ±‚æ¶ˆæ¯ï¼Œä¸€ä¸ªå“åº”æ¶ˆæ¯ï¼Œåœ¨æœåŠ¡é‡Œæœ‰ä¸€ä¸ªåˆ›å»º laptop çš„å£°æ˜ 1234567891011message CreateLaptopRequest { Laptop laptop = 1;}message CreateLaptopResponse { string id = 1;}service LaptopServices { rpc CreateLaptop(CreateLaptopRequest) returns (CreateLaptopResponse) {}} æ‰§è¡Œ make genï¼Œåœ¨ pd ç›®å½•ä¸‹å°†ç”Ÿæˆä¸€ä¸ª laptop_service.pb.go æ–‡ä»¶ï¼Œä¸€äº›å†…å®¹å¦‚ä¸‹ 123456789101112type CreateLaptopRequest struct { // ... Laptop *Laptop `protobuf:&quot;bytes,1,opt,name=laptop,proto3&quot; json:&quot;laptop,omitempty&quot;`}type CreateLaptopResponse struct { // ... Id string `protobuf:&quot;bytes,1,opt,name=id,proto3&quot; json:&quot;id,omitempty&quot;`}// LaptopServicesServer is the server API for LaptopServices service.type LaptopServicesServer interface { CreateLaptop(context.Context, *CreateLaptopRequest) (*CreateLaptopResponse, error)} å®šä¹‰ä¸€ä¸ªæœåŠ¡å™¨ åœ¨ service ä¸­æ–°å»ºä¸€ä¸ª laptop_server.go æ–‡ä»¶ å®šä¹‰ä¸€ä¸ª LaptopServer 123456789type LaptopServer struct { store LaptopStore}func NewLaptopServer() *LaptopServer { return &amp;LaptopServer{ store: NewInMemoryLaptopStore(), }} LaptopServer åŒ…å«äº†ä¸€ä¸ª laptop å­˜å‚¨æ¥å£ï¼Œåœ¨ service ä¸­åˆ›å»º laptop_store.go 123type LaptopStore interface { Save(laptop *pb.Laptop) error} åœ¨ laptop_store.go ä¸­ï¼Œæ–°å»º LaptopStore çš„å†…å­˜å­˜å‚¨å®ç° ImMemoryLaptopStore 123456789101112type InMemoryLaptopStore struct { mu sync.Mutex data map[string]*pb.Laptop}func NewInMemoryLaptopStore() *InMemoryLaptopStore { //...}func (store *InMemoryLaptopStore) Save(laptop *pb.Laptop) error { // ...} å®ç° RPC çš„ CreateLaptop æ–¹æ³• 123func (server *LaptopServer) CreateLaptop(ctx context.Context, req *pb.CreateLaptopRequest) (*pb.CreateLaptopResponse, error) { // ...} ç¼–å†™å•å…ƒæµ‹è¯• åœ¨ service ä¸­åˆ›å»º laptop_server_test.go ï¼Œç¼–å†™æµ‹è¯•ç”¨ä¾‹ 123456789101112131415161718192021222324252627282930313233343536373839404142laptopNoID := &amp;pb.Laptop{}laptopNoID.Id = &quot;&quot;laptopInvalidID := &amp;pb.Laptop{}laptopInvalidID.Id = &quot;invalid-id&quot;laptopDuplicateID := sample.NewLaptop()storeDuplicateID := service.NewInMemoryLaptopStore()err := storeDuplicateID.Save(laptopDuplicateID)require.NoError(t, err)testCases := []struct { name string laptop *pb.Laptop store service.LaptopStore code codes.Code }{ { name: &quot;success_with_id&quot;, laptop: sample.NewLaptop(), store: service.NewInMemoryLaptopStore(), code: codes.OK, }, { name: &quot;success_no_id&quot;, laptop: laptopNoID, store: service.NewInMemoryLaptopStore(), code: codes.OK, }, { name: &quot;failure_invalid_id&quot;, laptop: laptopInvalidID, store: service.NewInMemoryLaptopStore(), code: codes.InvalidArgument, }, { name: &quot;failure_duplicate_id&quot;, laptop: laptopDuplicateID, store: storeDuplicateID, code: codes.AlreadyExists, }, } æµ‹è¯• 1234567891011121314151617181920212223242526272829for _, tc := range testCases { t.Run(tc.name, func(t *testing.T) { req := &amp;pb.CreateLaptopRequest{ Laptop: tc.laptop, } srv := service.NewLaptopServer(tc.store) resp, err := srv.CreateLaptop(context.Background(), req) if tc.code == codes.OK { require.NoError(t, err) require.NotNil(t, resp) fmt.Println(tc.laptop.Id) fmt.Println(resp) require.NotEmpty(t, resp.Id) if len(tc.laptop.Id) &gt; 0 { require.Equal(t, resp.Id, tc.laptop.Id) } } else { require.Error(t, err) require.Nil(t, resp) st, ok := status.FromError(err) require.True(t, ok) require.Equal(t, tc.code, st.Code()) } })} ç¼–å†™ å®¢æˆ·ç«¯æµ‹è¯• åœ¨ service åˆ›å»º laptop_client_test.go ï¼Œåˆ›å»ºæµ‹è¯•æ–¹æ³• 123func TestClientCreateLaptop(t *testing.T) { // ...} å¯åŠ¨ä¸€ä¸ª grpc æœåŠ¡å™¨ï¼Œæ·»åŠ  startTestLaptopServer å‡½æ•°ï¼Œè¿”å›ä¸€ä¸ª kaotop æœåŠ¡ï¼Œå’ŒæœåŠ¡çš„åœ°å€ 12345678910111213func startTestLaptopServer(t *testing.T) (*service.LaptopServer, string) { laptopServer := service.NewLaptopServer(service.NewInMemoryLaptopStore()) grpcServer := grpc.NewServer() pb.RegisterLaptopServicesServer(grpcServer, laptopServer) listen, err := net.Listen(&quot;tcp&quot;, &quot;:0&quot;) require.NoError(t, err) go grpcServer.Serve(listen) return laptopServer, listen.Addr().String()} åˆ›å»ºä¸€ä¸ª grpc å®¢æˆ·ç«¯ï¼Œæ·»åŠ  newTestLaptopClient å‡½æ•°ï¼Œæ ¹æ® addr åœ°å€ï¼Œè¿”å› LaptopServicesClient å¯¹è±¡ 12345func newTestLaptopClient(t *testing.T, addr string) pb.LaptopServicesClient { conn, err := grpc.Dial(addr, grpc.WithInsecure()) require.NoError(t, err) return pb.NewLaptopServicesClient(conn)} å®Œå–„æµ‹è¯•ä»£ç  1234567891011121314151617181920212223func TestClientCreateLaptop(t *testing.T) { laptopServer, serverAddr := startTestLaptopServer(t) laptopClient := newTestLaptopClient(t, serverAddr) laptop := sample.NewLaptop() expectedID := laptop.Id req := &amp;pb.CreateLaptopRequest{ Laptop: laptop, } resp, err := laptopClient.CreateLaptop(context.Background(), req) require.NoError(t, err) require.NotNil(t, resp.Id) require.Equal(t, resp.Id, expectedID) other, err := laptopServer.Store.FindByID(expectedID) require.NoError(t, err) require.NotNil(t, other.Id) require.Equal(t, other.Id, expectedID) requireSameLaptop(t, other, laptop)} LaptopStore éœ€è¦æ–°å¢ä¸€ä¸ªå‡½æ•° FindByIDï¼Œæ¥éªŒè¯æ˜¯å¦å­˜å‚¨æˆåŠŸï¼Œç¼–è¾‘ laptop_store.go 12345678type LaptopStore interface { // ... FindByID(id string) (*pb.Laptop, error)}func (store *InMemoryLaptopStore) FindByID(id string) (*pb.Laptop, error) { //...} è¿è¡Œæµ‹è¯• 123Running tool: /usr/local/go/bin/go test -timeout 30s -run ^TestClientCreateLaptop$ github.com/xiusl/pcbook/serviceok github.com/xiusl/pcbook/service 0.595s å®ç°çœŸæ­£çš„ Server &amp; Client åˆ é™¤ä¸»ç›®å½•çš„ main.go æ–°å»º cmd/server å’Œ cmd/client ç›®å½•ï¼Œåœ¨ä¸¤ä¸ªç›®å½•ä¸‹åˆ›å»º main.go 12345- cmd/ - server/ - main.go - client/ - main.go ä¿®æ”¹ Makefile 1234server: go run cmd/server/main.goclient: go run cmd/client/main.go å®Œå–„ cmd/server/main.go 1234567891011121314151617181920func main() { port := flag.String(&quot;port&quot;, &quot;&quot;, &quot;server port&quot;) flag.Parse() log.Printf(&quot;start server on port: %s&quot;, *port) laptopServer := service.NewLaptopServer(service.NewInMemoryLaptopStore()) grpcServer := grpc.NewServer() pb.RegisterLaptopServicesServer(grpcServer, laptopServer) address := fmt.Sprintf(&quot;0.0.0.0:%s&quot;, *port) listener, err := net.Listen(&quot;tcp&quot;, address) if err != nil { log.Fatalf(&quot;cannot start server: %v&quot;, err) } err = grpcServer.Serve(listener) if err != nil { log.Fatalf(&quot;cannot start server: %v&quot;, err) }} å®Œå–„ cmd/client/main.go 12345678910111213141516171819202122232425262728293031func main() { addr := flag.String(&quot;addr&quot;, &quot;&quot;, &quot;the server address&quot;) flag.Parse() log.Printf(&quot;dial server: %s&quot;, *addr) conn, err := grpc.Dial(*addr, grpc.WithInsecure()) if err != nil { log.Fatalf(&quot;cannot dial server: %v&quot;, err) } laptopClient := pb.NewLaptopServicesClient(conn) laptop := sample.NewLaptop() req := &amp;pb.CreateLaptopRequest{ Laptop: laptop, } res, err := laptopClient.CreateLaptop(context.Background(), req) if err != nil { st, ok := status.FromError(err) if ok &amp;&amp; st.Code() == codes.AlreadyExists { log.Println(&quot;laptop already exists.&quot;) } else { log.Printf(&quot;laptop create error: %v&quot;, err) } return } log.Printf(&quot;created laptop success, id: %v&quot;, res.Id)} æ›´æ–° Makefile 1234server: go run cmd/server/main.go -port=8080client: go run cmd/client/main.go -addr=&quot;0.0.0.0:8080&quot; è¿è¡ŒæœåŠ¡ 123$ make server&gt; go run cmd/server/main.go -port=8080&gt; 2021/06/18 23:03:19 start server on port: 8080 è¿è¡Œå®¢æˆ·ç«¯ 1234567$ make client&gt; go run cmd/client/main.go -addr=&quot;0.0.0.:8080&quot;&gt; 2021/06/18 23:13:26 dial server: 0.0.0.0:8080&gt; 2021/06/18 23:13:26 created laptop success, id: d53003bc-0118-4e91-93d8-e7d04c9b7a75// æœåŠ¡ç«¯æ—¥å¿—&gt; 2021/06/18 23:13:26 receive a create-laptop request with id:d53003bc-0118-4e91-93d8-e7d04c9b7a75. ä¿®æ”¹å®¢æˆ·ç«¯ä»£ç ï¼ŒéªŒè¯ laptop exist 12345678laptop := sample.NewLaptop()laptop.Id = &quot;d53003bc-0118-4e91-93d8-e7d04c9b7a75&quot;// è¿è¡Œ$ make client&gt; go run cmd/client/main.go -addr=&quot;0.0.0.0:8080&quot;&gt; 2021/06/18 23:14:00 dial server: 0.0.0.0:8080&gt; 2021/06/18 23:14:00 laptop already exists. ä¿®æ”¹å®¢æˆ·ç«¯ä»£ç ï¼ŒéªŒè¯ valid laptop id 12345678laptop := sample.NewLaptop()laptop.Id = &quot;invalid-id&quot;// è¿è¡Œï¿¥ make client&gt; go run cmd/client/main.go -addr=&quot;0.0.0.0:8080&quot;&gt; 2021/06/18 23:14:10 dial server: 0.0.0.0:8080&gt; 2021/06/18 23:14:10 laptop create error: rpc error: code = InvalidArgument desc = laptap ID is not a valid UUID: invalid UUID length: 10 gRPC è¶…æ—¶å’Œå–æ¶ˆ ä¿®æ”¹ cmd/client/main.go ï¼Œå¯¹ä¸Šä¸‹æ–‡å¢åŠ è¶…æ—¶æ—¶é—´ 12345678910func main() { // ... // 1 ç§’åå°†è¶…æ—¶é€€å‡º ctx, cancel := context.WithTimeout(context.Background(), time.Second) defer cancel() res, err := laptopClient.CreateLaptop(ctx, req) // ...} ä¸ºå¯¹è¶…æ—¶è¿›è¡Œæµ‹è¯•ï¼Œä¿®æ”¹ service/laptop_server.go ï¼Œå¢åŠ è€—æ—¶æ“ä½œ 123456789// service/laptop_server.gofunc (server *LaptopServer) CreateLaptop(ctx context.Context, req *pb.CreateLaptopRequest) (*pb.CreateLaptopResponse, error) { // ... // æ–°å¢æ­¤è¡Œä»£ç æµ‹è¯• time.Sleep(3 * time.Second) err := server.Store.Save(laptop)} å†æ¬¡è¿è¡Œ server å’Œ clientï¼Œå‘ç°åœ¨å®¢æˆ·ç«¯è¶…æ—¶é€€å‡ºåï¼Œç›¸åº”æ•°æ®è¿˜æ˜¯å†™å…¥åˆ°äº†å†…å­˜ä¸­ï¼Œè¿™æ˜¯ä¸åº”è¯¥çš„ 12345678910&gt; make server$ 2021/06/19 00:10:41 start server on port: 8080$ 2021/06/19 00:10:43 receive a create-laptop request with id:7154eb98-2459-495e-911d-9e70034094a2.$ 2021/06/19 00:10:46 store save success 7154eb98-2459-495e-911d-9e70034094a2.-----&gt; make client$ 2021/06/19 00:10:43 dial server: 0.0.0.0:8080$ 2021/06/19 00:10:44 laptop create error: rpc error: code = DeadlineExceeded desc = context deadline exceeded ä¿®å¤è¶…æ—¶é”™è¯¯ï¼Œåœ¨å®é™…ä¿å­˜æ•°æ®æ—¶ï¼Œå¯¹ä¸Šä¸‹æ–‡è¿›è¡Œåˆ¤æ–­ 12345678910111213// service/laptop_server.gofunc (server *LaptopServer) CreateLaptop(ctx context.Context, req *pb.CreateLaptopRequest) (*pb.CreateLaptopResponse, error) { // ... // æ–°å¢æ­¤è¡Œä»£ç æµ‹è¯• time.Sleep(3 * time.Second) if ctx.Err() == context.DeadlineExceeded { log.Print(&quot;deadline is exceeded&quot;) return nil, fmt.Errorf(&quot;deadline is exceeded&quot;) } err := server.Store.Save(laptop)} \u0005å†æ¬¡è¿è¡Œ 123456789&gt; make server$ 2021/06/19 00:22:52 receive a create-laptop request with id:f39f76d9-414e-47e3-b38c-efe5a8cea5b5.$ 2021/06/19 00:22:55 deadline is exceeded-----&gt; make client$ 2021/06/19 00:22:52 dial server: 0.0.0.0:8080$ 2021/06/19 00:22:53 laptop create error: rpc error: code = DeadlineExceeded desc = context deadline exceeded åŒæ ·ï¼Œå®¢æˆ·ç«¯ä¸­æ–­æ‰§è¡Œï¼Œåœ¨è¶…æ—¶å‰æ‰§è¡Œ ctrl+cï¼Œæ•°æ®åŒæ ·è¢«å†™å…¥ï¼Œä¿®å¤é—®é¢˜ 123456789101112131415161718// service/laptop_server.gofunc (server *LaptopServer) CreateLaptop(ctx context.Context, req *pb.CreateLaptopRequest) (*pb.CreateLaptopResponse, error) { // ... // æ–°å¢æ­¤è¡Œä»£ç æµ‹è¯• time.Sleep(3 * time.Second) if ctx.Err() == context.Canceled { log.Print(&quot;context is canceled&quot;) return nil, fmt.Errorf(&quot;context is canceled&quot;) } if ctx.Err() == context.DeadlineExceeded { log.Print(&quot;deadline is exceeded&quot;) return nil, fmt.Errorf(&quot;deadline is exceeded&quot;) } err := server.Store.Save(laptop)} â€“æœ¬èŠ‚ç»“æŸâ€“","link":"/2021/06/23/go-rpc-01/"},{"title":"iOS åˆ†å‘ Ad Hoc åº”ç”¨","text":"å…¬å¸å†…éƒ¨æµ‹è¯• iOS Appï¼Œä¹‹å‰ä¸€ç›´ç”¨è’²å…¬è‹±åˆ†å‘ï¼Œä½†ç°åœ¨å„ç§å¹³å°éƒ½è¦é‡æ–°è®¤è¯ï¼Œè‡ªå·±å†™ä¸€ä¸ªç½‘é¡µç®€å•åˆ†å‘ä¸‹ æ‰“åŒ…å¥½çš„ Appï¼Œå¯¼å‡º Ad Hoc çš„å®‰è£…åŒ… ç¼–å†™éœ€è¦çš„ plist æ–‡ä»¶ï¼Œå·®ä¸å¤šä¸‹é¢è¿™ä¸ªæ ·å­ install.plist 123456789101112131415161718192021222324252627282930313233&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;!DOCTYPE plist PUBLIC &quot;-//Apple//DTD PLIST 1.0//EN&quot; &quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd&quot;&gt;&lt;plist version=&quot;1.0&quot;&gt;&lt;dict&gt; &lt;key&gt;items&lt;/key&gt; &lt;array&gt; &lt;dict&gt; &lt;key&gt;assets&lt;/key&gt; &lt;array&gt; &lt;dict&gt; &lt;key&gt;kind&lt;/key&gt; &lt;string&gt;software-package&lt;/string&gt; &lt;key&gt;url&lt;/key&gt; &lt;string&gt;https://image.sleen.top/ipa/like.ipa&lt;/string&gt; &lt;/dict&gt; &lt;/array&gt; &lt;key&gt;metadata&lt;/key&gt; &lt;dict&gt; &lt;key&gt;bundle-identifier&lt;/key&gt; &lt;string&gt;com.xiusl.like&lt;/string&gt; &lt;key&gt;bundle-version&lt;/key&gt; &lt;string&gt;1.1.2&lt;/string&gt; &lt;key&gt;kind&lt;/key&gt; &lt;string&gt;software&lt;/string&gt; &lt;key&gt;releaseNotes&lt;/key&gt; &lt;string&gt;æµ‹è¯•&lt;/string&gt; &lt;key&gt;title&lt;/key&gt; &lt;string&gt;å“©å—‘&lt;/string&gt; &lt;/dict&gt; &lt;/dict&gt; &lt;/array&gt;&lt;/dict&gt;&lt;/plist&gt; å†å†™ä¸€ä¸ªç®€å•çš„ç½‘é¡µ index.html 123456789101112131415&lt;!DOCTYPE&gt;&lt;html&gt;&lt;head&gt;&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot; /&gt;&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=1&quot;&gt;&lt;title&gt;å“©å—‘ App&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;div style=&quot;font-size:20px;text-align:center;margin-top:100px;&quot;&gt; &lt;a title=&quot;iPhone&quot; href=&quot;itms-services://?action=download-manifest&amp;url=https://image.sleen.top/ipa/install.plist&quot;&gt;å“©å—‘å†…æµ‹ä¸‹è½½&lt;/a&gt; &lt;p style=&quot;font-size:14px;color:#999;&quot;&gt;Note: å†…æµ‹åŒ…å®‰è£…çš„è®¾å¤‡éœ€è¦åœ¨ Apple Developer ä¸­æ³¨å†Œ&lt;/p&gt; &lt;/div&gt;&lt;/body&gt;&lt;/html&gt; æœ€åæŠŠ install.plistï¼Œlike.ipaï¼Œindex.htmlï¼Œä¸Šä¼ åˆ°æµ‹è¯•äººå‘˜å¯ä»¥è®¿é—®çš„åœ°æ–¹ï¼Œè¿™é‡Œç›´æ¥æ”¾åœ¨äº†ä¸ƒç‰›å¯¹è±¡å­˜å‚¨é‡Œï¼Œè®¿é—® index.html å°±èƒ½å®‰è£…å–½ã€‚","link":"/2020/09/30/iOS-AdHoc-distribute/"},{"title":"iOS ä¸­çš„ UITest","text":"åœ¨ iOS å¼€å‘ä¸­ä½¿ç”¨ UITest å¯¹å„ç§ç‚¹å‡»è¿›è¡Œæµ‹è¯•ï¼Œé¿å…ä¸Šçº¿åå‡ºç°ä½çº§ bugã€‚ åœ¨åˆ›å»ºé¡¹ç›®çš„æ—¶å€™å¯ä»¥å‹¾é€‰ Include UI Tests åˆå§‹åŒ–ï¼Œæˆ–è€…åœ¨é¡¹ç›®çš„ Targets ä¸­æ–°å¢ UITesting Bundle é¡¹ç›®ä¸­ä¼šå‡ºç°ç›¸åº”çš„æ–‡ä»¶å¤¹ xxUITestsï¼Œå’Œä¸€ä¸ªä¸´æ—¶çš„ä»£ç æ–‡ä»¶ xxUITests.m 123456789101112131415161718192021222324#import &lt;XCTest/XCTest.h&gt;@interface XXUITests : XCTestCase@end@implementation XXUITests- (void)setUp { // åœ¨ä¸€ä¸ªæµ‹è¯•å¤±è´¥åä¸å†ç»§ç»­ self.continueAfterFailure = NO; // åˆ›å»º XCUIApplication å®ä¾‹ï¼Œå¹¶å¯åŠ¨ // æµ‹è¯•å¿…é¡»è¦ç¡®ä¿åœ¨æ¯ä¸ªæµ‹è¯•å‰å¯åŠ¨å®ƒ [[[XCUIApplication alloc] init] launch];}- (void)tearDown { }- (void)testExample { // æµ‹è¯•ä»£ç }@end UITest æ˜¯åŸºäºä¸‹é¢ä¸‰ä¸ªç±»çš„å®ç° 123XCUIApplicationXCUIElementXCUIElementQuery å¯ä»¥ä½¿ç”¨å½•åˆ¶çš„æ–¹å¼æ¥è¿›è¡Œæµ‹è¯•å°†é¼ æ ‡å®šä½ testExample çš„ä»£ç å—ä¸­ï¼Œç‚¹å‡»ä¸‹é¢çš„çº¢è‰²å½•åˆ¶æŒ‰é’®ï¼Œåº”ç”¨ä¼šé‡å¯ï¼Œè¿›è¡Œæ“ä½œåä¼šè‡ªåŠ¨ç”Ÿæˆæµ‹è¯•ä»£ç  UITest çš„åŸºæœ¬åŸåˆ™ æŸ¥æ‰¾åˆ°å¯¹åº”å…ƒç´ ï¼ˆXCUIElementQueryï¼‰ æ˜ç¡®å…ƒç´ çš„é¢„æœŸè¡Œä¸º ç‚¹å‡»å…ƒç´ è§¦å‘å“åº” ç¡®è®¤é¢„æœŸè¡Œä¸ºå’Œå“åº”ç»“æœæ˜¯å¦åŒ¹é…ï¼ˆassertionï¼‰ æŸ¥æ‰¾å…ƒç´  UIå¯¹è±¡ä¼šæœ‰å››ä¸ªå±æ€§ï¼Œä¸åŒæ§ä»¶ä¼šæœ‰ä¸åŒçš„é»˜è®¤å€¼ï¼Œå¯ä»¥åœ¨é¡¹ç›®ä¸­è‡ªå®šä¹‰ï¼Œ accessibilityTitle accessibilityPlaceholderValue accessibilityLabel accessibilityValue","link":"/2019/10/18/ios-uitest/"},{"title":"UITableView ä¸­ä½¿ç”¨ IQKeyboardManager","text":"é¡¹ç›®ä¸­çš„è¡¨å•éœ€è¦åœ¨ç¬¬ä¸€æ¬¡è¿›å…¥çš„æ—¶å€™è‡ªåŠ¨å¼¹å‡ºé”®ç›˜ï¼Œä½¿ç”¨ IQKeyboardManager æ¥è°ƒæ•´è¾“å…¥æ¡†çš„æ—¶å€™ï¼Œé”®ç›˜æ”¶èµ·å tableView åº•éƒ¨å¤šå‡ºä¸€éƒ¨åˆ†ã€‚ ç›®å‰è§‰å¾—ä¸»è¦çš„é—®é¢˜æ˜¯ï¼Œåœ¨ tableView:cellForRowAtIndexPath: æ–¹æ³•ä¸­ï¼Œè°ƒç”¨ textField çš„ becomeFirstResponder æ—¶ï¼ŒtableView çš„ contentOfSize è¿˜æ²¡æœ‰ç¡®å®šï¼Œæ‰€ä»¥è°ƒæ•´ view çš„åç§»é‡å­˜åœ¨è¯¯å·®ã€‚ ç›®å‰çš„è§£å†³åŠæ³•æ˜¯åœ¨æ§åˆ¶å™¨ viewDidAppear: æ–¹æ³•ä¸­æ¥å¼¹å‡ºé”®ç›˜ 1234567- (void)viewDidAppear:(BOOL)animated { [super viewDidAppear:animated]; if (self.textField &amp;&amp; self.firstEnter) { self.firstEnter = NO; [self.textField becomeFirstResponder]; }}","link":"/2019/03/01/iqkeyboard-tableview/"},{"title":"my-ios-day1","text":"è¿™ä¸ªæ˜¯16å¹´é‡æ–°å¤ä¹ çš„iOSç¬”è®°ï¼Œå½“æ—¶æ˜¯æ”¾åœ¨äº†gitbookï¼Œç°åœ¨è½¬ç§»è¿‡æ¥ï¼ #day01 iOSç®€å•è·¯çº¿ UIåŸºç¡€ä¸è¿›é˜¶ ç½‘ç»œå’Œå¤šçº¿ç¨‹ ç®€å•é¡¹ç›®å¼€å‘ å®ç”¨æŠ€æœ¯ h5è·¨å¹³å° Swiftå­¦ä¹  UIViewç®€å•ä»‹ç» ä¸€èˆ¬åœ¨å±å¹•ä¸Šçœ‹åˆ°çš„éƒ½æ˜¯UIViewï¼Œå¯ä»¥æŠŠå®ƒçœ‹åšæ§ä»¶æˆ–è§†å›¾ æ§ä»¶åŒ…å«ä¸€äº›å…±åŒçš„å±æ€§ï¼Œä»–ä»¬éƒ½åœ¨UIViewä¸­å®šä¹‰ å°ºå¯¸ ä½ç½® èƒŒæ™¯é¢œè‰² æ‰€æœ‰æ§ä»¶çš„çˆ¶æ§ä»¶éƒ½æ˜¯UIView åœ¨å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿä¼šå°†ä¸€äº›å…±åŒçš„å±æ€§æŠ½å–åˆ°ä¸€ä¸ªçˆ¶ç±»ä¸­ è‹¹æœå°±å°†æ§ä»¶çš„ä¸€äº›å…±åŒå±æ€§æŠ½å–åœ¨UIViewç±»ä¸­ å¸¸è§å±æ€§1234@property(nonatomic,readonly) UIView *superview; // è·å¾—è‡ªå·±çš„çˆ¶æ§ä»¶å¯¹è±¡@property(nonatomic,readonly,copy) NSArray *subviews; // è·å¾—è‡ªå·±çš„æ‰€æœ‰å­æ§ä»¶å¯¹è±¡@property(nonatomic) NSInteger tag; // æ§ä»¶çš„ID(æ ‡è¯†)ï¼Œçˆ¶æ§ä»¶å¯ä»¥é€šè¿‡tagæ¥æ‰¾åˆ°å¯¹åº”çš„å­æ§ä»¶@property(nonatomic) CGAffineTransform transform; // æ§ä»¶çš„å½¢å˜å±æ€§(å¯ä»¥è®¾ç½®æ—‹è½¬è§’åº¦ã€æ¯”ä¾‹ç¼©æ”¾ã€å¹³ç§»ç­‰å±æ€§) å¸¸è§æ–¹æ³•123- (void)addSubview:(UIView *)view; // æ·»åŠ ä¸€ä¸ªå­æ§ä»¶view- (void)removeFromSuperview; // å°†è‡ªå·±ä»çˆ¶æ§ä»¶ä¸­ç§»é™¤- (UIView *)viewWithTag:(NSInteger)tag; // æ ¹æ®ä¸€ä¸ªtagæ ‡è¯†æ‰¾å‡ºå¯¹åº”çš„æ§ä»¶ï¼ˆä¸€èˆ¬éƒ½æ˜¯å­æ§ä»¶ï¼‰ å…³äºå°ºå¯¸123456// æ§ä»¶çŸ©å½¢æ¡†åœ¨çˆ¶æ§ä»¶ä¸­çš„ä½ç½®å’Œå°ºå¯¸(ä»¥çˆ¶æ§ä»¶çš„å·¦ä¸Šè§’ä¸ºåæ ‡åŸç‚¹)@property(nonatomic) CGRect frame;// æ§ä»¶çŸ©å½¢æ¡†çš„ä½ç½®å’Œå°ºå¯¸(ä»¥è‡ªå·±å·¦ä¸Šè§’ä¸ºåæ ‡åŸç‚¹ï¼Œæ‰€ä»¥boundsçš„xã€yä¸€èˆ¬ä¸º0)@property(nonatomic) CGRect bounds;// æ§ä»¶ä¸­ç‚¹çš„ä½ç½®(ä»¥çˆ¶æ§ä»¶çš„å·¦ä¸Šè§’ä¸ºåæ ‡åŸç‚¹)@property(nonatomic) CGPoint center; ##åŠ æ³•è®¡ç®—å™¨","link":"/2016/09/01/my-ios-day1/"},{"title":"my-ios-day10","text":"è¿™ä¸ªæ˜¯16å¹´é‡æ–°å¤ä¹ çš„iOSç¬”è®°ï¼Œå½“æ—¶æ˜¯æ”¾åœ¨äº†gitbookï¼Œç°åœ¨è½¬ç§»è¿‡æ¥ï¼ day 10å¤šæ§åˆ¶å™¨ç®¡ç†ï¼ˆä¸€ï¼‰ é¡¹ç›®ä¸­å¸¸è§æ–‡ä»¶ UIApplication ç¨‹åºå¯åŠ¨åŸç† UIWindow åŠ è½½æ§åˆ¶å™¨ å¸¸è§æ–‡ä»¶ ç³»ç»Ÿæ¡†æ¶åŠLaunchScreen Xcode5ï¼Œæ¡†æ¶æ˜¯è‹¹æœäº‹å…ˆå¯¼å…¥è¿›å»çš„ï¼Œåœ¨é¡¹ç›®æ ä¸­å°±ä¼šçœ‹è§å¯¼å…¥çš„æ¡†æ¶ï¼Œä½¿ç”¨image.xcassetsä¸­çš„LaunchScreenæ–‡ä»¶ Xcode6ï¼Œä¼šè‡ªåŠ¨å¯¼å…¥ä¸€äº›å¸¸ç”¨æ¡†æ¶ï¼Œä¸ä¼šçœ‹åˆ°è‡ªåŠ¨å¯¼å…¥çš„æ¡†æ¶ï¼Œä½¿ç”¨LaunchScreen.xibæ–‡ä»¶ Xcode7ï¼Œä¼šè‡ªåŠ¨å¯¼å…¥ä¸€äº›å¸¸ç”¨æ¡†æ¶ï¼Œä¸ä¼šçœ‹åˆ°è‡ªåŠ¨å¯¼å…¥çš„æ¡†æ¶ï¼Œä½¿ç”¨LaunchScreen.storyboardæ–‡ä»¶ æ–°ç‰ˆæœ¬ä¸­ï¼Œä¾æ—§é€šè¿‡æ›´æ”¹é¡¹ç›®çš„Generalçš„Launch Screen Fileé…ç½®æ¥ä½¿ç”¨Assets.xcassetsä¸­çš„LaunchScreenæ–‡ä»¶ PCHæ–‡ä»¶ ä¸€èˆ¬ä¸é¡¹ç›®åç›¸åŒï¼Œæ–°ç‰ˆæœ¬ä¸ä¼šè‡ªåŠ¨æ·»åŠ  æ·»åŠ è¿‡ç¨‹ æ–°å»ºä¸€ä¸ªé¡¹ç›®å.pchæ–‡ä»¶ åœ¨Build Settingä¸­æŸ¥æ‰¾perfixï¼Œæ‰¾åˆ°Precomplie prefix Headerè®¾ç½®ä¸º YES è®¾ç½®prefix Headerä¸ºpchæ–‡ä»¶çš„å®Œæ•´å·¥ç¨‹è·¯å¾„ï¼Œé¡¹ç›®å/é¡¹ç›®å.pch åªè¦åœ¨pchæ–‡ä»¶ä¸­å®šä¹‰çš„ä¸œè¥¿ï¼Œå°±ä¼šè¢«æ•´ä¸ªåº”ç”¨ç¨‹åºå…±äº« æ˜¯ä¸€ä¸ªé¢„ç¼–è¯‘æ–‡ä»¶ï¼Œç³»ç»Ÿæå‰å»ç¼–è¯‘ï¼Œå®Œæˆä¸€äº›é…ç½® ä¸»è¦ç”¨é€” å­˜æ”¾ä¸€äº›å¸¸ç”¨çš„å®ï¼Œå±å¹•ã€ç‰ˆæœ¬â€¦ å­˜æ”¾å…¬ç”¨çš„å¤´æ–‡ä»¶ï¼Œç³»ç»Ÿåˆ†ç±»çš„å¤´æ–‡ä»¶ è‡ªå®šä¹‰NSLogï¼Œå®ç°éƒ¨ç½²ä¸æ‰“å° æ³¨æ„ é—®é¢˜ï¼špchä¼šæŠŠå½“ä¸­çš„æ‰€æœ‰å†…å®¹å¯¼å…¥åˆ°å·¥ç¨‹ä¸­çš„æ‰€æœ‰æ–‡ä»¶ä¸­ï¼Œå½“å·¥ç¨‹ä¸­å­˜åœ¨Cè¯­è¨€æ–‡ä»¶æ—¶ï¼Œå°±ä¼šäº§ç”Ÿé”™è¯¯ è§£å†³ï¼šæ¯ä¸€ä¸ªOCæ–‡ä»¶éƒ½ä¼šå®šä¹‰ä¸€ä¸ª__OBJC__å®ï¼Œåˆ¤æ–­æ–‡ä»¶æ˜¯å¦æœ‰è¿™ä¸ªå®ï¼Œå°±å¯ä»¥åˆ¤æ–­æ–‡ä»¶ç±»å‹ UIApplication UIApplicationç®€ä»‹ UIApplicationå¯¹è±¡æ˜¯ä¸€ä¸ªåº”ç”¨ç¨‹åºçš„è±¡å¾ï¼Œç³»ç»Ÿä¸ºæˆ‘ä»¬åˆ›å»ºï¼Œæ˜¯ä¸€ä¸ªå•ä¾‹å¯¹è±¡ï¼Œä¸€ä¸ªåº”ç”¨ç¨‹åºå¯åŠ¨åå°±æ˜¯ä¸€ä¸ªUIApplicationå¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡[UIApplication sharedApplication]è·å¾—è¿™ä¸ªå¯¹è±¡ åº”ç”¨UIApplicationå¯¹è±¡å¯ä»¥å®Œæˆä¸€äº›åº”ç”¨çº§åˆ«çš„æ“ä½œ è®¾ç½®åº”ç”¨ç¨‹åºå³ä¸Šè§’çš„çº¢è‰²æé†’æ•°å­— è®¾ç½®è”ç½‘æŒ‡ç¤ºå™¨çš„å¯è§æ€§ è®¾ç½®åº”ç”¨ç¨‹åºçš„çŠ¶æ€æ  å®Œæˆåº”ç”¨ä¹‹é—´çš„è·³è½¬ UIApplicationåŠŸèƒ½ æé†’æ•°å­—12345678// è·å–UIApplicationå¯¹è±¡UIApplication *app = [UIApplication sharedApplication];// åœ¨è®¾ç½®ä¹‹å‰ï¼Œè¦æ³¨å†Œâ¼€ä¸ªé€šçŸ¥ï¼Œä»ios8ä¹‹åï¼Œéƒ½è¦å…ˆæ³¨å†Œä¸€ä¸ªé€šçŸ¥å¯¹è±¡ï¼Œæ‰èƒ½å¤Ÿæ¥æ”¶åˆ°æé†’UIUserNotificationSettings *notice = [UIUserNotificationSettings settingsForTypes:UIUserNotificationTypeBadge categories:nil];// æ³¨å†Œé€šçŸ¥å¯¹è±¡[app registerUserNotificationSettings:notice];// è®¾ç½®æé†’æ•°å­—app.applicationIconBadgeNumber = 10; è®¾ç½®è”ç½‘çŠ¶æ€1app.networkActivityIndicatorVisible = YES; è®¾ç½®çŠ¶æ€æ  çŠ¶æ€æ é»˜è®¤æ˜¯äº¤ä¸ªæ§åˆ¶å™¨ç®¡ç†çš„12345678// é‡å†™æ§åˆ¶å™¨çš„æ–¹æ³•ï¼Œè®¾ç½®æ˜¾ç¤ºæ ·å¼-(UIStatusBarStyle)preferredStatusBarStyle {return UIStatusBarStyleLightContent;}// æ˜¯å¦éšè—çŠ¶æ€æ ï¼ŒYES--æ˜¾ç¤ºï¼ŒNO--éšè—-(BOOL)prefersStatusBarHidden {return NO;} å¼€å‘ä¸­ä¸€èˆ¬éƒ½æ˜¯åº”ç”¨ç¨‹åºæ¥ç»Ÿä¸€ç®¡ç†ï¼Œåœ¨info.plistæ–‡ä»¶ä¸­æ·»åŠ ä¸€ä¸ªKeyå€¼ï¼ŒView controller-based status bar appearanceè®¾ç½®ä¸º NOï¼Œå°±äº¤ç»™åº”ç”¨ç¨‹åºç®¡ç†äº†123456// è·å–UIApplicationUIApplication *app = [UIApplication sharedApplication];// è®¾ç½®çŠ¶æ€æ æ ·å¼.app.statusBarStyle = UIStatusBarStyleLightContent;// è®¾ç½®çŠ¶æ€çš„éšè—app.statusBarHidden = YES; è·³è½¬ç½‘é¡µ12345UIApplication *app = [UIApplication sharedApplication];// URL--åè®®å¤´://åŸŸå// åº”ç”¨ç¨‹åºé€šè¿‡åè®®å¤´çš„ç±»å‹ï¼Œå»æ‰“å¼€ç›¸åº”çš„è½¯ä»¶NSURL *url =[NSURL URLWithString:@&quot;http://www.baidu.com&quot;];[app openURL:url]; æ‰“ç”µè¯å‘çŸ­ä¿¡1234// æ‰“ç”µè¯[app openURL:[NSURL URLWithString:@&quot;tel://10086&quot;]];// å‘çŸ­ä¿¡[app openURL:[NSURL URLWithString:@&quot;sms://10086&quot;]]; UIApplicationä»£ç† æ‰€æœ‰çš„ç§»åŠ¨åº”ç”¨æœ‰ä¸€ä¸ªè‡´å‘½çš„ç¼ºç‚¹ï¼šappå®¹æ˜“å—åˆ°æ‰“æ‰°ï¼Œå¦‚æ¥ç”µè¯ï¼Œé”å±ç­‰ä¼šå¯¼è‡´appè¿›å…¥åå°ç”šè‡³ä¼šè¢«ç»ˆæ­¢ iOSä¸­å½“appå—åˆ°å¹²æ‰°çš„æ—¶å€™ä¼šäº§ç”Ÿä¸€äº›ç³»ç»Ÿäº‹ä»¶ï¼Œè¿™æ—¶UIApplicationä¼šé€šçŸ¥å®ƒçš„ä»£ç†å¯¹è±¡ï¼Œæ¥åšä¸€äº›ç›¸åº”çš„å¤„ç† AppDelegateç±»å°±æ˜¯åœ¨ç¨‹åºå¯åŠ¨åˆ›å»ºçš„ä¸€ä¸ªéµå®ˆUIApplicationDelegateçš„ç±»ï¼Œåœ¨è¿™ä¸ªç±»ä¸­å®šä¹‰å¾ˆå¤šæ–¹æ³•æ¥å¤„ç†äº‹ä»¶ ä¸»è¦æ–¹æ³•123456789101112131415161718192021222324252627#parmark åº”â½¤ç¨‹åºçš„â½£ç”Ÿå‘½å‘¨æœŸ// åº”ç”¨ç¨‹åºå¯åŠ¨å®Œæˆçš„æ—¶å€™è°ƒâ½¤- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions: (NSDictionary *)launchOptions {NSLog(@&quot;%s&quot;,__func__);return YES;}// å½“æˆ‘ä»¬åº”ç”¨ç¨‹åºå³å°†å¤±å»ç„¦ç‚¹çš„æ—¶å€™è°ƒâ½¤- (void)applicationWillResignActive:(UIApplication *)application {NSLog(@&quot;%s&quot;,__func__);}// å½“æˆ‘ä»¬åº”â½¤ç¨‹åºå®Œå…¨è¿›â¼Šåå°çš„æ—¶å€™è°ƒâ½¤- (void)applicationDidEnterBackground:(UIApplication *)application{NSLog(@&quot;%s&quot;,__func__);}// å½“æˆ‘ä»¬åº”ç”¨ç¨‹åºå³å°†è¿›â¼Šå‰å°çš„æ—¶å€™è°ƒâ½¤- (void)applicationWillEnterForeground:(UIApplication *)application {NSLog(@&quot;%s&quot;,__func__);}// å½“æˆ‘ä»¬åº”â½¤ç¨‹åºå®Œå…¨è·å–ç„¦ç‚¹çš„æ—¶å€™è°ƒâ½¤// åªæœ‰å½“ä¸€ä¸ªåº”â½¤ç¨‹åºå®Œå…¨è·å–åˆ°ç„¦ç‚¹,æ‰èƒ½ä¸ç”¨æˆ·äº¤äº’.- (void)applicationDidBecomeActive:(UIApplication *)application {NSLog(@&quot;%s&quot;,__func__);}// å½“æˆ‘ä»¬åº”ç”¨ç¨‹åºå³å°†å…³é—­çš„æ—¶å€™è°ƒâ½¤- (void)applicationWillTerminate:(UIApplication *)application {NSLog(@&quot;%s&quot;,__func__);} åº”ç”¨ç¨‹åºå¯åŠ¨åŸç† ç¨‹åºå¯åŠ¨æ—¶ï¼Œä¾æ—§æœ€å…ˆæ‰§è¡Œmainå‡½æ•°12345678int main(int argc, char * argv[]) {@autoreleasepool {// ç¬¬ä¸‰ä¸ªå‚æ•°:UIApplicationç±»åæˆ–è€…â¼¦ç±»çš„åç§° nil == @&quot;UIApplication&quot;// ç¬¬å››ä¸ªå‚æ•°:UIApplicationçš„ä»£ç†çš„ä»£ç†åç§°// NSStringFromClass:æŠŠç±»åè½¬åŒ–å­—ç¬¦ä¸²ï¼Œ NSStringFromClasså¥½å¤„:1.æœ‰æç¤ºåŠŸèƒ½ 2.é¿å…è¾“å…¥é”™è¯¯return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));}} ç¨‹åºå¯åŠ¨æµç¨‹ æ‰§è¡Œmainå‡½æ•° æ‰§è¡ŒUIApplicationMainå‡½æ•° åˆ›å»ºUIApplicationå¯¹è±¡ï¼Œè®¾ç½®UIApplicationå¯¹è±¡çš„ä»£ç† å¼€å¯ä¸€ä¸ªä¸»å¾ªç¯ï¼Œä¿è¯åº”ç”¨ç¨‹åºä¸ä¼šé€€å‡º åŠ è½½info.plisté…ç½®æ–‡ä»¶ï¼Œåˆ¤æ–­æ–‡ä»¶ä¸­çš„Main storyboard file base nameæœ‰æ²¡æœ‰æŒ‡å®šstoryboardæ–‡ä»¶ï¼Œè‹¥æœæœ‰æŒ‡å®šå°±å»åŠ è½½æ–‡ä»¶ UIWindow UIWindowç®€ä»‹ UIWindowæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„UIViewï¼Œé€šå¸¸ä¸€ä¸ªappä¸­è‡³å°‘æœ‰ä¸€ä¸ªUIWindowï¼Œä¸€ä¸ªiOSç¨‹åºä¹‹æ‰€ä»¥å¯ä»¥æ˜¾ç¤ºåˆ°å±å¹•ä¸Šï¼Œå°±æ˜¯é UIWindow iOSå¯åŠ¨å®Œæ¯•åï¼Œåˆ›å»ºçš„ç¬¬ä¸€ä¸ªè§†å›¾æ§ä»¶å°±æ˜¯UIWindowï¼Œæ¥ç€åˆ›å»ºæ§åˆ¶å™¨çš„Viewï¼Œåœ¨å°†æ§åˆ¶å™¨çš„Viewæ·»åŠ åˆ°UIWindowä¸Š UIWindowåˆ›å»º åŠ è½½info.plistæ–‡ä»¶åï¼Œå¦‚æœå­˜åœ¨mainå°±ä¼šåŠ è½½storyboard åˆ›å»ºä¸€ä¸ªçª—å£ åŠ è½½main.storyboardï¼Œåˆå§‹åŒ–ä¸€ä¸ªæ§åˆ¶å™¨ æŠŠåˆå§‹åŒ–çš„æ§åˆ¶å™¨è®¾ä¸ºçª—å£çš„æ ¹æ§åˆ¶å™¨ï¼Œæ˜¾ç¤ºåˆ°å±å¹•ä¸Š å¦‚æœæ²¡æœ‰æŒ‡å®šmainè¿™ä¸ªæ—¶å€™å°±éœ€è¦åœ¨ç¨‹åºåŠ è½½å®Œæ¯•åæ‰‹åŠ¨åˆ›å»ºUIWindow12345678910111213// åº”ç”¨ç¨‹åºå¯åŠ¨å®Œæˆçš„æ—¶å€™è°ƒâ½¤- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions: (NSDictionary *)launchOptions {// åˆ›å»ºçª—å£self.window = [[UIWindow alloc] initWithFrame:[UIScreen mainScreen].bounds];// åˆ›å»ºæ§åˆ¶å™¨UIViewController *Vc = [[UIViewController alloc] init];Vc.view.backgroundColor = [UIColor redColor];// è®¾ç½®æ ¹æ§åˆ¶å™¨self.window.rooViewController = Vc;// æ˜¾ç¤ºçª—å£[self.window makeKeyAndVisiable];return YES;} makeKeyAndVisibleçš„åº•å±‚å®ç° è®©çª—â¼å˜ä¸ºæ˜¾ç¤ºçŠ¶æ€1self.window.hidden = NO; æŠŠæ ¹æ§åˆ¶å™¨çš„Viewæ·»åŠ åˆ°çª—å£ä¸Š1[self.window addSubView:rootVC.view]; æŠŠå½“å‰çª—å£è®¾ç½®æˆåº”ç”¨ç¨‹åºçš„ä¸»çª—â¼application.keyWindowè·å¾—åº”ç”¨ç¨‹åºçš„ä¸»çª—â¼åœ¨ç¨‹åºä¸­ï¼ŒçŠ¶æ€æ å’Œé”®ç›˜éƒ½æ˜¯çª—å£self.window.windowLevel = UIWindowLevelNormalå±‚çº§å…³ç³»UIWindowLevelNormal &lt; UIWindowLevelStatusBar &lt; UIWindowLevelAlert åŠ è½½æ§åˆ¶å™¨ storyboard è¿‡ç¨‹1234567891011// åˆ›å»ºçª—å£self.window = [[UIWindow alloc] inihFrame:[UIScreen mainScreen].bounds];// åŠ è½½æ§åˆ¶å™¨// æŒ‡å®šstoryboardUIStoryboard *storyboard =[UIStoryboard storyboardWithName:@&quot;Main&quot; bundle:nil];// åŠ è½½ç®­å¤´æŒ‡å‘çš„VcUIViewController *Vc = [storyboard instantiateInitialViewController];// è®¾ç½®æ ¹æ§åˆ¶å™¨self.window.rooViewController = Vc;// æ˜¾ç¤ºçª—å£[self.window makeKeyAndVisiable]; åŠ è½½æ§åˆ¶å™¨çš„ä¸¤ç§æ–¹å¼123456// æŒ‡å®šstoryboardUIStoryboard *storyboard =[UIStoryboard storyboardWithName:@&quot;Main&quot; bundle:nil];// åŠ è½½ç®­å¤´æŒ‡å‘çš„VcUIViewController *Vc = [storyboard instantiateInitialViewController];// åŠ è½½æŒ‡å®šæ ‡è¯†çš„æ§åˆ¶å™¨.UIViewController *Vc = [storyBoard instantiateViewControllerWithIdentifier:@&quot;VCStoryBoardID&quot;]; xib12345678// åˆ›å»ºçª—â¼self.window = [[UIWindow alloc] initWithFrame:[UIScreen nScreen].bounds];// ä»XIBå½“ä¸­åŠ è½½æ§åˆ¶å™¨.MyViewController *Vc = [[MyViewController alloc] tWithNibName:@&quot;VC&quot; bundle:nil];// è®¾ç½®æ ¹æ§åˆ¶å™¨self.window.rootViewController = Vc;// æ˜¾â½°ç¤ºçª—â¼[self.window makeKeyAndVisible];","link":"/2016/09/01/my-ios-day10/"},{"title":"my-ios-day11","text":"è¿™ä¸ªæ˜¯16å¹´é‡æ–°å¤ä¹ çš„iOSç¬”è®°ï¼Œå½“æ—¶æ˜¯æ”¾åœ¨äº†gitbookï¼Œç°åœ¨è½¬ç§»è¿‡æ¥ï¼ day 11å¤šæ§åˆ¶å™¨ç®¡ç†ï¼ˆäºŒï¼‰ UINavigationController é€šè®¯å½•ç®€ä¾‹ æ•°æ®å­˜å‚¨ UITabBarController UINavigationController ä½¿ç”¨æ­¥éª¤ åˆå§‹åŒ–UINavigationController è®¾ç½®UIWindowçš„rootViewControllerä¸ºUINavigationController æ ¹æ®å…·ä½“æƒ…å†µï¼Œé€šè¿‡pushæ–¹æ³•æ·»åŠ å­æ§åˆ¶å™¨ å­æ§åˆ¶å™¨ UINavigationControllerä»¥æ ˆçš„å½¢å¼ä¿å­˜å­æ§åˆ¶å™¨ 12@property(nonatomic,copy) NSArray *viewControllers;@property(nonatomic,readonly) NSArray *childViewControllers; ä½¿ç”¨pushæ–¹æ³•å°†å­æ§åˆ¶å™¨å…¥æ ˆ 1- (void)pushViewController:(UIViewController *)viewController animated:(BOOL)animated; ä½¿ç”¨popæ–¹æ³•ç§»é™¤æ§åˆ¶å™¨ 123456// å°†æ ˆé¡¶çš„æ§åˆ¶å™¨ç§»é™¤- (UIViewController *)popViewControllerAnimated:(BOOL)animated;// å›åˆ°æŒ‡å®šçš„å­æ§åˆ¶å™¨- (NSArray *)popToViewController:(UIViewController *)viewController animated:(BOOL)animated;// å›åˆ°æ ¹æ§åˆ¶å™¨ï¼ˆæ ˆåº•æ§åˆ¶å™¨ï¼‰- (NSArray *)popToRootViewControllerAnimated:(BOOL)animated; navigationItem å¯¼èˆªæ¡çš„å†…å®¹ç”±navigationItemå†³å®š å¸¸ç”¨å±æ€§ 12345678910// å·¦ä¸Šè§’çš„è¿”å›æŒ‰é’®@property(nonatomic, retain) UIBarButtonItem *backBarButtonItem;// ä¸­é—´çš„æ ‡é¢˜è§†å›¾@property(nonatomic, retain) UIView *titleView;// ä¸­é—´çš„æ ‡é¢˜æ–‡å­—@property(nonatomic, copy) NSString *title;// å·¦ä¸Šè§’çš„è§†å›¾@property(nonatomic, retain) UIBarButtonItem *leftBarButtonItem;// å³ä¸Šè§’çš„è§†å›¾@property(nonatomic, retain) UIBarButtonItem *rightBarButtonItem; segue storyboardä¸Šçš„æ¯ä¸€æ¡æ§åˆ¶å™¨ä¹‹é—´çš„çº¿éƒ½æ˜¯ä¸€ä¸ªUIStoryboardSegueå¯¹è±¡ å±æ€§ 123456// å”¯ä¸€æ ‡è¯†@property (nonatomic, readonly) NSString *identifier;// æ¥æºæ§åˆ¶å™¨@property (nonatomic, readonly) id sourceViewController;// ç›®æ ‡æ§åˆ¶å™¨@property (nonatomic, readonly) id destinationViewController; ç±»å‹ æ‰‹åŠ¨å‹ï¼šéœ€è¦é€šè¿‡ä»£ç æ‰‹åŠ¨æ‰§è¡Œsegueï¼Œæ‰èƒ½å®Œæˆè·³è½¬ 123// éœ€è¦ä¸ºsegueç»‘å®šä¸€ä¸ªå”¯ä¸€æ ‡è¯†// segueå¿…é¡»ç”±æ¥æºæ§åˆ¶å™¨æ¥æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸ªperformæ–¹æ³•å¿…é¡»ç”±æ¥æºæ§åˆ¶å™¨æ¥è°ƒç”¨- [self performSegueWithIdentifier:@&quot;login2contacts&quot; sender:nil]; è‡ªåŠ¨å‹ï¼šç‚¹å‡»æŸä¸ªæ§ä»¶ï¼Œè‡ªåŠ¨è‡ªè¡Œsegueï¼Œè‡ªåŠ¨è·³è½¬ performSegueWithIdentifier:sender:æ‰§è¡Œè¿‡ç¨‹ æ ¹æ®identifieråœ¨storyboardä¸­æ‰¾åˆ°å¯¹åº”çš„çº¿ï¼Œæ–°å»ºUIStoryboardSegueå¯¹è±¡ è®¾ç½®segueå¯¹è±¡çš„sourceViewControl æ–°å»ºå¹¶è®¾ç½®segueå¯¹è±¡çš„destinationViewController è°ƒç”¨sourceViewControllerçš„prepareForSegue: sender:æ–¹æ³•ï¼Œåšä¸€äº›è·³è½¬å‰çš„å‡†å¤‡å¹¶ä¼ å…¥åˆ›å»ºå¥½çš„segue è°ƒç”¨segueçš„performæ–¹æ³•ï¼Œå¼€å§‹æ‰§è¡Œç•Œé¢è·³è½¬æ“ä½œ æ§åˆ¶å™¨é—´çš„æ•°æ®ä¼ é€’ é¡ºä¼  æ•°æ®æ–¹å‘ï¼šsourceViewcontroller-&gt;destinationViewController ä¼ é€’æ–¹å¼ï¼šåœ¨æºæ§åˆ¶å™¨sourceViewcontrollerçš„prepareForSegue:sender:æ–¹æ³•ä¸­æ ¹æ®segueå‚æ•°å–å¾—destinationViewController, ä¹Ÿå°±æ˜¯ç›®æ ‡æ§åˆ¶å™¨ï¼Œç›´æ¥ç»™æ§åˆ¶å™¨èµ‹å€¼ é€†ä¼  æ•°æ®æ–¹å‘ï¼šdestinationViewController-&gt;sourceViewcontroller ä¼ é€’æ–¹å¼ï¼šè®©æºæ§åˆ¶å™¨sourceViewcontrolleræˆä¸ºç›®æ ‡æ§åˆ¶å™¨destinationViewControllerçš„ä»£ç†ï¼Œåœ¨ç›®æ ‡æ§åˆ¶å™¨destinationViewControllerä¸­è°ƒç”¨æºæ§åˆ¶å™¨sourceViewcontrollerçš„ä»£ç†æ–¹æ³•ï¼Œé€šè¿‡ä»£ç†æ–¹æ³•çš„å‚æ•°ä¼ é€’æ•°æ®ç»™æºæ§åˆ¶å™¨ ####é€šè®¯å½• ç»“æ„åˆ†æ ç™»å½•ç•Œé¢ ç™»å½•æŒ‰é’®åªæœ‰æ–‡æœ¬æ¡†éƒ½æœ‰æ–‡å­—æ‰èƒ½ç‚¹å‡» è‡ªåŠ¨ç™»å½•å¼€å…³å’Œè®°ä½å¯†ç å¼€å…³çš„åè°ƒ æ–‡æœ¬æ¡†å ä½ç¬¦ï¼Œæç¤ºè¾“å…¥ä¿¡æ¯ å¯†ç æ–‡æœ¬æ¡†æ˜¯æš—æ–‡ æ–‡æœ¬æ¡†è¾“å…¥æ–‡å­—åä¼šæœ‰æ¸…é™¤æŒ‰é’® ç‚¹å‡»ç™»å½•ä¼šåˆ¤æ–­è´¦å·å’Œå¯†ç æ˜¯å¦æ­£ç¡®ï¼Œåªæœ‰æ­£ç¡®æ‰è·³è½¬ï¼Œæç¤ºç”¨æˆ·æ­£åœ¨ç™»å½•ï¼Œæ¨¡æ‹Ÿç½‘ç»œå»¶è¿Ÿ è”ç³»äººåˆ—è¡¨ç•Œé¢ è”ç³»äººåˆ—è¡¨å¯¼èˆªæ¡æ ‡é¢˜è·Ÿè´¦å·æœ‰å…³ç³»ï¼Œæ§åˆ¶å™¨ä¹‹é—´ä¼ å€¼ æ³¨é”€æŒ‰é’®å›åˆ°ç™»å½•ç•Œé¢ æ·»åŠ æŒ‰é’®ï¼Œè¿›å…¥è”ç³»äººç¼–è¾‘ç•Œé¢ æ·»åŠ è”ç³»äººç•Œé¢ é»˜è®¤å¼¹å‡ºå§“åçš„æ–‡æœ¬æ¡†ï¼Œä¸éœ€è¦ç”¨æˆ·ç‚¹å‡»æ–‡æœ¬æ¡†å¼¹å‡ºé”®ç›˜ æ·»åŠ æŒ‰é’®ï¼Œåªæœ‰æ–‡æœ¬æ¡†éƒ½æœ‰æ–‡å­—æ‰èƒ½ç‚¹å‡» ç‚¹å‡»æ·»åŠ åï¼Œå›åˆ°è”ç³»äººç•Œé¢ï¼Œå¹¶æŠŠæ•°æ®æ˜¾ç¤ºåˆ°è”ç³»äººåˆ—è¡¨ ç¼–è¾‘è”ç³»äººç•Œé¢ ç‚¹å‡»è”ç³»äººç•Œé¢çš„cellï¼Œè¿›å…¥ç¼–è¾‘ç•Œé¢ é»˜è®¤ä¿å­˜æŒ‰é’®æ˜¯éšè—çš„ï¼Œé»˜è®¤æ–‡æœ¬æ¡†ä¸èƒ½äº¤äº’ï¼Œæ˜¯æŸ¥çœ‹è”ç³»äºº ç‚¹å‡»ç¼–è¾‘æŒ‰é’®çš„æ—¶å€™ï¼Œæ–‡æœ¬æ¡†æ‰ä¼šå…è®¸äº¤äº’ï¼Œå¹¶ä¸”ä¿å­˜æŒ‰é’®é»˜è®¤ä¸èƒ½ç‚¹å‡» é»˜è®¤å¼¹å‡ºç”µè¯æ–‡æœ¬æ¡†ï¼Œä¸€èˆ¬ä¿®æ”¹è”ç³»äººéƒ½æ˜¯ä¿®æ”¹ç”µè¯ ç¼–è¾‘çŠ¶æ€ï¼Œç‚¹å‡»å–æ¶ˆæŒ‰é’®ï¼Œæ¢å¤æ–‡æœ¬æ¡†æ•°æ®å›åˆ°æŸ¥çœ‹è”ç³»äºº ç¼–è¾‘çŠ¶æ€ï¼Œç‚¹å‡»ä¿å­˜ï¼Œæç¤ºç”¨æˆ·ä¿å­˜ï¼Œå¹¶æ˜¾ç¤ºåˆ°è”ç³»äººç•Œé¢ ç•Œé¢è¾ƒå°‘ä¸”å›ºå®šï¼Œé‡‡ç”¨storyboardå¼€å‘ï¼Œä½¿ç”¨å¯¼èˆªæ§åˆ¶å™¨ å…·ä½“ä»£ç åœ¨ 07-é€šè®¯å½• æ•°æ®å­˜å‚¨ plistå­˜å‚¨ å­˜æ•°æ® æ•°æ®å­˜å‚¨æ˜¯ä¿å­˜åœ¨æ‰‹æœºé‡Œé¢ï¼Œä¿å­˜åˆ°åº”ç”¨çš„æ²™ç›’ä¸­ plistæ–‡ä»¶ä¸€èˆ¬å­˜å‚¨çš„éƒ½æ˜¯å­—å…¸å’Œæ•°ç»„ï¼Œç›´æ¥å†™æˆplistæ–‡ä»¶ï¼Œä¿å­˜åˆ°æ²™ç›’ä¸­ æ¯ä¸ªåº”ç”¨åœ¨æ‰‹æœºä¸­éƒ½æœ‰ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œé€šè¿‡ä¸‹é¢çš„æ–¹æ³•è·å–å½“å‰åº”ç”¨çš„æ‰‹æœºé‡Œå®‰è£…çš„è·¯å¾„1NSString *homeDir = NSHomeDirectory(); 123456789101112131415161718/*** åœ¨æŸä¸ªèŒƒå›´å†…æœç´¢æ–‡ä»¶å¤¹çš„è·¯å¾„* æ–¹æ³•ä¼šå¾—åˆ°ä¸€ä¸ªæ•°ç»„ï¼ˆå¯èƒ½ä¼šæœ‰å¤šä¸ªè·¯å¾„ï¼‰* directoryï¼šè·å–å“ªä¸ªæ–‡ä»¶å¤¹* domainMaskï¼šåœ¨å“ªä¸ªè·¯å¾„ä¸‹æœç´¢* expandTildeï¼šæ˜¯å¦å±•å¼€è·¯å¾„*/NSArray *arr = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserdomainMask, YES);// åœ¨è¿™é‡Œæˆ‘ä»¬æœç´¢çš„æ˜¯Cacheç›®å½•ï¼Œç»“æœåªæœ‰ä¸€ä¸ªNSString *cachePath = arr[0];// æ‹¼æ¥æ–‡ä»¶è·¯å¾„NSString *filePathName = [cachePath stringByAppendingPathComponent:@&quot;agePlist.plist&quot;];// ä¿å­˜å­—å…¸NSDictionary *dict = @{@&quot;age&quot; : @18,@&quot;name&quot; : @&quot;gaowei&quot;};[dict writeToFile:filePathName atomically:YES];// ä¿å­˜æ•°ç»„NSArray *dataArray = @[@56,@&quot;asdfa&quot;];[dataArray writeToFile:filePathName atomically:YES]; è¯»å–æ–‡ä»¶ ä¸å†™åŸºæœ¬ç›¸åŒï¼Œéƒ½æ˜¯é€šè¿‡è·¯å¾„å®Œæˆ1234567891011// åŒæ ·æœç´¢è·¯å¾„NSArray *array = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUs erDomainMask, YES);// æ‹¿åˆ°è·¯å¾„NSString *cachePath = array[0];// æ‹¼æ¥â½‚ä»¶è·¯å¾„NSString *filePathName = [cachePath stri ngByAppendingPathComponent:@&quot;agePlist.plist&quot;];// ä»â½‚ä»¶å½“ä¸­è¯»å–å­—å…¸NSDictionary *dict = [NSDictionary dict ionaryWithContentsOfFile:filePathName];// ä»â½‚ä»¶å½“ä¸­è¯»å–æ•°ç»„NSArray *dataArray = [NSArray arrayWithContentsOfFile:filePathName];NSLog(@&quot;%@&quot;,dataArray); åå¥½è®¾ç½® NSUserDefaults å†™æ•°æ®12345678// é»˜è®¤åœ¨ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ªå­—å…¸ï¼Œå¹¶ä»¥plistæ–‡ä»¶çš„æ–¹å¼å‚¨å­˜// ä¸ç”¨å…³å¿ƒæ–‡ä»¶åï¼Œå¿«é€Ÿè¿›è¡Œé”®å€¼å¯¹å­˜å‚¨NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];[defautls setObject:@&quot;sleen&quot; forKey:@&quot;name&quot;];[defautls setBool:YES forKey:@&quot;isBool&quot;];[defautls setInteger:5 forKey:@&quot;num&quot;];//åŒæ­¥ï¼Œâ½´å³å†™â¼Šæ–‡ä»¶.[defautls synchronize]; è¯»æ•°æ®12345678// å­˜çš„æ—¶å€™ç”¨ä»€ä¹ˆkeyå­˜çš„, è¯»çš„æ—¶å€™å°±è¦ç”¨ä»€ä¹ˆkeyå€¼å–// å­˜çš„æ—¶å€™ç”¨ä»€ä¹ˆç±»å‹,å–çš„æ—¶å€™ä¹Ÿè¦â½¤ä»€ä¹ˆç±»å‹.NSString *str = [[NSUserDefaults standardUserDefaults] objectForKey:@&quot;name&quot;];BOOL isBool =[[NSUserDefaultsstandardUserDefaults]boolForKey:@&quot;isBool&quot;];NSInteger num = [[NSUserDefaults standardUserDefaults]integerForKey:@&quot;num&quot;];NSLog(@&quot;name =%@-isBool=%d-num=%ld&quot;,str,isBool,num); å½’æ¡£ å½’æ¡£ä¸€èˆ¬éƒ½æ˜¯ä¿å­˜è‡ªå®šä¹‰å¯¹è±¡çš„æ—¶å€™ï¼Œplistæ–‡ä»¶ä¸èƒ½å®Œæˆéœ€æ±‚ï¼Œå¦‚æœä¸€ä¸ªå­—å…¸ä¸­ä¿å­˜æœ‰è‡ªå®šä¹‰å¯¹è±¡ï¼Œå¦‚æœè¦æŠŠå­—å…¸å†™åˆ°æ–‡ä»¶ä¸­ï¼Œæ˜¯ä¸ä¼šå†™æˆplistæ–‡ä»¶çš„ ä¿å­˜æ•°æ®12345678910// è‡ªå®šä¹‰çš„å¯¹è±¡SLPerson *person = [[SLPerson alloc] init];person.name = @&quot;sleen&quot;;person.age = 18;// è·å–æ²™ç›’ä¸´æ—¶ç›®å½•NSString *tempPath = NSTemporaryDirectory();NSString *filePath = [tempPath stringByAppendingPathComponent:@&quot;person.data&quot;];// archiveRootObjectè¿™ä¸ªâ½…æ³•åº•å±‚ä¼šå»è°ƒç”¨ä¿å­˜å¯¹è±¡çš„encodeWithCoderâ½…æ³•ï¼Œå»è¯¢é—®è¦ä¿å­˜è¿™ä¸ªå¯¹è±¡çš„å“ªäº›å±æ€§[NSKeyedArchiver archiveRootObject:person toFile:filePath]; è¯»å–æ•°æ®1234567// è·å–æ²™ç›’ä¸´æ—¶ç›®å½•NSString *tempPath = NSTemporaryDirectory();NSString *filePath = [tempPath stringByAppendingPathComponent:@&quot;persion.data&quot;];// NSKeyedUnarchiverä¼šè°ƒç”¨initWithCoderè¿™ä¸ªæ–¹æ³•ï¼Œæ¥è®©ä½ å‘Šè¯‰å®ƒå»è·å–è¿™ä¸ªå¯¹è±¡çš„å“ªäº›å±æ€§Person *person = [NSKeyedUnarchiver unarchiveObjectWithFile:filePath];NSLog(@&quot;name=%@---age=%d&quot;,person.name,person.age); åœ¨è‡ªå®šä¹‰çš„å¯¹è±¡ä¸­ï¼Œè¦éµå®ˆNSCodingåè®®123456789101112131415161718192021// SLPerson.h#import &lt;Foundation/Foundation.h&gt;@interface Person : NSObject &lt;NSCoding&gt;@property (nonatomic, strong) NSString *name;@property (nonatomic, assign) int age;@end// SLPerson.m#import &quot;SLPerson.h&quot;@implementation SLPerson- (void)encodeWithCoder:(NSCoder *)encode {[encode encodeObject:self.name forKey:@&quot;name&quot;];[encode encodeInt32:self.age forKey:@&quot;age&quot;];}- (instancetype)initWithCoder:(NSCoder *)decoder {if (self = [super init]) {self.age = [decoder decodeInt32ForKey:@&quot;age&quot;];self.name = [decoder decodeObjectForKey:@&quot;name&quot;];}return self;}@end UITabBarController åŸºæœ¬ä½¿ç”¨ UITabBarControllerä¸UINavigationControllerç±»ä¼¼ï¼Œç®¡ç†å¤šä¸ªæ§åˆ¶å™¨ï¼Œåœ¨åº•éƒ¨æœ‰ä¸€ä¸ªå¯¼èˆªæ¡UITabBarï¼ˆé«˜åº¦49ï¼‰ æ·»åŠ æ§åˆ¶å™¨12345// ä¸¤ç§æ–¹æ³•// æ·»åŠ å•ä¸ªâ¼¦å­æ§åˆ¶å™¨- (void)addChildViewController:(UIViewController *)childController// è®¾ç½®â¼¦å­æ§åˆ¶å™¨æ•°ç»„@property(nonatomic,copy) NSArray *viewControllers; ç®€å•åº”ç”¨12345678910111213141516171819202122// è®¾ç½®çª—å£self.window = [[UIwindow alloc] init];// åˆå§‹åŒ–tabbarUITabBarController *tabbar = [[UITabBarController alloc] init];// ä¸ºtabbaræ·»åŠ å­æ§åˆ¶å™¨UIViewController *vc1 = [[UIViewController alloc] init];vc1.view.backgroundColor = [UIColor redColor];// è®¾ç½®æ ‡é¢˜vc1.tabBarItem.title = @&quot;æ ‡é¢˜1&quot;;// è®¾ç½®æé†’æ•°å­—vc1.tabBarItem.badgeValue = @&quot;10&quot;;[tabBar addChildViewController:vc1];UIViewController *vc2 = [[UIViewController alloc] init];vc2.view.backgroundColor = [UIColor yellowColor];[tabBar addChildViewController:vc2];UIViewController *vc3 = [[UIViewController alloc] init];vc3.view.backgroundColor = [UIColor blueColor];[tabBar addChildViewController:vc3];// è®¾ç½®çª—å£æ ¹æ§åˆ¶å™¨self.window.rootViewController = tabbar;// æ˜¾â½°ç¤ºçª—â¼å£[self.window makeKeyAndVisible]; ç®¡ç†åŸåˆ™ TabBarControlleré»˜è®¤åšæ³•æ˜¯æŠŠå®ƒçš„ç¬¬â¼€ä¸ªå­æ§åˆ¶å™¨çš„Viewæ·»åŠ åˆ°TabBarControllerå­˜æ”¾å­æ§åˆ¶å™¨çš„Viewå½“ä¸­ å¦‚æœTabBarControlleræœ‰Nä¸ªâ¼¦æ§åˆ¶å™¨ï¼Œé‚£ä¹ˆTabBarå†…éƒ¨å°±ä¼šæœ‰Nä¸ªæŒ‰é’® ç‚¹å‡»æ¯ä¸€ä¸ªæŒ‰é’®, å®ƒä¼šå…ˆæŠŠå½“å‰æ§åˆ¶å™¨çš„Viewä»TabBarControllerå­˜æ”¾â¼¦æ§ä»¶Viewçš„Viewå½“ä¸­ç§»é™¤(åªæ˜¯ç§»é™¤viewï¼Œå­æ§åˆ¶å™¨è¿˜åœ¨æ•°ç»„å½“ä¸­ï¼Œæ²¡æœ‰è¢«ç§»é™¤) å†æŠŠå½“å‰é€‰ä¸­æŒ‰é’®å¯¹åº”å­æ§åˆ¶å™¨çš„Viewæ·»åŠ åˆ°TabBarControllerå­˜æ”¾â¼¦æ§ä»¶Viewä¸­ ä¸»æµæ¡†æ¶æ­å»º çª—å£çš„æ ¹æ§åˆ¶å™¨ä¸ºUITabBarControllerï¼Œå†å°†UINavigationControlleræ·»åŠ åˆ°UITabBarControllerä¸­","link":"/2016/09/01/my-ios-day11/"},{"title":"my-ios-day12","text":"è¿™ä¸ªæ˜¯16å¹´é‡æ–°å¤ä¹ çš„iOSç¬”è®°ï¼Œå½“æ—¶æ˜¯æ”¾åœ¨äº†gitbookï¼Œç°åœ¨è½¬ç§»è¿‡æ¥ï¼ day 12äº‹ä»¶å¤„ç† ç®€ä»‹ UIViewçš„è§¦æ‘¸äº‹ä»¶ æœ€åˆé€‚çš„View äº‹ä»¶å“åº” æ‰‹åŠ¿è¯†åˆ« äº‹ä»¶å¤„ç† iOSä¸­å¸¸ç”¨çš„äº‹ä»¶åˆ†ä¸ºä¸‰ç§ è§¦æ‘¸äº‹ä»¶ åŠ é€Ÿè®¡äº‹ä»¶ è¿œç¨‹æ§åˆ¶äº‹ä»¶ å“åº”è€…å¯¹è±¡ ç»§æ‰¿è‡ªUIResponder çš„å¯¹è±¡ç§°ä¸ºå“åº”è€… UIApplicationã€UIViewControllerã€UIViewç­‰ï¼Œä»–ä»¬éƒ½æ˜¯å“åº”è€…å¯¹è±¡ï¼Œèƒ½å¤Ÿæ¥æ”¶å’Œå¤„ç†äº‹ä»¶ UIResponderç±» è§¦æ‘¸äº‹ä»¶1234- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event;- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event;- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event;- (void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event; åŠ é€Ÿè®¡äº‹ä»¶123- (void)motionBegan:(UIEventSubtype)motion withEvent:(UIEvent *)event;- (void)motionEnded:(UIEventSubtype)motion withEvent:(UIEvent *)event;- (void)motionCancelled:(UIEventSubtype)motion withEvent:(UIEvent *)event; è¿œç¨‹æ§åˆ¶äº‹ä»¶1- (void)remoteControlReceivedWithEvent:(UIEvent *)event; äº‹ä»¶çš„äº§ç”Ÿå’Œä¼ é€’ äº§ç”Ÿå½“å‘ç”Ÿä¸€ä¸ªè§¦æ‘¸äº‹ä»¶åï¼Œç³»ç»Ÿä¼šå°†è¯¥äº‹ä»¶åŠ å…¥åˆ°ä¸€ä¸ªç”±UIApplicationç®¡ç†çš„äº‹ä»¶é˜Ÿåˆ—ä¸­UIApplicationä¼šä»äº‹ä»¶é˜Ÿåˆ—ä¸­å–å‡ºæœ€å‰é¢çš„äº‹ä»¶ï¼Œå¹¶å°†äº‹ä»¶åˆ†å‘ä¸‹å»ä»¥ä¾¿å¤„ç† ä¼ é€’ä¸»çª—å£ä¼šåœ¨è§†å›¾å±‚æ¬¡ç»“æ„ä¸­æ‰¾åˆ°ä¸€ä¸ªæœ€åˆé€‚çš„è§†å›¾æ¥å¤„ç†è§¦æ‘¸äº‹ä»¶è§¦æ‘¸äº‹ä»¶çš„ä¼ é€’æ˜¯ä»çˆ¶æ§ä»¶ä¼ é€’åˆ°å­æ§ä»¶çš„å¦‚æœä¸€ä¸ªçˆ¶æ§ä»¶ä¸èƒ½æ¥æ”¶äº‹ä»¶ï¼Œé‚£ä¹ˆå®ƒé‡Œé¢çš„å­æ§ä»¶ä¹Ÿä¸èƒ½å¤Ÿæ¥æ”¶äº‹ä»¶ ä¸èƒ½æ¥å—äº‹ä»¶çš„æƒ…å†µ ä¸æ¥æ”¶ç”¨æˆ·äº¤äº’æ—¶ä¸èƒ½å¤Ÿå¤„ç†äº‹ä»¶userInteractionEnabled = NO å½“ä¸€ä¸ªæ§ä»¶éšè—çš„æ—¶å€™ä¸èƒ½å¤Ÿæ¥æ”¶äº‹ä»¶hidden = YES å½“ä¸€ä¸ªæ§ä»¶ä¸ºé€æ˜ç™½æ—¶å€™ä¹Ÿä¸èƒ½å¤Ÿæ¥æ”¶äº‹ä»¶alpha = 0Â· æ³¨æ„UIImageViewdçš„userInteractionEnabledé»˜è®¤ä¸ºNOï¼Œå› æ­¤UIImageViewå’Œå®ƒçš„å­æ§ä»¶é»˜è®¤éƒ½ä¸èƒ½æ¥æ”¶äº‹ä»¶ UIViewçš„è§¦æ‘¸äº‹ä»¶ è¦ç›‘å¬UIViewçš„è§¦æ‘¸äº‹ä»¶ï¼Œè¦ä½¿ç”¨è‡ªå®šä¹‰çš„viewå¹¶å®ç°UIResponderä¸­çš„ç›¸åº”æ–¹æ³• ä¸»è¦äº‹ä»¶123456// ä¸€æ ¹æˆ–è€…å¤šæ ¹æ‰‹æŒ‡å¼€å§‹è§¦æ‘¸viewï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è°ƒç”¨viewçš„ä¸‹é¢æ–¹æ³•.- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event// ä¸€æ ¹æˆ–è€…å¤šæ ¹æ‰‹æŒ‡åœ¨viewä¸Šç§»åŠ¨æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è°ƒç”¨viewçš„ä¸‹é¢æ–¹æ³•ï¼ˆéšç€æ‰‹æŒ‡çš„ç§»åŠ¨ï¼Œä¼šæŒç»­è°ƒç”¨è¯¥æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™ä¸ªæ–¹æ³•ä¼šè°ƒç”¨å¾ˆå¤šæ¬¡ï¼‰- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event// ä¸€æ ¹æˆ–è€…å¤šæ ¹æ‰‹æŒ‡ç¦»å¼€viewï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è°ƒç”¨viewçš„ä¸‹é¢æ–¹æ³•- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event å‚æ•°è¯´æ˜12345678910touchesï¼štouchesä¸­å­˜æ”¾çš„éƒ½æ˜¯UITouchå¯¹è±¡ï¼Œæ˜¯ä¸€ä¸ªNSSeté›†åˆUITouchå¯¹è±¡æ˜¯ç”¨æ¥ä¿å­˜æ‰‹æŒ‡ç›¸å…³è”çš„ä¿¡æ¯ï¼Œä½ç½®ã€æ—¶é—´ã€é˜¶æ®µç­‰ä¿¡æ¯æ¯ä¸€ä¸ªæ‰‹æŒ‡å¯¹åº”ä¸€ä¸ªUITouchå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡æ˜¯ç³»ç»Ÿè‡ªåŠ¨ä¸ºæˆ‘ä»¬åˆ›å»ºçš„ï¼Œå½“æ‰‹æŒ‡ç§»åŠ¨æ—¶ï¼Œç³»ç»Ÿä¼šæ›´æ–°åŒä¸€ä¸ªUITouchå¯¹è±¡ï¼Œä½¿å®ƒä¸€ç›´ä¿å­˜è¯¥æ‰‹æŒ‡çš„ä¿¡æ¯é€šè¿‡è·å–UITouchå±æ€§ï¼Œæˆ‘ä»¬å¯ä»¥è·å¾—è§¦æ‘¸äº§ç”Ÿæ—¶æ‰€å¤„çš„çª—å£ï¼Œè§¦æ‘¸çš„Viewï¼Œæ—¶é—´ï¼Œç‚¹å‡»çš„æ¬¡æ•°ç­‰è¿˜å¯ä»¥é€šè¿‡UITouchæä¾›çš„æ–¹æ³•è·å–å½“å‰æ‰‹æŒ‡æ‰€åœ¨çš„ç‚¹,ä»¥åŠä¸Šä¸€ä¸ªæ‰‹æŒ‡æ‰€åœ¨çš„ç‚¹- (CGPoint)locationInView:(UIView *)view;- (CGPoint)previousLocationInView:(UIView *)view;event:æ¯äº§ç”Ÿä¸€ä¸ªäº‹ä»¶ï¼Œå°±ä¼šäº§ç”Ÿä¸€ä¸ªUIEventå¯¹è±¡ï¼Œè®°å½•äº‹ä»¶äº§ç”Ÿçš„æ—¶åˆ»å’Œç±»å‹ è§¦æ‘¸è¿‡ç¨‹ è§¦æ‘¸å¼€å§‹1- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event; è§¦æ‘¸ç§»åŠ¨1- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event; è§¦æ‘¸ç»“æŸ1- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event; è§¦æ‘¸å–æ¶ˆï¼ˆå¯èƒ½ä¼šç»å†ï¼‰1- (void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event; æ³¨æ„ä¸€æ¬¡å®Œæ•´çš„è§¦æ‘¸è¿‡ç¨‹ä¸­ï¼Œåªä¼šäº§ç”Ÿä¸€ä¸ªäº‹ä»¶å¯¹è±¡ï¼Œ4ä¸ªè§¦æ‘¸æ–¹æ³•éƒ½æ˜¯åŒä¸€ä¸ªeventå‚æ•°å¦‚æœä¸¤æ ¹æ‰‹æŒ‡åŒæ—¶è§¦æ‘¸ä¸€ä¸ªviewï¼Œé‚£ä¹ˆviewåªä¼šè°ƒç”¨ä¸€æ¬¡touchesBegan:withEvent:æ–¹æ³•ï¼Œtoucheså‚æ•°ä¸­è£…ç€2ä¸ªUITouchå¯¹è±¡å¦‚æœè¿™ä¸¤æ ¹æ‰‹æŒ‡ä¸€å‰ä¸€ååˆ†å¼€è§¦æ‘¸åŒä¸€ä¸ªviewï¼Œé‚£ä¹ˆviewä¼šåˆ†åˆ«è°ƒç”¨2æ¬¡touchesBegan:withEvent:æ–¹æ³•ï¼Œå¹¶ä¸”æ¯æ¬¡è°ƒç”¨æ—¶çš„toucheså‚æ•°ä¸­åªåŒ…å«ä¸€ä¸ªUITouchå¯¹è±¡ ####æœ€åˆé€‚çš„view- å¯»æ‰¾æœ€åˆé€‚çš„view1. å…ˆåˆ¤æ–­è‡ªå·±æ˜¯å¦å¯ä»¥æ¥æ”¶è§¦æ‘¸äº‹ä»¶ï¼Œå¦‚æœå¯ä»¥è¿›è¡Œä¸‹ä¸€æ­¥2. åˆ¤æ–­è§¦æ‘¸çš„ç‚¹æ˜¯å¦åœ¨è‡ªå·±ä¸Š3. å¦‚æœåœ¨è‡ªå·±ä¸Šï¼Œä»åå¾€å‰éå†å­æ§ä»¶ï¼Œå­æ§ä»¶é‡å¤ä¸Šè¿°ä¸¤æ­¥4. å¦‚æœæ²¡æœ‰ç¬¦åˆæ¡ä»¶çš„å­æ§ä»¶ï¼Œé‚£ä¹ˆå®ƒè‡ªå·±å°±æ˜¯æœ€åˆé€‚çš„view- hitTestæ–¹æ³•ä¸pointInsideæ–¹æ³•- ä½¿ç”¨1234567891011121314/*** å¯»æ‰¾æœ€åˆé€‚çš„view* pointï¼šå½“å‰æ‰‹æŒ‡æ‰€åœ¨çš„ç‚¹* eventï¼šäº§ç”Ÿçš„äº‹ä»¶* è¿”å›å€¼ï¼šæœ€åˆé€‚çš„view* è°ƒç”¨ï¼šåªè¦ä¸€ä¸ªäº‹ä»¶ä¼ é€’ç»™ä¸€ä¸ªæ§ä»¶ï¼Œå°±ä¼šè°ƒç”¨è¿™ä¸ªæ§ä»¶çš„hitTestæ–¹æ³•*/- (UIView *)hitTest:(CGPoint) withEvent:(UIEvent *)event;/*** åˆ¤æ–­pointåœ¨ä¸åœ¨æ–¹æ³•çš„è°ƒç”¨è€…ä¸Š* pointï¼šå¿…é¡»æ˜¯è°ƒç”¨è€…çš„åæ ‡ç³»* è°ƒç”¨ï¼šhitTeståº•å±‚ä¼šè°ƒç”¨*/- (BOOL)pointInside:(CGPoint)point withEvent:(UIEvent *)event;- åº•å±‚å®ç°1. åˆ¤æ–­å½“å‰èƒ½å¦æ¥æ”¶äº‹ä»¶12if (self.userInteractionEnabled == NO || self.hidden == YES || self.alpha &lt;= 0.01)return nil;2. åˆ¤æ–­è§¦æ‘¸ç‚¹åœ¨ä¸åœ¨å½“å‰æ§ä»¶ä¸Š12if (![self pointInside:point withEvent:event])return nil;3. ä»åå¾€å‰éå†å­æ§ä»¶123456789101112int count = (int)self.subviews.count;for (int i = count - 1; i &gt;= 0; i--) {UIView *childView = self.subViews[i];// è½¬æ¢åæ ‡ç³»CGPoint childPoint = [self convertPoint:point toView:childView];// åˆ¤æ–­æ˜¯å¦æœ€åˆé€‚UIView *fitView = [child hitTest:childPoint withEvent:event];// å¦‚æœæœ€é€‚åˆï¼Œå°±ç›´æ¥è¿”å›if (fitView) {return fitView;}}4. è‡ªå·±å°±æ˜¯æœ€åˆé€‚çš„View1return self;äº‹ä»¶å“åº” å“åº”è€…é“¾æ¡ æ˜¯ç”±å¤šä¸ªå“åº”è€…å¯¹è±¡è¿æ¥èµ·æ¥çš„é“¾æ¡ å“åº”è€…å¯¹è±¡ ç»§æ‰¿äº†UIResponderçš„å¯¹è±¡ç§°ä¹‹ä¸ºå“åº”è€…å¯¹è±¡ï¼Œç”¨æ¥å¤„ç†äº‹ä»¶çš„å¯¹è±¡ äº‹ä»¶ä¼ é€’ åœ¨äº§ç”Ÿä¸€ä¸ªäº‹ä»¶æ—¶ï¼Œç³»ç»Ÿä¼šå°†è¯¥äº‹ä»¶åŠ å…¥åˆ°ä¸€ä¸ªç”±UIApplicationç®¡ç†çš„äº‹ä»¶é˜Ÿåˆ—ä¸­ UIApplicationä¼šä»äº‹ä»¶é˜Ÿåˆ—ä¸­å–å‡ºæœ€å‰é¢çš„äº‹ä»¶ï¼Œå°†å®ƒä¼ é€’ç»™å…ˆå‘é€äº‹ä»¶ç»™åº”ç”¨ç¨‹åºçš„ä¸»çª—å£ ä¸»çª—å£ä¼šè°ƒç”¨hitTestæ–¹æ³•å¯»æ‰¾æœ€é€‚åˆçš„è§†å›¾æ§ä»¶ï¼Œæ‰¾åˆ°åå°±ä¼šè°ƒç”¨è§†å›¾æ§ä»¶çš„touchesæ–¹æ³•æ¥åšå…·ä½“çš„äº‹æƒ… å½“è°ƒç”¨touchesæ–¹æ³•ï¼Œå®ƒçš„é»˜è®¤åšæ³•ï¼Œå°±ä¼šå°†äº‹ä»¶é¡ºç€å“åº”è€…é“¾æ¡å¾€ä¸Šä¼ é€’ï¼Œä¼ é€’ç»™ä¸Šä¸€ä¸ªå“åº”è€…ï¼Œæ¥ç€å°±ä¼šè°ƒç”¨ä¸Šä¸€ä¸ªå“åº”è€…çš„touchesæ–¹æ³• ä¸Šä¸€ä¸ªå“åº”è€… å¦‚æœå½“å‰çš„Viewæ˜¯æ§åˆ¶å™¨çš„Viewï¼Œé‚£ä¹ˆæ§åˆ¶å™¨å°±æ˜¯ä¸Šä¸€ä¸ªå“åº”è€… å¦‚æœå½“å‰çš„Viewä¸æ˜¯æ§åˆ¶å™¨çš„Viewï¼Œé‚£ä¹ˆå®ƒçš„çˆ¶æ§ä»¶å°±æ˜¯ä¸Šä¸€ä¸ªå“åº”è€… åœ¨è§†å›¾å±‚æ¬¡ç»“æ„çš„æœ€é¡¶çº§è§†å›¾ï¼Œå¦‚æœä¹Ÿä¸èƒ½å¤„ç†æ”¶åˆ°çš„äº‹ä»¶æˆ–æ¶ˆæ¯ï¼Œåˆ™å…¶å°†äº‹ä»¶æˆ–æ¶ˆæ¯ä¼ é€’ç»™windowå¯¹è±¡è¿›è¡Œå¤„ç† å¦‚æœwindowå¯¹è±¡ä¹Ÿä¸å¤„ç†ï¼Œåˆ™å…¶å°†äº‹ä»¶æˆ–æ¶ˆæ¯ä¼ é€’ç»™UIApplicationå¯¹è±¡ å¦‚æœUIApplicationä¹Ÿä¸èƒ½å¤„ç†è¯¥äº‹ä»¶æˆ–æ¶ˆæ¯ï¼Œåˆ™å°†å…¶ä¸¢å¼ƒ æ‰‹åŠ¿è¯†åˆ« æ‰‹åŠ¿è¯†åˆ«å™¨ UIGestureRecognizerè‹¹æœå®˜æ–¹æ¨å‡ºçš„æ‰‹åŠ¿è¯†åˆ«åŠŸèƒ½ å¯ä»¥è½»æ¾è¯†åˆ«ç”¨æˆ·åœ¨æŸä¸ªViewä¸Šçš„å¸¸è§æ‰‹åŠ¿ æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå®šä¹‰äº†æ‰€æœ‰æ‰‹åŠ¿çš„åŸºæœ¬è¡Œä¸ºï¼Œä½¿ç”¨å…¶å­ç±»å°±å¯ä»¥å¤„ç†å…·ä½“çš„æ‰‹åŠ¿ å‡ ç§å¸¸è§æ‰‹åŠ¿123456UITapGestureRecognizer // æ•²å‡»UIPinchGestureRecognizer // æåˆï¼Œç”¨äºç¼©æ”¾UIPanGestureRecognizer // æ‹–æ‹½UISwipeGestureRecognizer // è½»æ‰«UIRotationGestureRecognizer // æ—‹è½¬UILongPressGestureRecognizer // é•¿æŒ‰ æ‰‹åŠ¿çš„ä½¿ç”¨ ç‚¹æŒ‰æ‰‹åŠ¿12345678910111213141516// Targetï¼šå½“å“ªå¯¹è±¡è¦åšå¬æ‰‹åŠ¿// actionï¼šæ‰‹åŠ¿å‘ç”Ÿæ—¶è°ƒç”¨çš„æ–¹æ³•UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tap)];// æ‰‹åŠ¿ä¹Ÿå¯ä»¥è®¾ç½®ä»£ç†tap.delegate = self;// æ·»åŠ æ‰‹åŠ¿[self.imageV addGestureRecognizer:tap];// æ‰‹æŒ‡å¼€å§‹ç‚¹å‡»æ—¶è°ƒç”¨- (void)tap {NSLog(@&quot;%s&quot;, __func__);}// æ‰‹åŠ¿ä»£ç†æ–¹æ³•- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch {// è·å–å½“å‰æ‰‹æŒ‡æ‰€åœ¨çš„ç‚¹CGPoint curP = [touch locationInView:self.imageV];} é•¿æŒ‰æ‰‹åŠ¿123456789101112131415161718UILongPressGestureRecognizer *longP = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(longPress:)];// æ·»åŠ æ‰‹åŠ¿[self.imageV addGestureRecognizer:longP];// å½“æ‰‹æŒ‡é•¿æŒ‰æ—¶è°ƒç”¨// æ³¨æ„ï¼Œé•¿æŒ‰æ‰‹åŠ¿ä¼šè°ƒç”¨å¤šæ¬¡ï¼Œå½“å¼€å§‹é•¿æŒ‰æ—¶ä¼šè°ƒç”¨ï¼Œå½“é•¿æŒ‰æ¾å¼€æ—¶ä¼šè°ƒç”¨ï¼Œå½“é•¿æŒ‰ç§»åŠ¨æ—¶ï¼Œä¹Ÿä¼šè°ƒç”¨// ä¸€èˆ¬æˆ‘ä»¬éƒ½æ˜¯åœ¨é•¿æŒ‰åˆšå¼€å§‹æ—¶åšäº‹æƒ…ï¼Œæ‰€ä»¥è¦åˆ¤æ–­å®ƒçš„çŠ¶// è¿™ä¸ªçŠ¶æ€æ˜¯ä¿å­˜çš„å½“å‰çš„æ‰‹åŠ¿å½“ä¸­ æ‰€ä»¥è¦æŠŠå½“å‰çš„é•¿æŒ‰æ‰‹åŠ¿ä¼ è¿›æ¥ï¼Œæ¥åˆ¤æ–­å½“å‰æ‰‹åŠ¿çš„çŠ¶æ€- (void)longPress:(UILongPressGestureRecognizer *)longP {// æ‰‹åŠ¿çš„çŠ¶æ€æ˜¯ä¸€ä¸ªæšä¸¾UIGestureRecognizerStateï¼Œå¯ä»¥è¿›å…¥å¤´æ–‡ä»¶å½“ä¸­æŸ¥çœ‹if (longP.state == UIGestureRecognizerStateBegan) {NSLog(@&quot;å¼€å§‹é•¿æŒ‰æ—¶è°ƒç”¨&quot;);}else if (longP.state == UIGestureRecognizerStateChanged) {// ä¼šæŒç»­è°ƒç”¨NSLog(@&quot;å½“é•¿æŒ‰æ‹–åŠ¨æ—¶è°ƒç”¨&quot;);}else if (longP.state == UIGestureRecognizerStateEnded) {NSLog(@&quot;å½“é•¿æŒ‰æ¾æ‰‹æŒ‡æ¾å¼€è¿›è°ƒç”¨&quot;);}} è½»æ‰«æ‰‹åŠ¿123456UISwipeGestureRecognizer *swipe = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(swipe:)];// æ³¨æ„ï¼šè½»æ‰«æ‰‹åŠ¿é»˜è®¤è½»æ‰«çš„æ–¹å‘æ˜¯å¾€å³è½»æ‰«ï¼Œå¯ä»¥å»æ‰‹åŠ¨ä¿®æ”¹è½»æ‰«çš„æ–¹å‘// ä¸€ä¸ªæ‰‹åŠ¿åªèƒ½å¯¹è±¡ä¸€ä¸ªæ–¹å‘ï¼Œæƒ³è¦æ”¯æŒå¤šä¸ªæ–¹å‘çš„è½»æ‰«ï¼Œè¦æ·»åŠ å¤šä¸ªè½»æ‰«æ‰‹åŠ¿swipe.direction = UISwipeGestureRecognizerDirectionLeft;// æ·»åŠ æ‰‹åŠ¿[self.imageV addGestureRecognizer:swipe]; å¹³ç§»æ‰‹åŠ¿123456789101112131415UIPanGestureRecognizer *pan = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(pan:)];// æ·»åŠ æ‰‹åŠ¿[self.imageV addGestureRecognizer:pan];// å®ç°æ‰‹åŠ¿æ–¹æ³•// æ‰‹æŒ‡åœ¨å±å¹•ä¸Šç§»åŠ¨è¿›è°ƒç”¨- (void)pan:(UIPanGestureRecognizer *)pan{// è·å–å½“å‰æ‰‹æŒ‡ç§»åŠ¨çš„åç§»é‡CGPoint transP = [pan translationInView:self.imageV];NSLog(@&quot;%@&quot;, NSStringFromCGPoint(transP));// Makeå®ƒä¼šæ¸…ç©ºä¸Šä¸€æ¬¡çš„å½¢å˜self.imageV.transform = CGAffineTransformMakeTranslation(transP.x, transP.y);self.imageV.transform = CGAffineTransformTranslate(self.imageV.transform, transP.x, transP.y);// å¤ä½ï¼Œç›¸å¯¹äºä¸Šä¸€æ¬¡[pan setTranslation:CGPointZero inView:self.imageV];} æ—‹è½¬æ‰‹åŠ¿123456789101112131415// æ·»åŠ æ—‹è½¬æ‰‹åŠ¿UIRotationGestureRecognizer *rotation = [[UIRotationGestureRecognizer alloc] initWithTarget:self action:@selector(rotation:)];// è®¾ç½®ä»£ç†ï¼Œè®¾ç½®ä»£ç†çš„ç›®çš„å°±è®©å®ƒèƒ½å¤ŸåŒæ—¶æ”¯æŒæ—‹è½¬è·Ÿç¼©æ”¾rotation.delegate = self;// æ·»åŠ æ‰‹åŠ¿[self.imageV addGestureRecognizer:rotation];// å½“æ—‹è½¬æ—¶è°ƒç”¨- (void)rotation:(UIRotationGestureRecognizer *)rotation {// æ—‹è½¬ä¹Ÿæ˜¯ç›¸å¯¹äºä¸Šä¸€æ¬¡self.imageV.transform = CGAffineTransformRotate(self.imageV.transform, rotation.rotation);// è®¾ç½®ä»£ç†,è®¾ç½®ä»£ç†çš„ç›®çš„å°±è®©å®ƒèƒ½å¤ŸåŒæ—¶æ”¯æŒæ—‹è½¬è·Ÿç¼©æ”¾rotation.delegate = self;// ä¹Ÿè¦åšå¤ä½æ“ä½œrotation.rotation = 0;} ç¼©æ”¾æ‰‹åŠ¿1234567891011// æ·»åŠ ç¼©æ”¾æ‰‹åŠ¿UIPinchGestureRecognizer *pinch = [[UIPinchGestureRecognizer alloc] initWithTarget:self action:@selector(pinch:)];// æ·»åŠ æ‰‹åŠ¿[self.imageV addGestureRecognizer:pinch];// ç¼©æ”¾æ‰‹åŠ¿æ—¶è°ƒç”¨- (void)pinch:(UIPinchGestureRecognizer *)pinch {// å¹³ç§»ä¹Ÿæ˜¯ç›¸å¯¹äºä¸Šä¸€æ¬¡self.imageV.transform = CGAffineTransformScale(self.imageV.transform, pinch.scale, pinch.scale);// å¤ä½pinch.scale = 1;}","link":"/2016/09/01/my-ios-day12/"},{"title":"my-ios-day13","text":"è¿™ä¸ªæ˜¯16å¹´é‡æ–°å¤ä¹ çš„iOSç¬”è®°ï¼Œå½“æ—¶æ˜¯æ”¾åœ¨äº†gitbookï¼Œç°åœ¨è½¬ç§»è¿‡æ¥ï¼ day 13Quartz2D ç®€ä»‹ åŸºæœ¬çº¿æ¡ç»˜åˆ¶ å°å®ä¾‹ åº”ç”¨ ç®€ä»‹ Quartz2D ä¸€ä¸ªåŒæ—¶æ”¯æŒMacå’ŒiOSçš„äºŒç»´ç»˜å›¾å¼•æ“ ç”»åŸºæœ¬çº¿æ¡ã€ç»˜åˆ¶æ–‡å­—ã€å›¾ç‰‡ã€æˆªå›¾ã€è‡ªå®šä¹‰UIView å½“æ‰€éœ€æ§ä»¶æ ·å¼åŠå…¶å¤æ‚æ—¶ï¼Œå¯ä»¥å°†æ§ä»¶å†…éƒ¨çš„ç»“æ„ç»˜åˆ¶å‡ºæ¥ï¼Œå°±æ˜¯è‡ªå®šä¹‰æ§ä»¶ å›¾å½¢ä¸Šä¸‹æ–‡ ç”¨æ¥ä¿å­˜ç”¨æˆ·ç»˜åˆ¶çš„å†…å®¹çŠ¶æ€ï¼Œå¹¶å†³å®šç»˜åˆ¶åˆ°å“ªé‡Œ ç”¨æˆ·ä¼šæŠŠéœ€è¦ç»˜åˆ¶çš„å†…å®¹ä¿å­˜åˆ°å›¾åƒä¸Šä¸‹æ–‡ï¼Œæ ¹æ®é€‰æ‹©çš„å›¾å½¢ä¸Šä¸‹æ–‡ï¼Œæ˜¾ç¤ºåˆ°ä¸åŒçš„åœ°æ–¹ï¼Œå³è¾“å‡ºçš„ç›®æ ‡ä¸åŒ å¸¸è§ä¸Šä¸‹æ–‡Bitmap Graphics Context ä½å›¾ä¸Šä¸‹æ–‡PDF Graphics Context PDFä¸Šä¸‹æ–‡Window Graphics Context çª—å£ä¸Šä¸‹æ–‡Layer Graphics Context å›¾å±‚ä¸Šä¸‹æ–‡Printer Graphics Context æ‰“å°ä¸Šä¸‹æ–‡ è‡ªå®šä¹‰UIView åˆ›å»ºä¸€ä¸ªç»§æ‰¿UIViewçš„SLView å®ç°DrawRectæ–¹æ³• åœ¨DrawRectæ–¹æ³•ä¸­å–å¾—ä¸Viewç›¸å…³çš„ä¸Šä¸‹æ–‡ ç»˜åˆ¶è·¯å¾„ æŠŠæè¿°å¥½çš„è·¯å¾„ä¿å­˜åˆ°ä¸Šä¸‹æ–‡ä¸­ æŠŠä¸Šä¸‹æ–‡ä¸­çš„å†…å®¹æ¸²æŸ“åˆ°Viewä¸Š åŸºæœ¬çº¿æ¡ç»˜åˆ¶ DrawRectæ–¹æ³• åœ¨è¿™ç»™æ–¹æ³•ä¸­å®Œæˆç»˜å›¾æ“ä½œï¼Œåªæœ‰è¿™ä¸ªæ–¹æ³•æ‰èƒ½æ‹¿åˆ°ä¸Viewå…³è”çš„ä¸Šä¸‹æ–‡ å½“Viewæ˜¾ç¤ºæ—¶ï¼Œç³»ç»Ÿè‡ªåŠ¨è°ƒç”¨ ç”»ç›´çº¿ åŸºæœ¬è¿‡ç¨‹123456789101112// è·å–ä¸viewå…³è”çš„ä¸Šä¸‹æ–‡CGContextRef ctx = UIGraphicsGetCurrentContext();// ç»˜åˆ¶è·¯å¾„UIBezierPath *path = [UIBeizerPath beizerPath];// è®¾ç½®èµ·ç‚¹[path moveToPoint:CGPointMake(50, 50)];// æ·»åŠ ä¸€æ ¹çº¿åˆ°ä¸€ä¸ªç‚¹[path addLineToPoint:CGPointMake(200, 100)];// æŠŠè·¯å¾„æ·»åŠ åˆ°ä¸Šä¸‹æ–‡CGContextAddPath(ctx, path.CGPath);// åœ¨viewä¸Šæ¸²æŸ“CGContextStrokePath(ctx); å†æ·»åŠ ä¸€æ¡çº¿ ç¬¬ä¸€ç§ï¼šé‡æ–°è®¾ç½®èµ·ç‚¹ï¼Œæ·»åŠ ä¸€æ ¹çº¿åˆ°ä¸€ä¸ªç‚¹ï¼Œä¸€ä¸ªUIBezierPathè·¯å¾„å¯ä»¥æœ‰å¤šæ¡çº¿ ç¬¬äºŒç§ï¼šç›´æ¥åœ¨åŸæ¥çš„åŸºç¡€ä¸Šï¼ŒæŠŠä¸Šä¸€æ¡çº¿çš„ç»ˆç‚¹ä½œä¸ºèµ·ç‚¹ï¼Œç›´æ¥addLineToPoint: çº¿çš„å±æ€§è®¾ç½®è¿™ä¸ªå±æ€§ï¼Œå°±æ˜¯ä¿®æ”¹å›¾å½¢ä¸Šä¸‹æ–‡çš„çŠ¶æ€è®¾ç½®çº¿å®½ï¼šCGContextSetLineWidth(ctx, 20);è®¾ç½®çº¿æ®µçš„è¿æ¥æ ·å¼ï¼šCGContextSetLineJoin(ctx, kCGLineJoinRound);æ·»åŠ é¡¶è§’æ ·å¼ï¼šCGContextSetLineCap(ctx, kCGLineCapRound);è®¾ç½®çº¿çš„é¢œè‰²ï¼š[[UIColor redColor] setStroke]; ç”»æ›²çº¿ ç”»æ›²çº¿æ–¹æ³•æ¯”è¾ƒç‰¹æ®Šï¼Œéœ€è¦ä¸€ä¸ªæ§åˆ¶ç‚¹æ¥å†³å®šæ›²çº¿çš„å¼¯æ›²ç¨‹åº¦1234// å…ˆè®¾ç½®ä¸€ä¸ªæ›²çº¿çš„èµ·ç‚¹[path moveToPoint:CGPointMake(30, 125)];// å†æ·»åŠ åˆ°ä¸ªç‚¹åˆ°æ›²çº¿çš„ç»ˆç‚¹ï¼ŒåŒæ—¶è¿˜é¡»è¦ä¸€ä¸ªcontrolPoint(æ§åˆ¶ç‚¹å†³å®šæ›²çº¿å¼¯æ›²)[path addQuadCurveToPoint:CGPointMake(200, 120) controlPoint:CGPointMake(120, 40)]; ç”»çŸ©å½¢ï¼ˆåœ†è§’ï¼‰ ç”»çŸ©å½¢ç›´æ¥åˆ©ç”¨UIBezierPathç»™æˆ‘ä»¬å°è£…å¥½çš„è·¯å¾„æ–¹æ³•123// (x, y)ç‚¹å†³å®šäº†çŸ©å½¢å·¦ä¸Šè§’çš„ç‚¹åœ¨å“ªä¸ªä½ç½®// (width, height)æ˜¯çŸ©å½¢çš„å®½åº¦é«˜åº¦bezierPathWithOvalInRect:CGRectMake(x, y, width, height) åœ†è§’çŸ©å½¢çš„ç”»æ³•å¤šäº†ä¸€ä¸ªå‚æ•°cornerRadius123// cornerRadiuså®ƒæ˜¯çŸ©å½¢çš„åœ†è§’åŠå¾„.// é€šè¿‡åœ†è§’çŸ©å½¢å¯ä»¥ç”»ä¸€ä¸ªåœ†ï¼Œå½“çŸ©å½¢æ˜¯æ­£æ–¹å½¢çš„æ—¶å€™ï¼ŒæŠŠåœ†è§’åŠå¾„è®¾ä¸ºå®½åº¦çš„ä¸€åŠï¼Œå°±æ˜¯ä¸€ä¸ªåœ†bezierPathWithRoundedRect:CGRectMake(10, 100, 50, 50) cornerRadius:10 ç”»æ¤­åœ†ï¼ˆåœ†ï¼‰ æ–¹æ³•123// å‰ä¸¤ä¸ªå‚æ•°åˆ†åˆ«ä»£ç åœ†çš„åœ†å¿ƒï¼Œåé¢ä¸¤ä¸ªå‚æ•°åˆ†åˆ«ä»£è¡¨åœ†çš„å®½åº¦ä¸é«˜åº¦// å®½é«˜éƒ½ç›¸ç­‰æ—¶ï¼Œç”»çš„æ˜¯ä¸€ä¸ªæ­£åœ†ï¼Œä¸ç›¸ç­‰æ—¶ç”»çš„æ˜¯ä¸€ä¸ªæ¤­åœ†bezierPathWithOvalInRect:CGRectMake(10, 100, 50, 50) ç”»åœ†å¼§ é¦–å…ˆè¦ç¡®å®šåœ†æ‰èƒ½ç¡®å®šåœ†å¼§ï¼Œåœ†å­¤å°±æ˜¯åœ†çš„ä¸€éƒ¨åˆ†1234567// centerï¼šåœ†å¿ƒ// radiusï¼šåœ†çš„åŠå¾„// startAngleï¼šèµ·å§‹è§’åº¦// endAngleï¼šç»ˆç‚¹è§’åº¦// clockwiseï¼šYesé¡ºæ—¶é’ˆï¼ŒNoé€†æ—¶é’ˆ// æ³¨æ„ï¼šstartAngleè§’åº¦çš„ä½ç½®æ˜¯ä»åœ†çš„æœ€å³ä¾§ä¸º0åº¦UIBezierPath *path = [UIBezierPath bezierPathWithArcCenter:CGPointMake(125, 125) radius:100 startAngle:0 endAngle:M_PI * 2 clockwise:YES]; UIKitçš„å°è£… [path stroke]æ–¹æ³•ç›´æ¥ä½¿ç”¨ åº•å±‚ï¼šè·å–ä¸Šä¸‹æ–‡ï¼Œæ‹¼æ¥è·¯å¾„ï¼Œæ·»åŠ è·¯å¾„ï¼Œæ¸²æŸ“ å°å®ä¾‹ ä¸‹è½½è¿›åº¦æ¡ æ­å»ºç•Œé¢ æ‹–åŠ¨æ»‘å—æ—¶ï¼Œåœ†å¼§çš„å¤§å°ä¹Ÿæ”¹å˜ï¼Œè¿›åº¦æ•°å­—ä¹Ÿå®æ—¶å˜ï¼ˆæ˜¾ç¤º%éœ€è¦è½¬ä¹‰%%ï¼‰ ç›¸å…³ä»£ç 12345678910111213141516// ä»æœ€ä¸Šé¢ï¼ŒæŒ‰é¡ºæ—¶é’ˆç”»ï¼Œå®ƒçš„èµ·å§‹è§’åº¦æ˜¯-90åº¦ï¼Œç»“æŸè§’åº¦ä¹Ÿæ˜¯-90åº¦// èµ·å§‹è§’åº¦-90åº¦ï¼Œçœ‹ä½ ä¸‹è½½è¿›åº¦æ˜¯å¤šå°‘ï¼Œå‡å¦‚è¯´ä½ ä¸‹è½½è¿›åº¦æ˜¯100ï¼Œå°±æ˜¯1 * 360åº¦CGContextRef ctx = UIGraphicsGetCurrentContext();CGPoint center = CGPointMake(50, 50);CGFloat radius = rect.size.width * 0.5;CGFloat startA = -M_PI_2;CGFloat endA = -M_PI_2 + M_PI * 2 * progress;UIBezierPath *path = [UIBezierPath bezierPathWithArcCenter:center radius:radius startAngle:startA endAngle:endA clockwise:YES];è¦è·å¾—Progressçš„å€¼ï¼Œæ‹–çº¿æ‹¿åˆ°å®ƒçš„è¯¥å˜é‡è¦åœ¨å€¼æ”¹å˜çš„æ—¶å€™å°±è¦ä¼ è¿›æ¥ï¼Œå¹¶ä¸”æ¯æ¬¡å€¼æ”¹å˜çš„æ—¶å€™å°±è¦å»ç»˜åˆ¶åœ†å¼§é‡å†™`setProgress:`æ–¹æ³•- (void)setProgress:(CGFloat)progress{_progress = progress;// æ‰‹åŠ¨è°ƒç”¨drawRectæ–¹æ³•ï¼Œè®©å®ƒé‡æ–°ç»˜åˆ¶[self drawRect:self.bounds];} è¿è¡Œåä¸ç»˜åˆ¶ åŸå› ï¼šDrawRectæ–¹æ³•æ˜¯ä¸èƒ½æ‰‹åŠ¨è°ƒç”¨ï¼Œå› ä¸ºåœ¨DrawRectæ–¹æ³•ä¸­éœ€è¦è·å–è·ŸViewç›¸å…³è”çš„ä¸Šä¸‹æ–‡ã€‚ç³»ç»Ÿåœ¨è°ƒç”¨DrawRectæ–¹æ³•æ—¶ï¼Œä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªè·ŸViewç›¸å…³è”çš„ä¸Šä¸‹æ–‡ï¼Œå¹¶ä¸”ä¼ é€’ç»™å®ƒã€‚è‡ªå·±è°ƒç”¨ï¼Œæ²¡æœ‰ç»™DrawRectæ–¹æ³•ä¼ é€’ä¸Šä¸‹æ–‡ï¼Œæ‰€ä»¥åœ¨DrawRectæ–¹æ³•ä¸­æ²¡æœ‰ä¸Šä¸‹æ–‡ è§£å†³ï¼šæƒ³è¦é‡ç»˜ï¼Œè°ƒç”¨[self setNeedsDisplay]ï¼Œå‘Šè¯‰ç³»ç»Ÿé‡æ–°ç»˜åˆ¶Viewï¼Œç³»ç»Ÿå°±ä¼šè‡ªåŠ¨è°ƒç”¨DrawRectæ–¹æ³•ï¼Œè¿™æ ·å°±å¯ä»¥è·å¾—ä¸Šä¸‹æ–‡è¿›è¡Œç»˜åˆ¶ é¥¼çŠ¶å›¾ æ–¹æ³•1234567891011121314151617181920212223242526272829// è·å–ä¸Šä¸‹æ–‡CGContextRef ctx = UIGraphicsGetCurrentContext();// åŸºæœ¬æ•°æ®CGPoint center = CGPointMake(125, 125);CGFloat radius = 100;CGFloat startA = 0;CGFloat endA = 0;CGFloat angle = 25 / 100.0 * M_PI * 2;endA = startA + angle;// æ‹¼æ¥è·¯ç»UIBezierPath *path = [UIBezierPath bezierPathWithArcCenter:center radius:radius startAngle:startA endAngle:endA clockwise:YES];// æ·»åŠ ä¸€æ¡çº¿åˆ°åœ†å¿ƒ[path addLineToPoint:center];// æŠŠè·¯å¾„æ·»åŠ åˆ°ä¸Šä¸‹æ–‡CGContextAddPath(ctx, path.CGPath);// æŠŠä¸Šä¸‹æ–‡æ¸²æŸ“åˆ°ViewCGContextFillPath(ctx);// ç¬¬äºŒä¸ªæ‰‡å½¢startA = endA;angle = 25 / 100.0 * M_PI * 2;endA = startA + angle;path = [UIBezierPath bezierPathWithArcCenter:center radius:radius startAngle:startA endAngle:endA clockwise:YES];[path addLineToPoint:center];// æŠŠäºŒä¸ªè·¯å¾„æ·»åŠ åˆ°ä¸Šä¸‹æ–‡CGContextAddPath(ctx, path.CGPath);// æŠŠä¸Šä¸‹æ–‡æ¸²æŸ“åˆ°ViewCGContextFillPath(ctx);// æ·»åŠ ç¬¬äºŒä¸ªæ‰‡å½¢ä¹‹åï¼Œå‘ç°å®ƒä»¬çš„é¢œè‰²éƒ½ä¸€æ ·ï¼Œæƒ³è¦ä¿®æ”¹å®ƒçš„é¢œè‰²ï¼Œåœ¨ä¸‹é¢å†å†™ä¸€ä¸ª[[UIColor greenColor] set]; ç¬¬ä¸‰ä¸ªæ‰‡å½¢çš„åŸºæœ¬æ–¹æ³•ä¸ä¸Šé¢åŸºæœ¬ç›¸åŒï¼Œå‘ç°ä»£ç é‡å¤è¾ƒå¤šï¼Œè¿›è¡ŒæŠ½å– æŠ½å–å123456789101112131415161718192021222324252627// å‡è®¾ç»™ä¸€ç»„æ•°æ®NSArray datas = @[@25, @25, @50];CGPoint center = CGPointMake(125, 125);CGFloat radius = 100;CGFloat startA = 0;CGFloat angle = 0;CGFloat endA = 0;for (NSNumber *number in datas) {startA = endA;angle = number.intValue / 100.0 * M_PI * 2;endA = startA + angle;// æè¿°è·¯å¾„UIBezierPath *path = [UIBezierPath bezierPathWithArcCenter:center radius:radius startAngle:startA endAngle:endA clockwise:YES];// æ·»åŠ ç›´çº¿[path addLineToPoint:center];// éšæœºé¢œè‰²[[self randomColor] set];// é—­åˆ[path fill];}// éšæœºè¿”å›é¢œè‰²ï¼Œå¼€å‘æ—¶å¯å®šä¹‰ä¸ºå®- (UIColor *)randomColor {CGFloat r = arc4random_uniform(256)/ 255.0;CGFloat g = arc4random_uniform(256)/ 255.0;CGFloat b = arc4random_uniform(256)/ 255.0;return [UIColor colorWithRed:r green:g blue:b alpha:1];} UIKitç»˜å›¾ ç»˜åˆ¶æ–‡å­—12345// å…ˆåˆ›å»ºå¥½è¦ç”»çš„æ–‡å­—NSString *str = @&quot;Sleen&quot;;// drawAtPointï¼šè¦ç”»åˆ°å“ªä¸ªä½ç½®// withAttributesï¼šæ–‡æœ¬çš„æ ·å¼.[str drawAtPoint:CGPointZero withAttributes:nil]; å±æ€§è®¾ç½®12345678910111213141516// é€šè¿‡ç»˜åˆ¶æ–¹æ³•çš„æœ€åä¸€ä¸ªå±æ€§withAttributesæ¥è®¾ç½®æ–‡å­—å±æ€§// åˆ›å»ºä¸€ä¸ªå¯å˜çš„å­—å…¸,è®¾ç½®key,valueNSMutableDictionary *dict = [NSMueDictionary dictionary];// å­—ä½“dict[NSFontAttributeName] = [UIFont sys tOfSize:50];// é¢œè‰²dict[NSForegroundColorAttributeName] = [UIColor red ;// è®¾ç½®è¾¹æ¡†é¢œè‰²dict[NSStrokeColorAttributeName] = [UIColor redCo;dict[NSStrokeWidthAttributeName] = @1;// é˜´å½±NSShadow *shadow = [[NSShadow alloc] init];shadow.shadowOffset = CGSizeMake(10, 10);shadow.shadowColor = [UIColor greenColor];shadow.shadowBlurRadius = 3;dict[NSShadowAttributeName] = shadow; ç»˜åˆ¶å›¾ç‰‡ ç»˜åˆ¶å›¾ç‰‡åŒæ ·å¼€å§‹è¦å…ˆæŠŠå›¾ç‰‡ç´ æå¯¼å…¥ AtPointï¼šå‚æ•°è¯´æ˜å›¾ç‰‡è¦ç»˜åˆ¶åˆ°å“ªä¸ªä½ç½® é€šè¿‡è°ƒç”¨UIKitçš„æ–¹æ³•drawAtPoint:CGPointZeroæ–¹æ³•è¿›è¡Œç»˜åˆ¶ ä¸¤ä¸ªæ–¹æ³• æ–‡å­— drawAtPoint: ä¸èƒ½æ¢è¡Œ drawInRect: èƒ½å¤Ÿæ¢è¡Œ å›¾ç‰‡ drawAtPoint: æŒ‰ç…§å›¾ç‰‡å°ºå¯¸ç»˜åˆ¶ drawInRect: å›¾ç‰‡å°ºå¯¸ä¸Rectçš„å°ºå¯¸ä¸€æ · å¹³é“ºå›¾ç‰‡1[image drawAsPatternInRect:rect]; å¿«é€ŸçŸ©å½¢1UIRectFill(rect); è£å‰ª12// è¿™ä¸ªæ–¹æ³•å¿…é¡»è¦è®¾ç½®å¥½è£å‰ªåŒºåŸŸï¼Œæ‰èƒ½æœ‰è£å‰ªæ•ˆæœUIRectClip(CGRectMake(0, 0, 50, 50)); ä»¿UIImageView æ€è·¯ åˆ†æç³»ç»ŸUIImageViewçš„åŠŸèƒ½ åˆ›å»ºUIImageViewå¯¹è±¡ï¼Œè®¾ç½®frameï¼Œè®¾ç½®imageï¼Œæ·»åŠ åˆ°viewä¸Š åˆ›å»ºæ—¶å°±è®¾ç½®imageï¼Œframeä¸å›¾ç‰‡å°ºå¯¸ç›¸åŒ å®ç° æ–°å»ºä¸€ä¸ªUIViewï¼Œå¦‚SLImageView ç»™SLImageViewæ·»åŠ ä¸€ä¸ªUIImageå±æ€§ åœ¨DrawRectæ–¹æ³•ä¸­ç»˜åˆ¶å›¾ç‰‡åˆ°viewä¸Š é‡å†™UIImageçš„setæ–¹æ³•ï¼Œå®ç°åˆ‡æ¢å›¾ç‰‡ æä¾›- (instancetype)initWithImage:(UIImage *)image;æ–¹æ³• ä»£ç 1234567891011121314- (instancetype)initWithImage:(UIImage *)image {if (self = [super init]) {self.frame = CGRectMake(0, 0, image.size.width, image.size.height);_image = image;}return self;}- (void)setImage:(UIImage *)image {_image = image;[self setNeedsDisplay];}- (void)drawRect:(CGRect)rect {[_image drawInRect:rect];} é›ªèŠ± æ€è·¯ é¦–å…ˆç»˜åˆ¶ä¸€ä¸ªé›ªèŠ± åœ¨ViewåŠ è½½å®Œæ¯•æ·»åŠ ä¸€ä¸ªå®šæ—¶å™¨ åœ¨å®šæ—¶å™¨ä¸­è°ƒç”¨é‡ç»˜æ–¹æ³• åœ¨é‡ç»˜æ–¹æ³•ä¸­ä¸æ–­ä¿®æ”¹é›ªèŠ±çš„yå€¼ å½“yå€¼è¶…è¿‡å±å¹•ï¼Œå°±é‡è®¾ä¸º0 å®šæ—¶å™¨ NSTimeå’ŒCADisplayLink setNeedsDisplayæ–¹æ³•åº•å±‚ä¼šè°ƒç”¨DrawRectï¼Œä½†æ˜¯å®ƒä¸æ˜¯ç«‹é©¬å°±è¿›è¡Œé‡ç»˜ï¼Œå®ƒä»…ä»…æ˜¯è®¾ç½®äº†ä¸€ä¸ªé‡ç»˜æ ‡å¿—ï¼Œç­‰åˆ°ä¸‹ä¸€æ¬¡å±å¹•åˆ·æ–°çš„æ—¶å€™æ‰ä¼šè°ƒç”¨DrawRectæ–¹æ³• NSTimeçš„æ—¶é—´å¯èƒ½å’Œå±å¹•çš„åˆ·æ–°æ—¶é—´ä¸åŒ¹é…ï¼Œå°±ä¼šäº§ç”Ÿå»¶è¿Ÿï¼Œé€ æˆç•Œé¢å¡é¡¿ï¼ŒCADisplayLinkçš„æ—¶é—´æ­£å¥½ä¸å±å¹•åˆ·æ–°æ—¶é—´ç›¸åŒ ä½¿ç”¨CADisplayLinkæ·»åŠ å®šæ—¶å™¨123456// targetï¼šå“ªä¸ªå¯¹è±¡è¦ç›‘å¬æ–¹æ³•// selectorï¼šç›‘å¬çš„æ–¹æ³•åç§°CADisplayLink *link = [CADisplayLink displayLinkWithTarget:self selector:@selector(setNeedsDisplay)];// æƒ³è¦è®©CADisplayLinkå·¥ä½œï¼Œå¿…é¡»å¾—è¦æŠŠå®ƒæ·»åŠ åˆ°ä¸»è¿è¡Œå¾ªç¯// åªè¦æ·»åŠ åˆ°ä¸»è¿è¡Œå¾ªç¯ï¼Œè·Ÿæ¨¡å¼æ²¡æœ‰å…³ç³»[link addToRunLoop:[NSRunLoop mainRunLoop] forMode:NSDefaultRunLoopMode]; ä»£ç 12345678910111213- (void)awakeFromNib {CADisplayLink *link = [CADisplayLink displayLinkWithTarget:self selector:@selector(setNeedsDisplay)];[link addToRunLoop:[NSRunLoop mainRunLoop] forMode:NSDefaultRunLoopMode];}- (void)drawRect:(CGRect)rect {if (_snowY &gt; rect.size.height) {_snowY = 0;}UIImage *image = [UIImage imageNamed:@&quot;é›ªèŠ±&quot;];[image drawAtPoint:CGPointMake(0, _snowY)];_snowY += 10;} æ°´å° ç”¨å¤„ æ ‡æ˜å›¾ç‰‡æ¥æºï¼ˆå¾®åšï¼‰ é˜²æ­¢ç›—å›¾ï¼ˆæ·˜å®ï¼‰ æ€è·¯ å¼€å¯ä¸€ä¸ªå’ŒåŸå§‹å›¾ç‰‡ä¸€æ ·çš„å›¾ç‰‡ä¸Šä¸‹æ–‡ æŠŠåŸå§‹å›¾ç‰‡ç»˜åˆ¶åˆ°ä¸Šä¸‹æ–‡ å†æŠŠè¦æ·»åŠ çš„æ°´å°ï¼ˆæ–‡å­—ï¼Œlogoï¼‰ç­‰ç»˜åˆ¶åˆ°å›¾ç‰‡ä¸Šä¸‹æ–‡ æœ€åä»ä¸Šä¸‹æ–‡ä¸­å–å‡ºä¸€å¼ å›¾ç‰‡ å…³é—­ä¸Šä¸‹æ–‡ ä¸»è¦ä»£ç 123456789// å¼€å¯ä¸€ä¸ªå›¾ç‰‡ä¸Šä¸‹æ–‡?// sizeï¼šå¼€å¯å¤šå¤§çš„ä¸Šæ–‡// opaqueï¼šä¸é€æ˜åº¦// scaleï¼šç¼©æ”¾ä¸Šä¸‹æ–‡.UIGraphicsBeginImageContextWithOptions(image.size, YES, 0);// ä»å›¾ç‰‡ä¸Šä¸‹æ–‡å½“ä¸­ç”Ÿæˆä¸€å¼ å›¾ç‰‡UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();// å…³é—­ä¸Šä¸‹æ–‡UIGraphicsEndImageContext(); åœ†å½¢å¤´åƒï¼ˆè£å‰ªï¼‰ æ€è·¯ å¼€å¯ä¸€ä¸ªå›¾ç‰‡ä¸Šä¸‹æ–‡ ä¸Šä¸‹æ–‡çš„å¤§å°å’ŒåŸå§‹å›¾ç‰‡ä¿æŒä¸€æ ·ï¼Œä»¥å…å›¾ç‰‡è¢«æ‹‰ä¼¸ç¼©æ”¾ åœ¨ä¸Šä¸‹æ–‡çš„ä¸Šé¢æ·»åŠ ä¸€ä¸ªåœ†å½¢è£å‰ªåŒºåŸŸï¼Œåœ†å½¢è£å‰ªåŒºåŸŸçš„åŠå¾„å¤§å°å’Œå›¾ç‰‡çš„å®½åº¦ä¸€æ ·å¤§ æŠŠè¦è£å‰ªçš„å›¾ç‰‡ç»˜åˆ¶åˆ°å›¾ç‰‡ä¸Šä¸‹æ–‡å½“ä¸­ ä»ä¸Šä¸‹æ–‡å½“ä¸­å–å‡ºå›¾ç‰‡ å…³é—­ä¸Šä¸‹æ–‡ ä¸»è¦ä»£ç 1234// è®¾ç½®åœ†å½¢è·¯å¾„UIBezierPath *path = [UIBezierPath bezierPathWithOvalInRect:CGRectMake(0, 0, image.size.width, image.size.width)];// æŠŠä¸€ä¸ªè·¯å¾„è®¾ä¸ºè£å‰ªåŒºåŸŸ[path addClip]; æˆªå± æ€è·¯ å°†UIViewä¸Šçš„ä¸œè¥¿ä¿å­˜åˆ°å›¾ç‰‡ä¸Šä¸‹æ–‡ä¸­ï¼Œç”Ÿæˆä¸€å¼ æ–°å›¾ç‰‡ UIViewç¥çš„ä¸œè¥¿æ˜¯ä¸èƒ½ç›´æ¥ä¿å­˜çš„ï¼Œéœ€è¦çš„æ˜¯viewå†…éƒ¨çš„layerå±‚ è°ƒç”¨layerçš„renderInContext:æ–¹æ³• ä»£ç 12345678910// å¼€å¯ä¸€ä¸ªå›¾ç‰‡ä¸ŠUIGraphicsBeginImageContextWithOptions(self.view.bounds.size, NO, 0);// è·å–å½“å‰çš„ä¸Šä¸‹æ–‡CGContextRef ctx = UIGraphicsGetCurrentContext();// æŠŠæ§åˆ¶å™¨Viewçš„å†…å®¹ç»˜åˆ¶ä¸Šä¸‹æ–‡å½“ä¸­[self.view.layer renderInContext:ctx];// ä»ä¸Šä¸‹æ–‡å½“ä¸­å–å‡ºå›¾ç‰‡UIImage *newImage = UIGraptImageFromCurrentImageContext();// å…³é—­ä¸Šä¸‹æ–‡UIGraphicsEndImageContext(); å›¾ç‰‡æ“¦é™¤ æ€è·¯ ä¸¤å¼ ä¸åŒçš„å›¾ç‰‡ï¼Œä¸Šé¢ä¸€å¼ ï¼Œä¸‹é¢ä¸€å¼  æ·»åŠ æ‰‹åŠ¿ï¼Œæ‰‹æŒ‡ç§»åŠ¨æ“¦é™¤å›¾ç‰‡ ç¡®å®šæ“¦é™¤åŒºåŸŸå¤§å°å’Œä½ç½® ç”Ÿæˆæ–°çš„å›¾ç‰‡ï¼ˆæ“¦é™¤åŒºåŸŸé€æ˜ï¼‰ï¼Œå°±å¯ä»¥çœ‹åˆ°åé¢çš„å›¾ç‰‡ ä»£ç 123456789101112131415161718192021// ç¡®å®šæ“¦é™¤çš„èŒƒå›´CGFloat rectWH = 30;// è·å–æ‰‹æŒ‡çš„å½“å‰ç‚¹.curPCGPoint curP = [pan locationInView:pan.view];CGFloat x = curP.x - rectWH * 0.5;CGFloat y = curP.y - rectWH * 0.5;CGRect rect = CGRectMake(x, y,rectWH, rectWH);// å…ˆæŠŠå›¾ç‰‡ç»˜åˆ¶åˆ°ä¸Šä¸‹æ–‡.UIGraphicsBeginImageContextWithOptions(self.imageView.bounds.size, NO, 0);// è·å–å½“å‰çš„ä¸Šä¸‹æ–‡CGContextRef ctx = UIGraphicsGetCurrentContext();// æŠŠä¸Šé¢ä¸€å¼ å›¾ç‰‡ç»˜åˆ¶åˆ°ä¸Šä¸‹æ–‡.[self.imageView.layer renderInContext:ctx];// å†ç»˜ä¸Šä¸‹æ–‡å½“ä¸­å›¾ç‰‡è¿›è¡Œæ“¦é™¤.CGContextClearRect(ctx, rect);// ç”Ÿæˆä¸€å¼ æ–°å›¾ç‰‡UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();// å†æŠŠæ–°çš„å›¾ç‰‡ç»™é‡æ–°è´Ÿå€¼self.imageView.image = newImage;// å…³é—­ä¸Šä¸‹æ–‡.UIGraphicsEndImageContext(); å›¾ç‰‡æˆªå± æ€è·¯ æ‰‹æŒ‡åœ¨å±å¹•ä¸Šç§»åŠ¨çš„æ—¶å€™ï¼Œæ·»åŠ ä¸€ä¸ªåŠé€æ˜çš„view å¼€å¯ä¸€ä¸ªä¸Šä¸‹æ–‡æŠŠUIViewçš„farmeè®¾ç½®ä¸ºè£å‰ªåŒºåŸŸ æŠŠviewçš„layeræ˜¾ç¤ºçš„å†…å®¹ç»˜åˆ¶åˆ°ä¸Šä¸‹æ–‡å½“ä¸­ ç”Ÿæˆä¸€å¼ æ–°çš„å›¾ç‰‡åœ¨èµ‹å€¼ç»™UIImageView å…·ä½“å®ç° ç»™å›¾ç‰‡æ·»åŠ ä¸€ä¸ªæ‰‹åŠ¿ï¼Œç›‘å¬æ‰‹æŒ‡åœ¨å›¾ç‰‡ä¸Šçš„æ‹–åŠ¨ï¼ˆæ³¨æ„UIImageViewé»˜è®¤ä¸èƒ½æ¥æ”¶äº‹ä»¶ï¼‰ ç›‘å¬æ‰‹æŒ‡ç§»åŠ¨ï¼Œæ‰‹æŒ‡ç§»åŠ¨æ—¶æ·»åŠ ä¸€ä¸ªUIViewï¼Œx,yå°±æ˜¯èµ·å§‹ç‚¹ï¼Œæ‰‹æŒ‡å¼€å§‹çš„ç‚¹ï¼Œwidthæ˜¯xè½´çš„åç§»é‡ï¼Œheightæ˜¯yè½´åç§»é‡ è®¡ç®—ä»£ç 123CGFloat offSetX = curP.x - self.beginP.x;CGFloat offsetY = curP.y - self.beginP.y;CGRect rect = CGRectMake(self.beginP.x, self.beginP.y, offSetX, offsetY); UIViewåªéœ€è¦æ·»åŠ ä¸€æ¬¡ï¼Œç»™UIViewè®¾ç½®æˆæ‡’åŠ è½½ï¼Œä¿è¯åªæœ‰ä¸€ä¸ªUIViewï¼Œåœ¨ç§»åŠ¨æ—¶ä¿®æ”¹frameå°±å¥½ å¼€å¯ä¸€ä¸ªå›¾ç‰‡ä¸Šä¸‹æ–‡ï¼Œå›¾ç‰‡ä¸Šä¸‹æ–‡çš„å¤§å°ä¸ºä½åŸå§‹å›¾ç‰‡å°ºå¯¸ï¼Œæ˜¯æ•´ä¸ªå›¾ç‰‡å¯ä»¥æˆªå–1234// åˆ©ç”¨UIBezierPathè®¾ç½®ä¸€ä¸ªçŸ©å½¢çš„è£å‰ªåŒºåŸŸ// ç„¶åæŠŠè¿™ä¸ªè·¯å¾„è®¾ç½®ä¸ºè£å‰ªåŒºåŸŸ// æŠŠè·¯å¾„è®¾ä¸ºè£å‰ªåŒºåŸŸçš„æ–¹æ³•ä¸º[path addClip]; æŠŠå›¾ç‰‡ç»˜åˆ¶åˆ°ä¸Šä¸‹æ–‡ä¸­12345// ç”±äºæ˜¯ä¸€ä¸ªUIImageViewä¸Šé¢çš„å›¾ç‰‡ï¼Œæ‰€ä»¥ä¹Ÿå¾—éœ€è¦æ¸²æŸ“åˆ°ä¸Šä¸‹æ–‡å½“ä¸­// è¦å…ˆè·å–å½“å‰çš„ä¸Šä¸‹æ–‡// æŠŠUIImageViewçš„layeræ¸²æŸ“åˆ°å½“å‰çš„ä¸Šä¸‹æ–‡å½“ä¸­CGContextRef ctx = UIGraphicsGetCurrentContext();[self.imageV.layer renderInContext:ctx]; å–å‡ºæ–°çš„å›¾ç‰‡ï¼Œé‡æ–°èµ‹å€¼å›¾ç‰‡12UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();self.imageV.image = newImage; å…³é—­ä¸Šä¸‹æ–‡,ç§»é™¤ä¸Šé¢åŠé€æ˜çš„UIView12UIGraphicsEndImageContext();[self.coverView removeFromSuperview]; æ‰‹åŠ¿è§£é” åˆ†æç•Œé¢ å½“æ‰‹æŒ‡åœ¨ä¸Šé¢ç§»åŠ¨æ—¶ï¼Œç§»åŠ¨åˆ°æŒ‰é’®çš„ä¸€å®šèŒƒå›´ä¸­ï¼Œä¼šæŠŠæŒ‰é’®å˜æˆé€‰ä¸­çŠ¶æ€ å¹¶æŠŠç¬¬ä¸€ä¸ªé€‰ä¸­çš„æŒ‰é’®ä¸­å¿ƒä½œä¸ºä¸€æ¡çº¿çš„èµ·ç‚¹ï¼Œæ‰‹æŒ‡ç§»åˆ°ä¸‹ä¸€ä¸ªæŒ‰é’®å°±ä¼šæ·»åŠ ä¸€æ¡çº¿ æ‰‹æŒ‡æ¾å¼€åå°±ä¼šå–æ¶ˆé€‰ä¸­ï¼Œæ¸…ç©ºæ‰€æœ‰çº¿ æ€è·¯ å…ˆåˆ¤æ–­å½“å‰æ‰‹æŒ‡åœ¨ä¸åœ¨å½“å‰æŒ‰é’®ä¸Šï¼Œå¦‚æœåœ¨æŒ‰é’®ä¸Šï¼Œå°±æŠŠæŒ‰é’®è®¾ç½®æˆé€‰ä¸­çŠ¶æ€ æŠŠå½“å‰é€‰ä¸­çš„æŒ‰é’®æ·»åŠ åˆ°ä¸€ä¸ªæ•°ç»„å½“ä¸­ï¼Œå¦‚æœå½“å‰æŒ‰é’®å·²ç»æ˜¯é€‰ä¸­çŠ¶æ€ï¼Œå°±ä¸éœ€è¦å†æ·»åŠ åˆ°æ•°ç»„ä¸­äº† æ¯æ¬¡ç§»åŠ¨éƒ½è®©å®ƒé‡ç»˜ï¼Œåœ¨ç»˜å›¾ä¸­ï¼Œéå†æ‰€æœ‰é€‰ä¸­æŒ‰é’® åˆ¤æ–­æ•°ç»„å½“ä¸­çš„ç¬¬ä¸€ä¸ªæ— ç´ ï¼Œå¦‚æœæ˜¯ç¬¬ä¸€ä¸ªï¼Œé‚£ä¹ˆå°±æŠŠå®ƒè®¾ä¸ºè·¯å¾„çš„èµ·ç‚¹ï¼Œå…¶å®ƒéƒ½åœ¨æ·»åŠ ä¸€æ ¹çº¿åˆ°æŒ‰é’®çš„åœ†å¿ƒ å¦‚æœå½“å‰ç‚¹ä¸åœ¨æŒ‰é’®ä¸Šï¼Œé‚£ä¹ˆå°±è®°å½•ä½å½“å‰æ‰‹æŒ‡æ‰€åœ¨çš„ç‚¹ï¼Œç›´æ¥ä»èµ·ç‚¹æ·»åŠ ä¸€æ ¹çº¿åˆ°å½“å‰æ‰‹æŒ‡æ‰€åœ¨çš„ç‚¹ å…·ä½“å®ç° æ­å»ºç•Œé¢ç•Œé¢æ˜¯ä¸€ä¸ªä¹å®«æ ¼çš„å¸ƒå±€.ä¹å®«æ ¼å®ç°æ€è·¯.å…ˆç¡®å®šæœ‰å¤šå°‘åˆ— cloum = 3;è®¡ç®—å‡ºæ¯åˆ—ä¹‹é—´çš„è·ç¦»è®¡ç®—ä¸º: CGFloat margin = (å½“å‰Viewçš„å®½åº¦ - åˆ—æ•° * æŒ‰é’®çš„å®½åº¦) / æ€»åˆ—æ•° + 1æ¯ä¸€åˆ—çš„Xçš„å€¼ä¸å®ƒå½“å‰æ‰€åœ¨çš„è¡Œæœ‰å…³å½“å‰æ‰€åœ¨çš„åˆ—ä¸º:curColum = i % cloumæ¯ä¸€è¡Œçš„Yçš„å€¼ä¸å®ƒå½“å‰æ‰€åœ¨çš„è¡Œæœ‰å…³.å½“å‰æ‰€åœ¨çš„è¡Œä¸º:curRow = i / cloumæ¯ä¸€ä¸ªæŒ‰é’®çš„Xå€¼ä¸º, margin + å½“å‰æ‰€åœ¨çš„åˆ— * (æŒ‰é’®çš„å®½åº¦ + æ¯ä¸ªæŒ‰é’®ä¹‹é—´çš„é—´è·)æ¯ä¸€ä¸ªæŒ‰é’®çš„Yå€¼ä¸º å½“å‰æ‰€åœ¨çš„è¡Œ * (æŒ‰é’®çš„å®½åº¦ + æ¯ä¸ªæŒ‰é’®ä¹‹é—´çš„è·ç¦»)å…·ä½“ä»£ç 1234567891011121314151617// æ€»åˆ—æ•°int colum = 3;// æ¯ä¸ªæŒ‰é’®çš„å®½é«˜CGFloat btnWH = 74;// æ¯ä¸ªæŒ‰é’®ä¹‹é—´çš„è·ç¦»CGFloat margin = (self.bounds.size.width - colum * btnWH) (colum + 1);for(int i = 0; i &lt; self.subviews.count; i++ ){// å½“å‰æ‰€åœ¨çš„åˆ—int curColum = i % colum;// å½“å‰æ‰€åœ¨çš„è¡Œint curRow = i / colum;CGFloat x = margin + (btnWH + margin) * curColum;CGFloat y = (btnWH + margin) * curRow;// å–å‡ºæ‰€æœ‰çš„å­æ§ä»¶UIButton *btn = self.subviews[i];btn.frame = CGRectMake(x, y, btnWH, btnWH);} ç›‘å¬æ‰‹æŒ‡åœ¨ä¸Šé¢çš„æ“ä½œåœ¨æ‰‹æŒ‡ç‚¹å‡»å±å¹•æ—¶ï¼Œå¦‚æœå½“å‰æ‰‹æŒ‡æ‰€åœ¨çš„ç‚¹åœ¨æŒ‰é’®ä¸Šï¼Œé‚£å°±è®©æŒ‰é’®å˜æˆé€‰ä¸­çŠ¶æ€åˆ¤æ–­ä¸€ä¸ªç‚¹åœ¨ä¸åœ¨ä¸€ä¸ªåŒºåŸŸï¼Œåœ¨è¿”å›YESï¼Œä¸åœ¨NOCGRectContainsPoint(btn.frame, point)å½“æ‰‹æŒ‡ç‚¹å‡»å±å¹•çš„æ—¶å€™ï¼Œéœ€è¦åšçš„äº‹æƒ…ï¼š(1) è·å–å½“å‰æ‰‹æŒ‡æ‰€åœ¨çš„ç‚¹UITouch *touch = [touches anyObject];GPoint curP = [touch locationInView:self];(2) åˆ¤æ–­å½“å‰ç‚¹åœ¨ä¸åœ¨æŒ‰é’®ä¸Šfor (UIButton *btn in self.subviews) {if (CGRectContainsPoint(btn.frame, point)) {return btn;}}(3) å¦‚æœå½“å‰ç‚¹åœ¨æŒ‰é’®ä¸Šï¼Œå¹¶ä¸”å½“å‰æŒ‰é’®ä¸æ˜¯é€‰ä¸­çš„çŠ¶æ€é‚£ä¹ˆæŠŠå½“å‰çš„æŒ‰é’®æˆä¸ºé€‰ä¸­çŠ¶æ€å¹¶ä¸”æŠŠå½“å‰çš„æŒ‰é’®æ·»åŠ åˆ°æ•°ç»„å½“ä¸­ åœ¨ç»˜å›¾æ–¹æ³•ä¸­åˆ›å»ºè·¯å¾„éå†å‡ºæœ‰çš„é€‰ä¸­æŒ‰é’®ï¼Œå¦‚æœæ˜¯ç¬¬ä¸€ä¸ªæŒ‰é’®ï¼ŒæŠŠç¬¬ä¸€ä¸ªæŒ‰é’®çš„ä¸­å¿ƒç‚¹å½“åšæ˜¯è·¯å¾„çš„èµ·ç‚¹å…¶å®ƒæŒ‰é’®éƒ½ç›´æ¥æ·»åŠ ä¸€æ¡çº¿ï¼Œåˆ°è¯¥æŒ‰é’®çš„ä¸­å¿ƒéå†å®Œæ‰€æœ‰çš„é€‰ä¸­æŒ‰é’®åæœ€åæ·»åŠ ä¸€æ¡çº¿åˆ°å½“å‰æ‰‹æŒ‡æ‰€åœ¨çš„ç‚¹ ç”»æ¿ åˆ†æé¡¶éƒ¨æ˜¯ä¸€ä¸ªå·¥å…·æ ã€‚æœ‰æ¸…å±ã€æ’¤é”€ã€æ©¡çš®æ“¦ã€ç…§ç‰‡åŠŸèƒ½ï¼Œæœ€å³éƒ¨æ˜¯ä¸€ä¸ªä¿å­˜æŒ‰é’®ä¸­é—´éƒ¨åˆ†ä¸ºç”»æ¿åŒºåŸŸæœ€ä¸‹éƒ¨æ‹–åŠ¨æ»‘å—èƒ½å¤Ÿæ”¹å˜ç”»ç¬”çš„ç²—çº¿ï¼Œå¯ä»¥é€‰é¢œè‰² ç•Œé¢æ­å»ºæœ€ä¸Šéƒ¨ä¸ºä¸€ä¸ªToolBarï¼Œå¾€ToolBaræ‹–äº›itemï¼Œä½¿ç”¨ToolBarçš„å¥½å¤„ï¼Œé‡Œé¢æŒ‰é’®çš„ä½ç½®ä¸éœ€è¦æˆ‘ä»¬å†å»ç®¡ç†ç»™æœ€ä¸Šéƒ¨çš„å·¥å…·æ åšè‡ªåŠ¨å¸ƒå±€ï¼Œç¦»çˆ¶æ§ä»¶å·¦ã€ä¸Šã€å³éƒ½ä¸º0ï¼Œä¿å­˜å·¥å…·æ¡çš„é«˜åº¦ä¸å˜æ‹–ä¸€ä¸ªUIViewå½“å‰ä¸‹éƒ¨çš„Viewï¼Œåœ¨ä¸‹éƒ¨çš„Viewå½“ä¸­æ‹–ç´¯ä¸‰ä¸ªæŒ‰é’®ï¼Œè®¾ç½®æ¯ä¸€ä¸ªæŒ‰é’®çš„èƒŒæ™¯é¢œè‰²ï¼Œç‚¹å‡»æ¯ä¸€æŒ‰é’®æ—¶åŠåˆ°è®¾ç½®ç”»ç¬”çš„é¢œè‰²å…¶ä¸­ä¸‰ä¸ªæŒ‰é’®åªé—´çš„é—´è·å§‹ç»ˆä¿å­˜ç­‰ï¼Œæ¯ä¸€ä¸ªæŒ‰é’®çš„å®½åº¦å’Œé«˜åº¦éƒ½ç›¸ç­‰ï¼Œé€šè¿‡è‡ªåŠ¨å¸ƒå±€çš„æ–¹å¼åŠåˆ°å…ˆæŠŠè¿™ä¸ªUIViewçš„è‡ªåŠ¨å¸ƒå±€è®¾å¥½ï¼Œè®©å…¶å·¦ã€å³ã€ä¸‹éƒ½æ˜¯0ï¼Œé«˜åº¦å›ºå®šè‡ªåŠ¨å¸ƒå±€è®¾ç½®ä¸ºï¼šç¬¬ä¸€ä¸ªæŒ‰é’®é«˜åº¦å›ºå®šï¼Œä¸å·¦ã€å³ã€ä¸‹éƒ½ä¿æŒ20é—´è·ç¬¬äºŒä¸ªæŒ‰é’®ä¸ç¬¬ä¸€ä¸ªæŒ‰é’®ï¼Œé«˜åº¦ã€å®½åº¦ã€centerYéƒ½ç›¸ç­‰ï¼Œä¸å³è¾¹æœ‰20é—´è·ç¬¬ä¸‰ä¸ªæŒ‰é’®ä¹Ÿæ˜¯ç¬¬ä¸€ä¸ªæŒ‰é’®çš„é«˜åº¦ã€å®½åº¦ã€centerYéƒ½ç›¸ç­‰ï¼Œä¸å³è¾¹æœ‰20é—´è·ï¼Œæœ€å³è¾¹ä¹Ÿä¿æŒ20é—´è·æœ€åæ˜¯ä¸­é—´çš„ç”»æ¿åŒºåŸŸï¼Œç”»æ¿åŒºåŸŸåªéœ€è¦è·ç¦»ä¸Šã€ä¸‹ã€å·¦ã€å³éƒ½ä¸º0å³å¯ ç”»æ¿åŠŸèƒ½ ç›‘å¬æ‰‹æŒ‡åœ¨å±å¹•ä¸Šçš„çŠ¶æ€ï¼Œåœ¨å¼€å§‹ç‚¹å‡»å±å¹•çš„æ—¶å€™ï¼Œåˆ›å»ºä¸€ä¸ªè·¯å¾„ï¼Œå¹¶æŠŠæ‰‹æŒ‡å½“å‰çš„ç‚¹è®¾ä¸ºè·¯å¾„çš„èµ·ç‚¹ è®¾ç½®ä¸€ä¸ªæˆå‘˜å±æ€§è®°å½•å½“å‰ç»˜åˆ¶çš„è·¯å¾„ï¼Œå¹¶æŠŠå½“å‰çš„è·¯å¾„æ·»åŠ åˆ°è·¯å¾„æ•°ç»„å½“ä¸­ å½“æ‰‹æŒ‡åœ¨ç§»åŠ¨çš„æ—¶å€™ï¼Œç”¨å½“å‰çš„è·¯å¾„æ·»åŠ ä¸€æ ¹çº¿åˆ°å½“å‰æ‰‹æŒ‡æ‰€åœ¨çš„ç‚¹ï¼Œç„¶åè¿›è¡Œé‡ç»˜ åœ¨ç»˜å›¾æ–¹æ³•å½“ä¸­ï¼Œå–å‡ºæ‰€æœ‰çš„è·¯å¾„ï¼ŒæŠŠæ‰€æœ‰çš„è·¯å¾„ç»™ç»˜åˆ¶å‡ºæ¥ å°å·¥å…· æ¸…å±åˆ é™¤æ‰€æœ‰è·¯å¾„ï¼Œè¿›è¡Œé‡ç»˜ æ’¤é”€åˆ é™¤æœ€åä¸€æ¡è·¯å¾„ï¼Œè¿›è¡Œé‡ç»˜ çº¿å®½ç”±äºæ¯ä¸€æ¡çº¿å®½åº¦éƒ½ä¸æ ·ï¼Œæ‰€ä»¥è¦åœ¨å¼€å§‹åˆ›å»ºè·¯å¾„çš„æ—¶ï¼Œå°±è¦æ·»åŠ ä¸€ä¸ªæˆå‘˜å±æ€§ï¼Œè®¾ç½®ä¸€ä¸ªé»˜è®¤å€¼åœ¨æŠŠå½“å‰è·¯å¾„æ·»åŠ åˆ°è·¯å¾„æ•°ç»„ä¹‹å‰ï¼Œè®¾ç½®å¥½çº¿çš„å®½åº¦ï¼Œç„¶åé‡å†™çº¿å®½å±æ€§æ–¹æ³•ä¸‹ä¸€æ¬¡å†åˆ›å»ºè·¯å¾„æ—¶ï¼Œçº¿çš„å®½åº¦å°±æ˜¯å½“å‰è®¾ç½®çš„å®½åº¦ é¢œè‰²æ¯ä¸€æ¡çº¿çš„é¢œè‰²ä¹Ÿä¸ä¸€æ ·ï¼Œä¹Ÿéœ€è¦ä¸€ä¸ªå±æ€§è®°å½•æ¯ä¸€æ¡è·¯å¾„çš„é¢œè‰²UIBezierPathæ²¡æœ‰ç»™æˆ‘ä»¬ç›´æ¥æä¾›è®¾ç½®é¢œè‰²çš„å±æ€§ï¼Œéœ€è¦è‡ªå®šä¹‰ä¸€ä¸ªUIBezierPathï¼Œåˆ›å»ºä¸€ä¸ªMyBezierPathç±»ï¼Œç»§æ‰¿UIBezierPathï¼Œåœ¨è¯¥ç±»ä¸­æ·»åŠ ä¸€ä¸ªé¢œè‰²çš„å±æ€§åœ¨åˆ›å»ºè·¯å¾„çš„æ—¶å€™ï¼Œç›´æ¥ä½¿ç”¨è‡ªå·±å®šä¹‰çš„è·¯å¾„ï¼Œè®¾ç½®è·¯å¾„é»˜è®¤çš„ä¸€ä¸ªé¢œè‰²ï¼Œæ–¹æ³•ç»™è®¾ç½®çº¿å®½ä¸€æ ·åœ¨ç»˜å›¾è¿‡ç¨‹ä¸­ï¼Œå–å‡ºæ¥çš„éƒ½æ˜¯MyBezierPathï¼ŒæŠŠMyBezierPathçš„é¢œè‰²è®¾ç½®ä¸ºè·¯å¾„çš„é¢œè‰² æ©¡çš®æ“¦åŠŸèƒ½è·¯å¾„çš„é¢œè‰²è®¾ä¸ºç™½è‰² ä¿å­˜åŠŸèƒ½ å¼€å¯ä¸€ä¸ªè·ŸViewç›¸åŒå¤§å°çš„å›¾ç‰‡ä¸Šä¸‹æ–‡ æŠŠViewçš„layerä¸Šé¢å†…å®¹æ¸²æŸ“åˆ°ä¸Šä¸‹æ–‡å½“ä¸­ ç”Ÿæˆä¸€å¼ å›¾ç‰‡ï¼ŒæŠŠå›¾ç‰‡ä¿å­˜åˆ°ä¸Šä¸‹æ–‡12345// ç¬¬ä¸€ä¸ªå‚æ•°ï¼šè¦å†™å…¥åˆ°ç›¸å†Œçš„å›¾ç‰‡// ç¬¬äºŒä¸ªå‚æ•°ï¼šå“ªä¸ªå¯¹è±¡åšå¬å†™å…¥å®Œæˆæ—¶çš„çŠ¶æ€// ç¬¬ä¸‰ä¸ªå‚æ•°ï¼šå›¾ç‰‡ä¿å­˜å®Œæˆæ—¶è°ƒç”¨çš„æ–¹æ³•UIImageWriteToSavedPhotosAlbum(newImage, self, @selector(image:didFinishSavingWithError: contextInfo:), nil);// æ³¨æ„:å›¾ç‰‡ä¿å­˜å®Œæˆæ—¶è°ƒç”¨çš„æ–¹æ³•å¿…é¡»å¾—æ˜¯image:didFinishSavingWithError: contextInfo: é€‰æ‹©å›¾ç‰‡ å¼¹å‡ºç³»ç»Ÿç›¸å†Œ123456789// ä½¿ç”¨UIImagePickerControlleræ§ä»¶å™¨Modalå‡ºå®ƒæ¥.UIImagePickerController *pick = [[UIImagePickerController alloc] init];// è®¾ç½®ç…§ç‰‡çš„æ¥æºpick.sourceType = UIImagePickerControllerSourceTypeSavedPhotosAlbum;// è®¾ç½®ä»£ç ï¼Œç›‘å¬é€‰æ‹©å›¾ç‰‡ï¼ŒUIImagePickerControlleræ¯”è¾ƒç‰¹æ®Šï¼Œå®ƒéœ€è¦éµå®ˆä¸¤ä¸ªåè®®&lt;UINavigationControllerDelegate, UIImagePickerControllerDelegate&gt;pick.delegate = self;// modalå‡ºæ§ä»¶å™¨[self presentViewController:pick animated:YES completion:nil];// æ³¨æ„æ²¡æœ‰å®ç°ä»£ç æ–¹æ³•æ—¶ï¼Œé€‰æ‹©ä¸€å¼ ç…§ç‰‡ä¼šè‡ªåŠ¨çš„dismissæ‰ç›¸å†Œæ§åˆ¶å™¨ï¼Œä½†æ˜¯è®¾ç½®ä»£ç åï¼Œå°±å¾—è¦è‡ªå·±å»dismissäº† å®ç°ä»£ç†ï¼Œå–å¾—ç…§ç‰‡12345// é€‰æ‹©çš„ç…§ç‰‡å°±åœ¨è¿™ä¸ªæ–¹æ³•ç¬¬äºŒä¸ªå‚æ•°å½“ä¸­, å®ƒæ˜¯ä¸€ä¸ªå­—å…¸- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(nonnull NSDictionary&lt;NSString *,id&gt; *)info {// è·å–å½“å‰é€‰ä¸­çš„å›¾ç‰‡,é€šè¿‡UIImagePickerControllerOriginalImageå°±èƒ½è·å–UIImage *image = info[UIImagePickerControllerOriginalImage];} å¾—åˆ°ç…§ç‰‡çš„å¸ƒå±€è·å–å®Œå›¾ç‰‡åï¼Œå›¾ç‰‡æ˜¯èƒ½å¤Ÿç¼©æ”¾ã€å¹³ç§»çš„ï¼Œå› æ­¤è·å–å®Œå›¾ç‰‡åï¼Œæ˜¯åœ¨ç”»æ¿æ¿Viewä¸Šé¢æ·»åŠ äº†ä¸€ä¸ªUIViewï¼Œåªæœ‰UIViewæ‰èƒ½åšå¹³ç§»ã€ç¼©æ”¾ã€æ—‹è½¬ç­‰æ“ä½œå› æ­¤åšæ³•ä¸ºï¼Œåœ¨å›¾ç‰‡é€‰æ‹©å®Œæ¯•åï¼Œæ·»åŠ ä¸€ä¸ªå’Œç”»æ¿Viewç›¸åŒå¤§å°çš„UIViewï¼Œè¿™ä¸ªUIViewå†…éƒ¨æœ‰ä¸€ä¸ªUIImageViewå¯¹è¿™ä¸ªUIImageViewè¿›è¡Œä¸€äº›æ‰‹åŠ¿æ“ä½œï¼Œæ“ä½œå®Œæˆæ—¶ï¼Œé•¿æŒ‰å›¾ç‰‡ï¼ŒæŠŠViewçš„å†…å®¹æˆªå±ï¼Œç”Ÿæˆä¸€å¼ å›¾ç‰‡ï¼ŒæŠŠæ–°ç”Ÿæˆçš„å›¾ç‰‡ç»˜åˆ¶åˆ°ç”»æ¿ä¸Šé¢ ç»˜åˆ¶å›¾ç‰‡åœ¨ç”»æ¿Viewå½“ä¸­æä¾›ä¸€ä¸ªUImageå±æ€§ï¼Œä¾›å¤–ç•Œä¼ é€’ï¼Œé‡å†™å±æ€§çš„setæ–¹æ³•ï¼Œæ¯æ¬¡ä¼ é€’å›¾ç‰‡æ—¶è¿›è¡Œé‡ç»˜ç”»å›¾ç‰‡ä¹Ÿæœ‰æœ‰åºçš„ï¼Œæ‰€ä»¥è¦æŠŠå›¾ç‰‡ä¹Ÿæ·»åŠ åˆ°è·¯å¾„æ•°ç»„å½“ä¸­åœ¨ç»˜å›¾ç‰‡è¿‡è¿‡ç¨‹å½“ä¸­ï¼Œå¦‚æœå‘ç°å–å‡ºæ¥çš„æ˜¯ä¸€ä¸ªå›¾ç‰‡ç±»å‹ï¼Œé‚£å°±ç›´æ¥å›¾ç‰‡ç»˜åˆ¶åˆ°ä¸Šä¸‹æ–‡å½“ä¸­å…·ä½“ä»£ç 1234567891011- (void)drawRect:(CGRect)rect{for (DrawPath *path in self.pathArray) {if ([path isKindOfClass:[UIImage class]]) {UIImage *image = (UIImage *)path;[image drawInRect:rect];}else {[path.lineColor set];[path stroke];}}}","link":"/2016/09/01/my-ios-day13/"},{"title":"my-ios-day14","text":"è¿™ä¸ªæ˜¯16å¹´é‡æ–°å¤ä¹ çš„iOSç¬”è®°ï¼Œå½“æ—¶æ˜¯æ”¾åœ¨äº†gitbookï¼Œç°åœ¨è½¬ç§»è¿‡æ¥ï¼ day 14æ ¸å¿ƒåŠ¨ç”» CALayer æ ¸å¿ƒåŠ¨ç”» CALayer ç®€ä»‹CALayeræœ‰ç§°å®ƒä¸ºâ€œå±‚â€æ¯ä¸€ä¸ªUIViewå†…éƒ¨éƒ½æœ‰ä¸€ä¸ªlayerè¿™æ ·çš„å±æ€§UIViewä¹‹æ‰€ä»¥å¯ä»¥æ˜¾ç¤ºï¼Œå°±æ˜¯å› ä¸ºå®ƒé‡Œé¢æœ‰è¿™æ ·ä¸€ä¸ªå±‚ï¼Œæ‰å…·æœ‰æ˜¾ç¤ºåŠŸèƒ½æˆ‘ä»¬é€šè¿‡æ“ä½œCALayerå¯¹è±¡ï¼Œå¯ä»¥æ–¹ä¾¿çš„è°ƒæ•´UIViewçš„å¤–è§‚å±æ€§å¯ä»¥ç»™UIViewè®¾ç½®é˜´å½±ã€åœ†è§’ã€è¾¹æ¡†ç­‰ æ“ä½œlayer è®¾ç½®é˜´å½±123456// é»˜è®¤å›¾å±‚æ˜¯æœ‰é˜´å½±çš„ï¼Œåªä¸è¿‡æ˜¯é€æ˜çš„_redView.layer.shadowOPacity = 1;// è®¾ç½®é˜´å½±çš„åœ†è§’_redView.layer.shadowRadius = 10;// è®¾ç½®é˜´å½±çš„é¢œè‰²_redView.layer.shadowColor = [UIColor blueColor].CGColor; è®¾ç½®è¾¹æ¡†123// è®¾ç½®å›¾å±‚è¾¹æ¡†ï¼Œåœ¨å›¾å±‚ä¸­ä½¿ç”¨CoreGraphicsçš„CGColoerRef_redView.layer.borderColor = [UIColor whiteColor].CGColor;_redView.layer.borderWidth = 2; è®¾ç½®åœ†è§’12// å›¾å±‚çš„åœ†è§’åŠå¾„ï¼Œè‹¥ä¸ºå®½åº¦ä¸€èˆ¬å°±æ˜¯ä¸€ä¸ªåœ†_redView.layer.cornerRadius = 50; layeræ”¹å˜UIImageView è®¾ç½®è¾¹æ¡†12_imageView.layer.borderWidth = 2;_imageView.layer.borderColor = [UIColor whiteColor].CGColor; å›¾ç‰‡åœ†è§’1234// åŠå¾„_imageView.layer.cornerRadius = 50;// è£å‰ª_imageView.layer.masksToBounds = YES; æ³¨æ„ï¼šUIImageViewå½“ä¸­Imageå¹¶ä¸æ˜¯ç›´æ¥æ·»åŠ åœ¨å›¾å±‚ä¸Šï¼Œè€Œæ˜¯åœ¨layerçš„contentsé‡Œã€‚è®¾ç½®çš„å±æ€§åªæ˜¯ä½œç”¨åœ¨å±‚ä¸Šï¼Œå¦‚æœä¸è£å‰ªçš„è¯æ˜¯ä¸èƒ½çœ‹è§å›¾ç‰‡çš„åœ†è§’çš„ layerçš„CATransform3Då±æ€§ åªæœ‰æ—‹è½¬çš„æ—¶å€™åœ¨ä¼šçœ‹åˆ°3Dæ•ˆæœ1234567// x, y, zåˆ†åˆ«ä»£è¡¨x, y, zè½´// æ—‹è½¬CATransform3DMakeRotation(M_PI, 1, 0, 0);// å¹³ç§»CATransform3DMakeTranslation(x, y, z);// ç¼©æ”¾CATransform3DMakeScale(x, y, z); å¯ä»¥é€šè¿‡KVCçš„æ–¹å¼è¿›è¡Œè®¾ç½®å±æ€§ CATransform3DMake*çš„å€¼æ˜¯ä¸€ä¸ªç»“æ„ä½“ï¼Œè¦æŠŠç»“æ„ä½“è½¬æ¢æˆå¯¹è±¡12NSValue *value = [NSValue valueWithCATransform3D:CATransform3DMakeRotation(M_PI, 1, 0, 0)];[_imageView.layer setValue:value forKeyPath:@&quot;transform.scale&quot;]; ä½•æ—¶ä½¿ç”¨å½“éœ€è¦è¿›è¡Œå¿«é€Ÿçš„ç¼©æ”¾ã€å¹³ç§»ã€æ—‹è½¬çš„æ—¶å€™ä½¿ç”¨KVCå¦‚[_imageView.layer setValue:@0.5 forKeyPath:@â€transform.scaleâ€];åé¢çš„forKeyPathä¸æ˜¯ä¹±å†™çš„ï¼Œè‹¹æœæ–‡æ¡£æœ‰ç»™å‡º è‡ªå®šä¹‰UILayer ä¸åœ¨å®šä¹‰UIViewç›¸ä¼¼12345CALayer *layer = [CALayer layer];layer.frame = CGRectMake(50, 50, 100, 100);layer.backgroundColor = [UIColor redColor].CGColor;// ç»™Layeræ·»åŠ å›¾ç‰‡layer.contents = (id)[UIImage imageNamed:@&quot;xixi&quot;].CGImage; å…³äºCALayerä¸ºä»€ä¹ˆè¦ä½¿ç”¨CGImageRefï¼ŒCGColorRefï¼Ÿä¿è¯äº†å¯ç§»æ¤æ€§ï¼ŒQuartzCoreä¸èƒ½ä½¿ç”¨UIImageã€UIColorï¼Œåªèƒ½ç”¨CGImageRefï¼ŒCGColorRefUIViewå’ŒCALayeréƒ½èƒ½å¤Ÿæ˜¾ç¤ºä¸œè¥¿ï¼Œè¯¥æ€æ ·é€‰æ‹©?å¯¹æ¯”CALayerï¼ŒUIViewå¤šäº†ä¸€ä¸ªäº‹ä»¶å¤„ç†çš„åŠŸèƒ½ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒCALayerä¸èƒ½å¤„ç†ç”¨æˆ·çš„è§¦æ‘¸äº‹ä»¶ï¼Œè€ŒUIViewå¯ä»¥å¦‚æœæ˜¾ç¤ºå‡ºæ¥çš„ä¸œè¥¿éœ€è¦è·Ÿç”¨æˆ·è¿›è¡Œäº¤äº’çš„è¯ï¼Œç”¨UIViewï¼›å¦‚æœä¸éœ€è¦è·Ÿç”¨æˆ·è¿›è¡Œäº¤äº’ï¼Œç”¨UIViewæˆ–è€…CALayeréƒ½å¯ä»¥ï¼ŒCALayerçš„æ€§èƒ½ä¼šé«˜ä¸€äº›ï¼Œå› ä¸ºå®ƒå°‘äº†äº‹ä»¶å¤„ç†çš„åŠŸèƒ½ï¼Œæ›´åŠ è½»é‡çº§ positionå’ŒanchorPointå±æ€§ æ˜¯Layerçš„ä¸¤ä¸ªå±æ€§ å¯ä»¥é€šè¿‡è¿™ä¸¤ä¸ªå±æ€§ä¿®æ”¹æ§ä»¶çš„ä½ç½®ï¼Œä»–ä»¬ä¸¤ä¸ªæ˜¯é…åˆä½¿ç”¨çš„posrtionï¼šå®ƒæ˜¯ç”¨æ¥è®¾ç½®å½“å‰æ§ä»¶åœ¨çˆ¶æ§ä»¶ä¸­çš„ä½ç½®çš„å®ƒçš„åæ ‡åŸç‚¹æ˜¯çˆ¶æ§ä»¶çš„å·¦ä¸Šè§’ä¸º(0, 0)ç‚¹anchorPointï¼šå®ƒæ˜¯å†³å®šCALayerèº«ä¸Šå“ªä¸€ä¸ªç‚¹ä¼šåœ¨postionå±æ€§æ‰€æŒ‡çš„ä½ç½®ï¼Œå®ƒä»¥å½“å‰å›¾å±‚å·¦ä¸Šè§’ä¸ºåŸç‚¹(0, 0)å–å€¼èŒƒå›´0~1ï¼Œé»˜è®¤åœ¨ä¸­é—´ä½ç½®(0.5, 0.5)ä½ç½®åˆç§°é”šç‚¹ï¼Œå°±æ˜¯æŠŠé”šç‚¹å®šåœ¨positionçš„ä½ç½® ä¸¤è€…ç»“åˆä½¿ç”¨ è®¾ç½®å®ƒçš„positionç‚¹ layerèº«ä¸Šçš„anchorPointä¼šè‡ªåŠ¨å®šåœ¨positionæ‰€åœ¨çš„ä½ç½® éšå¼åŠ¨ç”» ä¸¤ä¸ªæ¦‚å¿µ æ ¹å±‚ï¼šUIViewå†…éƒ¨å…³è”çš„å“ªä¸ªlayerç§°ä¸ºæ ¹å±‚ éæ ¹å±‚ï¼šè‡ªå·±æ‰‹åŠ¨åˆ›å»ºçš„layerå°±æ˜¯éæ ¹å±‚ åœ¨å¯¹éæ ¹å±‚ä¿®æ”¹æ—¶ï¼Œä¼šè‡ªåŠ¨äº§ç”Ÿä¸€äº›åŠ¨ç”»æ•ˆæœï¼Œä¸ºéšå¼åŠ¨ç”» å–æ¶ˆéšå¼åŠ¨ç”» äº‹åŠ¡ï¼šå¾ˆå¤šæ“ä½œç»‘å®šåœ¨ä¸€èµ·ï¼Œè¿™äº›æ“ä½œæŒ‰é¡ºåºæ‰§è¡Œï¼Œ åŠ¨ç”»åº•å±‚å°±æ˜¯åŒ…è£…æˆäº‹åŠ¡è¿›è¡Œçš„12345678// å¼€å¯äº‹åŠ¡[CATransaction begin];// è®¾ç½®äº‹åŠ¡æ²¡æœ‰åŠ¨ç”»[CATransaction setDisableActions:YES];// è®¾ç½®åŠ¨ç”»æ‰§è¡Œçš„æ—¶é•¿[CATransaction setAnimationDuration:2];// æäº¤äº‹åŠ¡[CATransaction commit]; æ ¸å¿ƒåŠ¨ç”» ç®€ä»‹ Core Animationï¼Œéå¸¸å¼ºå¤§çš„åŠ¨ç”»å¤„ç†APIã€‚é€šè¿‡å¾ˆå°‘çš„ä»£ç å®ŒæˆåŠŸèƒ½å¾ˆç‚«çš„æ•ˆæœ åŒæ—¶å¯ä»¥åº”ç”¨äºMac OS Xå’ŒiOS æ‰€æœ‰åŠ¨ç”»éƒ½æ˜¯åœ¨åå°æ‰§è¡Œï¼Œä¸ä¼šé˜»å¡ä¸»çº¿ç¨‹ ç›´æ¥ä½œç”¨äºCALayerå±‚ï¼ŒéUIView ä½¿ç”¨æ­¥éª¤ é¦–å…ˆè¦æœ‰ä¸€ä¸ªlayer åˆå§‹åŒ–ä¸€ä¸ªCAAnimationå¯¹è±¡ï¼Œå¹¶è®¾ç½®ç›¸åº”çš„å±æ€§ é€šè¿‡è°ƒç”¨CALayerçš„addAnimation: forKey:æ–¹æ³•ï¼Œæ·»åŠ CAAnimationå¯¹è±¡åˆ°CALayerä¸­ï¼Œ è°ƒç”¨CALayerçš„removeAnimation: forKey:æ–¹æ³•ï¼Œåœæ­¢CALayerä¸­çš„åŠ¨ç”» å±æ€§è¯´æ˜ 12345678durationï¼šåŠ¨ç”»çš„æŒç»­æ—¶é—´repeatCountï¼šé‡å¤æ¬¡æ•°ï¼Œæ— é™å¾ªç¯å¯ä»¥è®¾ç½®HUGE_VALFæˆ–è€…MAXFLOATrepeatDurationï¼šé‡å¤æ—¶é—´removedOnCompletionï¼šé»˜è®¤ä¸ºYESï¼Œä»£è¡¨åŠ¨ç”»æ‰§è¡Œå®Œæ¯•åå°±ä»å›¾å±‚ä¸Š ç§»é™¤ï¼Œå›¾å½¢ä¼šæ¢å¤åˆ°åŠ¨ç”»æ‰§è¡Œå‰çš„çŠ¶æ€ã€‚å¦‚æœæƒ³è®©å›¾å±‚ä¿æŒæ˜¾ç¤ºåŠ¨ç”» æ‰§è¡Œåçš„çŠ¶æ€ï¼Œé‚£å°±è®¾ç½®ä¸ºNOï¼Œä¸è¿‡è¿˜è¦è®¾ç½®fillModeä¸ºkCAFillMod eForwardsfillModeï¼šå†³å®šå½“å‰å¯¹è±¡åœ¨éactiveæ—¶é—´æ®µçš„è¡Œä¸ºã€‚æ¯”å¦‚åŠ¨ç”»å¼€å§‹ä¹‹ å‰æˆ–è€…åŠ¨ç”»ç»“æŸä¹‹åbeginTimeï¼šå¯ä»¥ç”¨æ¥è®¾ç½®åŠ¨ç”»å»¶è¿Ÿæ‰§è¡Œæ—¶é—´ï¼Œè‹¥æƒ³å»¶è¿Ÿ2sï¼Œå°±è®¾ç½®ä¸º CACurrentMediaTime()+2ï¼ŒCACurrentMediaTime()ä¸ºå›¾å±‚çš„å½“å‰æ—¶é—´timingFunctionï¼šé€Ÿåº¦æ§åˆ¶å‡½æ•°ï¼Œæ§åˆ¶åŠ¨ç”»è¿è¡Œçš„èŠ‚å¥delegateï¼šåŠ¨ç”»ä»£ç† åŠ¨ç”»å¡«å……æ¨¡å¼ fillModeå±æ€§å€¼ï¼ˆè¦æƒ³fillModeæœ‰æ•ˆï¼Œæœ€å¥½è®¾ç½®removedOnCompletion = NOï¼‰ 1234kCAFillModeRemoved è¿™ä¸ªæ˜¯é»˜è®¤å€¼ï¼Œä¹Ÿå°±æ˜¯è¯´å½“åŠ¨ç”»å¼€å§‹å‰å’ŒåŠ¨ç”»ç»“æŸåï¼ŒåŠ¨ç”»å¯¹layeréƒ½æ²¡æœ‰å½±å“ï¼ŒåŠ¨ç”»ç»“æŸåï¼Œlayerä¼šæ¢å¤åˆ°ä¹‹å‰çš„çŠ¶æ€kCAFillModeForwards å½“åŠ¨ç”»ç»“æŸåï¼Œlayerä¼šä¸€ç›´ä¿æŒç€åŠ¨ç”»æœ€åçš„çŠ¶æ€kCAFillModeBackwards åœ¨åŠ¨ç”»å¼€å§‹å‰ï¼Œåªéœ€è¦å°†åŠ¨ç”»åŠ å…¥äº†ä¸€ä¸ªlayerï¼Œlayerä¾¿ç«‹å³è¿›å…¥åŠ¨ç”»çš„åˆå§‹çŠ¶æ€å¹¶ç­‰å¾…åŠ¨ç”»å¼€å§‹ã€‚kCAFillModeBoth è¿™ä¸ªå…¶å®å°±æ˜¯ä¸Šé¢ä¸¤ä¸ªçš„åˆæˆ.åŠ¨ç”»åŠ å…¥åå¼€å§‹ä¹‹å‰ï¼Œlayerä¾¿å¤„äºåŠ¨ç”»åˆå§‹çŠ¶æ€ï¼ŒåŠ¨ç”»ç»“æŸålayerä¿æŒåŠ¨ç”»æœ€åçš„çŠ¶æ€ é€Ÿåº¦æ§åˆ¶å‡½æ•° é€Ÿåº¦æ§åˆ¶å‡½æ•°CAMediaTimingFunction 1234kCAMediaTimingFunctionLinearï¼ˆçº¿æ€§ï¼‰ï¼šåŒ€é€Ÿï¼Œç»™ä½ ä¸€ä¸ªç›¸å¯¹é™æ€çš„æ„Ÿè§‰kCAMediaTimingFunctionEaseInï¼ˆæ¸è¿›ï¼‰ï¼šåŠ¨ç”»ç¼“æ…¢è¿›å…¥ï¼Œç„¶ååŠ é€Ÿç¦»å¼€kCAMediaTimingFunctionEaseOutï¼ˆæ¸å‡ºï¼‰ï¼šåŠ¨ç”»å…¨é€Ÿè¿›å…¥ï¼Œç„¶åå‡é€Ÿçš„åˆ°è¾¾ç›®çš„åœ°kCAMediaTimingFunctionEaseInEaseOutï¼ˆæ¸è¿›æ¸å‡ºï¼‰ï¼šåŠ¨ç”»ç¼“æ…¢çš„è¿›å…¥ï¼Œä¸­é—´åŠ é€Ÿï¼Œç„¶åå‡é€Ÿçš„åˆ°è¾¾ç›®çš„åœ°ã€‚è¿™ä¸ªæ˜¯é»˜è®¤çš„åŠ¨ç”»è¡Œä¸ºã€‚ åŠ¨ç”»çš„ä»£ç† CAAnimationåœ¨åˆ†ç±»ä¸­å®šä¹‰äº†ä»£ç†æ–¹æ³• 123456@interface NSObject (CAAnimationDelegate)// åŠ¨ç”»å¼€å§‹çš„æ—¶å€™è°ƒç”¨- (void)animationDidStart:(CAAnimation *)anim;// åŠ¨ç”»å®Œæˆï¼Œç§»é™¤æ—¶è°ƒç”¨- (void)animationDidStop:(CAAnimation *)anim finished:(BOOL)flag;@end åŠ¨ç”»çš„æš‚åœå’Œæ¢å¤ æš‚åœ 1234567- (void)pauseLayer:(CALayer *)layer {CFTimeInterval pausedTime = [layer convertTime:CACurrentMediaTime() fromLayer:nil];// è®©CALayerçš„æ—¶é—´åœæ­¢èµ°åŠ¨layer.speed = 0.0;// è®©CALayerçš„æ—¶é—´åœç•™åœ¨pausedTimeè¿™ä¸ªæ—¶åˆ»layer.timeOffset = pausedTime;} æ¢å¤ 12345678910111213- (void)resumeLayer:(CALayer *)layer {CFTimeInterval pausedTime = layer.timeOffset;// 1. è®©CALayerçš„æ—¶é—´ç»§ç»­è¡Œèµ°layer.speed = 1.0;// 2. å–æ¶ˆä¸Šæ¬¡è®°å½•çš„åœç•™æ—¶åˆ»layer.timeOffset = 0.0;// 3. å–æ¶ˆä¸Šæ¬¡è®¾ç½®çš„æ—¶é—´layer.beginTime = 0.0;// 4. è®¡ç®—æš‚åœçš„æ—¶é—´(è¿™é‡Œä¹Ÿå¯ä»¥ç”¨CACurrentMediaTime()-pausedTime)CFTimeInterval timeSincePause = [layer convertTime:CACurrentMediaTime() fromLayer:nil] - pausedTime;// 5. è®¾ç½®ç›¸å¯¹äºçˆ¶åæ ‡ç³»çš„å¼€å§‹æ—¶é—´(å¾€åé€€timeSincePause)layer.beginTime = timeSincePause;} åŸºç¡€åŠ¨ç”»CABasicAnimation CAPropertyAnimationçš„å­ç±» å±æ€§è¯´æ˜ 12fromValueï¼škeyPathç›¸åº”å±æ€§çš„åˆå§‹å€¼toValueï¼škeyPathç›¸åº”å±æ€§çš„ç»“æŸå€¼ è¿‡ç¨‹ éšç€åŠ¨ç”»çš„è¿›è¡Œï¼Œåœ¨é•¿åº¦ä¸ºdurationçš„æŒç»­æ—¶é—´å†…ï¼ŒkeyPathç›¸åº”å±æ€§çš„å€¼ä»fromValueæ¸æ¸åœ°å˜ä¸ºtoValue keyPathå†…å®¹æ˜¯CALayerçš„å¯åŠ¨ç”»Animatableå±æ€§ å¦‚æœfillMode=kCAFillModeForwardsåŒæ—¶removedOnComletion=NOï¼Œé‚£ä¹ˆåœ¨åŠ¨ç”»æ‰§è¡Œå®Œæ¯•åï¼Œå›¾å±‚ä¼šä¿æŒæ˜¾ç¤ºåŠ¨ç”»æ‰§è¡Œåçš„çŠ¶æ€ã€‚ä½†åœ¨å®è´¨ä¸Šï¼Œå›¾å±‚çš„å±æ€§å€¼è¿˜æ˜¯åŠ¨ç”»æ‰§è¡Œå‰çš„åˆå§‹å€¼ï¼Œå¹¶æ²¡æœ‰çœŸæ­£è¢«æ”¹å˜ã€‚ å…³é”®å¸§åŠ¨ç”»CAKeyframeAnimation CAPropertyAnimationçš„å­ç±» åŒºåˆ«ï¼š CABasicAnimationåªèƒ½ä»ä¸€ä¸ªæ•°å€¼ï¼ˆfromValueï¼‰å˜åˆ°å¦ä¸€ä¸ªæ•°å€¼ï¼ˆtoValueï¼‰ CAKeyframeAnimationä¼šä½¿ç”¨ä¸€ä¸ªNSArrayä¿å­˜è¿™äº›æ•°å€¼ å±æ€§è¯´æ˜ 123valuesï¼šä¸Šè¿°çš„NSArrayå¯¹è±¡ã€‚é‡Œé¢çš„å…ƒç´ ç§°ä¸ºâ€œå…³é”®å¸§â€(keyframe)ã€‚åŠ¨ç”»å¯¹è±¡ä¼šåœ¨æŒ‡å®šçš„æ—¶é—´ï¼ˆdurationï¼‰å†…ï¼Œä¾æ¬¡æ˜¾ç¤ºvaluesæ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå…³é”®å¸§pathï¼šå¯ä»¥è®¾ç½®ä¸€ä¸ªCGPathRefã€CGMutablePathRefï¼Œè®©å›¾å±‚æŒ‰ç…§è·¯å¾„è½¨è¿¹ç§»åŠ¨ã€‚pathåªå¯¹CALayerçš„anchorPointå’Œpositionèµ·ä½œç”¨ã€‚å¦‚æœè®¾ç½®äº†pathï¼Œé‚£ä¹ˆvalueså°†è¢«å¿½ç•¥keyTimesï¼šå¯ä»¥ä¸ºå¯¹åº”çš„å…³é”®å¸§æŒ‡å®šå¯¹åº”çš„æ—¶é—´ç‚¹ï¼Œå…¶å–å€¼èŒƒå›´ä¸º0åˆ°1.0ï¼ŒkeyTimesä¸­çš„æ¯ä¸€ä¸ªæ—¶é—´å€¼éƒ½å¯¹åº”valuesä¸­çš„æ¯ä¸€å¸§ã€‚å¦‚æœæ²¡æœ‰è®¾ç½®keyTimesï¼Œå„ä¸ªå…³é”®å¸§çš„æ—¶é—´æ˜¯å¹³åˆ†çš„ ç»„åŠ¨ç”»CAAnimationGroup CAAnimationçš„å­ç±» å¯ä»¥ä¿å­˜ä¸€ç»„åŠ¨ç”»å¯¹è±¡ï¼Œå°†CAAnimationGroupå¯¹è±¡åŠ å…¥å±‚åï¼Œç»„ä¸­æ‰€æœ‰åŠ¨ç”»å¯¹è±¡å¯ä»¥åŒæ—¶å¹¶å‘è¿è¡Œ å±æ€§è¯´æ˜ 12animationsï¼šç”¨æ¥ä¿å­˜ä¸€ç»„åŠ¨ç”»å¯¹è±¡çš„NSArrayé»˜è®¤æƒ…å†µä¸‹ï¼Œä¸€ç»„åŠ¨ç”»å¯¹è±¡æ˜¯åŒæ—¶è¿è¡Œçš„ï¼Œä¹Ÿå¯ä»¥é€šè¿‡è®¾ç½®åŠ¨ç”»å¯¹è±¡çš„beginTimeå±æ€§æ¥æ›´æ”¹åŠ¨ç”»çš„å¼€å§‹æ—¶é—´ è½¬åœºåŠ¨ç”»CATransition CAAnimationçš„å­ç±» èƒ½å¤Ÿä¸ºå±‚æä¾›ç§»å‡ºå±å¹•å’Œç§»å…¥å±å¹•çš„åŠ¨ç”»æ•ˆæœã€‚iOSæ¯”Mac OS Xçš„è½¬åœºåŠ¨ç”»æ•ˆæœå°‘ä¸€ç‚¹ å±æ€§è¯´æ˜ 1234typeï¼šåŠ¨ç”»è¿‡æ¸¡ç±»å‹subtypeï¼šåŠ¨ç”»è¿‡æ¸¡æ–¹å‘startProgressï¼šåŠ¨ç”»èµ·ç‚¹(åœ¨æ•´ä½“åŠ¨ç”»çš„ç™¾åˆ†æ¯”)endProgressï¼šåŠ¨ç”»ç»ˆç‚¹(åœ¨æ•´ä½“åŠ¨ç”»çš„ç™¾åˆ†æ¯”) åº”ç”¨ 1234567891011121314151617/*** UIViewå•è§†å›¾è½¬åœºåŠ¨ç”»å‡½æ•°* durationï¼šåŠ¨ç”»çš„æŒç»­æ—¶é—´* viewï¼šéœ€è¦è¿›è¡Œè½¬åœºåŠ¨ç”»çš„è§†å›¾* optionsï¼šè½¬åœºåŠ¨ç”»çš„ç±»å‹* animationsï¼šå°†æ”¹å˜è§†å›¾å±æ€§çš„ä»£ç æ”¾åœ¨è¿™ä¸ªblockä¸­* completionï¼šåŠ¨ç”»ç»“æŸåï¼Œä¼šè‡ªåŠ¨è°ƒç”¨è¿™ä¸ªblock*/+ (void)transitionWithView:(UIView *)view duration:(NSTimeInterval)duration options:(UIViewAnimationOptions)options animations:(void (^)(void))animations completion:(void (^)(BOOL finished))completion;/*** UIViewåŒè§†å›¾è½¬åœºåŠ¨ç”»å‡½æ•°* durationï¼šåŠ¨ç”»çš„æŒç»­æ—¶é—´* optionsï¼šè½¬åœºåŠ¨ç”»çš„ç±»å‹* animationsï¼šå°†æ”¹å˜è§†å›¾å±æ€§çš„ä»£ç æ”¾åœ¨è¿™ä¸ªblockä¸­* completionï¼šåŠ¨ç”»ç»“æŸåï¼Œä¼šè‡ªåŠ¨è°ƒç”¨è¿™ä¸ªblock*/+ (void)transitionFromView:(UIView *)fromView toView:(UIView *)toView duration:(NSTimeInterval)duration options:(UIViewAnimationOptions)options completion:(void (^)(BOOL finished))completion; å°å®ä¾‹ é’Ÿè¡¨æ•ˆæœ åˆ†æç•Œé¢ä¸Šæ—¶é’ˆã€åˆ†é’ˆã€ç§’é’ˆä¸éœ€è¦ä¸ç”¨æˆ·è¿›è¡Œäº¤äº’ï¼Œæ‰€ä»¥éƒ½å¯ä»¥ä½¿ç”¨layeræ–¹å¼æ¥åšè¡¨é’ˆæ˜¯æ ¹æ®å½“å‰çš„æ—¶é—´ï¼Œç»•ç€è¡¨ç›˜çš„ä¸­å¿ƒç‚¹è¿›è¡Œæ—‹è½¬æ— è®ºæ˜¯æ—‹è½¬ï¼Œç¼©æ”¾å®ƒéƒ½æ˜¯ç»•ç€é”šç‚¹è¿›è¡Œçš„è¦æƒ³è®©æ—¶é’ˆã€åˆ†é’ˆã€ç§°é’ˆæ˜¾ç¤ºçš„ä¸­é—´ï¼Œè¿˜è¦ç»•ç€ä¸­å¿ƒç‚¹è¿›è¡Œæ—‹è½¬ï¼Œé‚£å°±è¦è®¾ç½®å®ƒçš„positionå’ŒanchorPointä¸¤ä¸ªå±æ€§. å®ç° ç§’é’ˆ12345678// åˆ›å»ºç§’é’ˆCALayer *layer = [CALayer layer];_secLayer = layer;layer.bounds = CGRectMake(0, 0, 1, 80);layer.anchorPoint = CGPointMake(0.5, 1);layer.position = CGPake(_clockView.bounds.size.width * 0.5, _clew.bounds.size.height * 0.5);layer.backgroundColor = [UIColor redColor].CGColor;[_clockView.layer addSublayer:layer]; 123456789101112131415161718192021è®©ç§’é’ˆæ—‹è½¬ï¼Œæ‰€ä»¥è¦è®¡ç®—å½“å‰çš„æ—‹è½¬åº¦æ˜¯å¤šå°‘?å½“å‰çš„æ—‹è½¬è§’åº¦ä¸ºï¼šå½“å‰çš„æ—¶é—´ * æ¯ç§’æ—‹è½¬å¤šå°‘åº¦è®¡ç®—æ¯ä¸€ç§’æ—‹è½¬å¤šå°‘åº¦60 ç§’è½¬ä¸€åœˆ360åº¦360 é™¤ä»¥60å°±æ˜¯æ¯ä¸€ç§’è½¬å¤šå°‘åº¦ï¼Œæ¯ç§’è½¬6åº¦è·å–å½“å‰çš„æ—¶é—´åˆ›å»ºæ—¥å†ç±»NSCalendar *calendar = [NSCalendar currentCalendar];æŠŠæ—¥å†ç±»è½¬æ¢æˆä¸€ä¸ªæ—¥æœŸç»„ä»¶æ—¥æœŸç»„ä»¶ï¼ˆå¹´ã€æœˆã€æ—¥ã€æ—¶ã€åˆ†ã€ç§’ï¼‰component:æ—¥æœŸç»„ä»¶æœ‰å“ªäº›ä¸œè¥¿ç»„æˆ,ä»–æ˜¯ä¸€ä¸ªæšä¸¾,é‡Œé¢æœ‰å¹´æœˆæ—¥æ—¶åˆ†ç§’fromDate:å½“å‰çš„æ—¥æœŸNSDateComponents *cmp = [calendar components:NSCalendarUnitSecond fromDate:[NSDate date]];æˆ‘ä»¬çš„ç§’å°±æ˜¯ä¿å­˜åœ¨æ—¥æœŸç»„ä»¶é‡Œé¢ï¼Œå®ƒé‡Œé¢æä¾›äº†å¾ˆå¤šgetæ–¹æ³•ã€‚NSInteger second = cmp.second;é‚£ä¹ˆå½“å‰ç§’é’ˆæ—‹è½¬çš„è§’åº¦å°±æ˜¯å½“å‰çš„ç§’æ•°ä¹˜ä»¥æ¯ç§’è½¬å¤šå°‘åº¦econd * perSecAè¿˜å¾—è¦æŠŠè§’åº¦è½¬æ¢æˆå¼§åº¦å› ä¸ºä¸‹é¢åˆ†é’ˆï¼Œæ—¶é’ˆä¹Ÿå¾—è¦ç”¨åˆ°ï¼Œå°±æŠŠå®ƒæŠ½å‡ºä¸€ä¸ªé€Ÿå‚æ•°çš„å®ã€‚#define angle2Rad(angle) ((angle) / 180.0 * M_PI) 123456789101112131415161718192021// è®©å®ƒæ¯éš”ä¸€ç§’æ—‹è½¬ä¸€æ¬¡.æ‰€ä»¥æ·»åŠ ä¸€ä¸ªå®šæ—¶å™¨.// æ¯ä¸ªä¸€ç§’å°±è°ƒç”¨,æ—‹è½¬ç§’é’ˆ- (void)timeChange {// è·å–å½“å‰çš„ç§’æ•°// åˆ›å»ºæ—¥å†ç±»NSCalendar *calendar = [NSCalendar currentCalendar];// æŠŠæ—¥å†ç±»è½¬æ¢æˆä¸€ä¸ªæ—¥æœŸç»„ä»¶// æ—¥æœŸç»„ä»¶(å¹´ã€æœˆã€æ—¥ã€æ—¶ã€åˆ†ã€ç§’)// component:æ—¥æœŸç»„ä»¶æœ‰å“ªäº›ä¸œè¥¿ç»„æˆï¼Œä»–æ˜¯ä¸€ä¸ªæšä¸¾ï¼Œé‡Œé¢æœ‰å¹´æœˆæ—¥æ—¶åˆ†ç§’// fromDate:å½“å‰çš„æ—¥æœŸNSDateComponents *cmp = [calendar components:NSCalendarUnitSecond fromDate:[NSDate date]];// æˆ‘ä»¬çš„ç§’å°±æ˜¯ä¿å­˜åœ¨æ—¥æœŸç»„ä»¶é‡Œé¢ï¼Œå®ƒé‡Œé¢æä¾›äº†å¾ˆå¤šgetæ–¹æ³•NSInteger second = cmp.second;// ç§’é’ˆæ—‹è½¬å¤šå°‘åº¦CGFloat angel = angle2Rad(second * perSecA);// æ—‹è½¬ç§’é’ˆself.secondL.transform = CATransform3DMakeRotation(angel, 0, 0, 1);}// è¿è¡Œå‘ç°ä»–ä¼šä¸€ä¸‹å°±è·³åˆ°æŸä¸€ä¸ªæ—¶é—´æ‰å¼€å§‹æ—‹è½¬// ä¸€å¼€å§‹çš„æ—¶å€™å°±è¦æ¥åˆ°è¿™ä¸ªæ–¹æ³•ï¼Œè·å–å½“å‰çš„ç§’æ•°æŠŠå®ƒå®šä½å¥½// è¦åœ¨æ·»åŠ å®šæ—¶å™¨ä¹‹åå°±è°ƒç”¨ä¸€æ¬¡timeChangeæ–¹æ³• åˆ†é’ˆ1234567891011ä»£ç åŸºæœ¬ç›¸åŒï¼Œæ·»åŠ ä¸€ä¸ªåˆ†é’ˆæˆå‘˜å±æ€§ä¿®æ”¹å®½åº¦ï¼Œä¿®æ”¹é¢œè‰²ï¼Œè®©å®ƒæ—‹è½¬è¦ç®—å‡ºæ¯åˆ†é’Ÿè½¬å¤šå°‘åº¦è½¬60åˆ†é’Ÿåˆšå¥½æ˜¯ä¸€åœˆï¼Œæ‰€ä»¥æ¯ä¸€åˆ†é’Ÿä¹Ÿæ˜¯è½¬6åº¦è·å–å½“å‰å¤šå°‘åˆ†?åŒæ ·æ˜¯åœ¨æ—¥æœŸç»„ä»¶é‡Œé¢è·å¾—é‡Œé¢æœ‰å·¦ç§»ç¬¦å·,å³ç§»ç¬¦å·.ä»–å°±å¯ä»¥ç”¨ä¸€ä¸ªå¹¶è¿ç®—ç°åœ¨åŒæ—¶è®©ä»–æ”¯æŒç§’æ•°å’Œåˆ† åé¢ç›´æ¥åŠ ä¸Šä¸€ä¸ª |NSDateComponents *cmp = [calendar components:NSCalendarUnitSecond | NSCalendarUnitMinute fromDate:[NSDate date]];CGFloat minueteAngel = angle2Rad(minute * perMinuteA);self.minueL.transform = CATransform3DMakeRotation(minueteAngel, 0, 0, 1); æ—¶é’ˆ1234567å°æ—¶è½¬å¤šå°‘åº¦å½“å‰æ˜¯å¤šå°‘å°æ—¶ï¼Œå†è®¡ç®—å…ˆæ¯ä¸€å°æ—¶è½¬å¤šå°‘åº¦12ä¸ªå°æ—¶è½¬ä¸€åœˆï¼Œ360é™¤ä»¥12ï¼Œæ¯å°æ—¶è½¬30åº¦æ—¶é’ˆæ—‹è½¬å¤šå°‘åº¦CGFloat hourAngel = angle2Rad(hour * perHourA);æ—‹è½¬æ—¶é’ˆself.hourL.transform = CATransform3DMakeRotation(hourAngel, 0, 0, 1); ç›´æ¥è¿™æ ·å†™ä¼šæœ‰é—®é¢˜å°±æ˜¯æ¯è½¬ä¸€åˆ†é’Ÿï¼Œå°æ—¶ä¹Ÿä¼šç§»åŠ¨ä¸€ç‚¹ç‚¹æ¥ä¸‹æ¥è¦ç®—å‡ºï¼Œæ¯ä¸€åˆ†é’Ÿï¼Œå°æ—¶è¦è½¬å¤šå°‘åº¦60åˆ†é’Ÿä¸€å°æ—¶ï¼Œä¸€å°æ—¶è½¬30åº¦30 é™¤ä»¥60ï¼Œå°±æ˜¯æ¯ä¸€åˆ†é’Ÿï¼Œæ—¶é’ˆè½¬å¤šå°‘åº¦0.51234// æ—¶é’ˆæ—‹è½¬å¤šå°‘åº¦CGFloat hourAngel = angle2Rad(hour * perHourA + minute * perMinuteHourA);// æ—‹è½¬æ—¶é’ˆself.hourL.transform = CATransform3DMakeRotation(hourAngel, 0, 0, 1); å¿ƒè·³æ•ˆæœ æ€è·¯ï¼šå°±æ˜¯è®©ä¸€å¼ å›¾ç‰‡åšä¸€ä¸ªæ”¾å¤§ç¼©å°çš„æŒç»­åŠ¨ç”» ä»£ç å®ç°12345678910111213CABasicAnimation *anim =[CABasicAnimation animation];// è®¾ç½®ç¼©æ”¾å±æ€§anim.keyPath = @&quot;transform.scale&quot;;// ç¼©æ”¾åˆ°æœ€å°anim.toValue = @0;// è®¾ç½®åŠ¨ç”»æ‰§è¡Œçš„æ¬¡æ•°anim.repeatCount = MAXFLOAT;// è®¾ç½®åŠ¨ç”»æ‰§è¡Œçš„æ—¶é•¿anim.duration = 0.25;// è®¾ç½®åŠ¨ç”»è‡ªåŠ¨åè½¬(æ€ä¹ˆå», æ€ä¹ˆå›)anim.autoreverses = YES;// æ·»åŠ åŠ¨ç”»[self.heartView.layer addAnimation:anim forKey:nil]; å›¾ç‰‡æŠ–åŠ¨ æ€è·¯ï¼šå…¶å®å°±æ˜¯åšä¸€ä¸ªå·¦å³æ—‹è½¬çš„åŠ¨ç”»ã€‚å…ˆè®©å®ƒå¾€å·¦è¾¹æ—‹è½¬-5ï¼Œå†å¾€å³è¾¹æ—‹è½¬5åº¦ï¼Œå†ä»5åº¦æ—‹è½¬åˆ°-5åº¦ï¼Œå°±ä¼šæœ‰å·¦å³æ‘‡æ‘†çš„æ•ˆæœäº†ã€‚ å®ç°12345678910// åˆ›å»ºå¸§åŠ¨ç”»CAKeyframeAnimation *anim = [CAKeyframeAnimation animation];// è®¾ç½®åŠ¨ç”»å±æ€§ä¸ºæ—‹è½¬anim.keyPath = @&quot;transform.rotation&quot;;// è®¾ç½®å±æ€§å€¼ä¸ºå¤šä¸ªå±æ€§anim.values = @[@(angle2radio(-5)), @(angle2radio(5)), @(angle2radio(-5))];// è®¾ç½®åŠ¨ç”»æ‰§è¡Œæ¬¡æ•°anim.repeatCount = MAXFLOAT;// æ·»åŠ åŠ¨ç”»[_imageView.layer addAnimation:anim forKey:nil]; è½¬ç›˜ ç•Œé¢æŠŠè½¬ç›˜Viewç»™å°è£…èµ·æ¥ï¼Œç•Œé¢æ˜¯å›ºå®šä¸å˜çš„ï¼Œå¯ä»¥ä½¿ç”¨ä¸€ä¸ªXibå±•ç¤ºç•Œé¢å¤–ç•Œä½¿ç”¨æ—¶ç›´æ¥æ¥ä¸€ä¸ªç±»æ–¹æ³•ç›´æ¥è°ƒç”¨ æ—‹è½¬å†…éƒ¨æä¾›å¼€å§‹å’Œç»“æŸæ—‹è½¬ï¼Œä¾›å¤–ç•Œè°ƒç”¨ æŒ‰é’®æŒ‰é’®æ˜¯å€¾æ–œçš„ï¼Œæ’åˆ—åœ¨ä¸€å‘¨ï¼Œå…ˆå°†æ‰€æœ‰æŒ‰é’®æ·»åŠ åˆ°æœ€ä¸Šæ–¹ï¼Œè®©æŒ‰é’®ç»•ç€åœ†ç›˜ä¸­å¿ƒè¿›è¡Œæ—‹è½¬é”šç‚¹è®¾ç½®ä¸ºæŒ‰é’®åº•éƒ¨ä¸­å¿ƒ(0.5, 1)ï¼ŒæŒ‰é’®çš„positionä¸ºåœ†ç›˜ä¸­å¿ƒæ·»åŠ æŒ‰é’®æ—¶ï¼Œè®©æ¯ä¸€ä¸ªæŒ‰é’®è¿›è¡Œæ—‹è½¬ï¼Œè®¡ç®—å‡ºæ¯ä¸€ä¸ªæŒ‰é’®æ—‹è½¬çš„è§’åº¦ï¼šæ€»å…±æœ‰12ä¸ªæŒ‰é’®,æ­£å¥½å åœ†çš„ä¸€åœˆï¼Œé‚£æ¯ä¸€ä¸ªæŒ‰é’®å 30ä¸€ä¸ªæŒ‰é’®åœ¨ä¸Šä¸€ä¸ªæŒ‰é’®çš„åŸºç¡€ä¸ŠåŠ ä¸Š30ï¼Œå³å¯ç®—å‡ºæ¯ä¸€ä¸ªæŒ‰é’®æ—‹è½¬çš„è§’åº¦ ç‚¹å‡»äº‹ä»¶ åœ¨æ·»åŠ æŒ‰é’®æ—¶ï¼Œç»™æ¯ä¸ªæŒ‰é’®åŠ é€‰ä¸­çŠ¶æ€ï¼ˆé»˜è®¤UIImageViewä¸èƒ½äº¤äº’ï¼Œæ‰‹åŠ¨è®¾ç½®ï¼‰ ç‚¹å‡»åæŒ‰é’®ç§°ä¸ºé€‰ä¸­ï¼Œä¸Šä¸€ä¸ªæŒ‰é’®å–æ¶ˆé€‰ä¸­çŠ¶æ€ æŒ‰é’®å›¾ç‰‡ ç¾å·¥å›¾ç‰‡ä¸ºä¸€æ•´å¼ å›¾ç‰‡ï¼Œéœ€è¦è‡ªå·±è£å‰ªï¼Œç¡®å®šè£å‰ªçš„å®½é«˜ ä½¿ç”¨ä¸‹é¢æ–¹æ³•è£å‰ª1234567// image:ä¸ºè¦è£å‰ªçš„å›¾ç‰‡ï¼Œæ—¢åŸå§‹å›¾ç‰‡ã€‚å®ƒçš„ç±»å‹ä¸ºCGImageRefç±»å‹ï¼Œæ‰€ä»¥è¦è½¬æˆCGImage// rect:ä¸ºè£å‰ªçš„èŒƒå›´.è¿™æ—¶éœ€è¦ç¡®å®šæ¯ä¸€ä¸ªXçš„ä½ç½®// æ¯ä¸€ä¸ªxä¸ºå®ƒå½“å‰çš„è§’æ ‡ * è¦è£å‰ªçš„å®½åº¦CGImageCreateWithImageInRect(image, rect);// è¿™ä¸ªæ–¹æ³•å®ƒä¼šè¿”å›ä¸€ä¸ªå›¾ç‰‡.å›¾ç‰‡ç±»å‹ä¸ºCGImageRef imgR.// æ‰€è¦æˆ‘ä»¬åœ¨è®¾ç½®èƒŒæ™¯å›¾ç‰‡çš„æ—¶å€™ï¼Œè¦æŠŠè¿™å¼ å›¾ç‰‡ç»™è½¬æˆUIImageï¼Œè½¬çš„æ–¹æ³•ä¸º:UIImage *image = [UIImage imageWithCGImage:imgR]; é—®é¢˜123CGImageCreateWithImageInRectæ–¹æ³•ä¸ºCè¯­è¨€æ–¹æ³•ï¼Œè£å‰ªçš„æ—¶å€™æ˜¯æŒ‰åƒç´ ï¼Œè€ŒiOSæ˜¯ä½¿ç”¨ç‚¹ï¼Œéœ€è¦ä¹˜ä»¥åƒç´ æ¯”ä¾‹[UIScreen mainScreen].scale ä¸­é—´æŒ‰é’® é€»è¾‘ï¼šå¿«é€Ÿçš„è®©åœ†ç›˜æ—‹è½¬å‡ åœˆï¼ŒåŠ¨ç”»å®Œæˆæ—¶ï¼Œè®©é€‰æ‹©çš„æŒ‰é’®æŒ‡ä¸Šæœ€ä¸Šæ–¹ï¼Œä½¿ç”¨æ ¸å¿ƒåŠ¨ç”» åœ¨åŠ¨ç”»ç»“æŸåè·å¾—æ—‹è½¬è§’åº¦123456CGFloat angel = atan2(self.selectBtn.transform.b, self.selectBtn.transform.a);- (void)animationDidStop:(nonnull CAAnimation *)anim finished:(BOOL)flag {CGAffineTransform transform = self.selectBtn.transform;CGFloat angel = atan2(self.selectBtn.transform.b, self.selectBtn.transform.a);self.innerCircle.transform = CGAffineTransformMakeRotation(-angel);}","link":"/2016/09/01/my-ios-day14/"},{"title":"my-ios-day15","text":"è¿™ä¸ªæ˜¯16å¹´é‡æ–°å¤ä¹ çš„iOSç¬”è®°ï¼Œå½“æ—¶æ˜¯æ”¾åœ¨äº†gitbookï¼Œç°åœ¨è½¬ç§»è¿‡æ¥ï¼ day 15å½©ç¥¨é¡¹ç›® âˆš ä¸»æµæ¡†æ¶ x æ–°ç‰¹æ€§ç•Œé¢ x è®¾ç½®ç•Œé¢ ä¸»æµæ¡†æ¶æ­å»º ä¸»æµæ¡†æ¶ ä¸€ä¸ªUITabBarControllerç®¡ç†å¤šä¸ªUINavigationController æ¡†æ¶ä½¿ç”¨çº¯ä»£ç æ–¹å¼ æ–‡ä»¶æŒ‰ç…§æ¨¡å—ç®¡ç†ï¼Œå†…éƒ¨ä¸ºMVCæ¨¡å¼ ä¸»è¦æµç¨‹ åˆ›å»ºå•è§†å›¾ç¨‹åºï¼Œé…ç½®é¡¹ç›®åŸºæœ¬ä¿¡æ¯ åˆ é™¤ç³»ç»Ÿåˆ›å»ºçš„main.storyboardå’ŒViewController é…ç½®Generalé¡¹åˆ é™¤Main Interface é…ç½®ç¦æ­¢å±å¹•æ—‹è½¬ï¼Œlunchç•Œé¢éšè—çŠ¶æ€æ  ä¸ºAppIconæ·»åŠ å›¾ç‰‡ï¼Œç»™LunchScreen.storyboardè®¾ç½®å›¾ç‰‡ 5. æŒ‰æ¨¡å—åˆ›å»ºæ–‡ä»¶å¤¹ åœ¨AppDelegate.mä¸­åˆå§‹åŒ–window12345678910- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {// è®¾ç½®windowself.window = [[UIWindow alloc] initWithFrame:[UIScreen mainScreen].bounds];// æ·»åŠ æ ¹æ§åˆ¶å™¨SLTabBarController *tabBar = [[SLTabBarController alloc] init];self.window.rootViewController = tabBar;// è®©windowæ˜¾ç¤º[self.window makeKeyAndVisible];return YES;} ç›´æ¥ä½¿ç”¨äº†è‡ªå®šä¹‰çš„SLTabBarControllerï¼Œåœ¨SLTabBarControllerä¸­æ·»åŠ å­æ§åˆ¶å™¨ æŒ‰æ¨¡å—åˆ†åˆ«åˆ›å»ºè‡ªå·±çš„æ§åˆ¶å™¨12345#import &quot;SLHallTableViewController.h&quot;#import &quot;SLArenaViewController.h&quot;#import &quot;SLDiscoverTableViewController.h&quot;#import &quot;SLHistoryTableViewController.h&quot;#import &quot;SLMyLotteryViewController.h&quot; è‡ªå®šä¹‰TabBar ç§»é™¤ç³»ç»ŸtabBarä¸­çš„æ‰€æœ‰item12345678910111213141516// åœ¨Viewå°†è¦å‡ºç°çš„æ—¶å€™è°ƒç”¨- (void)viewWillAppear:(BOOL)animated {[super viewWillAppear:animated];for (UIView *view in self.tabBar.subviews) {NSString *classStr = NSStringFromClass([view class]);// if ([classStr hasPrefix:@&quot;UITabBarButton&quot;]) {// [view removeFromSuperview];// }// if ([view isKindOfClass:[UIControl class]]) {// [view removeFromSuperview];// }if(![view isKindOfClass:[SLTabBar class]]) {[view removeFromSuperview];}}} æ·»åŠ è‡ªå®šä¹‰SLTabBar1234SLTabBar *tabBar = [[SLTabBar alloc] initWithFrame:self.tabBar.bounds];tabBar.items = self.items;tabBar.delegate = self;[self.tabBar addSubview:tabBar]; æŠ½å–æ·»åŠ æ§åˆ¶å™¨æ–¹æ³•123456789101112131415- (void)setController:(UIViewController *)vc withImage:(NSString *)image selectImage:(NSString *)sImage title:(NSString *)title{// åŒ…è£…å¯¼èˆªæ§åˆ¶å™¨UINavigationController *nav =[[SLNavController alloc] initWithRootViewController:vc];// ç«æŠ€åœºçš„å¯¼èˆªæ§åˆ¶å™¨ä¸åŒif ([vc isKindOfClass:[SLArenaViewController class]]) {nav = [[SLArenaNavController alloc] initWithRootViewController:vc];}[self addChildViewController:nav];// è®¾ç½®ä¸€äº›æ•°æ®vc.title = title;vc.tabBarItem.image = [UIImage imageNamed:image];vc.tabBarItem.selectedImage = [UIImage imageNamed:sImage];// ä¿å­˜æ•°æ®ï¼Œä¾›SLTabBarä½¿ç”¨[self.items addObject:vc.tabBarItem];} ä¸ºSLTabBarä¿å­˜ç›¸åº”æ•°æ®å€¼12345678910111213@interface SLTabBar()/** ä¿å­˜ç³»ç»ŸåŸæœ‰tabBarItem */@property (nonatomic, strong) NSMutableArray *items;@end@implementation SLTabBarController// å®ç°æ‡’åŠ è½½- (NSMutableArray *)items {if (_items == nil) {_items = [NSMutableArray array];}return _items;}@end SLTabBar.mæ ¹æ®itemsä¸­æ·»åŠ æŒ‰é’®ï¼ŒlayoutSubViewså¸ƒå±€1234567891011121314151617181920212223242526- (void)setItems:(NSArray *)items {_items = items;for (UITabBarItem *item in items) {SLTabBarButton *btn = [SLTabBarButton buttonWithType:UIButtonTypeCustom];[btn setBackgroundImage:item.image forState:UIControlStateNormal];[btn setBackgroundImage:item.selectedImage forState:UIControlStateSelected];[btn addTarget:self action:@selector(btnClick:) forControlEvents:UIControlEventTouchDown];[self addSubview:btn];}}- (void)layoutSubviews {CGFloat btnW = self.width / self.items.count;CGFloat btnH = self.height;CGFloat btnY = 0;CGFloat btnX = 0;for (int i= 0; i &lt; self.items.count; i++) {SLTabBarButton *btn = self.subviews[i];btnX = btnW * i;btn.frame = CGRectMake(btnX, btnY, btnW, btnH);btn.tag = i;if (i == 0) {btn.selected = YES;self.curButton = btn;}}} ç›‘å¬ä»£æŒ‰é’®ç‚¹å‡»ï¼Œå¹¶ä½¿ç”¨ä»£ç†åˆ‡æ¢æ§åˆ¶å™¨12345678910111213141516171819// ä»£ç†ï¼ˆSLTabBar.hï¼‰@protocol SLTabBarDelegate &lt;NSObject&gt;@optional- (void)tabBar:(SLTabBar *)tabBar changeIndex:(NSInteger)index;@end// æŒ‰é’®ç‚¹å‡»ï¼ˆSLTabBar.mï¼‰- (void)btnClick:(SLTabBarButton *)btn {self.curButton.selected = NO;btn.selected = YES;self.curButton = btn;if ([self.delegate respondsToSelector:@selector(tabBar:changeIndex:)]) {[self.delegate tabBar:self changeIndex:btn.tag];}}// ä»£ç†å®ç°ï¼ˆSLTarBarController.mï¼‰#pragma mark - tabBarä»£ç†æ–¹æ³•- (void)tabBar:(SLTabBar *)tabBar changeIndex:(NSInteger)index {self.selectedIndex = index;} è‡ªå®šä¹‰å¯¼èˆªæ§åˆ¶å™¨SLNavController åœ¨initializeä¸­åšä¸€äº›å…¨å±€è®¾ç½®1234567891011121314151617181920+ (void)initialize {// å½“æ—¶è¿™ä¸ªç±»æœ¬èº«ç¬¬ä¸€æ¬¡åŠ è½½çš„æ—¶å€™è°ƒç”¨ä¸€æ¬¡// å…¶å­ç±»åŠ è½½æ—¶ä¸è°ƒç”¨if (self == [SLNavController self]) {// è·å–å…¨å±€å¯¼èˆªæ¡UINavigationBar *navBar = [UINavigationBar appearanceWhenContainedInInstancesOfClasses:@[self]];// å¯¼èˆªæ èƒŒæ™¯å›¾ç‰‡[navBar setBackgroundImage:[UIImage imageNamed:@&quot;NavBar64&quot;] forBarMetrics:UIBarMetricsDefault];// å¯¼èˆªæ æ ‡é¢˜å±æ€§NSMutableDictionary *dict = [NSMutableDictionary dictionary];dict[NSFontAttributeName] = [UIFont systemFontOfSize:22];dict[NSForegroundColorAttributeName] = [UIColor whiteColor];[navBar setTitleTextAttributes:dict];// ä¸»é¢˜è‰²navBar.tintColor = [UIColor whiteColor];// ç§»é™¤è¿”å›æŒ‰é’®æ–‡å­—UIBarButtonItem *item = [UIBarButtonItem appearanceWhenContainedInInstancesOfClasses:@[self]];[item setBackButtonTitlePositionAdjustment:UIOffsetMake(0, -64) forBarMetrics:UIBarMetricsDefault];}} åœ¨å„è‡ªçš„æ§åˆ¶å™¨ä¸­è®¾ç½®å¯¼èˆªæ¡å·¦å³æŒ‰é’®12345678910// SLMyLotteryViewController.h- (void)viewDidLoad {[super viewDidLoad];UIButton *btn = [UIButton buttonWithType:UIButtonTypeCustom];[btn setImage:[UIImage imageNamed:@&quot;FBMM_Barbutton&quot;] forState:UIControlStateNormal];[btn setTitle:@&quot;å®¢æœ&quot; forState:UIControlStateNormal];[btn sizeToFit];self.navigationItem.leftBarButtonItem = [[UIBarButtonItem alloc] initWithCustomView:btn];self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithImage:[UIImage imageNamed:@&quot;Mylottery_config&quot;] style:UIBarButtonItemStylePlain target:self action:@selector(configClick)];} ç«æŠ€åœºå¯¼èˆªæ¡è®¾ç½®123456789101112131415161718192021222324252627282930313233// SLArenaNavController.h+ (void)initialize {if (self == [SLArenaNavController self]) {UINavigationBar *navBar = [UINavigationBar appearanceWhenContainedInInstancesOfClasses:@[self]];// å¯¼èˆªæ èƒŒæ™¯å›¾ç‰‡[navBar setBackgroundImage:[UIImage resizeImageName:@&quot;NLArenaNavBar64&quot;] forBarMetrics:UIBarMetricsDefault];// å¯¼èˆªæ æ ‡é¢˜NSMutableDictionary *dict = [NSMutableDictionary dictionary];dict[NSFontAttributeName] = [UIFont systemFontOfSize:22];dict[NSForegroundColorAttributeName] = [UIColor whiteColor];[navBar setTitleTextAttributes:dict];// ä¸»é¢˜è‰²navBar.tintColor = [UIColor whiteColor];// ç§»é™¤è¿”å›æŒ‰é’®æ–‡å­—UIBarButtonItem *item = [UIBarButtonItem appearanceWhenContainedInInstancesOfClasses:@[self]];[item setBackButtonTitlePositionAdjustment:UIOffsetMake(0, -64) forBarMetrics:UIBarMetricsDefault];}}// SLArenaViewController.m- (void)viewDidLoad {[super viewDidLoad];UISegmentedControl *seg = [[UISegmentedControl alloc] initWithItems:@[@&quot;è¶³çƒ&quot;, @&quot;ç¯®çƒ&quot;]];[seg setTitleTextAttributes:@{NSFontAttributeName : [UIFont systemFontOfSize:18],NSForegroundColorAttributeName : [UIColor whiteColor]}forState:UIControlStateNormal];[seg setBackgroundImage:[UIImage imageNamed:@&quot;CPArenaSegmentBG&quot;] forState:UIControlStateNormal barMetrics:UIBarMetricsDefault];[seg setBackgroundImage:[UIImage imageNamed:@&quot;CPArenaSegmentSelectedBG&quot;] forState:UIControlStateSelected barMetrics:UIBarMetricsDefault];seg.tintColor = SLColor(52, 137, 140, 1);seg.selectedSegmentIndex = 0;self.navigationItem.titleView = seg;} æ¯ä¸ªæ§åˆ¶å™¨çš„é€»è¾‘ SLHallTableViewControllerï¼ˆè°åˆ›å»ºè°ç§»é™¤ï¼‰ å¯¼èˆªæ¡å·¦è¾¹æŒ‰é’® 1234- (void)viewDidLoad {[super viewDidLoad];self.navigationItem.leftBarButtonItem = [[UIBarButtonItem alloc]initWithImage:[UIImage imageWithOriginal:@&quot;CS50_activity_image&quot;] style:UIBarButtonItemStylePlain target:self action:@selector(leftClick)];} å·¦è¾¹æŒ‰é’®ç‚¹å‡»äº‹ä»¶ï¼Œæ·»åŠ popMenu 12345- (void)leftClick {[SLMaskView show];SLPopMenu *popMenu = [SLPopMenu popMenuShowInCenter:self.view.center];popMenu.delegate = self;} SLPopMenuä»£ç† 1234567- (void)popMenu:(SLPopMenu *)menu cancelBtnClick:(UIButton *)btn {[menu hiddenInCenter:CGPointMake(44, 44) completion:^{[UIView animateWithDuration:0.25 animations:^{[SLMaskView hidden];}];}];} è‡ªå®šä¹‰è’™ç‰ˆ 123456789101112131415161718192021222324// SLMaskView.h@interface SLMaskView : UIView+ (void)show;+ (void)hidden;@end// SLMaskView.m@implementation SLMaskView// static SLMaskView *mask;+ (void)show {SLMaskView *mask = [[SLMaskView alloc] initWithFrame:[UIScreen mainScreen].bounds];mask.backgroundColor = [UIColor blackColor];mask.alpha = 0.7;[SLKwyWindow addSubview:mask];}+ (void)hidden {for (UIView *view in SLKwyWindow.subviews) {if ([view isKindOfClass:[self class]]) {[view removeFromSuperview];}}// [mask removeFromSuperview];// mask = nil;}@end è‡ªå®šä¹‰popMenu 123456789101112131415161718192021// SLPopMenu.h@class SLPopMenu;@protocol SLPopMenuDelegate &lt;NSObject&gt;@optional- (void)popMenu:(SLPopMenu *)menu cancelBtnClick:(UIButton *)btn;@end@interface SLPopMenu : UIView/*** åˆ›å»ºä¸€ä¸ªSLPopMenuï¼Œ* centerï¼špopMenuçš„ä¸­å¿ƒä½ç½®*/+ (instancetype)popMenuShowInCenter:(CGPoint)center;/*** éšè—popMenu* centerï¼špopMenuéšè—åˆ°å“ªé‡Œ* completionï¼šéšè—ååšä¸€äº›äº‹æƒ…*/- (void)hiddenInCenter:(CGPoint)center completion:(void(^)())completion;/** ä»£ç† */@property (nonatomic, weak) id&lt;SLPopMenuDelegate&gt; delegate;@end 123456789101112131415161718192021222324// SLPopMenu.m@implementation SLPopMenu+ (instancetype)popMenuShowInCenter:(CGPoint)center {SLPopMenu *popMenu = [[[NSBundle mainBundle] loadNibNamed:NSStringFromClass([self class]) owner:nil options:nil] lastObject];popMenu.center = center;[SLKwyWindow addSubview:popMenu];return popMenu;}- (IBAction)cancelBtnClick:(UIButton *)btn {if ([self.delegate respondsToSelector:@selector(popMenu:cancelBtnClick:)]) {[self.delegate popMenu:self cancelBtnClick:btn];}}- (void)hiddenInCenter:(CGPoint)center completion:(void (^)())completion {[UIView animateWithDuration:0.5 animations:^{self.transform = CGAffineTransformMakeScale(0.01, 0.01);self.center = center;} completion:^(BOOL finished) {[self removeFromSuperview];if (completion) {completion();}}];} SLArenaViewControllerï¼ˆloadViewæ–¹æ³•ï¼‰123456- (void)loadView {UIImageView *imView = [[UIImageView alloc] initWithFrame:[UIScreen mainScreen].bounds];imView.image = [UIImage imageNamed:@&quot;NLArenaBackground&quot;];imView.userInteractionEnabled = YES;self.view = imView;} SLDiscoverTableViewControllerï¼ˆstoryboardï¼ŒcellåŠ¨ç”»ï¼‰ ç•Œé¢å›ºå®šä½¿ç”¨storyboardåˆ›å»º12UIStoryboard *storyboard = [UIStoryboard storyboardWithName:NSStringFromClass([SLDiscoverTableViewController class]) bundle:nil];SLDiscoverTableViewController *discover = [storyboard instantiateInitialViewController]; cellçš„åŠ¨ç”»123456- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath {cell.transform = CGAffineTransformMakeTranslation(self.view.width, 0);[UIView animateWithDuration:0.5 animations:^{cell.transform = CGAffineTransformIdentity;}];} æŒ‰é’®å†…éƒ¨æ§ä»¶ä½ç½®è°ƒæ•´1234567891011121314151617181920212223// SLTitleButton.m// è°ƒæ•´æ‰€æœ‰å­æ§ä»¶çš„ä½ç½®- (void)layoutSubviews{[super layoutSubviews];if (self.imageView.x &lt; self.titleLabel.x) { // ç¬¬ä¸€æ¬¡è°ƒæ•´ä¸¤ä¸ªæ§ä»¶çš„ä½ç½®// è¿™ä¸ªæ–¹æ³•è°ƒç”¨äº†ä¸¤æ¬¡,è¿™ä¸ªä½ç½®è°ƒæ•´äº†ä¸¤æ¬¡// 1.è°ƒæ•´labelçš„ä½ç½®self.titleLabel.x = self.imageView.x;// 2.è°ƒæ•´imageViewçš„ä½ç½®self.imageView.x = CGRectGetMaxX(self.titleLabel.frame);}}- (void)setTitle:(NSString *)title forState:(UIControlState)state {// åšå®Œè‡ªå·±çš„äº‹æƒ…ä¹‹å è¿˜åŸç³»ç»ŸåŸæœ‰çš„æ–¹æ³•[super setTitle:title forState:state];// å¢åŠ è‡ªå·±çš„æ–¹æ³•// è‡ªåŠ¨è®¡ç®—å°ºå¯¸[self sizeToFit];}- (void)setImage:(UIImage *)image forState:(UIControlState)state {[super setImage:image forState:state];[self sizeToFit];} æ‰‹æŒ‡æ»‘åŠ¨åˆ‡æ¢æ§åˆ¶å™¨123456789101112131415161718// SLNavController.m- (void)viewDidLoad {[super viewDidLoad];UIScreenEdgePanGestureRecognizer *gesture = (UIScreenEdgePanGestureRecognizer *)self.interactivePopGestureRecognizer;NSArray *targets = [gesture valueForKeyPath:@&quot;_targets&quot;];// å–å‡ºtargetid target = [targets[0] valueForKeyPath:@&quot;_target&quot;];// ç¦æ­¢ç³»ç»Ÿçš„self.interactivePopGestureRecognizer.enabled = NO;UIPanGestureRecognizer *pan = [[UIPanGestureRecognizer alloc] initWithTarget:target action:@selector(handleNavigationTransition:)];[self.view addGestureRecognizer:pan];pan.delegate = self;}// è¿”å›YESæ”¶æ‹¾å¯ä»¥äº¤äº’, è¿”å›NOä¸èƒ½äº¤äº’- (BOOL)gestureRecognizerShouldBegin:(UIGestureRecognizer *)gestureRecognizer {// != 1 éè·Ÿæ§åˆ¶å™¨ &gt; 1return self.childViewControllers.count &gt; 1;} éšè—TabBaråº•éƒ¨çš„å¯¼èˆªæ¡12345678// SLNavController.m- (void)pushViewController:(UIViewController *)viewController animated:(BOOL)animated {// ä¸€å®šè¦å†™åœ¨å‰é¢æ‰æœ‰ç”¨ï¼Œif (self.childViewControllers.count != 0) {viewController.hidesBottomBarWhenPushed = YES;}[super pushViewController:viewController animated:animated];}","link":"/2016/09/01/my-ios-day15/"},{"title":"my-ios-day16","text":"è¿™ä¸ªæ˜¯16å¹´é‡æ–°å¤ä¹ çš„iOSç¬”è®°ï¼Œå½“æ—¶æ˜¯æ”¾åœ¨äº†gitbookï¼Œç°åœ¨è½¬ç§»è¿‡æ¥ï¼ day 16å½©ç¥¨é¡¹ç›® âˆš ä¸»æµæ¡†æ¶ âˆš æ–°ç‰¹æ€§ç•Œé¢ âˆš è®¾ç½®ç•Œé¢ æ–°ç‰¹æ€§ç•Œé¢ UICollectionView æ‹¥æœ‰å’ŒUITableViewä¸€æ ·çš„é‡ç”¨æœºåˆ¶ï¼Œä½†éœ€è¦è‡ªå·±å¸ƒå±€cell ç³»ç»Ÿæä¾›UICollectionViewFlowLayoutç±»æ¥å¸ƒå±€cell ä½¿ç”¨æ­¥éª¤ è®¾ç½®å¸ƒå±€å‚æ•°12345678UICollectionViewFlowLayout *flowLayout = [[UICollectionViewFlowLayout alloc] init];flowLayout.itemSize = [UIScreen mainScreen].bounds.size;// æ»šåŠ¨æ–¹å‘(æ°´å¹³)flowLayout.scrollDirection = UICollectionViewScrollDirectionHorizontal;// items å’Œitemsä¹‹é—´çš„é—´è·flowLayout.minimumInteritemSpacing = 0;// è¡Œé—´è·flowLayout.minimumLineSpacing = 0; æ³¨å†Œcell1[self.collectionView registerClass:[XMGNewFeatureCollectionViewCell class] forCellWithReuseIdentifier:reuseIdentifier]; æ–°ç‰¹æ€§ æ·»åŠ NewFeatureæ–‡ä»¶å¤¹ è‡ªå®šä¹‰SLCollectionViewController : UICollectionVieController å¸ƒå±€collectionView 12345678910111213- (instancetype)init {// åˆ›å»ºæµæ°´å¸ƒå±€UICollectionViewFlowLayout *flowLayout = [[UICollectionViewFlowLayout alloc] init];// è¡Œé—´è·flowLayout.minimumLineSpacing = 0;// åˆ—é—´è·flowLayout.minimumInteritemSpacing = 0;// æ¯ä¸ªcellçš„å°ºå¯¸flowLayout.itemSize = [UIScreen mainScreen].bounds.size;// æ»šåŠ¨æ–¹å‘ï¼Œæ°´å¹³æ»šåŠ¨flowLayout.scrollDirection = UICollectionViewScrollDirectionHorizontal;return [super initWithCollectionViewLayout:flowLayout];} æ³¨å†Œcellï¼Œè®¾ç½®å±æ€§ï¼Œæ·»åŠ å›¾ç‰‡ 12345678910111213141516171819202122232425262728293031323334- (void)viewDidLoad {[super viewDidLoad];// Register cell classes[self.collectionView registerClass:[SLNewFeatureCollectionViewCell class] forCellWithReuseIdentifier:reuseIdentifier];// è®¾ç½®åˆ†é¡µself.collectionView.pagingEnabled = YES;// å–æ¶ˆå¼¹ç°§æ•ˆæœself.collectionView.bounces = NO;// å–æ¶ˆæ»šåŠ¨æ¡self.collectionView.showsHorizontalScrollIndicator = NO;// æ·»åŠ å›¾ç‰‡[self addImageView];}- (void)addImageView {// guide1UIImageView *guideImageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@&quot;guide1&quot;]];[self.collectionView addSubview:guideImageView];guideImageView.x += 50;self.guideImageView = guideImageView;// guideLineUIImageView *guideLineImageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@&quot;guideLine&quot;]];[self.collectionView addSubview:guideLineImageView];guideLineImageView.x -= 150;// guideLargeText1UIImageView *guideLargeTextImageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@&quot;guideLargeText1&quot;]];[self.collectionView addSubview:guideLargeTextImageView];guideLargeTextImageView.center = CGPointMake(self.collectionView.width * 0.5f, self.collectionView.height * 0.7);self.guideLargeTextImageView = guideLargeTextImageView;// guideSmallText1UIImageView *guideSmallTextImageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@&quot;guideSmallText1&quot;]];[self.collectionView addSubview:guideSmallTextImageView];guideSmallTextImageView.center = CGPointMake(self.collectionView.width * 0.5f, self.collectionView.height * 0.8);self.guideSmallTextImageView = guideSmallTextImageView;} è®¾ç½®å›¾ç‰‡çš„åŠ¨ç”» 12345678910111213141516171819202122232425262728293031// å½“scrollView å‡é€Ÿçš„æ—¶å€™è°ƒç”¨- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView{// å½“å‰åå·®CGFloat offsetX = scrollView.contentOffset.x;// è®¡ç®—é¡µç NSInteger page = offsetX / scrollView.width + 1;// æ¢å›¾ç‰‡NSString *name = [NSString stringWithFormat:@&quot;guide%ld&quot;,page];UIImage *image = [UIImage imageNamed:name];self.guideImageView.image = image;// å¤§æ ‡é¢˜NSString *largeTextname = [NSString stringWithFormat:@&quot;guideLargeText%ld&quot;,page];UIImage *largeTextimage = [UIImage imageNamed:largeTextname];self.guideLargeTextImageView.image = largeTextimage;// å°æ ‡é¢˜NSString *smallTextname = [NSString stringWithFormat:@&quot;guideSmallText%ld&quot;,page];UIImage *smallTextimage = [UIImage imageNamed:smallTextname];self.guideSmallTextImageView.image = smallTextimage;// åå·®å€¼CGFloat del = offsetX - self.lastOffsetX;self.guideImageView.x += del * 2;self.guideLargeTextImageView.x += del * 2;self.guideSmallTextImageView.x += del * 2;[UIView animateWithDuration:0.25f animations:^{self.guideImageView.x -= del;self.guideLargeTextImageView.x -= del;self.guideSmallTextImageView.x -= del;}];// è®°å½•ä¸Šæ¬¡åå·®self.lastOffsetX = offsetX;} è®¾ç½®cellæ ·å¼ 12345678- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath {SLNewFeatureCollectionViewCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:reuseIdentifier forIndexPath:indexPath];NSString *imageName = [NSString stringWithFormat:@&quot;guide%ldBackground&quot;,indexPath.item + 1];cell.image = [UIImage imageNamed:imageName];// åˆ¤æ–­æ˜¯å¦æ˜¯æœ€åä¸€ä¸ªcell[cell setIndexPath:indexPath count:SLPageCount];return cell;} è‡ªå®šä¹‰cellï¼Œæ·»åŠ bgå›¾ç‰‡ã€ç«‹å³ä½“éªŒ æä¾›å›¾ç‰‡å±æ€§12/** èƒŒæ™¯å›¾ç‰‡ */@property (nonatomic, strong) UIImage *image; æ·»åŠ bgImageView1234567- (UIImageView *)bgImageView {if (!_bgImageView) {_bgImageView = [[UIImageView alloc] initWithFrame:self.bounds];[self.contentView addSubview:_bgImageView];}return _bgImageView;} é‡å†™imageçš„setæ–¹æ³•12345- (void)setImage:(UIImage *)image {_image = image;// è®¾ç½®imageself.bgImageView.image = image;} æä¾›è®¾ç½®ç«‹å³ä½“éªŒæ–¹æ³•12345678910- (void)setIndexPath:(NSIndexPath *)indexPath count:(NSInteger)count {// å½“æ—¶æœ€åä¸€ä¸ªcellçš„æ—¶å€™ï¼Œæ·»åŠ ç«‹å³ä½“éªŒæŒ‰é’®if (indexPath.item + 1 == count) {// æ·»åŠ ç«‹å³ä½“éªŒæŒ‰é’®self.startBtn.hidden = NO;}else { // ä¸æ˜¯æœ€åä¸€ä¸ªcell// éšè—ç«‹å³ä½“éªŒæŒ‰é’®self.startBtn.hidden = YES;}} ç«‹å³ä½“éªŒæŒ‰é’®123456789101112131415161718- (UIButton *)startBtn {if (_startBtn == nil) {_startBtn = [[UIButton alloc] init];[_startBtn setBackgroundImage:[UIImage imageNamed:@&quot;guideStart&quot;] forState:UIControlStateNormal];[_startBtn sizeToFit];// ä¸€å®šè¦åœ¨æŒ‰é’®æœ‰å°ºå¯¸çš„æ—¶å€™ï¼Œå†è°ƒæ•´ä½ç½®_startBtn.center = CGPointMake(self.contentView.width * 0.5f, self.contentView.height * 0.9f);[_startBtn addTarget:self action:@selector(startBtnOnclick:) forControlEvents:UIControlEventTouchUpInside];[self.contentView addSubview:_startBtn];}return _startBtn;}// å¼€å§‹æŒ‰é’®ç‚¹å‡»è°ƒç”¨çš„æ–¹æ³•- (void)startBtnOnclick:(UIButton *)button {SLTabBarController *tabBarVc = [[SLTabBarController alloc] init];// åˆ‡æ¢è·Ÿæ§åˆ¶å™¨SLKeyWindow.rootViewController = tabBarVc;} å·¥å…·ç±» åœ¨Otheræ–‡ä»¶å¤¹ä¸­æ·»åŠ Toolæ–‡ä»¶å¤¹ æ•°æ®å­˜æ•°å·¥å…·SLSaveTool1234567891011121314151617181920// SLSaveTool.h@interface SLSaveTool : NSObject+ (id)objectForKey:(NSString *)defaultName;+ (void)setObject:(id)value forKey:(NSString *)defaultName;@end// SLSaveTool.m@implementation SLSaveTool+ (id)objectForKey:(NSString *)defaultName {return [[NSUserDefaults standardUserDefaults] objectForKey:defaultName];}+ (void)setObject:(id)value forKey:(NSString *)defaultName {// åå¥½è®¾ç½®ä¸èƒ½å­˜å‚¨nilif (defaultName) {// ä¿å­˜å½“å‰ç‰ˆæœ¬[[NSUserDefaults standardUserDefaults] setObject:value forKey:defaultName];// ç«‹å³åŒæ­¥[[NSUserDefaults standardUserDefaults] synchronize];}}@end æ ¹æ§åˆ¶å™¨é€‰æ‹©å·¥å…·SLRootVCTool1234567891011121314151617181920212223242526272829// SLRootVCTool.h@interface SLRootVCTool : NSObject/*** é€‰æ‹©çª—å£çš„è·Ÿæ§åˆ¶å™¨*/+ (UIViewController *)chooseWindowRootVc;@end// SLRootVCTool.m@implementation SLRootVCTool+ (UIViewController *)chooseWindowRootVc {UIViewController *rootVc;// å–å‡ºå½“å‰ç‰ˆæœ¬NSString *currVerson = [NSBundle mainBundle].infoDictionary[@&quot;CFBundleShortVersionString&quot;];// å–å‡ºä¸Šä¸€æ¬¡ä¿å­˜çš„ç‰ˆæœ¬NSString *odlVerson = [SLSaveTool objectForKey:SLVerson];// åˆ¤æ–­æœ‰æ— æ–°ç‰ˆæœ¬if ([currVerson isEqualToString:odlVerson]) {// æ²¡æœ‰æ–°ç‰ˆæœ¬ï¼Œè¿›å…¥ä¸»æ¡†æ¶// è®¾ç½®çª—å£çš„æ ¹æ§åˆ¶å™¨rootVc = [[SLTabBarController alloc] init];}else {// æœ‰æ–°ç‰ˆæœ¬// æ˜¾ç¤ºæ–°ç‰¹æ€§ç•Œé¢rootVc = [[SLNewFeatureViewController alloc] init];[SLSaveTool setObject:currVerson forKey:SLVerson];}return rootVc;}@end è®¾ç½®ç•Œé¢ åˆ†æ ç•Œé¢è¾ƒå¤šï¼Œä½†å†…éƒ¨ç»“æ„åŸºæœ¬ç›¸åŒï¼Œ ä½¿ç”¨çº¯ä»£ç ï¼Œå¹¶ä¾æ®MVCå¼€å‘ æ·»åŠ Settingæ–‡ä»¶å¤¹ è®¾ç½®ç»„æ¨¡å‹SLSettingGroup123456789101112131415161718192021// SLSettingGroup.h@interface SLSettingGroup : NSObject/** cellæ¨¡å‹æ•°ç»„ */@property (nonatomic, strong) NSArray *items;/** å¤´éƒ¨æ ‡é¢˜ */@property (nonatomic, copy) NSString *headerTitle;/** å°¾éƒ¨æ ‡é¢˜ */@property (nonatomic, copy) NSString *footTitle;/*** é€šè¿‡cellæ¨¡å‹æ•°ç»„è¿”å›ç»„æ¨¡å‹*/+ (instancetype)groupWithItems:(NSArray *)items;@end// SLSettingGroup.m@implementation SLSettingGroup+ (instancetype)groupWithItems:(NSArray *)items{SLSettingGroup *group = [[SLSettingGroup alloc] init];group.items = items;return group;}@end è®¾ç½®cellæ¨¡å‹ åŸºæœ¬çš„cellï¼Œ12345678910111213141516171819202122232425// SLSettingItem.h@interface SLSettingItem : NSObject/** å›¾æ ‡ */@property (nonatomic, strong) UIImage *image;/** æ ‡é¢˜ */@property (nonatomic, copy) NSString *title;/** å­æ ‡é¢˜ */@property (nonatomic, copy) NSString *subTitle;/** ç‚¹å‡»è¿™è¡Œcellè¦åšçš„äº‹æƒ… */@property (nonatomic, strong) void(^operation)(NSIndexPath *indexPath);+ (instancetype)itemWithImage:(UIImage *)image title:(NSString *)title;+ (instancetype)itemWithTitle:(NSString *)title;@end// SLSettingItem.m@implementation SLSettingItem+ (instancetype)itemWithImage:(UIImage *)image title:(NSString *)title{SLSettingItem *item = [[self alloc] init];item.image = image;item.title = title;return item;}+ (instancetype)itemWithTitle:(NSString *)title{return [self itemWithImage:nil title:title];}@end ç®­å¤´å’Œå¼€å…³cell12345678910111213// å¸¦æœ‰ç®­å¤´çš„cellæ˜¯å¯ä»¥è·³è½¬ç‹­ä¹‰æ§åˆ¶å™¨çš„// è·³è½¬ç›®æ ‡æ§åˆ¶å™¨ 1.ç»‘å®šç±»åå­—ç¬¦ä¸² 2.ç»‘å®šç±»å// SLSettingArrowItem.h@interface SLSettingArrowItem : SLSettingItem/** ç›®æ ‡æ§åˆ¶å™¨ç±»å */@property (nonatomic, assign) Class desVc;@end// å¸¦æœ‰å¼€å…³çš„cellæ˜¯è¦æœ‰å¼€å…³çŠ¶æ€çš„// SLSettingSwitchItem.m@interface SLSettingSwitchItem : SLSettingItem/** çŠ¶æ€ */@property (nonatomic, assign, getter=isOpen) BOOL open;@end è®¾ç½®åŸºç¡€æ§åˆ¶å™¨SLBaseTableViewController æ‰€æœ‰æ§åˆ¶å™¨éƒ½åº”ä½¿ç”¨UITableViewControllerä¸”ä¸ºç»„æ¨¡å¼ï¼Œç»“æ„åŸºæœ¬ç›¸åŒï¼Œæå–è®¾ç½®åŸºç¡€æ§åˆ¶å™¨ ä»£ç åˆ›å»ºç»„ç±»å‹ï¼Œè¦é‡å†™initæ–¹æ³•123- (instancetype)init{return [super initWithStyle:UITableViewStyleGrouped];} åŸºç¡€æ§åˆ¶å™¨åŒ…å«ä¸€ä¸ªç»„æ•°æ®ï¼ˆå‘Šè¯‰æ§åˆ¶å™¨æœ‰å¤šå°‘ç»„ï¼Œä¸”ç»„ä¸­åŒ…å«cellæ¨¡å‹æ•°ç»„ï¼‰1234@interface SLBaseTableViewController : UITableViewController/** æ§åˆ¶å™¨çš„æ‰€æœ‰ç»„ */@property (nonatomic, strong) NSMutableArray *groups;@end æ•°æ®æºå’Œä»£ç†123456789101112131415161718192021222324252627282930313233343536373839404142434445464748- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {return self.groups.count;}- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {// å–å‡ºç»„æ•°ç»„çš„å½“å‰ç»„SLSettingGroup *group = self.groups[section];return group.items.count;}- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {SLSettingTableViewCell *cell = [SLSettingTableViewCell cellWithTableView:tableView];// ä»æ€»æ•°ç»„ä¸­å–å‡ºç»„æ¨¡å‹SLSettingGroup *group = self.groups[indexPath.section];// ä»cellæ¨¡å‹æ•°ç»„ä¸­å–å‡ºå½“å‰cellæ¨¡å‹SLSettingItem *item = group.items[indexPath.row];// ä¼ é€’æ¨¡å‹cell.item = item;return cell;}- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section{// å–å‡ºç»„æ¨¡å‹SLSettingGroup *group = self.groups[section];return group.headerTitle;}- (NSString *)tableView:(UITableView *)tableView titleForFooterInSection: (NSInteger)section {// å–å‡ºç»„æ¨¡å‹SLSettingGroup *group = self.groups[section];return group.footTitle;}- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {[tableView deselectRowAtIndexPath:indexPath animated:YES];// ä»æ€»æ•°ç»„ä¸­å–å‡ºç»„æ¨¡å‹æ•°ç»„SLSettingGroup *group = self.groups[indexPath.section];// ä»è¡Œæ¨¡å‹æ•°ç»„ä¸­å–å‡ºcellæ¨¡å‹SLSettingItem *item = group.items[indexPath.row];if (item.operation) {item.operation(indexPath);}else if ([item isKindOfClass:[SLSettingArrowItem class]]) {// åªæœ‰å‰ªå¤´æ¨¡å‹æ‰å…·å¤‡è·³è½¬åŠŸèƒ½SLSettingArrowItem *arrowItem = (SLSettingArrowItem *)item;if (arrowItem.desVc) {// å¦‚æœæœ‰ç›®æ ‡æ§åˆ¶å™¨// æ‹¿åˆ°ç›®æ ‡æ§åˆ¶å™¨ç±»å åˆ›å»ºç›®æ ‡æ§åˆ¶å™¨UIViewController *vc = [[arrowItem.desVc alloc] init];vc.title = arrowItem.title;[self.navigationController pushViewController:vc animated:YES];}}} è®¾ç½®æ§åˆ¶å™¨SLSettingTableViewController æ·»åŠ æ¨¡å‹123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051- (void)viewDidLoad {[super viewDidLoad];self.title = @&quot;è®¾ç½®&quot;;// æ·»åŠ ç¬¬0ç»„[self setupGroup0];// æ·»åŠ ç¬¬1ç»„[self setupGroup1];// æ·»åŠ ç¬¬2ç»„// ...}/*** ç¬¬0ç»„*/- (void)setupGroup0 {SLSettingArrowItem *item = [SLSettingArrowItem itemWithImage:[UIImage imageNamed:@&quot;RedeemCode&quot;] title:@&quot;ä½¿ç”¨å…‘æ¢ç &quot;];__weak typeof(self) weakSelf = self;// ä½¿ç”¨itemçš„operationè·³è½¬æ§åˆ¶å™¨item.operation = ^(NSIndexPath *indexPath) {UIViewController *vc = [[UIViewController alloc] init];vc.title = @&quot;asdf&quot;;vc.view.backgroundColor = [UIColor redColor];[weakSelf.navigationController pushViewController:vc animated:YES];};// åˆ›å»ºç»„æ¨¡å‹SLSettingGroup *group = [SLSettingGroup groupWithItems:@[item]];group.headerTitle = @&quot;123&quot;;group.footTitle = @&quot;qeqrere&quot;;// æ·»åŠ åˆ°æ€»æ•°ç»„ä¸­[self.groups addObject:group];}/*** ç¬¬1ç»„*/- (void)setupGroup1 {SLSettingArrowItem *item1 = [SLSettingArrowItem itemWithImage:[UIImage imageNamed:@&quot;MorePush&quot;] title:@&quot;æ¨é€å’Œæé†’&quot;];// ç®­å¤´ç‰¹æœ‰å±æ€§desVcå®ç°è·³è½¬item1.desVc = [SLPushTableViewController class];SLSettingSwitchItem *item2 = [SLSettingSwitchItem itemWithImage:[UIImage imageNamed:@&quot;handShake&quot;] title:@&quot;ä½¿ç”¨æ‘‡ä¸€æ‘‡æœºé€‰&quot;];item2.open = YES;SLSettingSwitchItem *item3 = [SLSettingSwitchItem itemWithImage:[UIImage imageNamed:@&quot;sound_Effect&quot;] title:@&quot;å£°éŸ³æ•ˆæœ&quot;];SLSettingSwitchItem *item4 = [SLSettingSwitchItem itemWithImage:[UIImage imageNamed:@&quot;More_LotteryRecommend&quot;] title:@&quot;è´­å½©å°åŠ©æ‰‹&quot;];// åˆ›å»ºç»„æ¨¡å‹SLSettingGroup *group = [SLSettingGroup groupWithItems:@[item1, item2, item3, item4]];group.headerTitle = @&quot;qwe&quot;;group.footTitle = @&quot;slll&quot;;// æ·»åŠ åˆ°æ€»æ•°ç»„ä¸­[self.groups addObject:group];}// ...// æ·»åŠ ... å…¶ä»–çš„æ§åˆ¶å™¨ä¸è®¾ç½®æ§åˆ¶å™¨ç›¸åŒï¼Œåªéœ€åˆ›å»ºå¹¶æ·»åŠ ç›¸åº”çš„ç»„æ¨¡å‹ blockç®€å•ä»‹ç» å°è£…ä¸€æ®µä»£ç ï¼Œåœ¨åˆé€‚çš„æ—¶å€™è°ƒç”¨ ä¸¤ç§å®šä¹‰æ–¹æ³•ï¼ˆæ²¡æœ‰å‚æ•°å’Œè¿”å›å€¼ï¼‰12345678// 1. ç¬¬ä¸€ç§æ–¹æ³• è¿™é‡Œçš„blockæ˜¯å˜é‡åvoid(^block)() = ^() {// è¦ä¿å­˜çš„ä»£ç å—...};// 2. èµ·åˆ«åçš„æ–¹å¼// è¿™é‡Œçš„MyBlockæ˜¯ç±»å‹åï¼Œè¿™ä¸ªå¯ä»¥è·¨æ–¹æ³•æ‰§è¡Œtypedef void(^MyBlock)();@property (nonatomic, strong) MyBlock block; blockå¯ä»¥å½“åšå‚æ•°æ¥ä¼ é€’ inlineå¿«é€Ÿåˆ›å»ºblock è®¾ç½®ç•Œé¢å›é¡¾ MVCè®¾è®¡æ¨¡å¼çš„å¼ºå¤§ï¼Œæ›´æ”¹éœ€æ±‚åªéœ€ä¿®æ”¹æ¨¡å‹ï¼Œä¸éœ€è¦å†ä¿®æ”¹viewçš„æ˜¾ç¤ºä»£ç ","link":"/2016/09/01/my-ios-day16/"},{"title":"my-ios-day17","text":"è¿™ä¸ªæ˜¯16å¹´é‡æ–°å¤ä¹ çš„iOSç¬”è®°ï¼Œå½“æ—¶æ˜¯æ”¾åœ¨äº†gitbookï¼Œç°åœ¨è½¬ç§»è¿‡æ¥ï¼ day 17å¤šçº¿ç¨‹ è¿›ç¨‹ä¸çº¿ç¨‹ pthread NSThread GCD è¿›ç¨‹ä¸çº¿ç¨‹ è¿›ç¨‹ åœ¨ç³»ç»Ÿä¸­æ­£åœ¨è¿è¡Œçš„ä¸€ä¸ªåº”ç”¨ç¨‹åºã€‚æ¯ä¸ªè¿›ç¨‹é—´æ˜¯ç‹¬ç«‹çš„ï¼Œæ¯ä¸ªè¿›ç¨‹è¿è¡Œåœ¨ä¸“æœ‰ä¸”å—ä¿æŠ¤çš„å†…å­˜ç©ºé—´ æ˜¯ç³»ç»Ÿåˆ†é…èµ„æºçš„åŸºæœ¬å•ä½ çº¿ç¨‹ ä¸€ä¸ªè¿›ç¨‹è¦æƒ³æ‰§è¡Œä»»åŠ¡ï¼Œå¿…é¡»è¦æœ‰ä¸€ä¸ªçº¿ç¨‹ï¼Œçº¿ç¨‹æ‰§è¡Œä»»åŠ¡æ˜¯ä¸²è¡Œçš„ï¼Œä¸€ä¸ªçº¿ç¨‹åªèƒ½åœ¨æ‰§è¡Œä¸€ä¸ªä»»åŠ¡ æ˜¯ç³»ç»Ÿç¨‹åºè°ƒåº¦çš„åŸºæœ¬å•ä½ å¤šçº¿ç¨‹ ä¸€ä¸ªè¿›ç¨‹å¯ä»¥å¼€å¯å¤šä¸ªçº¿ç¨‹ï¼Œå¤šæ¡çº¿ç¨‹å¯ä»¥å¹¶è¡Œæ‰§è¡Œï¼ŒåŒæ—¶æ‰§è¡Œ å•æ ¸CPUçš„è¿™ç§å¹¶è¡Œä¹Ÿæ˜¯åªæœ‰ä¸€æ¡çº¿ç¨‹å·¥ä½œï¼Œåªæ˜¯CPUè°ƒåº¦å¿«ï¼Œçº¿ç¨‹é—´ä¸æ–­åˆ‡æ¢ ä¼˜ç‚¹ èƒ½é€‚å½“æé«˜ç¨‹åºçš„æ‰§è¡Œæ•ˆç‡ èƒ½é€‚å½“æé«˜èµ„æºï¼ˆCPUã€å†…å­˜ï¼‰åˆ©ç”¨ç‡ ç¼ºç‚¹ å¼€å¯çº¿ç¨‹ä¼šå ç”¨ä¸€å®šå†…å­˜ï¼Œå¼€å¯è¿‡å¤šçº¿ç¨‹ä¼šå¤§é‡å ç”¨ç©ºé—´ çº¿ç¨‹è¶Šå¤šï¼ŒCPUè°ƒåº¦çº¿ç¨‹çš„å¼€é”€å°±è¶Šå¤§ ç¨‹åºè®¾è®¡ä¼šè¿‡äºå¤æ‚ï¼ˆè¿›ç¨‹é—´é€šä¿¡ã€èµ„æºå…±äº«ï¼‰ æ˜¯ä¸€ç§ä»¥ç©ºé—´æ¢å–æ—¶é—´çš„æŠ€æœ¯ pthread ç®€ä»‹ ä¸€å¥—è·¨å¹³å°çš„å¤šçº¿ç¨‹APIï¼ˆUnixã€Linuxã€Windowsç­‰ï¼‰ é‡‡ç”¨Cè¯­è¨€ï¼Œä½¿ç”¨éš¾åº¦è¾ƒå¤§ï¼Œå¾ˆå°‘ä½¿ç”¨ ä½¿ç”¨1234567891011// åˆ›å»ºçº¿ç¨‹å¯¹è±¡pthread_t thread1;// åˆ›å»ºçº¿ç¨‹/*pthread_create(pthread_t *restrict, const pthread_attr_t *restrict, void *(*)(void *), void *restrict)ç¬¬ä¸€ä¸ªå‚æ•°ï¼šçº¿ç¨‹å¯¹è±¡ã€ä¼ é€’åœ°å€ç¬¬äºŒä¸ªå‚æ•°ï¼šçº¿ç¨‹å±æ€§ã€NULLç¬¬ä¸‰ä¸ªå‚æ•°ï¼šæŒ‡å‘å‡½æ•°çš„æŒ‡é’ˆç¬¬å››ä¸ªå‚æ•°ï¼šå‡½æ•°éœ€è¦æ¥æ”¶çš„å‚æ•°*/pthread_create(&amp;thread1, NULL, test, NULL); pthread ç®€ä»‹ ä¸‰ç§åˆ›å»ºæ–¹æ³•12345678910111213141516171819202122232425// é€šè¿‡initæ–¹æ³•åˆ›å»ºçº¿ç¨‹ï¼Œéœ€è¦æ‰‹åŠ¨å¼€å¯/*initWithTarget:(nonnull id) selector:(nonnull SEL) object:(nullable id)ç¬¬ä¸€ä¸ªå‚æ•°ï¼šç›®æ ‡å¯¹è±¡ã€selfç¬¬äºŒä¸ªå‚æ•°ï¼šæ–¹æ³•é€‰æ‹©å™¨ã€è°ƒç”¨çš„æ–¹æ³•ç¬¬ä¸‰ä¸ªå‚æ•°ï¼šå‰é¢æ–¹æ³•éœ€è¦çš„å‚æ•°ã€nil*/NSThread *thread1 = [[NSThread alloc] initWithTarget:self selector:@selector(test1) object:nil];// å¼€å¯çº¿ç¨‹[thread1 start];// é€šè¿‡ç±»æ–¹æ³•åˆ›å»ºï¼Œåˆ†ç¦»å‡ºçš„å­çº¿ç¨‹/*detachNewThreadSelector:(nonnull SEL) toTarget:(nonnull id) withObject:(nullable id)ç¬¬ä¸€ä¸ªå‚æ•°ï¼šæ–¹æ³•é€‰æ‹©å™¨ã€è°ƒç”¨çš„æ–¹æ³•ç¬¬äºŒä¸ªå‚æ•°ï¼šç›®æ ‡å¯¹è±¡ã€selfç¬¬ä¸‰ä¸ªå‚æ•°ï¼šå‰é¢æ–¹æ³•éœ€è¦çš„å‚æ•°ã€nil*/NSThread *thread2 = [NSThread detachNewThreadSelector:@selector(test2) toTarget:self withObject:nil];// å¼€å¯åå°çº¿ç¨‹/*performSelectorInBackground:(nonnull SEL) withObject:(nullable id)ç¬¬ä¸€ä¸ªå‚æ•°ï¼šæ–¹æ³•é€‰æ‹©å™¨ã€è°ƒç”¨çš„æ–¹æ³•ç¬¬äºŒä¸ªå‚æ•°ï¼šå‰é¢æ–¹æ³•éœ€è¦çš„å‚æ•°ã€nil*/[self performSelectorInBackground:@selector(test3) withObject:nil]; å±æ€§1234// è®¾ç½®åå­—thread1.name = @&quot;çº¿ç¨‹1&quot;;// çº¿ç¨‹ä¼˜å…ˆçº§thread1.threadPriority = 1; çº¿ç¨‹çŠ¶æ€ æ–°å»ºçŠ¶æ€ å°±ç»ªçŠ¶æ€ è¿è¡ŒçŠ¶æ€ é˜»å¡çŠ¶æ€1234// ç¬¬ä¸€ç§ï¼šé˜»å¡ä¸¤ç§’[NSThread sleepForTimeInterval:2.0];// ç¬¬äºŒç§ï¼šé˜»å¡ä¸‰ç§’[NSThread sleepUntilDate:[NSDate dateWithTimeInterval:3.0]]; æ­»äº¡çŠ¶æ€12// é€€å‡ºçº¿ç¨‹ï¼Œé€€å‡ºåä¸èƒ½å†é‡å¯çº¿ç¨‹[NSThread exit]; çº¿ç¨‹å®‰å…¨ ä¸€å—èµ„æºè¢«å¤šä¸ªçº¿ç¨‹è®¿é—®ï¼Œä¼šå¼•å‘æ•°æ®æ··ä¹± åŠ é”123456789101112// é”æ˜¯å…¨å±€å”¯ä¸€çš„@synchronized(self) {NSInteger count = self.totalCount;if (count &gt; 0) {for (int i = 0; i &lt; 10000; i++) {}self.totalCount -= 1;}else {NSLog(@&quot;æ²¡æœ‰äº†&quot;);break;}} æ³¨æ„ï¼š åŠ é”çš„ä½ç½® åŠ é”çš„å‰ææ¡ä»¶ï¼ˆå¤šçº¿ç¨‹å…±äº«åŒä¸€èµ„æºï¼‰ åŠ é”æ˜¯æœ‰ä»£ä»·çš„ï¼Œéœ€è¦è€—è´¹æ€§èƒ½çš„ åŠ é”çš„ç»“æœæ˜¯ï¼šçº¿ç¨‹åŒæ­¥ åŸå­å’ŒéåŸå­ nonatomicå’Œatomic atomicï¼šçº¿ç¨‹å®‰å…¨ï¼Œéœ€è¦è€—è´¹å¤§é‡èµ„æºï¼ŒåŠ é” nonatomicï¼šéçº¿ç¨‹å®‰å…¨ï¼Œé€‚åˆå°å†…å­˜ç§»åŠ¨è®¾å¤‡ iOSæ³¨æ„ æ‰€æœ‰å±æ€§éƒ½å£°æ˜ä¸ºnonatomic å°½é‡é¿å…å¤šçº¿ç¨‹æŠ¢å¤ºåŒä¸€èµ„æº å°†åŠ é”ã€èµ„æºæŠ¢å¤ºäº¤ç»™æœåŠ¡å™¨ï¼Œå‡å°å®¢æˆ·ç«¯å‹åŠ› çº¿ç¨‹é—´é€šä¿¡ å…·ä½“ä½“ç° ä¸€ä¸ªçº¿ç¨‹ä¼ é€’æ•°æ®ç»™å¦ä¸€ä¸ªçº¿ç¨‹ åœ¨ä¸€ä¸ªç‰¹å®šçº¿ç¨‹æ‰§è¡Œå®Œæˆè¿‡åï¼Œè½¬åˆ°å¦ä¸€ä¸ªçº¿ç¨‹ç»§ç»­æ‰§è¡Œä»»åŠ¡ å¸¸ç”¨æ–¹æ³•12345678910111213/*ç¬¬ä¸€ä¸ªå‚æ•°ï¼šå›åˆ°çº¿ç¨‹çš„ä»€ä¹ˆæ–¹æ³•ç¬¬äºŒä¸ªå‚æ•°ï¼šå›åˆ°é‚£ä¸ªçº¿ç¨‹ç¬¬ä¸‰ä¸ªå‚æ•°ï¼šä¼ é€’çš„å‚æ•°ç¬¬å››ä¸ªå‚æ•°ï¼šæ˜¯å¦éœ€è¦ç­‰å¾…*/- (void)performSelector:(SEL)aSelector onThread:(NSThread *)thr withObject:(id)arg waitUntilDone:(BOOL)wait;/*ç¬¬ä¸€ä¸ªå‚æ•°ï¼šå›åˆ°ä¸»çº¿ç¨‹çš„ä»€ä¹ˆæ–¹æ³•ç¬¬äºŒä¸ªå‚æ•°ï¼šä¼ é€’çš„å‚æ•°ç¬¬ä¸‰ä¸ªå‚æ•°ï¼šæ˜¯å¦éœ€è¦ç­‰å¾…*/- (void)performSelectorOnMainThread:(SEL)aSelector withObject:(id)arg waitUntilDone:(BOOL)wait; å›¾ç‰‡ä¸‹è½½ æ·»åŠ UIImageView å¼€å¯çº¿ç¨‹ï¼Œä¸‹è½½å›¾ç‰‡ å›åˆ°ä¸»çº¿ç¨‹åˆ·æ–°UI ä»£ç 123456789101112131415161718192021- (void)touchesBegan:(NSSet&lt;UITouch *&gt; *)touches withEvent:(UIEvent *)event {[NSThread detachNewThreadSelector:@selector(downLoadImage) toTarget:self withObject:nil];}- (void)downLoadImage {NSLog(@&quot;%@&quot;, [NSThread currentThread]);CFTimeInterval startD = CFAbsoluteTimeGetCurrent();// ç¡®å®šurlNSURL *url = [NSURL URLWithString:@&quot;http://www.onegreen.net/maps/Upload_maps/201412/2014120107143496.jpg&quot;];// æ ¹æ®urlä¸‹è½½å›¾ç‰‡åˆ°æœ¬åœ°ï¼ˆäºŒè¿›åˆ¶æ•°æ®ï¼‰NSData *imageData = [NSData dataWithContentsOfURL:url];// è½¬æ¢æ•°æ®UIImage *image = [UIImage imageWithData:imageData];// å›åˆ°ä¸»çº¿ç¨‹æ˜¾ç¤ºåˆ°imageView[self performSelectorOnMainThread:@selector(showImage:) withObject:image waitUntilDone:YES];CFTimeInterval endD = CFAbsoluteTimeGetCurrent();NSLog(@&quot;%f&quot;, endD - startD);}- (void)showImage:(UIImage *)image {NSLog(@&quot;%@&quot;, [NSThread currentThread]);self.imageView.image = image;} å¯ä»¥é€šè¿‡imageViewè°ƒç”¨å›åˆ°ä¸»çº¿ç¨‹çš„æ–¹æ³•1[self.imageView performSelectorOnMainThread:@selector(setImage:) withObject:image waitUntilDone:YES]; GCD ç®€ä»‹ Grand Centra Dispatchï¼Œçº¯Cè¯­è¨€ï¼Œæ‹¥æœ‰éå¸¸å¼ºå¤§çš„å‡½æ•° å……åˆ†åˆ©ç”¨CPUå¤šæ ¸ï¼Œå‘æŒ¥è®¾å¤‡æ€§èƒ½ ä¼šè‡ªåŠ¨ç®¡ç†çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸï¼ˆåˆ›å»ºã€è°ƒåº¦ã€é”€æ¯ï¼‰ åªéœ€å‘Šè¯‰GCDè¦æ‰§è¡Œçš„ä»£ç ï¼Œä¸ç¼–å†™çº¿ç¨‹ç®¡ç†ä»£ç  ä¸¤ä¸ªæ ¸å¿ƒæ¦‚å¿µ ä»»åŠ¡ï¼šéœ€è¦æ‰§è¡Œçš„æ“ä½œ é˜Ÿåˆ—ï¼šç”¨æ¥å­˜æ”¾ä»»åŠ¡ ä¸¤ä¸ªæ­¥éª¤ å®šåˆ¶ä»»åŠ¡ï¼Œç¡®å®šè¦æ‰§è¡Œçš„æ“ä½œ æ·»åŠ åˆ°é˜Ÿåˆ— GCDä¼šè‡ªåŠ¨å–å‡ºé˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ï¼Œæ”¾åˆ°ç›¸åº”çš„çº¿ç¨‹æ‰§è¡Œ ä»»åŠ¡çš„å–å‡ºéµå®ˆFIFOï¼ˆå…ˆè¿›å…ˆå‡ºï¼‰åŸåˆ™ ä¸¤ä¸ªå‡½æ•° åŒæ­¥å‡½æ•°12345/*queueï¼šé˜Ÿåˆ—blockï¼šä»»åŠ¡*/dispatch_sync(dispatch_queue_t queue, ^(void)block) å¼‚æ­¥å‡½æ•°12345/*queueï¼šé˜Ÿåˆ—blockï¼šä»»åŠ¡*/dispatch_async(dispatch_queue_t queue, ^(void)block) åŒºåˆ« åŒæ­¥ï¼šåªèƒ½åœ¨å½“å‰çº¿ç¨‹ä¸­æ‰§è¡Œä»»åŠ¡ï¼Œä¸å…·å¤‡å¼€å¯æ–°çº¿ç¨‹çš„èƒ½åŠ› å¼‚æ­¥ï¼šå¯ä»¥åœ¨æ–°çº¿ç¨‹ä¸­æ‰§è¡Œä»»åŠ¡ï¼Œå…·å¤‡å¼€å¯æ–°çº¿ç¨‹çš„èƒ½åŠ›ï¼Œä½†ä¸ä¸€å®šå¼€å¯æ–°çº¿ç¨‹ ä¸¤ç§é˜Ÿåˆ— å¹¶å‘é˜Ÿåˆ— å¯ä»¥è®©å¤šä¸ªä»»åŠ¡å¹¶å‘ï¼ˆåŒæ—¶ï¼‰æ‰§è¡Œï¼Œè‡ªåŠ¨å¼€å¯å¤šä¸ªçº¿ç¨‹åŒæ—¶æ‰§è¡Œä»»åŠ¡ åªæœ‰åœ¨å¼‚æ­¥å‡½æ•°dispatch_asyncä¸­åœ¨æœ‰æ•ˆï¼ˆå¼€çº¿ç¨‹ï¼‰ ä¸²è¡Œé˜Ÿåˆ— è®©ä»»åŠ¡ä¸€ä¸ªæ¥ç€ä¸€ä¸ªçš„æ‰§è¡Œï¼ˆä¸€ä¸ªä»»åŠ¡æ‰§è¡Œå®Œå†æ‰§è¡Œä¸‹ä¸€ä¸ªä»»åŠ¡ï¼‰ å››ç§ç»„åˆ å¼‚æ­¥å‡½æ•°+å¹¶å‘é˜Ÿåˆ—123456789101112131415161718192021222324252627282930/*** å¼‚æ­¥å‡½æ•°+å¹¶å‘é˜Ÿåˆ—* ä¼šå¼€å¯å¤šæ¡çº¿ç¨‹ï¼Œä»»åŠ¡å¼‚æ­¥æ‰§è¡Œï¼ˆæ²¡æœ‰é¡ºåºï¼Œä¸€èµ·æ‰§è¡Œï¼‰* å¹¶ä¸æ˜¯æœ‰å¤šå°‘ä¸ªä»»åŠ¡å°±ä¼šå¼€å¤šå°‘ä¸ªçº¿ç¨‹*/- (void)asyncConcurrent {// åˆ›å»ºé˜Ÿåˆ—/*** labelï¼šCè¯­è¨€å­—ç¬¦ä¸²ï¼Œæ ‡ç­¾* queueï¼šé˜Ÿåˆ—ç±»å‹* DISPATCH_QUEUE_CONCURRENTï¼šå¹¶å‘* DISPATCH_QUEUE_SERIALï¼šä¸²è¡Œ*/dispatch_queue_t queue = dispatch_queue_create(&quot;xyz.Sleen&quot;, DISPATCH_QUEUE_CONCURRENT);// å°è£…ä»»åŠ¡ï¼Œæ·»åŠ åˆ°é˜Ÿåˆ—dispatch_async(queue, ^{NSLog(@&quot;downLoad - image1--%@&quot;, [NSThread currentThread]);});dispatch_async(queue, ^{NSLog(@&quot;downLoad - image2--%@&quot;, [NSThread currentThread]);});dispatch_async(queue, ^{NSLog(@&quot;downLoad - image3--%@&quot;, [NSThread currentThread]);});/* æ‰“å°ç»“æœdownLoad - image1--&lt;NSThread: 0x7ff4a370ce40&gt;{number = 2, name = (null)}downLoad - image3--&lt;NSThread: 0x7ff4a3614ff0&gt;{number = 4, name = (null)}downLoad - image2--&lt;NSThread: 0x7ff4a347d260&gt;{number = 3, name = (null)}*/} å¼‚æ­¥å‡½æ•°+ä¸²è¡Œé˜Ÿåˆ—1234567891011121314151617181920212223/*** å¼‚æ­¥å‡½æ•°+ä¸²è¡Œé˜Ÿåˆ—* ä¼šå¼€å¯ä¸€æ¡æ–°çº¿ç¨‹ï¼Œä»»åŠ¡ä¸²è¡Œæ‰§è¡Œï¼ˆä¸€ä¸ªæ¥ç€ä¸€æ‰§è¡Œï¼‰*/- (void)asyncSerial {// åˆ›å»ºé˜Ÿåˆ—dispatch_queue_t queue = dispatch_queue_create(&quot;xyz.Sleen&quot;, DISPATCH_QUEUE_SERIAL);// å°è£…ä»»åŠ¡ï¼Œæ·»åŠ åˆ°é˜Ÿåˆ—dispatch_async(queue, ^{NSLog(@&quot;downLoad - image1--%@&quot;, [NSThread currentThread]);});dispatch_async(queue, ^{NSLog(@&quot;downLoad - image2--%@&quot;, [NSThread currentThread]);});dispatch_async(queue, ^{NSLog(@&quot;downLoad - image3--%@&quot;, [NSThread currentThread]);});/* æ‰“å°ç»“æœdownLoad - image1--&lt;NSThread: 0x7fe481e0ba00&gt;{number = 2, name = (null)}downLoad - image2--&lt;NSThread: 0x7fe481e0ba00&gt;{number = 2, name = (null)}downLoad - image3--&lt;NSThread: 0x7fe481e0ba00&gt;{number = 2, name = (null)}*/} åŒæ­¥å‡½æ•°+å¹¶å‘é˜Ÿåˆ—1234567891011121314151617181920212223/*** åŒæ­¥å‡½æ•°+å¹¶å‘é˜Ÿåˆ—* ä¸ä¼šå¼€çº¿ç¨‹ï¼Œä»»åŠ¡ä¸²è¡Œæ‰§è¡Œï¼ˆä¸€ä¸ªæ¥ç€ä¸€æ‰§è¡Œï¼‰*/- (void)syncConcurrent {// åˆ›å»ºé˜Ÿåˆ—dispatch_queue_t queue = dispatch_queue_create(&quot;xyz.Sleen&quot;, DISPATCH_QUEUE_CONCURRENT);// å°è£…ä»»åŠ¡ï¼Œæ·»åŠ åˆ°é˜Ÿåˆ—dispatch_sync(queue, ^{NSLog(@&quot;downLoad - image1--%@&quot;, [NSThread currentThread]);});dispatch_sync(queue, ^{NSLog(@&quot;downLoad - image2--%@&quot;, [NSThread currentThread]);});dispatch_sync(queue, ^{NSLog(@&quot;downLoad - image3--%@&quot;, [NSThread currentThread]);});/* æ‰“å°ç»“æœï¼šdownLoad - image1--&lt;NSThread: 0x7fd3b2f00f50&gt;{number = 1, name = main}downLoad - image2--&lt;NSThread: 0x7fd3b2f00f50&gt;{number = 1, name = main}downLoad - image3--&lt;NSThread: 0x7fd3b2f00f50&gt;{number = 1, name = main}*/} åŒæ­¥å‡½æ•°+ä¸²è¡Œé˜Ÿåˆ—1234567891011121314151617181920212223/*** åŒæ­¥å‡½æ•°+ä¸²è¡Œé˜Ÿåˆ—* ä¸ä¼šå¼€çº¿ç¨‹ï¼Œä»»åŠ¡ä¸²è¡Œæ‰§è¡Œï¼ˆä¸€ä¸ªæ¥ç€ä¸€æ‰§è¡Œï¼‰*/- (void)syncSerial {// åˆ›å»ºé˜Ÿåˆ—dispatch_queue_t queue = dispatch_queue_create(&quot;xyz.Sleen&quot;, DISPATCH_QUEUE_SERIAL);// å°è£…ä»»åŠ¡ï¼Œæ·»åŠ åˆ°é˜Ÿåˆ—dispatch_sync(queue, ^{NSLog(@&quot;downLoad - image1--%@&quot;, [NSThread currentThread]);});dispatch_sync(queue, ^{NSLog(@&quot;downLoad - image2--%@&quot;, [NSThread currentThread]);});dispatch_sync(queue, ^{NSLog(@&quot;downLoad - image3--%@&quot;, [NSThread currentThread]);});/* æ‰“å°ç»“æœï¼šdownLoad - image1--&lt;NSThread: 0x7fe333f04dd0&gt;{number = 1, name = main}downLoad - image2--&lt;NSThread: 0x7fe333f04dd0&gt;{number = 1, name = main}downLoad - image3--&lt;NSThread: 0x7fe333f04dd0&gt;{number = 1, name = main}*/} æ¶‰åŠåˆ°åŒæ­¥å‡½æ•°çš„éƒ½ä¸ä¼šåˆ›å»ºæ–°çº¿ç¨‹ï¼Œä»»åŠ¡éƒ½æ˜¯ä¸²è¡Œæ‰§è¡Œ GCDæä¾›ä¸€ä¸ªå…¨å±€å¹¶å‘é˜Ÿåˆ—123456/*** è·å¾—å…¨å±€å¹¶å‘é˜Ÿåˆ—* ç¬¬ä¸€ä¸ªå‚æ•°ï¼šä¼˜å…ˆçº§* ç¬¬äºŒä¸ªå‚æ•°ï¼šâ€œæœªæ¥ä½¿ç”¨â€--0*/dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0); GCDæä¾›ä¸€ä¸ªä¸»é˜Ÿåˆ—ï¼ˆä¸²è¡Œé˜Ÿåˆ—ï¼‰ å¼‚æ­¥å‡½æ•°+ä¸»é˜Ÿåˆ—12345678910111213141516171819202122232425/*** å¼‚æ­¥å‡½æ•°+ä¸»é˜Ÿåˆ—* ä¸ä¼šå¼€çº¿ç¨‹ï¼Œéƒ½åœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œ*/- (void)asycnMain {// è·å–ä¸»çº¿ç¨‹dispatch_queue_t queue = dispatch_get_main_queue();// å°è£…ä»»åŠ¡ï¼Œæ·»åŠ åˆ°é˜Ÿåˆ—dispatch_async(queue, ^{NSLog(@&quot;downLoad - image1--%@&quot;, [NSThread currentThread]);});dispatch_async(queue, ^{NSLog(@&quot;downLoad - image2--%@&quot;, [NSThread currentThread]);});dispatch_async(queue, ^{NSLog(@&quot;downLoad - image3--%@&quot;, [NSThread currentThread]);});/* æ‰“å°ç»“æœstart---end---downLoad - image1--&lt;NSThread: 0x7fb533f01aa0&gt;{number = 1, name = main}downLoad - image2--&lt;NSThread: 0x7fb533f01aa0&gt;{number = 1, name = main}downLoad - image3--&lt;NSThread: 0x7fb533f01aa0&gt;{number = 1, name = main}*/} åŒæ­¥å‡½æ•°+ä¸»é˜Ÿåˆ—1234567891011121314151617181920/*** åŒæ­¥å‡½æ•°+ä¸»é˜Ÿåˆ—* æ­»é”*/- (void)sycnMain {// è·å–ä¸»çº¿ç¨‹dispatch_queue_t queue = dispatch_get_main_queue();NSLog(@&quot;start---&quot;);// å°è£…ä»»åŠ¡ï¼Œæ·»åŠ åˆ°é˜Ÿåˆ—dispatch_sync(queue, ^{NSLog(@&quot;downLoad - image1--%@&quot;, [NSThread currentThread]);});dispatch_sync(queue, ^{NSLog(@&quot;downLoad - image2--%@&quot;, [NSThread currentThread]);});dispatch_sync(queue, ^{NSLog(@&quot;downLoad - image3--%@&quot;, [NSThread currentThread]);});NSLog(@&quot;end---&quot;);} æ­»é”åˆ†æ ä¸»é˜Ÿåˆ—ç‰¹ç‚¹ï¼šå¦‚æœä¸»é˜Ÿåˆ—å‘ç°å½“å‰ä¸»çº¿ç¨‹æ­£åœ¨æ‰§è¡Œä»»åŠ¡ï¼Œé‚£ä¹ˆä¸»é˜Ÿåˆ—ä¼šæš‚åœè°ƒç”¨é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ï¼ŒçŸ¥é“ä¸»çº¿ç¨‹ç©ºé—²ä¸ºæ­¢ åŒæ­¥å‡½æ•°+ä¸»é˜Ÿåˆ—ï¼Œä¸»çº¿ç¨‹æ­£åœ¨æ‰§è¡ŒsycnMainï¼Œå› ä¸ºæ¥ä¸‹æ¥æ˜¯åŒæ­¥å‡½æ•°ï¼Œä¸»çº¿ç¨‹ä¸æ‰§è¡Œå®ŒsycnMainå°±ä¸ä¼šç»§ç»­æ‰§è¡Œï¼Œä¸»é˜Ÿåˆ—å°±ä¸ä¼šè°ƒç”¨é˜Ÿåˆ—çš„ä»»åŠ¡ï¼Œæ­»é” å¼‚æ­¥å‡½æ•°+ä¸»é˜Ÿåˆ—ï¼Œä¸»çº¿ç¨‹æ­£åœ¨æ‰§è¡ŒasycnMainï¼Œå› ä¸ºæ¥ä¸‹æ¥æ˜¯å¼‚æ­¥å‡½æ•°ï¼Œå¯ä»¥ç­‰ä¸‹å›æ¥åœ¨æ‰§è¡Œï¼Œä¸»çº¿ç¨‹å…ˆæ‰§è¡Œå®ŒsycnMainï¼Œç„¶åä¸»é˜Ÿåˆ—å†è°ƒç”¨é˜Ÿåˆ—çš„ä»»åŠ¡ï¼Œä¸ä¼šæ­»é” GCDçº¿ç¨‹é—´é€šä¿¡123456789101112131415161718dispatch_async(dispatch_get_global_queue(0, 0), ^{NSLog(@&quot;%@&quot;, [NSThread currentThread]);// ç¡®å®šurlNSURL *url = [NSURL URLWitString:@&quot;http://www.onegreen.net/maps/Upload_maps/2014122014120107143496.jpg&quot;];// æ ¹æ®urlä¸‹è½½å›¾ç‰‡åˆ°æœ¬åœ°ï¼ˆäºŒè¿›åˆ¶æ•°æ®ï¼‰NSData *imageData = [NSData dataWihContentsOfURL:url];// è½¬æ¢æ•°æ®UIImage *image = [UIImage imageWthData:imageData];// å›åˆ°ä¸»çº¿ç¨‹æ˜¾ç¤ºåˆ°imageViewdispatch_async(dispatch_get_main_queue(), ^{NSLog(@&quot;%@&quot;, [NSThread currentThread]);self.imageView.image = image;});});/* æ‰“å°ç»“æœ&lt;NSThread: 0x7ffa8861e9e0&gt;{number = 2, name = (null)}&lt;NSThread: 0x7ffa88404630&gt;{number = 1, name = main}*/ GCDå…¶ä»–æ–¹æ³• å»¶è¿Ÿæ‰§è¡Œ1234567891011121314// ç¬¬ä¸€ç§ï¼šä¸¤ç§’æ‰§è¡Œselfçš„testæ–¹æ³•[self performSelector:@selector(test) withObject:self afterDelay:2];// ç¬¬äºŒç§ï¼šä¸‰ç§’åæ‰§è¡Œselfçš„testæ–¹æ³•ï¼Œä¸é‡å¤[NSTimer timerWithTimeInterval:3 target:self selector:@selector(test) userInfo:nil repeats:NO];// ç¬¬ä¸‰ç§ï¼šdelayInSecondsç§’åå†ä¸»é˜Ÿåˆ—æ‰§è¡Œæ“ä½œ/*ç¬¬ä¸€ä¸ªå‚æ•°ï¼šDISPATCH_TIME_NOWï¼Œä»ç°åœ¨å¼€å§‹è®¡ç®—ç¬¬äºŒä¸ªå‚æ•°ï¼šå»¶è¿Ÿçš„æ—¶é—´ï¼ŒGCDæ—¶é—´å•ä½çº³ç§’ç¬¬ä¸‰ä¸ªå‚æ•°ï¼šé˜Ÿåˆ—ï¼ˆä¸»é˜Ÿåˆ—ã€ä¸²è¡Œé˜Ÿåˆ—ã€å¹¶å‘é˜Ÿåˆ—ï¼‰blockï¼šæ“ä½œ*/dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(delayInSeconds * NSEC_PER_SEC)), dispatch_get_main_queue(), ^{// code to be executed after a specified delay}); ä¸€æ¬¡æ€§ä»£ç 123456// æ•´ä¸ªç¨‹åºçš„è¿è¡Œè¿‡ç¨‹ä¸­åªä¼šè°ƒç”¨ä¸€æ¬¡static dispatch_once_t onceToken;dispatch_once(&amp;onceToken, ^{// code to be executed onceNSLog(@&quot;--once--&quot;);}); åº”ç”¨åœºæ™¯ â€”- å•ä¾‹æ¨¡å¼ æ …æ å‡½æ•° æ§åˆ¶å¤šçº¿ç¨‹å¼‚æ­¥æ‰§è¡Œé¡ºåº123456789101112131415161718192021dispatch_queue_t queue = dispatch_queue_create(&quot;sxy.Sleen&quot;, DISPATCH_QUEUE_CONCURRENT);dispatch_async(queue, ^{NSLog(@&quot;downLoad--1--%@&quot;, [NSThread currentThread]);});dispatch_async(queue, ^{NSLog(@&quot;downLoad--2--%@&quot;, [NSThread currentThread]);});// æ …æ å‡½æ•°// ä¸èƒ½ä½¿ç”¨å…¨å±€å¹¶å‘é˜Ÿåˆ—dispatch_barrier_async(queue, ^{NSLog(@&quot;-------æ …æ å‡½æ•°&quot;);});dispatch_async(queue, ^{NSLog(@&quot;downLoad--3--%@&quot;, [NSThread currentThread]);});/*downLoad--1--&lt;NSThread: 0x7fad93c08760&gt;{number = 3, name = (null)}downLoad--2--&lt;NSThread: 0x7fad93e2b890&gt;{number = 2, name = (null)}-------æ …æ å‡½æ•°downLoad--3--&lt;NSThread: 0x7fad93e2b890&gt;{number = 2, name = (null)}*/ å¿«é€Ÿè¿­ä»£ é€šè¿‡å­çº¿ç¨‹å’Œä¸»çº¿ç¨‹å¹¶å‘æ‰§è¡Œ123456789101112131415/*** ç¬¬ä¸€ä¸ªå‚æ•°ï¼šéå†çš„æ¬¡æ•°* ç¬¬äºŒä¸ªå‚æ•°ï¼šé˜Ÿåˆ—ï¼ˆåªèƒ½æ˜¯å¹¶å‘é˜Ÿåˆ—ï¼‰* ç¬¬ä¸‰ä¸ªå‚æ•°ï¼šç´¢å¼•*/dispatch_apply(5, dispatch_get_global_queue(0, 0), ^(size_t index) {NSLog(@&quot;%zu---%@&quot;, index, [NSThread currentThread]);});/*0---&lt;NSThread: 0x7fe83b629bb0&gt;{number = 2, name = (null)}1---&lt;NSThread: 0x7fe83b706490&gt;{number = 1, name = main}2---&lt;NSThread: 0x7fe83b517710&gt;{number = 3, name = (null)}3---&lt;NSThread: 0x7fe83b4115b0&gt;{number = 4, name = (null)}4---&lt;NSThread: 0x7fe83b629bb0&gt;{number = 2, name = (null)}*/ é˜Ÿåˆ—ç»„ ç”¨æ¥ç®¡ç†é˜Ÿåˆ—ï¼Œ123456789101112131415161718192021222324252627282930313233343536- (void)group {// åˆ›å»ºé˜Ÿåˆ—dispatch_queue_t queue = dispatch_get_global_queue(0, 0);// åˆ›å»ºé˜Ÿåˆ—ç»„dispatch_group_t group = dispatch_group_create();dispatch_group_async(group, queue, ^{NSLog(@&quot;downLoad--1--%@&quot;, [NSThread currentThread]);});dispatch_group_async(group, queue, ^{NSLog(@&quot;downLoad--2--%@&quot;, [NSThread currentThread]);});dispatch_group_async(group, queue, ^{NSLog(@&quot;downLoad--3--%@&quot;, [NSThread currentThread]);});// æ‹¦æˆªé€šçŸ¥ï¼Œé˜Ÿåˆ—ç»„ä¸­çš„ä»»åŠ¡æ‰§è¡Œå®Œæ¯•åè°ƒç”¨dispatch_group_notify(group, queue, ^{NSLog(@&quot;ALL--downLoad--&quot;);});// ç­‰å¾…ï¼Œç›´åˆ°é˜Ÿåˆ—ç»„æ‰€æœ‰ä»»åŠ¡å®Œæˆåæ‰å‘ä¸‹æ‰§è¡Œdispatch_group_wait(group, DISPATCH_TIME_FOREVER);// åŒºåˆ«/* å¼‚æ­¥å‡½æ•°* 1. å°è£…ä»»åŠ¡* 2. æ·»åŠ ä»»åŠ¡åˆ°é˜Ÿåˆ—dispatch_async(queue, ^{NSLog(@&quot;downLoad--1--%@&quot;, [NSThread currentThread]);});* é˜Ÿåˆ—ç»„* 1. å°è£…ä»»åŠ¡* 2. æ·»åŠ ä»»åŠ¡åˆ°é˜Ÿåˆ—* 3. ç›‘å¬ä»»åŠ¡çš„æ‰§è¡Œæƒ…å†µï¼Œé€šçŸ¥groupdispatch_group_async(group, queue, ^{NSLog(@&quot;downLoad--2--%@&quot;, [NSThread currentThread]);});*/}","link":"/2016/09/01/my-ios-day17/"},{"title":"my-ios-day19","text":"è¿™ä¸ªæ˜¯16å¹´é‡æ–°å¤ä¹ çš„iOSç¬”è®°ï¼Œå½“æ—¶æ˜¯æ”¾åœ¨äº†gitbookï¼Œç°åœ¨è½¬ç§»è¿‡æ¥ï¼ Day 19ç½‘ç»œ ç›¸å…³æ¦‚å¿µ NSURLConnection æ•°æ®è§£æ NSURLConnectionæ–‡ä»¶ä¼ è¾“ NSURLSession AFNetworking ç›¸å…³æ¦‚å¿µ åŸºç¡€ å®¢æˆ·ç«¯ï¼Œæ‰‹æœºæ‰€ä½¿ç”¨çš„app æœåŠ¡å™¨ï¼Œè¿œç¨‹æœåŠ¡å™¨(Linuxç³»åˆ—ï¼Œwindows) è¯·æ±‚ï¼Œå®¢æˆ·ç«¯å‘æœåŠ¡å™¨ç´¢å–æ•°æ®çš„æ–¹å¼ å“åº”ï¼ŒæœåŠ¡å™¨è¿”å›ã€å®¢æˆ·ç«¯éœ€è¦è§£æçš„æ•°æ® ç»Ÿä¸€èµ„æºå®šä½ç¬¦URL å®šä½ä¸»æœºå’Œèµ„æº æ ¼å¼ï¼ˆåè®®/ä¸»æœºåœ°å€/èµ„æºè·¯å¾„ï¼‰ åè®®ï¼šèµ„æºçš„æŸ¥æ‰¾æ–¹å¼å’Œä¼ è¾“æ–¹å¼ï¼ˆHTTPã€FTPâ€¦ï¼‰ ä¸»æœºåœ°å€ï¼šå­˜æ”¾èµ„æºçš„æœåŠ¡å™¨ä¸»æœºçš„IPåœ°å€ã€åŸŸå è·¯å¾„ï¼šèµ„æºåœ¨æœåŠ¡å™¨ä¸»æœºä¸­çš„ä½ç½® å¸¸è§åè®® fileï¼šæœ¬åœ°è®¡ç®—æœºçš„èµ„æºï¼Œfile:// ftpï¼šå…±äº«ä¸»æœºçš„èµ„æºï¼Œftp:// mailtoï¼šç”µå­é‚®ä»¶åœ°å€ï¼Œmailto: httpï¼šè¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼Œè®¿é—®è¿œç¨‹çš„ç½‘ç»œèµ„æºï¼Œhttp:// httpåè®® ç®€ä»‹ è¶…æ–‡æœ¬ä¼ è¾“åè®® è§„å®šå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´æ•°æ®ä¼ è¾“æ ¼å¼ è®©å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨æœ‰æ•ˆçš„è¿›è¡Œæ•°æ®æ²Ÿé€š è¯·æ±‚é€šä¿¡è¿‡ç¨‹ è¯·æ±‚è¯·æ±‚å¤´ + è¯·æ±‚ä½“(éå¿…é¡») å“åº”å“åº”å¤´ + å“åº”ä½“ é€šä¿¡è¿‡ç¨‹å®¢æˆ·ç«¯å‘é€è¯·æ±‚æ—¶ï¼Œå…ˆæŠŠè¯·æ±‚å¤´å’Œè¯·æ±‚ä½“ï¼ˆéå¿…é¡»ï¼‰å°è£…æˆä¸€ä¸ªè¯·æ±‚å¯¹è±¡æœåŠ¡å™¨ç«¯å¯¹è¯·æ±‚è¿›è¡Œå“åº”ï¼Œåœ¨å“åº”ä¿¡æ¯ä¸­åŒ…å«å“åº”å¤´å’Œå“åº”ä½“ï¼Œå“åº”ä¿¡æ¯æ˜¯å¯¹æœåŠ¡å™¨ç«¯çš„æè¿°ï¼Œå…·ä½“çš„ä¿¡æ¯æ”¾åœ¨å“åº”ä½“ä¸­ä¼ é€’ç»™å®¢æˆ·ç«¯ å¸¸è§çŠ¶æ€ç 200ï¼šè¯·æ±‚æˆåŠŸ400ï¼šè¯·æ±‚è¯­æ³•é”™è¯¯ï¼ŒæœåŠ¡å™¨æ— æ³•è§£æ404ï¼šèµ„æºè·¯å¾„ä¸å­˜åœ¨500ï¼šæœåŠ¡å™¨å†…éƒ¨é”™è¯¯ è¯·æ±‚ GETè¯·æ±‚http://www.test.com/login?username=123&amp;pwd=234è¯·æ±‚çš„å‚æ•°è·Ÿåœ¨URLçš„åé¢ï¼Œä»¥?éš”å¼€ï¼Œä½¿ç”¨&amp;è¿æ¥æœåŠ¡å™¨å¯¹URLçš„é•¿åº¦æœ‰é™åˆ¶ï¼Œæ‰€ä»¥å¯¹å‚æ•°é•¿åº¦æœ‰é™åˆ¶ï¼Œé€šå¸¸ä¸è¶…è¿‡1KB POSTè¯·æ±‚http://www.test.com/loginè¯·æ±‚çš„å‚æ•°æ”¾åœ¨è¯·æ±‚ä½“é‡Œé¢ï¼ŒPOSTçš„æ•°æ®é‡ä¸€èˆ¬æ— é™åˆ¶ï¼Œä¸»è¦çœ‹æœåŠ¡å™¨ å¦‚ä½•é€‰æ‹©å¦‚æœæœ‰å¤§é‡æ•°æ®ä¼ è¾“ï¼Œä¸Šä¼ ã€ä¸‹è½½ç­‰ï¼Œåªèƒ½ä½¿ç”¨POSTGETä¸­çš„å‚æ•°è¿‡äºæš´éœ²ï¼Œè®¾è®¡æ•æ„Ÿã€æœºå¯†éœ€è¦ç”¨POSTå¢åŠ ã€ä¿®æ”¹ã€åˆ é™¤æ•°æ®ï¼Œå»ºè®®ä½¿ç”¨POSTåªæœ‰åœ¨ç®€å•çš„æŸ¥è¯¢æ•°æ®ï¼Œä½¿ç”¨GET iOSä¸­çš„è¯·æ±‚ ç³»ç»ŸåŸç”Ÿ NSURLConnection 03å¹´çš„å¤è€æŠ€æœ¯ NSURLSession 13å¹´iOS7ä¹‹åæ¨å‡ºï¼Œæ›¿ä»£NSURLConnection CFNetwork åº•å±‚æ‰€ä¾èµ–çš„æŠ€æœ¯ï¼Œçº¯C ç¬¬ä¸‰æ–¹æ¡†æ¶ ASIHttpRequest å·²ä¸å†ç»´æŠ¤ AFNetworking ä¸»æµ NSURLConnection åŒæ­¥è¯·æ±‚GET-sync123456789101112- (void)syncG {// ç¡®å®šURLNSURL *url = [NSURL URLWithString:@&quot;http://120.25.226.186:32812/login?username=520it&amp;pwd=520it&amp;type=JSON&quot;];// å°è£…è¯·æ±‚NSURLRequest *request = [[NSURLRequest alloc] initWithURL:url];// å£°æ˜å“åº”NSURLResponse *reponse = nil;// å‘é€è¯·æ±‚ï¼Œæ¥æ”¶æ•°æ®NSData *data = [NSURLConnection sendSynchronousRequest:request returningResponse:&amp;reponse error:nil];// ç®€å•æ‰“å°NSLog(@&quot;%@&quot;, [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding]);} å¼‚æ­¥è¯·æ±‚GET-async1234567891011121314- (void)asyncG {// ç¡®å®šURLNSURL *url = [NSURL URLWithString:@&quot;http://120.25.226.186:32812/login?username=520it&amp;pwd=520it&amp;type=JSON&quot;];// å°è£…è¯·æ±‚NSURLRequest *request = [[NSURLRequest alloc] initWithURL:url];// å‘é€è¯·æ±‚[NSURLConnection sendAsynchronousRequest:request queue:[NSOperationQueue mainQueue] completionHandler:^(NSURLResponse * _Nullable response, NSData * _Nullable data, NSError * _Nullable connectionError) {// ç®€å•æ‰“å°æ•°æ®NSLog(@&quot;%@&quot;, [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding]);// å“åº”å¤´ä¿¡æ¯NSHTTPURLResponse *re = (NSHTTPURLResponse *)response;NSLog(@&quot;%ld&quot;, re.statusCode);}];} å¼‚æ­¥è¯·æ±‚GET-delegate123456789101112131415161718192021222324252627282930313233343536373839404142- (void)delegateG {// ç¡®å®šURLNSURL *url = [NSURL URLWithString:@&quot;http://120.25.226.186:32812/video?type=JSON&quot;];// å°è£…è¯·æ±‚NSURLRequest *request = [[NSURLRequest alloc] initWithURL:url];// è®¾ç½®ä»£ç†// [NSURLConnection connectionWithRequest:request delegate:self];// [[NSURLConnection alloc] initWithRequest:request delegate:self];NSURLConnection *con = [[NSURLConnection alloc] initWithRequest:request delegate:self startImmediately:NO];// å¯ä»¥ç‰¹å®šæ—¶é—´å¼€å§‹å‘é€è¯·æ±‚[con start];[con cancel];}#pragma mark - NSURLConnectionDataDelegate/*** æ¥æ”¶æœåŠ¡å™¨å“åº”æ—¶è°ƒç”¨*/- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {NSLog(@&quot;%s&quot;, __func__);}/*** æ¥æ”¶åˆ°æœåŠ¡å™¨è¿”å›æ•°æ®æ—¶è°ƒç”¨* å¯èƒ½ä¼šå¸¦å“¦ä¸åŠŸèƒ½å¤šæ¬¡*/- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {NSLog(@&quot;%s&quot;, __func__);[self.allData appendData:data];}/*** è¯·æ±‚å¤±è´¥ä¼šè°ƒç”¨*/- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {NSLog(@&quot;%s&quot;, __func__);}/*** è¯·æ±‚ç»“æŸæ—¶ä¼šè°ƒç”¨*/- (void)connectionDidFinishLoading:(NSURLConnection *)connection {NSLog(@&quot;%s&quot;, __func__);NSLog(@&quot;%@&quot;, [[NSString alloc] initWithData:self.allData encoding:NSUTF8StringEncoding]);} POSTè¯·æ±‚ æ­¥éª¤ ç¡®å®šURL åˆ›å»ºå¯å˜çš„è¯·æ±‚å¯¹è±¡ ä¿®æ”¹è¯·æ±‚å¯¹è±¡çš„æ–¹æ³•ä¸ºPOST è®¾ç½®è¯·æ±‚ä½“ å‘é€å¼‚æ­¥è¯·æ±‚ è®¾ç½®è¶…æ—¶ï¼Œå¤„ç†é”™è¯¯ä¿¡æ¯ï¼Œè®¾ç½®è¯·æ±‚å¤´ï¼ˆå¯é€‰ï¼‰ ä»£ç 12345678910111213- (void)asyncP {NSURL *url = [NSURL URLWithString:@&quot;http://120.25.226.186:32812/login&quot;];NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:url];// ä¿®æ”¹è¯·æ±‚ç±»å‹ï¼ŒPOSTå¿…é¡»å¤§å†™request.HTTPMethod = @&quot;POST&quot;;// è®¾ç½®è¯·æ±‚ä½“ä¿¡æ¯NSData *bodyData = [@&quot;username=52it&amp;pwd=520it&amp;type=JSON&quot; dataUsingEncoding:NSUTF8StringEncoding];request.HTTPBody = bodyData;// å‘é€è¯·æ±‚[NSURLConnection sendAsynchronousRequest:request queue:[NSOperationQueue mainQueue] completionHandler:^(NSURLResponse * _Nullable response, NSData * _Nullable data, NSError * _Nullable connectionError) {NSLog(@&quot;%@&quot;, [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding]);}];} æ•°æ®è§£æ å¸¸ç”¨æ•°æ®æ ¼å¼ JSONï¼šè½»é‡çº§ï¼Œæ¯”è¾ƒæµè¡Œ XMLï¼šå¯æ‹“å±•æ ‡è®°è¯­è¨€ï¼ŒåŒ…å«å£°æ˜ã€å…ƒç´ å’Œå±æ€§ JSONè§£æ NSJSONSerialization JSONâ€“&gt;OC ï¼ˆååºåˆ—åŒ–ï¼‰12345678910111213141516- (void)JOSNToOC {NSURL *url = [NSURL URLWithString:@&quot;http://120.25.226.186:32812/login?username=123&amp;pwd=123&amp;type=JSON&quot;];NSURLRequest *request = [NSURLRequest requestWithURL:url];[NSURLConnection sendAsynchronousRequest:request queue:[NSOperationQueue mainQueue] completionHandler:^(NSURLResponse * _Nullable response, NSData * _Nullable data, NSError * _Nullable connectionError) {/*ç¬¬ä¸€ä¸ªå‚æ•°ï¼šè¦è§£æçš„JSONæ•°æ®ï¼ŒNSDataï¼ŒäºŒè¿›åˆ¶æ•°æ®ç¬¬äºŒä¸ªå‚æ•°ï¼šè§£æJSONçš„é…ç½®å‚æ•°ï¼ˆå¯é€‰ï¼‰NSJSONReadingMutableContainers è§£æå‡ºæ¥çš„å­—å…¸å’Œæ•°ç»„æ˜¯å¯å˜çš„NSJSONReadingMutableLeaves è§£æå‡ºæ¥çš„å¯¹è±¡ä¸­çš„å­—ç¬¦ä¸²æ˜¯å¯å˜çš„ iOS7ä»¥åæœ‰é—®é¢˜ï¼Œä¸ç”¨NSJSONReadingAllowFragments è¢«è§£æçš„JSONæ•°æ®å¦‚æœæ—¢ä¸æ˜¯å­—å…¸ä¹Ÿä¸æ˜¯æ•°ç»„ï¼Œ é‚£ä¹ˆå°±å¿…é¡»ä½¿ç”¨è¿™ä¸ªkNilOptions == 0 å“ªä¸ªä¹Ÿä¸é€‰ï¼Œé«˜æ•ˆ*/NSDictionary *dict = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:nil];NSLog(@&quot;%@&quot;,dict);}];} OCâ€“&gt;JSON ï¼ˆåºåˆ—åŒ–ï¼‰12345678910111213141516171819202122/*OC--&gt;JSONæœ‰ä¸€å®šé™åˆ¶ä½¿ç”¨+ (BOOL)isValidJSONObject:(id)obj;æ–¹æ³•åˆ¤æ–­å½“å‰OCå¯¹è±¡èƒ½å¦è½¬æ¢ä¸ºJSONæ•°æ®1. objæ˜¯NSArrayæˆ–NSDictionaryä»¥åŠä»–ä»¬çš„å­ç±»2. objåŒ…å«çš„æ‰€æœ‰å¯¹è±¡æ˜¯NSStringã€NSNumberã€NSArrayã€NSDictionaryã€NSNull3. å­—å…¸ä¸­çš„æ‰€æœ‰keyå¿…é¡»æ˜¯NSString4. NSNumberçš„å¯¹è±¡ä¸èƒ½æ˜¯Nanæˆ–æ— ç©·å¤§*/// éœ€è¦åºåˆ—åŒ–çš„æ•°æ®NSDictionary *dictM = @{@&quot;name&quot;:@&quot;sleen&quot;,@&quot;age&quot;:@18,@&quot;height&quot;:@1.80};/*ç¬¬ä¸€ä¸ªå‚æ•°ï¼šéœ€è¦åºåˆ—åŒ–çš„æ•°æ®ç¬¬äºŒä¸ªå‚æ•°ï¼šNSJSONWritingPrettyPrintedå¯¹è½¬æ¢ä¹‹åçš„JSONå¯¹è±¡è¿›è¡Œæ’ç‰ˆï¼Œæ— æ„ä¹‰*/NSData *data = [NSJSONSerialization dataWithJSONObject:dictM options:NSJSONWritingPrettyPrinted error:nil];// æŸ¥çœ‹æ˜¯å¦åºåˆ—åŒ–NSString *str = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];NSLog(@&quot;%@&quot;,str); JSONæ•°æ®ä¸OCå¯¹è±¡å¯¹åº”{} â€“&gt; NADictionary[] â€“&gt; NSArrayâ€œâ€ â€“&gt; NSString10/10.1 â€“&gt; NSNumbertrue/false â€“&gt; NSNumbernull â€“&gt; NSNull XMLè§£æ ä¸¤ç§æ–¹å¼ SAXï¼šä»æ ¹èŠ‚ç‚¹å¼€å§‹ï¼ŒæŒ‰é¡ºåºä¸€ä¸ªå…ƒç´ ä¸€ä¸ªå…ƒç´ çš„å‘ä¸‹è§£æ DOMï¼šä¸€æ¬¡æ€§å°†æ•´ä¸ªxmlæ–‡æ¡£åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œä½¿ç”¨ä¸è¾ƒå°æ–‡ä»¶ å·¥å…· NSXMLParserï¼šè‹¹æœåŸç”Ÿï¼Œé‡‡ç”¨SAXï¼Œä½¿ç”¨ç®€å• libxml2ï¼šçº¯Cï¼Œé»˜è®¤åœ¨iOS SDKä¸­ï¼ŒåŒæ—¶æ”¯æŒSAXå’ŒDOM GDataXMLï¼šGoogleçš„åŸºäºlibxml2ï¼Œé‡‡ç”¨DOMæ–¹å¼ NSXMLParser12345678910111213141516171819202122232425// åˆ›å»ºä¸€ä¸ªè§£æå™¨NSXMLParser *parser = [[NSXMLParser alloc]initWithData:data];// è®¾ç½®ä»£ç†parser.delegate = self;// å¼€å§‹è§£æ[parser parse];// å¼€å§‹è§£æXMLæ–‡æ¡£- (void)parserDidStartDocument:(nonnull NSXMLParser *)parser {}// å¼€å§‹è§£æXMLä¸­æŸä¸ªå…ƒç´ çš„æ—¶å€™è°ƒç”¨ï¼Œæ¯”å¦‚&lt;video&gt;- (void)parser:(nonnull NSXMLParser *)parser didStartElement:(nonnull NSString *)elementName namespaceURI:(nullable NSString *)namespaceURI qualifiedName:(nullable NSString *)qName attributes:(nonnull NSDictionary&lt;NSString *,NSString *&gt; *)attributeDict{if ([elementName isEqualToString:@&quot;videos&quot;]) {return;}// å­—å…¸è½¬æ¨¡å‹SLVideo *video = [SLVideo objectWithKeyValues:attributeDict];[self.videos addObject:video];}// å½“æŸä¸ªå…ƒç´ è§£æå®Œæˆä¹‹åè°ƒç”¨ï¼Œæ¯”å¦‚&lt;/video&gt;- (void)parser:(nonnull NSXMLParser *)parser didEndElement:(nonnull NSString *)elementName namespaceURI:(nullable NSString *)namespaceURI qualifiedName:(nullable NSString *)qName {}// XMLæ–‡æ¡£è§£æç»“æŸ- (void)parserDidEndDocument:(nonnull NSXMLParser *)parser {} æ–‡ä»¶ä¼ è¾“ å°æ–‡ä»¶ä¸‹è½½ ç›´æ¥ä¸‹è½½ï¼Œæ— å¤šçº¿ç¨‹1234567// ç¡®å®šèµ„æºè·¯å¾„NSURL *url = [NSURL URLWithString:@&quot;http://120.25.226.186:32812/resources/images/minion_01.png&quot;];// æ ¹æ®URLåŠ è½½å¯¹åº”çš„èµ„æºNSData *data = [NSData dataWithContentsOfURL:url];// è½¬æ¢å¹¶æ˜¾ç¤ºæ•°æ®UIImage *image = [UIImage imageWithData:data];self.imageView.image = image; NSURLConnection - sendAsync12345678910// ç¡®å®šè¯·æ±‚è·¯å¾„NSURL *url = [NSURL URLWithString:@&quot;http://120.25.226.186:32812/resources/images/minion_01.png&quot;];// åˆ›å»ºè¯·æ±‚å¯¹è±¡NSURLRequest *request = [NSURLRequest requestWithURL:url];// ä½¿ç”¨NSURLConnectionå‘é€ä¸€ä¸ªå¼‚æ­¥è¯·æ±‚[NSURLConnection sendAsynchronousRequest:request queue:[NSOperationQueue mainQueue] completionHandler:^(NSURLResponse * _Nullable response, NSData * _Nullable data, NSError * _Nullable connectionError) {// è®¾ç½®æ•°æ®UIImage *image = [UIImage imageWithData:data];self.imageView.image = image;}]; NSURLConnection - delegate1234567891011121314151617181920212223242526272829303132333435363738394041424344- (void)delegateDownload {// ç¡®å®šè¯·æ±‚è·¯å¾„NSURL *url = [NSURL URLWithString:@&quot;http://120.25.226.186:32812/resources/videos/minion_01.mp4&quot;];//2.åˆ›å»ºè¯·æ±‚å¯¹è±¡NSURLRequest *request = [NSURLRequest requestWithURL:url];//3.ä½¿ç”¨NSURLConnectionè®¾ç½®ä»£ç†å¹¶å‘é€å¼‚æ­¥è¯·æ±‚[NSURLConnection connectionWithRequest:request delegate:self];}#pragma mark - NSURLConnectionDataDelegate// å½“æ¥æ”¶åˆ°æœåŠ¡å™¨å“åº”çš„æ—¶å€™è°ƒç”¨ï¼Œè¯¥æ–¹æ³•åªä¼šè°ƒç”¨ä¸€æ¬¡- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {// åˆ›å»ºä¸€ä¸ªå®¹å™¨ï¼Œç”¨æ¥æ¥æ”¶æœåŠ¡å™¨è¿”å›çš„æ•°æ®self.fileData = [NSMutableData data];// è·å¾—å½“å‰è¦ä¸‹è½½æ–‡ä»¶çš„æ€»å¤§å°ï¼ˆé€šè¿‡å“åº”å¤´å¾—åˆ°ï¼‰NSHTTPURLResponse *res = (NSHTTPURLResponse *)response;self.totalLength = res.expectedContentLength;// æ‹¿åˆ°æœåŠ¡å™¨ç«¯æ¨èçš„æ–‡ä»¶åç§°self.fileName = res.suggestedFilename;}// å½“æ¥æ”¶åˆ°æœåŠ¡å™¨è¿”å›çš„æ•°æ®æ—¶ä¼šè°ƒç”¨// è¯¥æ–¹æ³•å¯èƒ½ä¼šè¢«è°ƒç”¨å¤šæ¬¡- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {// æ‹¼æ¥æ¯æ¬¡ä¸‹è½½çš„æ•°æ®[self.fileData appendData:data];// è®¡ç®—å½“å‰ä¸‹è½½è¿›åº¦å¹¶åˆ·æ–°UIæ˜¾ç¤ºself.currentLength = self.fileData.length;NSLog(@&quot;%f&quot;,1.0* self.currentLength/self.totalLength);self.progressView.progress = 1.0* self.currentLength/self.totalLength;}//å½“ç½‘ç»œè¯·æ±‚ç»“æŸä¹‹åè°ƒç”¨- (void)connectionDidFinishLoading:(NSURLConnection *)connection {// æ–‡ä»¶ä¸‹è½½å®Œæ¯•æŠŠæ¥å—åˆ°çš„æ–‡ä»¶æ•°æ®å†™å…¥åˆ°æ²™ç›’ä¸­ä¿å­˜// ç¡®å®šè¦ä¿å­˜æ–‡ä»¶çš„å…¨è·¯å¾„// cachesæ–‡ä»¶å¤¹è·¯å¾„NSString *caches = [NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES) lastObject];NSString *fullPath = [caches stringByAppendingPathComponent:self.fileName];// å†™æ•°æ®åˆ°æ–‡ä»¶ä¸­[self.fileData writeToFile:fullPath atomically:YES];}// å½“è¯·æ±‚å¤±è´¥çš„æ—¶å€™è°ƒç”¨è¯¥æ–¹æ³•- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {NSLog(@&quot;%s&quot;,__func__);} å¤§æ–‡ä»¶ä¸‹è½½ æ–‡ä»¶å¥æŸ„ä¸‹è½½1234567891011121314151617181920212223242526272829303132333435363738394041424344454647#pragma mark - NSURLConnectionDataDelegate- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {// å½“å·²ç»ä¸‹è½½è¿‡ï¼Œå°±ä¸åœ¨åˆ›å»ºæ–‡ä»¶if (self.currentSize &gt; 0) {return ;}// è·å–æ–‡ä»¶æ€»å¤§å°NSHTTPURLResponse *res = (NSHTTPURLResponse *)response;self.totalSize = res.expectedContentLength;// åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶// å¾—åˆ°æ–‡ä»¶ç®¡ç†è€…NSFileManager *man = [NSFileManager defaultManager];// æœç´¢cacheè·¯å¾„NSString *caches = [NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES) lastObject];// æ‹¼æ¥å…¨è·¯å¾„NSString *path = [caches stringByAppendingPathComponent:res.suggestedFilename];self.fullPath = path;// åˆ›å»ºæ–‡ä»¶/** ç¬¬ä¸€ä¸ªå‚æ•°ï¼šæ–‡ä»¶è·¯å¾„* ç¬¬äºŒä¸ªå‚æ•°ï¼šæ–‡ä»¶å†…å®¹* ç¬¬ä¸‰ä¸ªå‚æ•°ï¼šæ–‡ä»¶å±æ€§*/[man createFileAtPath:path contents:nil attributes:nil];}- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {// æ–‡ä»¶å¥æŸ„self.handle = [NSFileHandle fileHandleForWritingAtPath:self.fullPath];// ç§»åŠ¨å¥æŸ„[self.handle seekToEndOfFile];// è¿½åŠ æ•°æ®[self.handle writeData:data];// å¾—åˆ°å·²ä¸‹è½½å¤§å°self.currentSize += data.length;self.progressV.progress = 1.0 * self.currentSize / self.totalSize;self.progressL.text = [NSString stringWithFormat:@&quot;%.2f&quot;, self.progressV.progress];NSLog(@&quot;%f&quot;, self.progressV.progress);}- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {}- (void)connectionDidFinishLoading:(NSURLConnection *)connection {[self.handle closeFile];self.handle = nil;NSLog(@&quot;%s&quot;, __func__);NSLog(@&quot;%@&quot;, self.fullPath);} è¾“å‡ºæµä¸‹è½½123456789101112131415161718192021// åˆ›å»ºä¸€ä¸ªæ•°æ®è¾“å‡ºæµ/** ç¬¬ä¸€ä¸ªå‚æ•°ï¼šäºŒè¿›åˆ¶çš„æµæ•°æ®è¦å†™å…¥åˆ°å“ªé‡Œ* ç¬¬äºŒä¸ªå‚æ•°ï¼šé‡‡ç”¨ä»€ä¹ˆæ ·çš„æ–¹å¼å†™å…¥æµæ•°æ®ï¼Œå¦‚æœYESåˆ™è¡¨ç¤ºè¿½åŠ ï¼Œå¦‚æœæ˜¯NOåˆ™è¡¨ç¤ºè¦†ç›–*/NSOutputStream *stream = [NSOutputStream outputStreamToFileAtPath:fullPath append:YES];// åªè¦è°ƒç”¨äº†è¯¥æ–¹æ³•å°±ä¼šå¾€æ–‡ä»¶ä¸­å†™æ•°æ®// å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆä¼šè‡ªåŠ¨çš„åˆ›å»ºä¸€ä¸ª[stream open];self.stream = stream;// å½“æ¥æ”¶åˆ°æ•°æ®çš„æ—¶å€™å†™æ•°æ®// ä½¿ç”¨è¾“å‡ºæµå†™æ•°æ®/*ç¬¬ä¸€ä¸ªå‚æ•°ï¼šè¦å†™å…¥çš„äºŒè¿›åˆ¶æ•°æ®ç¬¬äºŒä¸ªå‚æ•°ï¼šè¦å†™å…¥çš„æ•°æ®çš„å¤§å°*/[self.stream write:data.bytes maxLength:data.length];// å½“æ–‡ä»¶ä¸‹è½½å®Œæ¯•çš„æ—¶å€™å…³é—­è¾“å‡ºæµ// å…³é—­è¾“å‡ºæµ[self.stream close];self.stream = nil; æ–‡ä»¶ä¸Šä¼  æ­¥éª¤ ç¡®å®šè¯·æ±‚çš„URL åˆ›å»ºå¯å˜çš„è¯·æ±‚å¯¹è±¡ ä¿®æ”¹è¯·æ±‚æ–¹å¼ä¸ºPOST è®¾ç½®è¯·æ±‚å¤´ï¼Œé€šçŸ¥æœåŠ¡å™¨å°†è¦ä¸Šä¼ æ–‡ä»¶Content-Type è®¾ç½®è¯·æ±‚ä½“ï¼ˆä¸¥æ ¼æŒ‰ç¡®å®šæ ¼å¼æ‹¼æ¥æ•°æ®ï¼‰ å‘é€å¼‚æ­¥è¯·æ±‚ä¸Šä¼ æ–‡ä»¶ è§£ææœåŠ¡å™¨è¿”å›æ•°æ® è¯·æ±‚ä½“æ•°æ®æ ¼å¼123456789101112åˆ†éš”ç¬¦ï¼š----WebKitFormBoundaryhBDKBUvFdCAgsr5bæ ¼å¼ï¼š--åˆ†éš”ç¬¦Content-Dispostion:å‚æ•°Content-Type:å‚æ•°ç©ºè¡Œæ–‡ä»¶å‚æ•°--åˆ†éš”ç¬¦Content-Disposition:å‚æ•°ç©ºè¡Œéæ–‡ä»¶çš„äºŒè¿›åˆ¶æ•°æ®--åˆ†éš”ç¬¦-- ä»£ç 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172#define Kboundary @â€œ----WebKitFormBoundaryhBDKBUvFdCAgsr5bâ€- (void)upload{// 1.ç¡®å®šè¯·æ±‚è·¯å¾„NSURL *url = [NSURL URLWithString:@&quot;http://120.25.226.186:32812/upload&quot;];// 2.åˆ›å»ºä¸€ä¸ªå¯å˜çš„è¯·æ±‚å¯¹è±¡NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];// 3.è®¾ç½®è¯·æ±‚æ–¹å¼ä¸ºPOSTrequest.HTTPMethod = @&quot;POST&quot;;// 4.è®¾ç½®è¯·æ±‚å¤´NSString *filed = [NSString stringWithFormat:@&quot;multipart/form-data; boundary=%@&quot;,Kboundary];[request setValue:filed forHTTPHeaderField:@&quot;Content-Type&quot;];// 5.è®¾ç½®è¯·æ±‚ä½“NSMutableData *data = [NSMutableData data];// 5.1 æ–‡ä»¶å‚æ•°/*--åˆ†éš”ç¬¦Content-Disposition:å‚æ•°Content-Type:å‚æ•°ç©ºè¡Œæ–‡ä»¶å‚æ•°*/[data appendData:[[NSString stringWithFormat:@&quot;--%@&quot;,Kboundary] dataUsingEncoding:NSUTF8StringEncoding]];[data appendData:KnewLine];[data appendData:[@&quot;Content-Disposition: form-data; name=\\&quot;file\\&quot;; filename=\\&quot;test.png\\&quot;&quot; dataUsingEncoding:NSUTF8StringEncoding]];[data appendData:KnewLine];[data appendData:[@&quot;Content-Type: image/png&quot; dataUsingEncoding:NSUTF8StringEncoding]];[data appendData:KnewLine];[data appendData:KnewLine];[data appendData:KnewLine];UIImage *image = [UIImage imageNamed:@&quot;test&quot;];NSData *imageData = UIImagePNGRepresentation(image);[data appendData:imageData];[data appendData:KnewLine];// 5.2 éæ–‡ä»¶å‚æ•°/*--åˆ†éš”ç¬¦Content-Disposition:å‚æ•°ç©ºè¡Œéæ–‡ä»¶å‚æ•°çš„äºŒè¿›åˆ¶æ•°æ®*/[data appendData:[[NSString stringWithFormat:@&quot;--%@&quot;,Kboundary] dataUsingEncoding:NSUTF8StringEncoding]];[data appendData:KnewLine];[data appendData:[@&quot;Content-Disposition: form-data; name=\\&quot;username\\&quot;&quot; dataUsingEncoding:NSUTF8StringEncoding]];[data appendData:KnewLine];[data appendData:KnewLine];[data appendData:KnewLine];NSData *nameData = [@&quot;wendingding&quot; dataUsingEncoding:NSUTF8StringEncoding];[data appendData:nameData];[data appendData:KnewLine];// 5.3 ç»“å°¾æ ‡è¯†// --åˆ†éš”ç¬¦--[data appendData:[[NSString stringWithFormat:@&quot;--%@--&quot;,Kboundary] dataUsingEncoding:NSUTF8StringEncoding]];[data appendData:KnewLine];request.HTTPBody = data;// 6.å‘é€è¯·æ±‚[NSURLConnection sendAsynchronousRequest:request queue:[NSOperationQueue mainQueue] completionHandler:^(NSURLResponse * __nullable response, NSData * __nullable data, NSError * __nullable connectionError) {// 7.è§£ææœåŠ¡å™¨è¿”å›çš„æ•°æ®NSLog(@&quot;%@&quot;,[NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:nil]);}];} è·å–æ–‡ä»¶çš„MIMETypeç±»å‹12345678910111213- (NSString *)getMIMEType{NSString *filePath = @&quot;/Users/xiuxiu/Desktop/sleen.txt&quot;;// åŒæ­¥è¯·æ±‚è·å–NSURLResponse *response = nil;[NSURLConnection sendSynchronousRequest:[NSURLRequest requestWithURL:[NSURL fileURLWithPath:filePath]] returningResponse:&amp;response error:nil];// å¼‚æ­¥è¯·æ±‚è·å–[NSURLConnection sendAsynchronousRequest:[NSURLRequest requestWithURL:[NSURL fileURLWithPath:@&quot;/Users/xiuxiu/Desktop/sleen.png&quot;]] queue:[NSOperationQueue mainQueue] completionHandler:^(NSURLResponse * __nullable response, NSData * __nullable data, NSError * __nullable connectionError) {// response.MIMETypeNSLog(@&quot;%@&quot;,response.MIMEType);}];return response.MIMEType;} NSURLSession ä½¿ç”¨ é€šè¿‡NSURLSessionåˆ›å»ºtaskï¼Œæ‰§è¡Œtask NSURLSessionTask æœ¬èº«æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œä½¿ç”¨ä¸‰ä¸ªå­ç±» NSURLSessionDataTask NSURLSessionUploadTask NSURLSessionDownloadTask å‘é€è¯·æ±‚ GETè¯·æ±‚123456789101112131415161718// blockæ–¹å¼- (void)get {// åˆ›å»ºsessionï¼Œè·å¾—å•ä¾‹/è‡ªå®šä¹‰NSURLSession *session = [NSURLSession sharedSession];// åˆ›å»ºè¯·æ±‚å¯¹è±¡NSURL *url = [NSURL URLWithString:@&quot;&quot;];NSURLRequest *request = [NSURLRequest requestWithURL:url];// æ ¹æ®sessionåˆ›å»ºtaskNSURLSessionDataTask *task = [session dataTaskWithRequest:request completionHandler:^(NSData * _Nullable data, NSURLResponse * _Nullable response, NSError * _Nullable error) {// è§£ææ•°æ®}];// GETè¯·æ±‚å¯ä»¥ç›´æ¥ä½¿ç”¨urlåˆ›å»º// NSURLSessionDataTask *task = [session dataTaskWithURL:url completionHandler:^(NSData * _Nullable data, NSURLResponse * _Nullable response, NSError * _Nullable error) {// // è§£ææ•°æ®// }];// æ‰§è¡Œtask[task resume];} POSTè¯·æ±‚12345678910111213141516- (void)post {// åˆ›å»ºsessionï¼Œè·å¾—å•ä¾‹/è‡ªå®šä¹‰NSURLSession *session = [NSURLSession sharedSession];// åˆ›å»ºè¯·æ±‚å¯¹è±¡NSURL *url = [NSURL URLWithString:@&quot;http://120.25.226.186:32812/login&quot;];NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];// è®¾ç½®è¯·æ±‚request.HTTPMethod = @&quot;POST&quot;;request.HTTPBody = [@&quot;username=123&amp;pwd=123&amp;type=JSON&quot; dataUsingEncoding:NSUTF8StringEncoding];// æ ¹æ®sessionåˆ›å»ºtaskNSURLSessionDataTask *task = [session dataTaskWithRequest:request completionHandler:^(NSData * _Nullable data, NSURLResponse * _Nullable response, NSError * _Nullable error) {// è§£ææ•°æ®}];// æ‰§è¡Œtask[task resume];} æ–‡ä»¶ä¼ è¾“ æ–‡ä»¶ä¸‹è½½12345678910111213141516171819202122232425262728293031323334353637383940414243- (void)download {// ä»£ç†æ–¹å¼éœ€è¦ä½¿ç”¨è‡ªå®šä¹‰çš„sessionNSURLSession *session = [NSURLSession sessionWithConfiguration:[NSURLSessionConfiguration defaultSessionConfiguration] delegate:self delegateQueue:[NSOperationQueue mainQueue]];// åˆ›å»ºè¯·æ±‚å¯¹è±¡NSURL *url = [NSURL URLWithString:@&quot;&quot;];NSURLRequest *request = [NSURLRequest requestWithURL:url];// æ ¹æ®sessionåˆ›å»ºtaskNSURLSessionDataTask *task = [session dataTaskWithRequest:request];// æ‰§è¡Œtask[task resume];}#pragma mark - NSURLSessionDataDelegate/*** æ”¶åˆ°æœåŠ¡å™¨å“åº”æ—¶è°ƒç”¨** @param session å‘é€è¯·æ±‚çš„sessionå¯¹è±¡* @param dataTask åˆ›å»ºçš„taskä»»åŠ¡* @param response å“åº”ä¿¡æ¯ï¼ˆå“åº”å¤´ï¼‰* @param completionHandler å›è°ƒï¼Œæ˜¯å¦è¦æ¥æ”¶æ•°æ®*/- (void)URLSession:(NSURLSession *)session dataTask:(NSURLSessionDataTask *)dataTask didReceiveResponse:(NSURLResponse *)response completionHandler:(void (^)(NSURLSessionResponseDisposition))completionHandler {// é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“æ¥æ”¶åˆ°æœåŠ¡å™¨å“åº”ä¹‹åï¼ŒæœåŠ¡å™¨è®¤ä¸ºå®¢æˆ·ç«¯ä¸éœ€è¦æ¥æ”¶æ•°æ®ï¼Œæ‰€ä»¥åé¢çš„ä»£ç†æ–¹æ³•ä¸ä¼šè°ƒç”¨// å¦‚æœéœ€è¦ç»§ç»­æ¥æ”¶æœåŠ¡å™¨è¿”å›çš„æ•°æ®ï¼Œé‚£ä¹ˆéœ€è¦è°ƒç”¨blockï¼Œå¹¶ä¼ å…¥å¯¹åº”çš„ç­–ç•¥/*NSURLSessionResponseCancel = 0, å–æ¶ˆä»»åŠ¡NSURLSessionResponseAllow = 1, æ¥æ”¶ä»»åŠ¡NSURLSessionResponseBecomeDownload = 2, è½¬å˜æˆä¸‹è½½NSURLSessionResponseBecomeStream NS_ENUM_AVAILABLE(10_11, 9_0) = 3, è½¬å˜æˆæµ*/completionHandler(NSURLSessionResponseAllow);}/*** æ”¶åˆ°æœåŠ¡å™¨è¿”å›æ•°æ®æ˜¯è°ƒç”¨* æ–¹æ³•ä¼šè¢«è°ƒç”¨å¤šæ¬¡*/- (void)URLSession:(NSURLSession *)session dataTask:(NSURLSessionDataTask *)dataTask didReceiveData:(NSData *)data {}/*** è¯·æ±‚å®Œæˆåä¼šè°ƒç”¨* æˆåŠŸå’Œå¤±è´¥éƒ½ä¼šè°ƒç”¨ï¼Œå¤±è´¥åerrorä¼šä¿å­˜å¤±è´¥ä¿¡æ¯*/- (void)URLSession:(NSURLSession *)session task:(NSURLSessionTask *)task didCompleteWithError:(NSError *)error {} å¤§æ–‡ä»¶ä¸‹è½½ï¼ˆç¦»çº¿ç¼“å­˜ï¼‰1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859#pragma mark - lazy- (NSString *)fullPath {if (_fullPath == nil) {NSString *path = [NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES) lastObject];_fullPath = [path stringByAppendingPathComponent:Filename];}return _fullPath;}- (NSURLSession *)session {if (!_session) {// ä»£ç†æ–¹å¼éœ€è¦ä½¿ç”¨è‡ªå®šä¹‰çš„session_session = [NSURLSession sessionWithConfiguration:[NSURLSessionConfiguration defaultSessionConfiguration] delegate:self delegateQueue:[NSOperationQueue mainQueue]];}return _session;}- (NSURLSessionDataTask *)task {if (!_task) {// åˆ›å»ºè¯·æ±‚å¯¹è±¡NSURL *url = [NSURL URLWithString:@&quot;http://120.25.226.186:32812/resources/videos/minion_01.mp4&quot;];NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];// è®¾ç½®è¯·æ±‚å¤´self.currentSize = [self oldFileSize];NSString *range = [NSString stringWithFormat:@&quot;bytes=%zd-&quot;, self.currentSize];[request setValue:range forHTTPHeaderField:@&quot;range&quot;];// åˆ›å»ºäººç‰©_task = [self.session dataTaskWithRequest:request];}return _task;}#pragma mark - other/*** è·å–æœ¬åœ°æ–‡ä»¶å¤§å°*/- (NSInteger)oldFileSize {NSDictionary *fileInfo = [[NSFileManager defaultManager] attributesOfItemAtPath:self.fullPath error:nil];return [fileInfo[@&quot;NSFileSize&quot;] integerValue];}#pragma mark - NSURLSessionDataDelegate- (void)URLSession:(NSURLSession *)session dataTask:(NSURLSessionDataTask *)dataTask didReceiveResponse:(NSURLResponse *)response completionHandler:(void (^)(NSURLSessionResponseDisposition))completionHandler {self.totalSize = response.expectedContentLength + self.currentSize;if (self.currentSize == 0) {[[NSFileManager defaultManager] createFileAtPath:self.fullPath contents:nil attributes:nil];}self.handle = [NSFileHandle fileHandleForWritingAtPath:self.fullPath];completionHandler(NSURLSessionResponseAllow);}- (void)URLSession:(NSURLSession *)session dataTask:(NSURLSessionDataTask *)dataTask didReceiveData:(NSData *)data {[self.handle seekToEndOfFile];[self.handle writeData:data];self.currentSize += data.length;self.progressV.progress = 1.0 * self.currentSize / self.totalSize;self.progressL.text = [NSString stringWithFormat:@&quot;%.2f&quot;, self.progressV.progress];}- (void)URLSession:(NSURLSession *)session task:(NSURLSessionTask *)task didCompleteWithError:(NSError *)error {[self.handle closeFile];self.handle = nil;NSLog(@&quot;didCompleteWithError%@&quot;, error);NSLog(@&quot;%@&quot;, self.fullPath);} æ–‡ä»¶ä¸Šä¼ 1234567891011121314151617- (void)upload {NSURL *url = [NSURL URLWithString:@&quot;http://120.25.226.186:32812/upload&quot;];NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];request.HTTPMethod = @&quot;POST&quot;;[request setValue:[NSString stringWithFormat:@&quot;multipart/form-data;boundary=%@&quot;, Kboundary] forHTTPHeaderField:@&quot;Content-Type&quot;];NSURLSession *session = [NSURLSession sessionWithConfiguration:[NSURLSessionConfiguration defaultSessionConfiguration] delegate:self delegateQueue:[NSOperationQueue mainQueue]];NSURLSessionUploadTask *task = [session uploadTaskWithRequest:request fromData:[self getBodyData] completionHandler:^(NSData * _Nullable data, NSURLResponse * _Nullable response, NSError * _Nullable error) {NSLog(@&quot;%@&quot;,[[NSString alloc]initWithData:data encoding:NSUTF8StringEncoding]);}];[task resume];}- (NSData *)getBodyData {// æ‹¼æ¥æ•°æ®}- (void)URLSession:(NSURLSession *)session task:(NSURLSessionTask *)task didSendBodyData:(int64_t)bytesSent totalBytesSent:(int64_t)totalBytesSent totalBytesExpectedToSend:(int64_t)totalBytesExpectedToSend {NSLog(@&quot;%f&quot;,1.0 *totalBytesSent / totalBytesExpectedToSend);} AFNetworking","link":"/2016/09/01/my-ios-day19/"},{"title":"my-ios-day18","text":"è¿™ä¸ªæ˜¯16å¹´é‡æ–°å¤ä¹ çš„iOSç¬”è®°ï¼Œå½“æ—¶æ˜¯æ”¾åœ¨äº†gitbookï¼Œç°åœ¨è½¬ç§»è¿‡æ¥ï¼ Day 18å¤šçº¿ç¨‹ å•ä¾‹æ¨¡å¼ NSOperation å¤šå›¾ä¸‹è½½ SDWebImageæ¡†æ¶ NSCache ä½ç§»æšä¸¾ RunLoop å•ä¾‹æ¨¡å¼ ç®€ä»‹ æ•´ä¸ªç¨‹åºè¿è¡Œä¸­ï¼Œä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œä¸”æ˜“äºå¤–ç•Œè®¿é—® æ–¹ä¾¿æ§åˆ¶å®ä¾‹ä¸ªæ•°ï¼ŒèŠ‚çº¦èµ„æº ä½¿ç”¨åœºæ™¯ æ•´ä¸ªåº”ç”¨å…±äº«ä¸€ä»½èµ„æºï¼Œåªéœ€è¦åˆå§‹åŒ–ä¸€æ¬¡ å®ç° æ–°å»ºä¸€ä¸ªç±»SLPerson1234567891011121314151617181920212223242526272829303132333435@interface SLPerson : NSObject/*** è¿”å›personå•ä¾‹*/+ (instancetype)sharePerson;@end@implementation SLPersonstatic SLPerson *_person;+ (instancetype)allocWithZone:(struct _NSZone *)zone {// æ‡’åŠ è½½// @synchronized(self) {// if (_person == nil) {// _person = [super allocWithZone:zone];// }// }// ä¸€æ¬¡æ€§ä»£ç static dispatch_once_t onceToken;dispatch_once(&amp;onceToken, ^{_person = [super allocWithZone:zone];});return _person;}+ (instancetype)sharePerson {return [[SLPerson alloc] init];}- (id)copyWithZone:(NSZone *)zone {return _person;}- (id)mutableCopyWithZone:(NSZone *)zone {return _person;}@end NSOperation ç®€ä»‹ åŸºäºGCD ä¸¤ä¸ªæ¦‚å¿µï¼šé˜Ÿåˆ—å’Œæ“ä½œ ä½¿ç”¨ NSOperationæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œè¦ä½¿ç”¨å…¶å­ç±» å¯ä»¥ä½¿ç”¨çš„ä¸‰ä¸ªå­ç±»ï¼šNSBlockOperationã€NSInvocationOperationå’Œè‡ªå®šä¹‰ç»§æ‰¿è‡ªNSOperationçš„ç±» NSOperationå’ŒNSOperationQueueéœ€è¦ç»“åˆä½¿ç”¨ ä»£ç  NSInvocationOperation12345678/*ç¬¬ä¸€ä¸ªå‚æ•°ï¼šç›®æ ‡å¯¹è±¡ç¬¬äºŒä¸ªå‚æ•°ï¼šè¯¥æ“ä½œè¦è°ƒç”¨çš„æ–¹æ³•ç¬¬ä¸‰ä¸ªå‚æ•°ï¼šè°ƒç”¨æ–¹æ³•ä¼ é€’çš„å‚æ•°*/NSInvocationOperation *operation = [[NSInvocationOperation alloc] initWithTarget:self selector:@selector(run) object:nil];// å¯åŠ¨æ“ä½œ[operation start]; NSBlockOperation123456789NSBlockOperation *ope1 = [NSBlockOperation blockOperationWithBlock:^{NSLog(@&quot;downLoad--1--%@&quot;, [NSThread currentThread]);}];NSBlockOperation *ope2 = [NSBlockOperation blockOperationWithBlock:^{NSLog(@&quot;downLoad--2--%@&quot;, [NSThread currentThread]);}];// å¯åŠ¨æ“ä½œ[ope1 start];[ope2 start]; NSOperationQueueçš„ä½¿ç”¨ ä¸¤ç§é˜Ÿåˆ— ä¸»é˜Ÿåˆ—ï¼Œé€šè¿‡mainQueueè·å¾—ï¼Œæ”¾åœ¨ä¸»é˜Ÿåˆ—çš„æ“ä½œéƒ½åœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œ éä¸»é˜Ÿåˆ—ï¼Œä½¿ç”¨alloc initå¾—åˆ°çš„é˜Ÿåˆ—ï¼Œå…·æœ‰å¹¶å‘å’Œä¸²è¡Œçš„åŠŸèƒ½ï¼Œé€šè¿‡è®¾ç½®æœ€å¤§å¹¶å‘æ•°å±æ€§æ¥æ§åˆ¶æ“ä½œæ˜¯å¹¶å‘è¿˜æ˜¯ä¸²è¡Œ ä»£ç 1234567891011121314151617181920212223242526272829303132333435363738394041/*invocationå’Œéä¸»é˜Ÿåˆ—ä¼šå¼€å­çº¿ç¨‹ï¼Œå®ç°å¹¶å‘æ“ä½œ*/- (void)invocationWithQueue {// åˆ›å»ºæ“ä½œNSInvocationOperation *op1 = [[NSInvocationOperation alloc] initWithTarget:self selector:@selector(run1) object:nil];NSInvocationOperation *op2 = [[NSInvocationOperation alloc] initWithTarget:self selector:@selector(run2) object:nil];NSInvocationOperation *op3 = [[NSInvocationOperation alloc] initWithTarget:self selector:@selector(run3) object:nil];// åˆ›å»ºé˜Ÿåˆ—NSOperationQueue *queue = [[NSOperationQueue alloc] init];// æ·»åŠ æ“ä½œåˆ°é˜Ÿåˆ—// å†…éƒ¨ä¼šè°ƒç”¨[op start];[queue addOperation:op1];[queue addOperation:op2];[queue addOperation:op3];}/*blockå’Œéä¸»é˜Ÿåˆ—ä¼šå¼€å­çº¿ç¨‹ï¼Œæ“ä½œå¹¶å‘*/- (void)blockWithQueue {NSBlockOperation *op1 = [NSBlockOperation blockOperationWithBlock:^{NSLog(@&quot;downLoad--1--%@&quot;, [NSThread currentThread]);}];NSBlockOperation *op2 = [NSBlockOperation blockOperationWithBlock:^{NSLog(@&quot;downLoad--2--%@&quot;, [NSThread currentThread]);}];NSBlockOperation *op3 = [NSBlockOperation blockOperationWithBlock:^{NSLog(@&quot;downLoad--3--%@&quot;, [NSThread currentThread]);}];// åˆ›å»ºé˜Ÿåˆ—NSOperationQueue *queue = [[NSOperationQueue alloc] init];// æ·»åŠ æ“ä½œåˆ°é˜Ÿåˆ—// å†…éƒ¨ä¼šè°ƒç”¨[op start];[queue addOperation:op1];[queue addOperation:op2];[queue addOperation:op3];// æœ‰å¿«é€Ÿçš„åˆ›å»ºæ–¹æ³•// [queue addOperationWithBlock^{}];} è‡ªå®šä¹‰SLOperation : NSOperation ä»£ç 1234567891011121314151617- (void)customWithQueue {// åˆ›å»ºæ“ä½œSLOperation *op1 = [[SLOperation alloc] init];SLOperation *op2 = [[SLOperation alloc] init];// åˆ›å»ºé˜Ÿåˆ—NSOperationQueue *queue = [[NSOperationQueue alloc] init];// æ·»åŠ æ“ä½œåˆ°é˜Ÿåˆ—[queue addOperation:op1];[queue addOperation:op2];}// SLOperation.m@implemetation SLOperation// é‡å†™mianæ–¹æ³•ï¼Œè®¾ç½®æ“ä½œ- (void)main {NSLog(@&quot;downLoad---&quot;);}@end ä½¿ç”¨ æœ‰åˆ©äºä»£ç çš„éšè”½æ€§ æé«˜ä»£ç çš„å¤ç”¨æ€§ NSOperationçš„ä¸€äº›åŠŸèƒ½ æœ€å¤§å¹¶å‘æ•°12345678910111213// åˆ›å»ºé˜Ÿåˆ—NSOperationQueue *queue = [[NSOperationQueue alloc] init];// è®¾ç½®æœ€å¤§å¹¶å‘æ•°ï¼šåŒä¸€æ—¶é—´æœ€å¤šæœ‰å¤šå°‘ä¸ªæ“ä½œæ‰§è¡Œï¼Œé»˜è®¤ä¸å—é™åˆ¶çš„queue.maxConcurrentOperationCount = 5;// å¯ä»¥å°†é»˜è®¤çš„å¹¶å‘è®¾ç½®ä¸ºä¸²è¡Œ// ä¸²è¡Œå¹¶ä¸æ˜¯åªå¼€ä¸€æ¡çº¿ç¨‹ï¼Œè€Œæ˜¯çº¿ç¨‹åŒæ­¥// queue.maxConcurrentOperationCount = 1;// åˆ›å»ºæ“ä½œSLOperation *op1 = [[SLOperation alloc] init];SLOperation *op2 = [[SLOperation alloc] init];// æ·»åŠ æ“ä½œåˆ°é˜Ÿåˆ—[queue addOperation:op1];[queue addOperation:op2]; æš‚åœæ¢å¤å’Œå–æ¶ˆ æš‚åœæ¢å¤12// è®¾ç½®é˜Ÿåˆ—çš„æš‚åœ YESã€æ¢å¤ NO@property (getter=isSuspended) BOOL suspended; å–æ¶ˆ1234567// å–æ¶ˆæ‰§è¡Œé˜Ÿåˆ—ä¸­çš„æ‰€æœ‰ä»»åŠ¡- (void)cancelAllOperations;// åœ¨è‡ªå®šä¹‰çš„Operationä¸­// è‹¹æœå®˜æ–¹å»ºè®®ï¼Œæ¯å½“æ‰§è¡Œå®Œä¸€æ¬¡è€—æ—¶æ“ä½œä¹‹åï¼Œå°±æŸ¥çœ‹ä¸€ä¸‹å½“å‰æ“ä½œæ˜¯å¦ä¸ºå–æ¶ˆçŠ¶æ€ï¼Œå¦‚æœæ˜¯ï¼Œé‚£ä¹ˆå°±ç›´æ¥é€€å‡ºï¼Œå¯ä»¥ç”¨æˆ·ä½“éªŒif (self.isCancelled) {return;} æ“ä½œä¾èµ–å’Œç›‘å¬ ä¾èµ–123456789101112131415161718NSBlockOperation *op1 = [NSBlockOperation blockOperationWithBlock:^{NSLog(@&quot;downLoad--1--%@&quot;, [NSThread currentThread]);}];NSBlockOperation *op2 = [NSBlockOperation blockOperationWithBlock:^{NSLog(@&quot;downLoad--2--%@&quot;, [NSThread currentThread]);}];NSBlockOperation *op3 = [NSBlockOperation blockOperationWithBlock:^{NSLog(@&quot;downLoad--3--%@&quot;, [NSThread currentThread]);}];// åˆ›å»ºé˜Ÿåˆ—NSOperationQueue *queue = [[NSOperationQueue alloc] init];// æ·»åŠ ä¾èµ–// op1ä¾èµ–äºop2ï¼Œåªæœ‰op2å®Œæˆæ‰èƒ½æ‰§è¡Œop1[op1 addDependency:op2];// æ·»åŠ æ“ä½œåˆ°é˜Ÿåˆ—[queue addOperation:op1];[queue addOperation:op2];[queue addOperation:op3]; ç›‘å¬12345678910111213141516171819NSBlockOperation *op1 = [NSBlockOperation blockOperationWithBlock:^{NSLog(@&quot;downLoad--1--%@&quot;, [NSThread currentThread]);}];NSBlockOperation *op2 = [NSBlockOperation blockOperationWithBlock:^{NSLog(@&quot;downLoad--2--%@&quot;, [NSThread currentThread]);}];NSBlockOperation *op3 = [NSBlockOperation blockOperationWithBlock:^{NSLog(@&quot;downLoad--3--%@&quot;, [NSThread currentThread]);}];// ç›‘å¬æ“ä½œop3.completionBlock = ^{NSLog(@&quot;op3 å®Œæˆ&quot;);};// åˆ›å»ºé˜Ÿåˆ—NSOperationQueue *queue = [[NSOperationQueue alloc] init];// æ·»åŠ æ“ä½œåˆ°é˜Ÿåˆ—[queue addOperation:op1];[queue addOperation:op2];[queue addOperation:op3]; NSOperationçº¿ç¨‹é—´é€šä¿¡123456789101112131415// åˆ›å»ºé˜Ÿåˆ—NSOperationQueue *queue = [[NSOperationQueue alloc]init];// ä½¿ç”¨ç®€ä¾¿æ–¹æ³•å°è£…æ“ä½œå¹¶æ·»åŠ åˆ°é˜Ÿåˆ—ä¸­[queue addOperationWithBlock:^{// åœ¨è¯¥blockä¸­ä¸‹è½½å›¾ç‰‡NSURL *url = [NSURL URLWithString:@&quot;http://news.51sheyuan.com/uploads/allimg/111001/133442IB-2.jpg&quot;];NSData *data = [NSData dataWithContentsOfURL:url];UIImage *image = [UIImage imageWithData:data];NSLog(@&quot;ä¸‹è½½å›¾ç‰‡æ“ä½œ--%@&quot;,[NSThread currentThread]);// å›åˆ°ä¸»çº¿ç¨‹åˆ·æ–°UI[[NSOperationQueue mainQueue] addOperationWithBlock:^{self.imageView.image = image;NSLog(@&quot;åˆ·æ–°UIæ“ä½œ---%@&quot;,[NSThread currentThread]);}];}]; å¤šå›¾ä¸‹è½½ ç®€è¦ä»£ç 12345678SLApp *app = self.apps[indexPath.row];cell.textLabel.text = app.name;cell.detailTextLabel.text = app.download;NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:app.icon]];UIImage *image = [UIImage imageWithData:data];cell.imageView.image = image;return cell; æ¶‰åŠé—®é¢˜ UIå¡é¡¿ å›¾ç‰‡å¤šæ¬¡ä¸‹è½½ è§£å†³ å›¾ç‰‡å¤šæ¬¡ä¸‹è½½12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849// ä½¿ç”¨å†…å­˜ç¼“å­˜// å»å†…å­˜ç¼“å­˜æ‰¾å›¾ç‰‡UIImage *image = [self.images objectForKey:app.name];if (image == nil) {// å¦‚æœæ²¡æœ‰å°±å»ä¸‹è½½NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:app.icon]];UIImage *image = [UIImage imageWithData:data];cell.imageView.image = image;// æ·»åŠ å›¾ç‰‡åˆ°å†…å­˜ç¼“å­˜[self.images setObject:image forKey:app.name];}else {cell.imageView.image = image;}// ä½¿ç”¨ç£ç›˜ç¼“å­˜/*Documentsï¼šä¼šå¤‡ä»½ï¼ŒLibrayï¼šPreferencesï¼šåå¥½è®¾ç½®ï¼Œè´¦å·å±æ€§Cachesï¼šç¼“å­˜æ–‡ä»¶tmpï¼šä¸´æ—¶æ–‡ä»¶ï¼Œéšæ—¶ä¼šè¢«åˆ é™¤*/// å»å†…å­˜ç¼“å­˜æ‰¾å›¾ç‰‡UIImage *image = [self.images objectForKey:app.name];if (image == nil) {// è·å–ç¼“å­˜è·¯å¾„NSString *path = [NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES) lastObject];// æ‹¼æ¥å›¾ç‰‡å…¨è·¯å¾„NSString *fileName = [app.icon lastPathComponent];NSString *imagePath = [path stringByAppendingPathComponent:fileName];// å†…å­˜ä¸­æ²¡æœ‰// 1. å…ˆæ£€æŸ¥ç£ç›˜ç¼“å­˜NSData *imageData = [NSData dataWithContentsOfFile:imagePath];if (imageData == nil) {// 2. å¦‚æœæ²¡æœ‰å°±å»ä¸‹è½½ï¼Œä¿å­˜åˆ°å†…å­˜å’Œæ²™ç›’NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:app.icon]];UIImage *image = [UIImage imageWithData:data];cell.imageView.image = image;// æ·»åŠ å›¾ç‰‡åˆ°å†…å­˜ç¼“å­˜[self.images setObject:image forKey:app.name];// æ·»åŠ å›¾ç‰‡åˆ°ç£ç›˜ç¼“å­˜// å†™æ•°æ®æ‰“æ²™ç›’[data writeToFile:imagePath atomically:YES];}UIImage *image = [UIImage imageWithData:imageData];cell.imageView.image = image;}else {cell.imageView.image = image;}return cell; UIçš„æµç•…æ€§ å¼€çº¿ç¨‹ä¸‹è½½å›¾ç‰‡123456789101112131415if (imageData == nil) {// 2. å¦‚æœæ²¡æœ‰å°±å»ä¸‹è½½ï¼Œä¿å­˜åˆ°å†…å­˜å’Œæ²™ç›’[self.queue addOperationWithBlock:^{NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:app.icon]];UIImage *image = [UIImage imageWithData:data];// æ·»åŠ å›¾ç‰‡åˆ°å†…å­˜ç¼“å­˜[self.images setObject:image forKey:app.name];// æ·»åŠ å›¾ç‰‡åˆ°ç£ç›˜ç¼“å­˜[data writeToFile:imagePath atomically:YES];// å›åˆ°ä¸»çº¿ç¨‹åˆ·æ–°UI[[NSOperationQueue mainQueue] addOperationWithBlock:^{cell.imageView.image = image;}];}];} å›¾ç‰‡ä¸ä¼šåˆ·æ–° å›¾ç‰‡å·²ç»ä¸‹è½½ï¼Œä½†æ˜¯åº”ä¸ºframeé—®é¢˜ä¸ä¼šæ˜¾ç¤ºï¼Œä¸»åŠ¨åˆ·æ–°12345// åˆ·æ–°tableViewçš„ä¸€è¡Œ[[NSOperationQueue mainQueue] addOperationWithBlock:^{[self.tableView reloadRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationAutomatic];// cell.imageView.image = image;}]; æ»‘åŠ¨è¿‡å¿«ï¼Œå›¾ç‰‡ä¸‹è½½éœ€è¦æ—¶é—´ï¼Œå›¾ç‰‡ä¸‹è½½æ“ä½œåå¤æ·»åŠ  æ“ä½œç¼“å­˜1[self.operation setObject:[[self.queue operations] lastObject] forKey:app.icon]; æ€»ç»“ ä¸»è¦å…³æ³¨ç‚¹ ç¼“å­˜çš„å¤„ç†ï¼ŒNSDictionaryä½¿ç”¨ å­˜å‚¨æ•°æ®åˆ°æ²™ç›’ å ä½å›¾ç‰‡çš„å¤„ç† ç¨‹åºå¹¶å‘æ—¶ï¼Œå·®é”™æ§åˆ¶ cellé‡ç”¨çš„æ•°æ®é”™ä¹±å¤„ç† NSOperationçš„ä½¿ç”¨ ä¸»è¦é€»è¾‘ åœ¨æœ¬åœ°ç£ç›˜æŸ¥æ‰¾ç¼“å­˜ï¼Œå¦‚æœå­˜åœ¨ç›´æ¥æ˜¾ç¤º ç£ç›˜ä¸­æ²¡æœ‰æŸ¥çœ‹å†…å­˜ç¼“å­˜ï¼Œå¦‚æœ‰ç›´æ¥æ˜¾ç¤ºï¼Œå¹¶ä¿å­˜åˆ°ç£ç›˜ å¦‚æœå†…å­˜æ²¡æœ‰ï¼Œåˆ›å»ºNSOperationä¸‹è½½æ“ä½œï¼Œæ·»åŠ åˆ°NSOperationQueueä¸­ ä¸‹è½½æ“ä½œä¸­ï¼Œå›¾ç‰‡ä¸‹è½½å®Œæ¯•ï¼Œéœ€è¦ä¿å­˜åˆ°å†…å­˜å’Œç£ç›˜ç¼“å­˜ å¯¹urlè¿›è¡Œå®¹é”™å¤„ç†ï¼Œä¸‹è½½ä¸æˆåŠŸè¦é‡æ–°ä¸‹è½½ æ·»åŠ æ“ä½œåˆ°æ“ä½œç¼“å­˜ï¼Œé¿å…æ“ä½œå¤šæ¬¡æ·»åŠ ï¼Œå›¾ç‰‡å¤šæ¬¡ä¸‹è½½ å›¾ç‰‡ä¸‹è½½å®Œæˆå›åˆ°ä¸»çº¿ç¨‹ï¼Œè¦ç«‹å³åˆ·æ–°å½“å‰è¡Œ åœ¨æœ€å¼€å§‹ä¸ºimageViewè®¾ç½®å ä½å›¾ç‰‡ SDWebImage ç®€ä»‹ ä½¿ç”¨ æ–¹æ³•1234567891011121314151617/*ç¬¬ä¸€ä¸ªå‚æ•°ï¼šä¸‹è½½å›¾ç‰‡çš„urlç¬¬äºŒä¸ªå‚æ•°ï¼šå ä½å›¾ç‰‡ç¬¬ä¸‰ä¸ªå‚æ•°ï¼šæšä¸¾å€¼ï¼Œä¸‹è½½å›¾ç‰‡çš„ç­–ç•¥å›è°ƒå‚æ•°receivedSizeï¼šå·²ç»ä¸‹è½½å®Œæˆçš„æ•°æ®å¤§å°expectedSizeï¼šè¯¥æ–‡ä»¶çš„æ€»å¤§å°imageï¼šä¸‹è½½å¾—åˆ°çš„å›¾ç‰‡æ•°æ®errorï¼šä¸‹è½½çš„é”™è¯¯ä¿¡æ¯SDImageCacheTypeï¼šå›¾ç‰‡çš„ç¼“å­˜ç­–ç•¥imageURLï¼šä¸‹è½½å›¾ç‰‡çš„url*/[cell.imageView sd_setImageWithURL:(NSURL *) placeholderImage:(UIImage *) options:(SDWebImageOptions) progress:^(NSInteger receivedSize, NSInteger expectedSize) {NSLog(@&quot;%f&quot;, 1.0 * receivedSize / expectedSize);} completed:^(UIImage *image, NSError *error, SDImageCacheType cacheType, NSURL *imageURL) {NSLog(@&quot;%@&quot;, image);}]; å†…å­˜ ä¸€äº›ç»†èŠ‚ å¼€å­çº¿ç¨‹çš„æœ€å¤§å¹¶å‘æ•°12345// é»˜è®¤æ˜¯6_downloadQueue.maxConcurrentOperationCount = 6;- (NSInteger)maxConcurrentDownloads {return _downloadQueue.maxConcurrentOperationCount;} ç¼“å­˜æ–‡ä»¶çš„è·¯å¾„å’Œåç§°12åç§°æ˜¯URLçš„MD5åŠ å¯†Cache--&gt;default--&gt;*ache--&gt;å›¾ç‰‡ å†…éƒ¨å†…å­˜ç®¡ç†123456789101112131415// é€šè¿‡ç›‘å¬é€šçŸ¥çš„æ–¹å¼ï¼Œæ¥æ¸…ç†çš„[[NSNotificationCenter defaultCenter] addObserver:selfselector:@selector(clearMemory)name:UIApplicationDidReceiveMemoryWarningNotificationobject:nil];[[NSNotificationCenter defaultCenter] addObserver:selfselector:@selector(cleanDisk)name:UIApplicationWillTerminateNotificationobject:nil];[[NSNotificationCenter defaultCenter] addObserver:selfselector:@selector(backgroundCleanDisk)name:UIApplicationDidEnterBackgroundNotificationobject:nil]; å†…éƒ¨ç¼“å­˜æ–¹æ³•1ç±»ä¼¼äºNSMutableDictionaryçš„ ---&gt; NSCache å›¾ç‰‡ç±»åˆ«çš„åˆ¤æ–­12// å†…éƒ¨ä¸»è¦æ ¹æ®å›¾ç‰‡åå…­è¿›åˆ¶çš„ç¬¬ä¸€ä¸ªå­—èŠ‚+ (NSString *)sd_contentTypeForImageData:(NSData *)data; å›¾ç‰‡ä¸‹è½½æ–¹æ³•12NSURLConnection ----&gt; å»ºç«‹ç½‘ç»œè¯·æ±‚è¿æ¥å»ºç«‹è¿æ¥åé€šè¿‡ä»£ç†æ¥ä¸‹è½½å›¾ç‰‡ å†…éƒ¨é€»è¾‘ç»“æ„12345678// UIButton+WebCache- (void)sd_setBackgroundImageWithURL:(NSURL *)url forState:(UIControlState)state placeholderImage:(UIImage *)placeholder options:(SDWebImageOptions)options completed:(SDWebImageCompletionBlock)completedBlock;// SDWebImageManager- (id &lt;SDWebImageOperation&gt;)downloadImageWithURL:(NSURL *)url options:(SDWebImageOptions)options progress:(SDWebImageDownloaderProgressBlock)progressBlock completed:(SDWebImageCompletionWithFinishedBlock)completedBlock;// SDWebImageDownloader- (id &lt;SDWebImageOperation&gt;)downloadImageWithURL:(NSURL *)url options:(SDWebImageDownloaderOptions)options progress:(SDWebImageDownloaderProgressBlock)progressBlock completed:(SDWebImageDownloaderCompletedBlock)completedBlock// SDWebImageDownloaderOperation- (id)initWithRequest:(NSURLRequest *)request options:(SDWebImageDownloaderOptions)options progress:(SDWebImageDownloaderProgressBlock)progressBlock completed:(SDWebImageDownloaderCompletedBlock)completedBlock cancelled:(SDWebImageNoParamsBlock)cancelBlock; NSCache ç®€ä»‹ è‹¹æœå®˜æ–¹çš„ç¼“å­˜å¤„ç†ç±»ï¼Œä¸å­—å…¸ç±»ä¼¼ å†…å­˜å¾ˆä½ä¼šè‡ªåŠ¨é‡Šæ”¾å¯¹è±¡ çº¿ç¨‹å®‰å…¨çš„ï¼Œä¸éœ€è¦åŠ é” å¯¹è±¡çš„å¼ºå¼•ç”¨ï¼Œä¸æ˜¯æ‹·è´ å±æ€§ nameï¼šåç§° delegateï¼šè®¾ç½®ä»£ç† totalCostLimitï¼šç¼“å­˜ç©ºé—´çš„æ€»æˆæœ¬ï¼Œè¶…å‡ºä¼šå›æ”¶ï¼Œé»˜è®¤0æ²¡é™åˆ¶ evictsObjectsWithDiscardedContentï¼šæ ‡è¯†ç¼“å­˜æ˜¯å¦å›æ”¶åºŸå¼ƒå†…å®¹ ä½¿ç”¨12345678// æ·»åŠ ç¼“å­˜- (void)setObject:(ObjectType)obj forKey:(KeyType)key; // 0 costï¼šæˆæœ¬- (void)setObject:(ObjectType)obj forKey:(KeyType)key cost:(NSUInteger)g;// æ‹¿åˆ°ç¼“å­˜- (nullable ObjectType)objectForKey:(KeyType)key;// åˆ é™¤ç¼“å­˜- (void)removeObjectForKey:(KeyType)key;- (void)removeAllObjects; ä½ç§»æšä¸¾ æšä¸¾ ç¬¬ä¸€ç§12345typedef enum{SLTypeOne,SLTypeTwo}SLType; ç¬¬äºŒç§ï¼Œå¯ä»¥å®šä¹‰ç±»å‹12345typedef NS_ENUM(NSInteger, SLType){SLTypeOne,SLTypeTwo}; ç¬¬ä¸‰ç§ï¼Œä½ç§»æšä¸¾1234567typedef NS_OPTIONS(NSInteger, SLNewType){SLTypeOne = 1 &lt;&lt; 0, // 1SLTypeTwo = 1 &lt;&lt; 1, // 2SLTypeThree = 1 &lt;&lt; 2, // 4SLTypeFour = 1 &lt;&lt; 3 // 8} ç”¨é€”ï¼šå¤šä¸ªé‡ä¼ é€’1234567891011121314151617181920// æŒ‰ä½æˆ– |// objc.type = 0011obj.type = SLTypeOne | SLTypeTwo;// æŒ‰ä½ä¸ &amp;// 0011 &amp; 0001 = 1if(obj.type &amp; SLTypeOne) {NSLog(@&quot;SLTypeOne&quot;);}// 0011 &amp; 0010 = 1if(obj.type &amp; SLTypeTwo) {NSLog(@&quot;SLTypeTwo&quot;);}// 0011 &amp; 0100 = 0if(obj.type &amp; SLTypeThree) {NSLog(@&quot;SLTypeThree&quot;);}// 0011 &amp; 1000 = 0if(obj.type &amp; SLTypeFour) {NSLog(@&quot;SLTypeFour&quot;);} RunLoop ç®€ä»‹ è¿è¡Œå¾ªç¯ï¼Œä¿æŒç¨‹åºçš„æŒç»­è¿è¡Œ å¤„ç†Appä¸­çš„å„ç§äº‹ä»¶ï¼ˆè§¦æ‘¸ã€å®šæ—¶å™¨ã€Selectorï¼‰ èŠ‚çœCPUèµ„æºï¼Œæé«˜æ€§èƒ½ï¼Œæœ‰äº‹å°±åšï¼Œæ²¡äº‹ä¼‘æ¯ ä¸¤å¥—APIè®¿é—®RunLoop Foundationâ€“&gt;NSRunLoop Core Foundationâ€“&gt;CFRunLoopRef RunLoopä¸çº¿ç¨‹ æ¯æ¡çº¿ç¨‹éƒ½æœ‰å”¯ä¸€çš„ä¸€ä¸ªRunLoopå¯¹è±¡ ä¸»çº¿ç¨‹çš„RunLoopå·²ç»è‡ªåŠ¨åˆ›å»ºå¥½äº†ï¼Œå­çº¿ç¨‹çš„RunLoopéœ€è¦ä¸»åŠ¨åˆ›å»º RunLoopåœ¨ç¬¬ä¸€æ¬¡è·å–æ˜¯åˆ›å»ºï¼Œåœ¨çº¿ç¨‹ç»“æŸæ—¶é”€æ¯ è·å¾—RunLoopå¯¹è±¡ Foundation12[NSRunLoop currentRunLoop]; // è·å¾—å½“å‰çº¿ç¨‹çš„RunLoopå¯¹è±¡[NSRunLoop mainRunLoop]; // è·å¾—ä¸»çº¿ç¨‹çš„RunLoopå¯¹è±¡ Core Foundation12CFRunLoopGetCurrent(); // è·å¾—å½“å‰çº¿ç¨‹çš„RunLoopå¯¹è±¡CFRunLoopGetMain(); // è·å¾—ä¸»çº¿ç¨‹çš„RunLoopå¯¹è±¡ Core Foundation ä¸­çš„äº”ä¸ªç±» CFRunLoopRef CFrunLoopModeRef è¿è¡Œæ¨¡å¼ CFRunLoopSourceRef äº‹ä»¶æºè¾“å…¥æº CFRunLoopTimerRef å®šæ—¶å™¨äº‹ä»¶ CFRunLoopObserveRef ç›‘å¬è¿è¡Œ RunLoopè¿è¡Œ RunLoopæœ‰å¤šä¸ªè¿è¡Œæ¨¡å¼ï¼Œä½†å®ƒåªèƒ½åœ¨ä¸€ç§æ¨¡å¼è¿è¡Œ Modeä¸­è‡³å°‘è¦ä¸€ä¸ªSourceæˆ–Timerï¼ŒObserveå¯é€‰ æ¯æ¬¡RunLoopå¯åŠ¨ï¼Œåªèƒ½æŒ‡å®šä¸€ä¸ªModeï¼ˆcurrentModeï¼‰ å¦‚æœéœ€è¦åˆ‡æ¢Modeï¼Œåªèƒ½é€€å‡ºLoopï¼Œåœ¨æŒ‡å®šæ–°çš„Mode ç³»ç»Ÿé»˜è®¤äº”ç§è¿è¡Œæ¨¡å¼ kCFRunLoopDefaultModeï¼šappçš„é»˜è®¤æ¨¡å¼ï¼Œé€šå¸¸ä¸»çº¿ç¨‹åœ¨è¿™ä¸ªæ¨¡å¼ä¸‹è¿è¡Œ UITrackingRunLoopModeï¼šç•Œé¢è·Ÿè¸ªModeï¼Œç”¨äºScrollViewè¿½è¸ªæ»‘åŠ¨è§¦æ‘¸ï¼Œä¿è¯ç•Œé¢æ»‘åŠ¨ä¸å—å…¶ä»–Modeå½±å“ UIInitializationRunLoopModeï¼šåœ¨åˆšå¯åŠ¨Appæ—¶è¿›å…¥çš„ç¬¬ä¸€ä¸ªModeï¼Œå¯åŠ¨å®Œå°±ä¸åœ¨ä½¿ç”¨ GSEventReceiveRunLoopModeï¼šæ¥æ”¶ç³»ç»Ÿäº‹ä»¶çš„å†…éƒ¨Modeï¼Œé€šå¸¸ä¸ç”¨ kCFRunLoopCommonModesï¼šè¿™æ˜¯ä¸€ä¸ªå ä½ç”¨çš„Modeï¼Œä¸æ˜¯çœŸçš„Mode äº‹ä»¶æºï¼ˆè¾“å…¥æºï¼‰åˆ†ç±» å®˜æ–¹æ–‡æ¡£ Port-Based Sources Custom Input Sources Cocoa Perform Selector Sources å‡½æ•°è°ƒç”¨æ ˆ Source0ï¼šéåŸºäºPortçš„ Source1ï¼šåŸºäºPortçš„ ç›‘å¬è€…Observer ç›‘å¬RunLoopçš„çŠ¶æ€æ”¹å˜ æ­¥éª¤12345678// åˆ›å»ºä¸€ä¸ªç›‘å¬è€…å¯¹è±¡CFRunLoopObserverRef observer = CFRunLoopObserverCreateWithHandler(CFAllocatorGetDefault(),kCFRunLoopAllActivities, YES, 0, ^(CFRunLoopObserverRef observer, CFRunLoopActivity activity) {NSLog(@&quot;ç›‘å¬runloopçŠ¶æ€æ”¹å˜---%zd&quot;,activity);});// æ·»åŠ ç›‘å¬è€…CFRunLoopAddObserver(CFRunLoopGetCurrent(), observer, kCFRunLoopDefaultMode);// ç§»é™¤ç›‘å¬è€…CFRelease(observer); å‡ ä¸ªRunLoopçŠ¶æ€123456789typedef CF_OPTIONS(CFOptionFlags, CFRunLoopActivity) {kCFRunLoopEntry = (1UL &lt;&lt; 0), //å³å°†è¿›å…¥RunloopkCFRunLoopBeforeTimers = (1UL &lt;&lt; 1), //å³å°†å¤„ç†NSTimerkCFRunLoopBeforeSources = (1UL &lt;&lt; 2), //å³å°†å¤„ç†SourceskCFRunLoopBeforeWaiting = (1UL &lt;&lt; 5), //å³å°†è¿›å…¥ä¼‘çœ kCFRunLoopAfterWaiting = (1UL &lt;&lt; 6), //åˆšä»ä¼‘çœ ä¸­å”¤é†’kCFRunLoopExit = (1UL &lt;&lt; 7), //å³å°†é€€å‡ºrunloopkCFRunLoopAllActivities = 0x0FFFFFFFU //æ‰€æœ‰çŠ¶æ€æ”¹å˜}; RunLoopçš„è¿è¡Œé€»è¾‘ äº‹ä»¶é˜Ÿåˆ— æ¯æ¬¡è¿è¡ŒRunLoopï¼Œä¼šè‡ªåŠ¨å¤„ç†ä¹‹å‰æœªå¤„ç†çš„æ¶ˆæ¯ï¼Œå¹¶é€šçŸ¥ç›¸å…³çš„ç›‘å¬è€… å…·ä½“è¿‡ç¨‹ é€šçŸ¥ç›‘å¬è€…RunLoopå·²ç»å¯åŠ¨ é€šçŸ¥ç›‘å¬è€…ä»»ä½•å³å°†å¼€å§‹çš„å®šæ—¶å™¨ é€šçŸ¥ç›‘å¬è€…ä»»ä½•å³å°†å¯åŠ¨çš„éåŸºäºç«¯å£çš„æºï¼ˆSourceï¼‰ å¯åŠ¨ä»»ä½•å‡†å¤‡å¥½çš„éåŸºäºç«¯å£çš„æº å¦‚æœåŸºäºç«¯å£çš„æºå‡†å¤‡å¥½å¹¶å¤„äºç­‰å¾…çŠ¶æ€ï¼Œç«‹å³å¯åŠ¨ï¼Œå¤„ç†æœªå¤„ç†çš„äº‹ä»¶ é€šçŸ¥ç›‘å¬è€…çº¿ç¨‹è¿›å…¥ä¼‘çœ  ç›´åˆ°ä»¥ä¸‹äº‹ä»¶å‘ç”Ÿï¼Œçº¿ç¨‹å°†è¢«å”¤é†’æŸä¸€äº‹ä»¶åˆ°è¾¾åŸºäºç«¯å£çš„æºå®šæ—¶å™¨å¯åŠ¨RunLoopè®¾ç½®çš„æ—¶é—´å·²ç»è¶…æ—¶RunLoopè¢«æ˜¾å¼å”¤é†’ é€šçŸ¥ç›‘å¬è€…çº¿ç¨‹å°†è¢«å”¤é†’ å¤„ç†æœªå¤„ç†äº‹ä»¶ é€šçŸ¥è§‚å¯Ÿè€…RunLoopç»“æŸ æœªå¤„ç†äº‹ä»¶å®šæ—¶å™¨å¯åŠ¨ï¼Œå¤„ç†å®šæ—¶å™¨äº‹ä»¶å¹¶é‡å¯RunLoopè¾“å…¥æºå¯åŠ¨ï¼Œä¼ é€’ç›¸åº”æ¶ˆæ¯è¢«æ˜¾å¼å”¤é†’ä¸”æ²¡æœ‰è¶…æ—¶ï¼Œé‡å¯RunLoop åº”ç”¨ NSTimer ImageViewæ˜¾ç¤º performSelector å¸¸é©»çº¿ç¨‹ï¼šå­çº¿ç¨‹ä¸­å¼€å¯ä¸€ä¸ªrunloop è‡ªåŠ¨é‡Šæ”¾æ± ","link":"/2016/09/01/my-ios-day18/"},{"title":"my-ios-day2","text":"è¿™ä¸ªæ˜¯16å¹´é‡æ–°å¤ä¹ çš„iOSç¬”è®°ï¼Œå½“æ—¶æ˜¯æ”¾åœ¨äº†gitbookï¼Œç°åœ¨è½¬ç§»è¿‡æ¥ï¼ ##å›é¡¾##åŠ æ³•è®¡ç®—å™¨- æ§ä»¶- 3ä¸ªUILabel- 2ä¸ªUITextField- 1ä¸ªUIButton- ç®€å•é€»è¾‘- å–å¾—ç”¨æˆ·åœ¨textFieldä¸­çš„è¾“å…¥ï¼Œåˆ¤æ–­è¾“å…¥æ˜¯å¦æ»¡è¶³éœ€æ±‚ï¼ˆæ•°å­—å’Œéç©ºï¼‰- è®¡ç®—ç»“æœå¹¶æ˜¾ç¤ºday 02åŸºæœ¬æ§ä»¶ UILabel æ˜¾ç¤ºæ–‡æœ¬ UIImageView æ˜¾ç¤ºå›¾ç‰‡ UIButton æŒ‰é’® UITextField æ–‡æœ¬è¾“å…¥æ¡† UITextView å¸¦æ»šåŠ¨æ¡çš„æ–‡æœ¬è¾“å…¥æ¡† UIProgressView è¿›åº¦æ¡ UISlider æ»‘å— UIActivityIndicator åœˆåœˆ UIAlertView ä¸­é—´å¼¹æ¡† UIActionSheet åº•éƒ¨å¼¹æ¡† UIScrollView æ»šåŠ¨çš„view UIPageControl åˆ†é¡µæ§ä»¶ UITableView è¡¨æ ¼ UICollectionView ä¹å®«æ ¼ UIWebView æ˜¾ç¤ºç½‘é¡µ UISwitch å¼€å…³ UISegmentControl é€‰é¡¹å¡ UIPickView é€‰æ‹©å™¨ UIDatePicker æ—¥æœŸé€‰æ‹©å™¨ UIToolbar å·¥å…·æ¡ æ§ä»¶å­¦ä¹ UILabel ç»å¸¸ä½¿ç”¨çš„æ§ä»¶ï¼Œæ˜¾ç¤ºæ–‡å­— å¸¸è§å±æ€§12345678@property(nullable, nonatomic,copy) NSString *text; // æ˜¾ç¤ºçš„æ–‡å­—@property(null_resettable, nonatomic,strong) UIFont *font; // å­—ä½“@property(null_resettable, nonatomic,strong) UIColor *textColor; // æ–‡å­—çš„é¢œè‰²@property(nullable, nonatomic,strong) UIColor *shadowColor; // æ–‡å­—çš„é˜´å½±é¢œè‰²@property(nonatomic) CGSize shadowOffset; // æ–‡å­—çš„é˜´å½±åç§»@property(nonatomic) NSTextAlignment textAlignment; // æ–‡å­—å¯¹æ–¹å¼@property(nonatomic) NSLineBreakMode lineBreakMode; // æ¢è¡Œæ¨¡å¼@property(nonatomic) NSInteger numberOfLines; // æ–‡å­—è¡Œæ•°ï¼Œ0è¡¨ç¤ºæ¢è¡Œ UIColorç±» è¡¨ç¤ºé¢œè‰² å¸¸ç”¨æ–¹æ³•123456789+ (UIColor *)blackColor; // 0.0 white+ (UIColor *)whiteColor; // 1.0 white+ (UIColor *)grayColor; // 0.5 white+ (UIColor *)redColor; // 1.0, 0.0, 0.0 RGB+ (UIColor *)greenColor; // 0.0, 1.0, 0.0 RGB+ (UIColor *)blueColor; // 0.0, 0.0, 1.0 RGB+ (UIColor *)clearColor; // 0.0 white, 0.0 alpha- (UIColor *)initWithRed:(CGFloat)red green:(CGFloat)green blue:(CGFloat)blue alpha:(CGFloat)alpha; // ä½¿ç”¨aRGBåˆå§‹åŒ–é¢œè‰²- (UIColor *)initWithPatternImage:(UIImage*)image; // å›¾ç‰‡ä¸­è·å–å‡è‰² UIFontç±» è¡¨ç¤ºå­—ä½“ å¸¸ç”¨æ–¹æ³•123+ (UIFont *)systemFontOfSize:(CGFloat)fontSize; // ç³»ç»Ÿé»˜è®¤å­—ä½“+ (UIFont *)boldSystemFontOfSize:(CGFloat)fontSize; // ç²—ä½“+ (UIFont *)italicSystemFontOfSize:(CGFloat)fontSize; // æ–œä½“ shadowOffset é˜´å½±CGSizeMake(x, y); x&gt;0 å‘å³å y&gt;0 å‘ä¸‹å textAlignment123- NSTextAlignmentLeft å·¦å¯¹é½- NSTextAlignmentCenter å±…ä¸­- NSTextAlignmentRight å³å¯¹é½ lineBreakMode12345- NSLineBreakByWordWrapping = 0, æŒ‰å•è¯æ¢è¡Œï¼Œé»˜è®¤çš„- NSLineBreakByCharWrapping, æŒ‰å­—æ¯æ¢è¡Œ- NSLineBreakByTruncatingHead, å¼€å§‹çœç•¥&quot;...wxyz&quot;- NSLineBreakByTruncatingTail, ç»“å°¾çœç•¥ &quot;abcd...&quot;- NSLineBreakByTruncatingMiddle, ä¸­é—´çœç•¥ &quot;ab...yz&quot; UIImageView å¸¸ç”¨æ§ä»¶ï¼Œæ˜¾ç¤ºå›¾ç‰‡ï¼Œæ’­æ”¾å¸§åŠ¨ç”» å¸¸è§å±æ€§1234@property(nonatomic,retain) UIImage *image; // æ˜¾ç¤ºçš„å›¾ç‰‡@property(nonatomic,copy) NSArray *animationImages; // æ˜¾ç¤ºçš„åŠ¨ç”»å›¾ç‰‡@property(nonatomic) NSTimeInterval animationDuration; // åŠ¨ç”»å›¾ç‰‡çš„æŒç»­æ—¶é—´@property(nonatomic) NSInteger animationRepeatCount; // åŠ¨ç”»çš„æ’­æ”¾æ¬¡æ•°ï¼ˆé»˜è®¤æ˜¯0ï¼Œä»£è¡¨æ— é™æ’­æ”¾ï¼‰ å¸¸è§æ–¹æ³•123- (void)startAnimating; // å¼€å§‹åŠ¨ç”»- (void)stopAnimating; // åœæ­¢åŠ¨ç”»- (BOOL)isAnimating; // æ˜¯å¦æ­£åœ¨æ‰§è¡ŒåŠ¨ç”» UIImageç±» å¸¸ç”¨åˆ›å»ºæ–¹æ³•12+ (UIImage *)imageNamed:(NSString *)name; // å›¾ç‰‡å+ (UIImage *)imageWithContentsOfFile:(NSString *)path; // å›¾ç‰‡å…¨è·¯å¾„ å›¾ç‰‡æ‹‰ä¼¸ä»£ç 12- (UIImage *)resizableImageWithCapInsets:(UIEdgeInsets)capInsets- (UIImage *)resizableImageWithCapInsets:(UIEdgeInsets)capInsets resizingMode:(UIImageResizingMode)resizingMode UIButton å¯ä»¥å’Œç”¨æˆ·äº¤äº’ï¼Œæ˜¾ç¤ºå›¾ç‰‡å’Œæ–‡å­— çŠ¶æ€ normal æ™®é€šçŠ¶æ€ï¼Œé»˜è®¤çŠ¶æ€Defaultï¼Œ UIControlStateNormal highlighted é«˜äº®çŠ¶æ€ï¼ŒæŒ‰é’®è¢«æŒ‰ä¸‹çš„çŠ¶æ€ï¼Œæ‰‹æ²¡æœ‰æŠ¬èµ·ï¼Œ UIControlStateHighlighted disable å¤±æ•ˆçŠ¶æ€ï¼Œä¸èƒ½ç‚¹å‡»çš„çŠ¶æ€ï¼Œ UIControlStateDisabed è®¾ç½®1234- (void)setTitle:(NSString *)title forState:(UIControlState)state; // è®¾ç½®æŒ‰é’®çš„æ–‡å­—- (void)setTitleColor:(UIColor *)color forState:(UIControlState)state; // è®¾ç½®æŒ‰é’®çš„æ–‡å­—é¢œè‰²- (void)setImage:(UIImage *)image forState:(UIControlState)state; // è®¾ç½®æŒ‰é’®å†…éƒ¨çš„å°å›¾ç‰‡- (void)setBackgroundImage:(UIImage *)image forState:(UIControlState)state; // è®¾ç½®æŒ‰é’®çš„èƒŒæ™¯å›¾ç‰‡ ç›‘å¬äº‹ä»¶ æ‹–çº¿ ä»£ç 12// æŒ‰é’®ç‚¹å‡»åå°±ä¼šè°ƒç”¨selfçš„btnClick:æ–¹æ³•ï¼Œå¹¶å°†æŒ‰é’®æœ¬èº«ä½œä¸ºå‚æ•°ä¼ é€’è¿‡å»[button addTarget:self action:@selector(btnClick:) forControlEvents:UIControlEventTouchUpInside]; å†…éƒ¨å­æ§ä»¶ ä¸€ä¸ªUILabelå’Œä¸€ä¸ªUIImageView ä¸å¯ä»¥ç›´æ¥æ”¹å˜buttonå†…éƒ¨å­æ§ä»¶çš„ä½ç½® è‡ªå®šä¹‰çš„æ—¶å€™ï¼Œéœ€è¦é‡å†™ä¸¤ä¸ªæ–¹æ³•12345- (CGRect)titleRectForContentRect:(CGRect)contentRect{}- (CGRect)imageRectForContentRect:(CGRect)contentRect{}- (void)layoutSubviews {[super layoutSubviews];} å†…è¾¹è·å±æ€§ contentEdgeInsets æ‰€æœ‰å†…å®¹çš„å†…è¾¹è· titleEdgeInsets æ–‡å­—çš„å†…è¾¹è· imageEdgeInsets å›¾ç‰‡çš„å†…è¾¹è· ##æ‹³çš‡å°ä¾‹å­ å¸§åŠ¨ç”»1234self.imageView.animationImages = images; // åŠ¨ç”»éœ€è¦å›¾ç‰‡æ•°ç»„self.imageView.animationRepeatCount = repeatCount; // åŠ¨ç”»æ’­æ”¾æ¬¡æ•°self.imageView.animationDuration = duration; // æ¯æ¬¡çš„æ’­æ”¾æ—¶é—´[self.imageView startAnimating]; // å¼€å§‹åŠ¨ç”»","link":"/2016/09/01/my-ios-day2/"},{"title":"my-ios-day3","text":"è¿™ä¸ªæ˜¯16å¹´é‡æ–°å¤ä¹ çš„iOSç¬”è®°ï¼Œå½“æ—¶æ˜¯æ”¾åœ¨äº†gitbookï¼Œç°åœ¨è½¬ç§»è¿‡æ¥ï¼ ##å›é¡¾ UIImageViewå›¾ç‰‡çš„ä¸¤ç§åŠ è½½æ–¹å¼æ²¡æœ‰ç¼“å­˜NSString *file = [[NSBundle mainBundle] pathForResource:@â€å›¾ç‰‡åâ€ ofType:@â€å›¾ç‰‡æ‰©å±•åâ€];UIImage *image = [UIImage imageWithContentOfFile:file];*åªè¦æ–¹æ³•åå¸¦æœ‰fileçš„ï¼Œéƒ½æ˜¯ä¼ å…¨è·¯å¾„ä½¿ç”¨åœºåˆï¼šå›¾ç‰‡æ¯”è¾ƒå¤§ï¼Œä½¿ç”¨é¢‘ç‡æ¯”è¾ƒä½å»ºè®®ï¼šä¸éœ€è¦ç¼“å­˜çš„å›¾ç‰‡ä¸èƒ½æ”¾åœ¨Assets.xcassetsä¸­æ”¾åˆ°Assets.xcassetsä¸­çš„å›¾ç‰‡åªèƒ½é€šè¿‡å›¾ç‰‡åå»åŠ è½½ï¼Œè‹¹æœä¼šå‹ç¼©å›¾ç‰‡ï¼Œè€Œä¸”é»˜è®¤å¸¦æœ‰ç¼“å­˜ã€‚UIImage *image = [UIImage imageNamed:@â€å›¾ç‰‡åâ€]; å»¶è¿Ÿåšä¸€äº›äº‹æƒ…iOSä¸­æœ‰å¾ˆå¤šæ–¹å¼(GCD,dispatchâ€¦)[abc performSelector:@selector(stand:) withObject:@â€123â€ afterDelay:10];// 10ç§’åè°ƒç”¨abcçš„standï¼šæ–¹æ³•ï¼Œå¹¶ä¸”ä¼ é€’@â€œ123â€å‚æ•° ç®€å•çš„éŸ³é¢‘æ’­æ”¾ä½¿ç”¨AVFoundationæ¡†æ¶AVPlayer *player = [[AVPlayer alloc] init];NSURL *url = [[NSBundle mainBundle] URLForResource:@â€yinyue.mp3â€ withExtension:nil];AVPlayerItem *item = [[AVPlayerItem alloc] initWithURL:url];[player replaceCurrentItemWithPlayerItem:item];[player play]; day 03è´­ç‰©è½¦ç®€å•å®ç° ä¹å®«æ ¼å¸ƒå±€ æ¨ªå‘ï¼Œyå€¼ï¼šä¸å˜ï¼Œxå€¼ï¼šï¼ˆé—´è· + å®½åº¦ï¼‰* ï¼ˆä¸‹æ ‡ % æ€»åˆ—æ•°ï¼‰ çºµå‘ï¼Œxå€¼ï¼šä¸å˜ï¼Œyå€¼ï¼šï¼ˆé—´è· + é«˜åº¦ï¼‰* ï¼ˆä¸‹æ ‡ / æ€»è¡Œæ•°ï¼‰ Plistæ–‡ä»¶çš„è¯»å–NSBundle *bundle = [NSBundle mainBundle];NSString *path = [bundle pathForResource:@â€filenameâ€ ofType:@â€plistâ€];_data = [NSArray arrayWithContentsOfFile:path]; // _dataä¿å­˜æ•°æ®çš„æ•°ç»„ æ‡’åŠ è½½ 1234567- (NSArray *)data{if(_data == nil) {// åˆå§‹åŒ–dataçš„ä»£ç }return _data;} é¢å‘å­—å…¸ç¼–ç¨‹ å°†æ•°æ®ä»¥å­—å…¸çš„æ–¹å¼å­˜å‚¨ï¼Œå­˜å–æ•°æ®è¦ä½¿ç”¨keyï¼Œå®¹æ˜“æ•²é”™ dict[@â€nameâ€] = @â€Sleenâ€; é¢å‘æ¨¡å‹ç¼–ç¨‹ Modelï¼Œå°†æ•°æ®å¯¹è±¡å°è£…æˆä¸€ä¸ªç»§æ‰¿è‡ªNSObjectçš„ç±»ï¼Œæ•°æ®å¯¹è±¡çš„å±æ€§ä½œä¸ºæˆå‘˜å˜é‡ å­˜å–æ•°æ®ä¾é å±æ€§ï¼Œå±æ€§åå†™é”™å°±ä¼šç›´æ¥æŠ¥é”™ï¼Œæé«˜ç¼–ç¨‹æ•ˆç‡ person.name = @â€Sleenâ€; xibçš„ä½¿ç”¨ æ³¨å†Œ 1234567@interface SLXibView : UIView+ (instancetype)xibView;@end@implementation SLXibView+ (instancetype)xibView {return [[[NSBundle mainBundle] loadNibNamed:@&quot;SLXibView&quot; owner:nil options:nil] lastobject];} ç®€å•æ³¨æ„ æ§ä»¶æœ‰ä¸¤ç§åˆ›å»ºæ–¹å¼ é€šè¿‡ä»£ç åˆ›å»ºï¼Œåˆå§‹åŒ–çš„æ—¶å€™ä¸€å®šä¼šè°ƒç”¨initWithFrame:æ–¹æ³• é€šè¿‡xib/storyboardåˆ›å»ºï¼Œåˆå§‹åŒ–æ—¶ä¸ä¼šè°ƒç”¨initWithFrame:æ–¹æ³•ï¼Œåªä¼šè°ƒç”¨initWithCoder:æ–¹æ³•ï¼Œåˆå§‹åŒ–å®Œæ¯•ä¼šè°ƒç”¨awakerFromNibæ–¹æ³• æœ‰æ—¶å€™éœ€è¦åœ¨åˆå§‹åŒ–æ—¶åšä¸€äº›äº‹æƒ…ï¼Œå¦‚ï¼šæ·»åŠ å­æ§ä»¶ï¼Œè®¾ç½®å±æ€§ è¦æ ¹æ®æ§ä»¶çš„åˆ›å»ºæ–¹å¼æ¥é€‰æ‹©å¯¹åº”çš„æ–¹æ³•","link":"/2016/09/01/my-ios-day3/"},{"title":"my-ios-day4","text":"è¿™ä¸ªæ˜¯16å¹´é‡æ–°å¤ä¹ çš„iOSç¬”è®°ï¼Œå½“æ—¶æ˜¯æ”¾åœ¨äº†gitbookï¼Œç°åœ¨è½¬ç§»è¿‡æ¥ï¼ day04##æ§ä»¶å­¦ä¹ ####UIScrollView åŸºæœ¬ä½¿ç”¨ ç§»åŠ¨è®¾å¤‡çš„å±å¹•å¤§å°æ˜¯åŠå…¶æœ‰é™çš„ï¼Œéœ€è¦å±•ç¤ºçš„å†…å®¹è¾ƒå¤šï¼Œéœ€è¦ç”¨æˆ·ä½¿ç”¨æ»šåŠ¨æ‰‹åŠ¿æŸ¥çœ‹å±å¹•ä»¥å¤–çš„å†…å®¹ å°†è¦å±•ç¤ºçš„å†…å®¹æ·»åŠ åˆ°UIScrollViewä¸­ï¼Œè®¾ç½®UIScrollViewçš„contentSizeå±æ€§ å¸¸è§å±æ€§123456789101112// è¡¨ç¤ºscrollViewçš„æ»šåŠ¨ä½ç½®ï¼Œå†…å®¹å·¦ä¸Šè§’ä¸scrollVå·¦ä¸Šè§’çš„é—´è·å€¼@property(nonatomic) CGPoint contentOffSetï¼›// è¡¨ç¤ºscrollViewä¸­å†…å®¹çš„ä½ç½®ï¼Œæ»šåŠ¨èŒƒå›´@property(nonatomic) CGSize contentSize;// åœ¨scrollViewçš„å››å‘¨æ·»åŠ é¢å¤–çš„æ»šåŠ¨åŒºåŸŸ@property(nonatomic) UIEdgeInsets contentInset// è®¾ç½®scrollViewæ˜¯å¦éœ€è¦å¼¹ç°§æ•ˆæœ@property(nonatomic) BOOL bounces;// æ˜¯å¦æ˜¾ç¤ºå‚ç›´æ»šåŠ¨æ¡@property(nonatomic) BOOL alwaysBounceVertical;// æ˜¯å¦æ˜¾ç¤ºæ°´å¹³æ»šåŠ¨æ¡@property(nonatomic) BOOL alwaysBounceHorizontal; ä»£ç† éœ€è¦ç›‘å¬UIScrollViewçš„æ»šåŠ¨è¿‡ç¨‹ï¼Œéœ€è¦ä½¿ç”¨UIScrollViewçš„ä»£ç†1@property(nullable, nonatomic, weak) id&lt;UIScrollViewDelegate&gt; delegate; ä»£ç†å®ç°ç¼©æ”¾1234567// è®¾ç½®minimumZoomScale(ç¼©æ”¾æœ€å°æ¯”ä¾‹)å’ŒmaximumZoomScale(ç¼©æ”¾æœ€å¤§æ¯”ä¾‹)// è¿”å›éœ€è¦ç¼©æ”¾çš„æ§ä»¶- (nullable UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView;// å³å°†å¼€å§‹ç¼©æ”¾çš„æ—¶å€™è°ƒç”¨- (void)scrollViewWillBeginZooming:(UIScrollView *)scrollView withView:(nullable UIView *)view// æ­£åœ¨ç¼©æ”¾çš„æ—¶å€™è°ƒç”¨- (void)scrollViewDidZoom:(UIScrollView *)scrollView; ä»£ç†ç›‘å¬æ»šåŠ¨12345678// å½“scrollViewæ­£åœ¨æ»šåŠ¨çš„æ—¶å€™å°±ä¼šè‡ªåŠ¨è°ƒç”¨è¿™ä¸ªæ–¹æ³•- (void)scrollViewDidScroll:(UIScrollView *)scrollView;// ç”¨æˆ·å³å°†å¼€å§‹æ‹–æ‹½scrollViewæ—¶å°±ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•- (void)scrollViewWillBeginDragging:(UIScrollView *)scrollView;// ç”¨æˆ·å³å°†åœæ­¢æ‹–æ‹½scrollViewæ—¶å°±ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•- (void)scrollViewWillEndDragging:(UIScrollView *)scrollView withVelocity:(CGPoint)velocity targetContentOffset:(inout CGPoint *)targetContentOffset;// scrollViewå‡é€Ÿå®Œæ¯•ä¼šè°ƒç”¨,åœæ­¢æ»šåŠ¨- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView åˆ†é¡µåŠŸèƒ½ è®¾ç½®UIScrollViewçš„pagingEnabled = YESå¼€å¯åˆ†é¡µåŠŸèƒ½ï¼Œä»¥scrollViewçš„å°ºå¯¸ä¸ºä¸€é¡µ UIPageControlå¢å¼ºåˆ†é¡µæ•ˆæœ12345@property(nonatomic) NSInteger numberOfPages; // ä¸€å…±æœ‰å¤šå°‘é¡µ@property(nonatomic) NSInteger currentPage; // å½“å‰æ˜¾ç¤ºé¡µç @property(nonatomic) BOOL hidesForSinglePage; // åˆ†ä¸€é¡µæ—¶æ˜¯å¦éšè—é¡µç æŒ‡ç¤ºå™¨@property(nonatomic, reatain) UIColor *pageIndicatorTintColor; // å…¶ä»–é¡µç æŒ‡ç¤ºå™¨çš„é¢œè‰²@property(nonatomic, reatain) UIColor *currentPageIndicatorTintColor; // å½“å‰é¡µç æŒ‡ç¤ºå™¨çš„é¢œè‰² NSTimerè‡ªåŠ¨æ»šåŠ¨1234// æ¯éš”2ç§’è°ƒç”¨selfçš„nextæ–¹æ³•NSTimer *timer = [NSTimer timerWithTimeInterval:2 target:self selector:@selector(next) userInfo:nil repeats:YES];// è§£å†³å®šæ—¶å™¨åœ¨ä¸»çº¿ç¨‹ä¸å·¥ä½œçš„é—®é¢˜[[NSRunLoop mainRunLoop] addTimer:timer forMode:NSRunLoopCommonModes]; KVC ç®€å•èµ‹å€¼12- (void)setValue:(nullable id)value forKey:(NSString *)key;- (void)setValue:(nullable id)value forKeyPath:(NSString *)keyPath; forKeyå’ŒforKeyPath forKeyPath åŒ…å«äº†æ‰€æœ‰ forKey çš„åŠŸèƒ½ forKeyPath è¿›è¡Œå†…éƒ¨çš„ç‚¹è¯­æ³•,å±‚å±‚è®¿é—®å†…éƒ¨çš„å±æ€§ æ³¨æ„: keyå€¼ä¸€å®šè¦åœ¨å±æ€§ä¸­æ‰¾åˆ° ä¿®æ”¹ç§æœ‰æˆå‘˜å˜é‡12SLPerson *person = [[SLperson alloc] init];[person setValue:@&quot;18&quot; forKeyPath:@&quot;_age&quot;]; age æ˜¯SLPersonçš„ç§æœ‰æˆå‘˜ï¼Œå¯ä»¥é€šè¿‡kvcä¿®æ”¹å®ƒçš„å€¼ å–å€¼1- (nullable id)valueForKeyPath:(NSString *)keyPath; KVO Key Value Observing (é”®å€¼ç›‘å¬)ï¼Œå½“æŸä¸ªå¯¹è±¡çš„å±æ€§å€¼å‘ç”Ÿæ”¹å˜çš„æ—¶å€™(ç”¨KVOç›‘å¬) æ·»åŠ ç›‘å¬1- (void)addObserver:(NSObject *)observer forKeyPath:(NSString *)keyPath options:(NSKeyValueObservingOptions)options context:(nullable void *)context; ç§»é™¤ç›‘å¬1- (void)removeObserver:(NSObject *)observer forKeyPath:(NSString *)keyPath; ç›‘å¬äº‹ä»¶123456789/*** å½“ç›‘å¬çš„å±æ€§å€¼å‘ç”Ÿæ”¹å˜** @param keyPath è¦æ”¹å˜çš„å±æ€§* @param object è¦æ”¹å˜çš„å±æ€§æ‰€å±çš„å¯¹è±¡* @param change æ”¹å˜çš„å†…å®¹* @param context ä¸Šä¸‹æ–‡*/- (void)observeValueForKeyPath:(nullable NSString *)keyPath ofObject:(nullable id)object change:(nullable NSDictionary&lt;NSString*, id&gt; *)change context:(nullable void *)context; å¹¿å‘Šè½®æ’­å™¨çš„å®ç°","link":"/2016/09/01/my-ios-day4/"},{"title":"my-ios-day5","text":"è¿™ä¸ªæ˜¯16å¹´é‡æ–°å¤ä¹ çš„iOSç¬”è®°ï¼Œå½“æ—¶æ˜¯æ”¾åœ¨äº†gitbookï¼Œç°åœ¨è½¬ç§»è¿‡æ¥ï¼ å›é¡¾ å°è£…å¹¿å‘Šè½®æ’­ day 05è‡ªåŠ¨å¸ƒå±€Autoresizing storyboard ä»£ç 12345678UIViewAutoresizingFlexibleLeftMargin // è·ç¦»çˆ¶æ§ä»¶çš„å·¦è¾¹æ˜¯å¯ä»¥ä¼¸ç¼©çš„UIViewAutoresizingFlexibleBottomMargin // è·ç¦»çˆ¶æ§ä»¶çš„åº•éƒ¨æ˜¯å¯ä»¥ä¼¸ç¼©çš„UIViewAutoresizingFlexibleRightMargin // è·ç¦»çˆ¶æ§ä»¶çš„å³è¾¹æ˜¯å¯ä»¥ä¼¸ç¼©çš„UIViewAutoresizingFlexibleTopMargin // è·ç¦»çˆ¶æ§ä»¶çš„é¡¶éƒ¨æ˜¯å¯ä»¥ä¼¸ç¼©çš„UIViewAutoresizingFlexibleHeight // é«˜åº¦ä¼šè·Ÿéšçˆ¶æ§ä»¶çš„é«˜åº¦è¿›è¡Œä¼¸ç¼©UIViewAutoresizingFlexibleWidth // å®½åº¦ä¼šè·Ÿéšçˆ¶æ§ä»¶çš„å®½åº¦è¿›è¡Œä¼¸ç¼©// è®¾ç½®autoresizingMaskå±æ€§redView.autoresizingMask = UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleTopMargin; Autoresizingä»…èƒ½è§£å†³çˆ¶å­æ§ä»¶ä¹‹é—´çš„ç›¸å¯¹å…³ç³»ï¼Œæ¯”è¾ƒæœ‰å±€é™æ€§ Autolayout ç®€ä»‹ çº¦æŸï¼šé€šè¿‡ç»™æ§ä»¶æ·»åŠ çº¦æŸï¼Œæ¥å†³å®šæ§ä»¶çš„ä½ç½®å’Œå°ºå¯¸ å‚ç…§ï¼šåœ¨æ·»åŠ çº¦æŸçš„æ—¶å€™éœ€è¦é€‰æ‹©å‚ç…§ç‰©ï¼Œçˆ¶æ§ä»¶æˆ–å…„å¼Ÿæ§ä»¶ storyboard ä»£ç  ä½¿ç”¨NSLayoutConstraintç±»åˆ›å»ºå…·ä½“çš„çº¦æŸå¯¹è±¡ æ·»åŠ çº¦æŸåˆ°ç›¸åº”çš„Viewä¸Š12- (void)addConstraint:(NSLayoutConstraint *)constraint; // æ·»åŠ ä¸€ä¸ª- (void)addConstraints:(NSArray*)constraints; // æ·»åŠ å¤šä¸ª æ³¨æ„ç‚¹ éœ€è¦å…ˆç¦æ­¢autoresizingåŠŸèƒ½ï¼Œview.translatesAutoresizingMaskIntoConstraint = NO; æ·»åŠ çº¦æŸçš„æ—¶å€™ä¸€å®šè¦ç¡®å®šæ§ä»¶å·²ç»æ·»åŠ åˆ°äº†çˆ¶æ§ä»¶ä¸Š ä¸éœ€è¦å†è®¾ç½®frameå€¼ æ ¸å¿ƒè®¡ç®—å…¬å¼ obj1.property1 = (obj2.proterty2 * multiplier) + constant value æ·»åŠ çº¦æŸè§„åˆ™ ä¸¤ä¸ªåŒå±‚view(äº²å…„å¼Ÿå‹)ä¹‹é—´çš„çº¦æŸå…³ç³»ï¼Œæ·»åŠ åˆ°ä»–ä»¬çš„çˆ¶viewä¸Š å¯¹äºä¸¤ä¸ªä¸åŒå±‚view(å ‚å…„å¼Ÿå‹)ä¹‹é—´çš„çº¦æŸå…³ç³»ï¼Œæ·»åŠ åˆ°ä»–ä»¬æœ€è¿‘çš„å…±åŒçˆ¶viewä¸Š å¯¹äºæœ‰å±‚æ¬¡å…³ç³»çš„view(çˆ¶å­å‹)ä¹‹é—´çš„çº¦æŸå…³ç³»ï¼Œæ·»åŠ åˆ°å±‚æ¬¡è¾ƒé«˜çš„viewä¸Š VFLè¯­è¨€ Visual Format Languageï¼Œå¯è§†åŒ–æ ¼å¼è¯­è¨€ï¼Œè‹¹æœå‘³ç›‘æŠ¤Autolayoutä»£ç è€Œæ¨å‡ºçš„æŠ½è±¡è¯­è¨€ ç®€å•ç¤ºä¾‹12H:[cancelBtn(70)-12-[acceptBtn(50)]] cancelBtnå®½70ï¼ŒacceptBtnå®½50ï¼Œä¹‹é—´é—´è·12V:[redView][yellowView(==redView)] ç«–ç›´æ–¹å‘ä¸Šï¼Œå…ˆæœ‰ä¸€ä¸ªredViewï¼Œä¸‹é¢æœ‰ä¸€ä¸ªå’ŒredViewç­‰é«˜çš„yellowView ä½¿ç”¨VFLåˆ›å»ºçº¦æŸæ•°ç»„ (NSArray *)constraintsWithVisualFormat:(NSString *)format options:(NSLayoutFormatOptions)opts metrics:(NSDictionary *)metrics views:(NSDictionary *)views;formatï¼šVFLè¯­å¥ï¼Œoptsï¼šçº¦æŸç±»å‹ï¼Œmetricsï¼šVFLè¯­å¥ä¸­ç”¨åˆ°çš„å…·ä½“æ•°å€¼ï¼Œviewsï¼šVFLè¯­å¥ä¸­ç”¨åˆ°çš„æ§ä»¶ å°ç¤ºä¾‹123NSString *vvfl = @&quot;V:[blueView(50)]-space-|&quot;;NSArray *vlcs = [NSLayoutConstraint constraintsWithVisualFormat:vvfl options:kNilOptions metrics:metrics views:views];[self.view addConstraints:vlcs]; Masonryæ¡†æ¶ è‡ªåŠ¨å¸ƒå±€å°ä¾‹å­","link":"/2016/09/01/my-ios-day5/"},{"title":"my-ios-day6","text":"è¿™ä¸ªæ˜¯16å¹´é‡æ–°å¤ä¹ çš„iOSç¬”è®°ï¼Œå½“æ—¶æ˜¯æ”¾åœ¨äº†gitbookï¼Œç°åœ¨è½¬ç§»è¿‡æ¥ï¼ day 06UITableViewæ•°æ®æº æ•°æ®æºç®€ä»‹ tableViewéœ€è¦ä¸€ä¸ªæ•°æ®æºæ¥æ˜¾ç¤ºæ•°æ® tableViewä¼šå‘æ•°æ®æºæŸ¥è¯¢æœ‰å¤šå°‘è¡Œæ•°æ®ï¼Œæ¯è¡Œæ•°æ®æ˜¯ä»€ä¹ˆ å‡¡æ˜¯éµå®ˆUITableViewDataSourceåè®®çš„OCå¯¹è±¡ï¼Œéƒ½å¯ä»¥æˆä¸ºæ•°æ®æº æ•°æ®æºåè®®123456// ä¸€å…±æœ‰å¤šå°‘ç»„æ•°æ®- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView;// æ¯ä¸€ç»„æœ‰å¤šå°‘è¡Œæ•°æ®- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section;// æ¯ä¸€è¡Œæ˜¾ç¤ºä»€ä¹ˆå†…å®¹- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath; ####å¸¸è§è®¾ç½®12345678910111213141516171819// è®¾ç½®tableViewæ¯ä¸€è¡Œcellçš„é«˜åº¦ï¼Œé»˜è®¤æ˜¯44self.tableView.rowHeight = 80;// è®¾ç½®tableViewæ¯â¼€ä¸€ç»„å¤´éƒ¨çš„â¾¼é«˜åº¦ï¿¼self.tableView.sectionHeaderHeight = 50;ï¿¼// è®¾ç½®tableViewæ¯â¼€ä¸€ç»„å°¾éƒ¨çš„â¾¼é«˜åº¦ï¿¼self.tableView.sectionFooterHeight = 50;ï¿¼// è®¾ç½®åˆ†å‰²çº¿çš„é¢œè‰²ï¼Œå¦‚æœè®¾ç½®[UIColor clearColor]éšè—åˆ†å‰²çº¿ï¿¼self.tableView.separatorColor = [UIColor redColor];ï¿¼// è®¾ç½®åˆ†å‰²çº¿çš„æ ·å¼ï¿¼self.tableView.separatorStyle = UITableViewCellSeparatorStyleNone;ï¿¼// è®¾ç½®è¡¨å¤´ï¿¼self.tableView.tableHeaderView = [[UISwitch alloc] init] ;ï¿¼// è®¾ç½®è¡¨å°¾ï¿¼self.tableView.tableFooterView = [UIButtonï¿¼buttonWithType:UIButtonTypeContactAdd];ï¿¼// è®¾ç½®ç´¢å¼•æ¡ä¸Šâ½‚æ–‡å­—é¢œâ¾Šè‰²ï¿¼self.tableView.sectionIndexColor = [UIColor redColor];ï¿¼// è®¾ç½®ç´¢å¼•æ¡çš„èƒŒæ™¯é¢œâ¾Šè‰²ï¿¼self.tableView.sectionIndexBackgroundColor = [UIColor blackColor];####ä»£ç†12345678910111213141516171819202122232425262728/*** å½“é€‰ä¸­æŸä¸€è¡Œcellå°±ä¼šè°ƒç”¨*/ï¿¼- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:ï¿¼(NSIndexPath *)indexPath{}ï¿¼/**ï¿¼* å½“å–æ¶ˆé€‰ä¸­æŸâ¼€ä¸€â¾è¡Œcellå°±ä¼šè°ƒâ½¤ç”¨ï¿¼*/ï¿¼- (void)tableView:(UITableView *)tableView didDeselectRowAtIndexPath:ï¿¼(NSIndexPath *)indexPath{}/*** è¿”å›æ¯ä¸€ç»„æ˜¾ç¤ºçš„å¤´éƒ¨æ§ä»¶*/- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section{}/*** è¿”å›æ¯ä¸€ç»„æ˜¾ç¤ºçš„å°¾éƒ¨æ§ä»¶*/- (UIView *)tableView:(UITableView *)tableView viewForFooterInSection:(NSInteger)section{}/*** è¿”å›æ¯ä¸€ç»„å¤´éƒ¨çš„é«˜åº¦*/ï¿¼- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section{}/*** è¿”å›æ¯ä¸€ç»„å°¾éƒ¨çš„é«˜åº¦*/ï¿¼- (CGFloat)tableView:(UITableView *)tableView heightForFooterInSection:(NSInteger)section{}/*** è¿”å›tableViewçš„æ¯ä¸€è¡Œé«˜åº¦*/ï¿¼- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:ï¿¼(NSIndexPath *)indexPathUITableViewCell ç®€ä»‹ tableViewçš„æ¯ä¸€è¡Œéƒ½æ˜¯ä¸€ä¸ªUITableViewCellï¼Œé€šè¿‡dataSourceçš„tableView: cellForRowAtIndexPath:æ–¹æ³•åˆå§‹åŒ–æ¯ä¸€è¡Œ UITableViewCellå†…éƒ¨æœ‰ä¸€ä¸ªé»˜è®¤çš„å­è§†å›¾contentViewï¼ŒcontentViewæ˜¯cellå†…éƒ¨æ‰€æœ‰æ§ä»¶çš„çˆ¶æ§ä»¶ å¸¸è§è®¾ç½®1234567891011121314151617// è®¾ç½®cellå³è¾¹çš„æŒ‡â½°ç¤ºæ§ä»¶ï¿¼cell.accessoryView = [[UISwitch alloc] init];ï¿¼// è®¾ç½®cellå³è¾¹çš„æŒ‡â½°ç¤ºæ ·å¼(accessoryViewä¼˜å…ˆçº§ &gt; accessoryType)ï¿¼cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;ï¿¼// è®¾ç½®cellçš„èƒŒæ™¯viewï¿¼// backgroundViewä¼˜å…ˆçº§ &gt; backgroundColorï¿¼UIView *bg = [[UIView alloc] init];ï¿¼bg.backgroundColor = [UIColor blueColor];ï¿¼cell.backgroundView = bg;ï¿¼// è®¾ç½®cellçš„èƒŒæ™¯é¢œâ¾Šè‰²ï¿¼cell.backgroundColor = [UIColor redColor];ï¿¼// è®¾ç½®cellé€‰ä¸­çš„èƒŒæ™¯viewï¿¼UIView *selectbg = [[UIView alloc] init];ï¿¼selectbg.backgroundColor = [UIColor purpleColor];ï¿¼cell.selectedBackgroundView = selectbg;ï¿¼// è®¾ç½®cellé€‰ä¸­çš„æ ·å¼cell.selectionStyle = UITableViewCellSelectionStyleNone; cellé‡ç”¨ ç¬¬ä¸€ç§123456789101112- (void)viewDidLoad {[super viewDidLoad];ï¿¼// æ ¹æ®ID è¿™ä¸ªæ ‡è¯† æ³¨å†Œå¯¹åº”çš„ cellç±»å‹ï¿¼[self.tableView registerClass:[UITableViewCell class] ï¿¼forCellReuseIdentifier:ID];}- (UITableViewCell *)tableViewew:(UITableView *)tableViewï¿¼cellForRowAtIndexPath:(NSIndexPath *)indexPath {// 1.é¦–å…ˆå»ç¼“å­˜æ± ä¸­æŸ¥æ‰¾å¯å¾ªç¯åˆ©ç”¨çš„cellUITableViewCell *cell = [tableview dequeueReusableCellWithIdentifier:ID];// 2.è®¾ç½®æ•°æ®cell.textLabel.text = [NSString stringWithFormat:@&quot;ç¬¬%ldè¡Œæ•°æ®&quot;, indexPath.row];return cell;} ç¬¬äºŒç§1234567891011- (UITableViewCell *)tableViewew:(UITableView *)tableViewï¿¼cellForRowAtIndexPath:(NSIndexPath *)indexPath {// 1.é¦–å…ˆå»ç¼“å­˜æ± ä¸­æ‰¾å¯ä»¥å¾ªç¯åˆ©ç”¨çš„cellUITableViewCell *cell = [tableview dequeueReusableCellWithIdentifier:ID];// 2.å¦‚æœç¼“å­˜æ± ä¸­çš„cellä¸ºç©ºï¼Œå°±åˆ›å»ºä¸€ä¸ªcellif (cell == nil) {cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:ID];}// 3.è®¾ç½®æ•°æ®cell.textLabel.text = [NSString stringWithFormat:@&quot;ç¬¬%ldè¡Œæ•°æ®&quot;, indexPath.row];return cell;} è‡ªå®šä¹‰cell è‡ªå®šä¹‰ç­‰é«˜cell ä»£ç æ–¹å¼ æ–°å»ºä¸€ä¸ªç»§æ‰¿è‡ªUITableViewCellçš„å­ç±»ï¼Œå¦‚SLOwnCell12@interface SLOwnCell : UITableViewCell@end åœ¨SLOwnCell.mæ–‡ä»¶ä¸­é‡å†™-initWithStyle:reuseIdentifier:æ–¹æ³•ï¼Œæ·»åŠ å­æ§ä»¶ï¼Œç»™æ§ä»¶åšä¸€äº›ä¸€æ¬¡æ€§çš„åˆå§‹åŒ–ï¼ˆå¦‚ä½¿ç”¨è‡ªåŠ¨å¸ƒå±€å¯åœ¨æ­¤æ–¹æ³•ä¸­ä¸ºæ§ä»¶æ·»åŠ å®Œæ•´çº¦æŸï¼‰12345678// æ·»åŠ æ‰€æœ‰å­æ§ä»¶- (instancetype)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier{if (self = [super initWithStyle:style reuseIdentifier:reuseIdentifier]) {// code...}return self;} é‡å†™-layoutSubviewsæ–¹æ³•ï¼Œä¸€å®šè¦è°ƒç”¨[super layoutSubviews]ï¼Œåœ¨è¿™ä¸ªæ–¹æ³•ä¸­è®¡ç®—å’Œè®¾ç½®æ‰€æœ‰å­æ§ä»¶çš„frame123456// å¸ƒå±€å†…éƒ¨å­æ§ä»¶- (void)layoutSubviews{[super layoutSubviews];// code...} åœ¨SLOwnCell.hä¸­æä¾›ä¸€ä¸ªæ¨¡å‹å±æ€§ï¼Œå¦‚SLOwnæ¨¡å‹1234@class SLOwn;@interface SLOwnCell : UITableViewCell@property (nonatomic, strong) SLOwn *own;@end åœ¨SLOwnCell.mä¸­é‡å†™æ¨¡å‹å±æ€§çš„setæ–¹æ³•ï¼ŒåŒæ—¶ä¸ºcellä¸­çš„å­æ§ä»¶æ·»åŠ æ•°æ®12345- (void)setOwn:(SLOwn *)own{_own = own; // å…ˆè¦è¿›è¡Œsetæ–¹æ³•çš„èµ‹å€¼// ä¸ºå­æ§ä»¶æ·»åŠ æ•°æ®...} åœ¨viewControllerä¸­æ³¨å†Œcellï¼Œå¹¶ç»™cellä¼ é€’æ¨¡å‹123456789// æ³¨å†Œcell[self.tableView registerClass:[SLOwnCell class] forCellReuseIdentifier:ID];// ä¼ é€’æ¨¡å‹- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{SLOwnCell *cell = [tableView dequeueReusableCellWithIdentifier:ID];cell.own = self.owns[indexPath.row];return cell;} xibæ–¹å¼ æ–°å»ºä¸€ä¸ªç»§æ‰¿è‡ªUITableViewCellçš„å­ç±»ï¼Œå¦‚SLOwnCell12@interface SLOwnCell : UITableViewCell@end æ–°å»ºä¸€ä¸ªxibæ–‡ä»¶ï¼Œæ–‡ä»¶åæœ€å¥½å’Œç±»åç›¸åŒï¼Œå¦‚SLOwnCell.xib ä¿®æ”¹cellçš„classä¸ºSLOwnCell ä¸ºcellç»‘å®šå¾ªç¯åˆ©ç”¨æ ‡è¯† æ·»åŠ å­æ§ä»¶ï¼Œè®¾ç½®å®Œæ•´çº¦æŸ å°†å­æ§ä»¶æ‹–çº¿åˆ°ç±»æ‰©å±•ä¸­12345@interface SLOwnCell ()@property (weak, nonatomic) IBOutlet UIImageView *iconView;@property (weak, nonatomic) IBOutlet UILabel *titleLabel;@property (weak, nonatomic) IBOutlet UILabel *priceLabel;@end æ·»åŠ æ¨¡å‹å’Œé‡å†™setæ–¹æ³•ï¼ˆä¸ä»£ç æ–¹å¼ç›¸åŒï¼‰ åœ¨viewControllerä¸­ï¼Œéœ€è¦æ³¨å†Œxibæ–‡ä»¶12// æ³¨å†Œxibæ–‡ä»¶[self.tableView registerNib:[UINib nibWithNibName:NSStringFromClass([XMGTgCell class]) bundle:nil] forCellReuseIdentifier:ID]; storyboardæ–¹å¼ åŸºæœ¬æ–¹æ³•ä¸xibç›¸åŒï¼Œåªæ˜¯ä¸éœ€è¦æ³¨å†Œ åœ¨æ·»åŠ æ§ä»¶çš„æ—¶å€™ï¼Œè¦åŠ å…¥åˆ°cellçš„contentViewä¸­ è‡ªå®šä¹‰ä¸ç­‰é«˜cell ä¸»è¦é€šè¿‡ä»£ç çš„æ–¹å¼å®ç° åŸºæœ¬æ€è·¯ç­‰é«˜cellç›¸åŒï¼Œä¸»è¦ä»‹ç»ä¸€äº›åŒºåˆ«æ”¯å‡º éœ€è¦æ·»åŠ ä¸€ä¸ªframeæ¨¡å‹ï¼Œå¦‚SLOwnFrameï¼Œ12345678910111213@class SLOwn;@interface SLOwnFrame : NSObject// å¤´åƒçš„frame@property (nonatomic, assign, readonly) CGRect iconFrame;// æ ‡é¢˜çš„frame@property (nonatomic, assign, readonly) CGRect titleFrame;// ä»·æ ¼çš„frame@property (nonatomic, assign, readonly) CGRect priceFrame;// cellçš„é«˜åº¦@property (nonatomic, assign, readonly) CGFloat cellHeight;// æ•°æ®æ¨¡å‹@property (nonatomic, strong) SLOwn *own;@end åœ¨frameæ¨¡å‹çš„setOwn:æ–¹æ³•ä¸­ï¼Œæ ¹æ®ownæ¨¡å‹ä¸­çš„æ•°æ®è®¡ç®—å„ä¸ªæ§ä»¶çš„frame åœ¨è‡ªå®šä¹‰çš„SLOwnCellæ–‡ä»¶ä¸­åŒ…å«SLOwnFrameæ¨¡å‹1234@class SLOwnFrame;@interface SLOwnCell : UITableViewCell@property (nonatomic, strong) SLOwnFrame *ownFrame;@end åœ¨é‡å†™setOwnFrame:æ–¹æ³•çš„æ—¶å€™éœ€è¦è¿›è¡Œæ•°æ®å’Œframeçš„è®¾ç½®12345678910111213- (void)setOwnFrame:(SLOwnFrame *)ownFrame{_ownFrame = ownFrame;[self setData];[self setFrame];}- (void)setData{// è®¾ç½®å­æ§ä»¶çš„æ•°æ®}- (void)setFrame {// è®¾ç½®å­æ§ä»¶çš„frame} åœ¨viewControllerä¸­å­—å…¸è½¬æ¨¡å‹åï¼Œå°†ownèµ‹å€¼ç»™ownFrameï¼Œæ•°ç»„ä¸­å­˜å‚¨çš„æ˜¯SLOwnFrameæ¨¡å‹ é€šè¿‡æ•°æ®æºçš„tableView: heightForRowAtIndexPath:æ–¹æ³•å¾—åˆ°æ¯ä¸€è¡Œcellçš„é«˜åº¦12345- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{SLOwnFrame *oframe = self.ownFrames[indexPath.row];return oframe.cellHeight;}","link":"/2016/09/01/my-ios-day6/"},{"title":"my-ios-day7","text":"è¿™ä¸ªæ˜¯16å¹´é‡æ–°å¤ä¹ çš„iOSç¬”è®°ï¼Œå½“æ—¶æ˜¯æ”¾åœ¨äº†gitbookï¼Œç°åœ¨è½¬ç§»è¿‡æ¥ï¼ day 07UITableViewç®€å•çš„MVC MVCæ˜¯ä¸€ç§ç¨‹åºè®¾è®¡æ€æƒ³ï¼Œåœ¨iOSå¼€å‘ä¸­ååˆ†é‡è¦ MVCä¸­çš„ä¸‰ä¸ªè§’è‰² Mï¼šModelï¼Œæ¨¡å‹ Vï¼šViewï¼Œè§†å›¾ Cï¼šControlï¼Œæ§åˆ¶ä¸­å¿ƒ MVCçš„ç‰¹å¾å’Œä½“ç° Viewä¸Šé¢æ˜¾ç¤ºçš„ä»€ä¹ˆï¼Œå–å†³äºModel åªè¦Modelä¸­çš„æ•°æ®ä¿®æ”¹ï¼ŒViewçš„æ˜¾ç¤ºçŠ¶æ€ä¼šè·Ÿç€æ”¹å˜ Controlè´Ÿè´£åˆå§‹åŒ–Modelï¼Œå¹¶å°†Modelä¼ é€’ç»™Viewå»è§£æå±•ç¤º æ•°æ®åˆ·æ–° å…¨å±€åˆ·æ–°12// æ‰€æœ‰å±å¹•ä¸Šçš„celléƒ½ä¼šåˆ·æ–°[self.tableView reloadData]; å±€éƒ¨åˆ·æ–°123456// æ’å…¥ï¼Œ- (void)insertRowsAtIndexPaths:(NSArray&lt;NSIndexPath *&gt; *)indexPaths withRowAnimation:(UITableViewRowAnimation)animation;// åˆ é™¤- (void)deleteRowsAtIndexPaths:(NSArray&lt;NSIndexPath *&gt; *)indexPaths withRowAnimation:(UITableViewRowAnimation)animation;// åˆ·æ–°éƒ¨åˆ†cell- (void)reloadRowsAtIndexPaths:(NSArray&lt;NSIndexPath *&gt; *)indexPaths å·¦æ»‘åˆ é™¤123456789101112/*** åªè¦å®ç°è¿™ä¸ªæ–¹æ³•ï¼Œå°±æ‹¥æœ‰å·¦æ»‘åˆ é™¤çš„åŠŸèƒ½* ç‚¹å‡»å·¦æ»‘å‡ºç°çš„Deleteï¼Œå°±ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•*/- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath;/*** ä¿®æ”¹é»˜è®¤DeleteæŒ‰é’®çš„æ–‡å­—*/- (NSString *)tableView:(UITableView *)tableView titleForDeleteConfirmationButtonForRowAtIndexPath:(NSIndexPath *)indexPath{return @&quot;åˆ é™¤&quot;;} å·¦æ»‘å‡ºç°å¤šä¸ªæŒ‰é’®å®ç°tableViewçš„ä»£ç†æ–¹æ³•12345678910111213141516171819202122232425/*** åªè¦å®ç°äº†è¿™ä¸ªæ–¹æ³•ï¼Œå·¦æ»‘å‡ºç°æŒ‰é’®çš„åŠŸèƒ½å°±æœ‰äº†* å‡ºç°æŒ‰é’®åï¼ŒtableViewå°±ä¼šè¿›å…¥ç¼–è¾‘æ¨¡å¼*/- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath{}/*** å·¦æ»‘å‡ºç°ä»€ä¹ˆæŒ‰é’®*/- (NSArray *)tableView:(UITableView *)tableView editActionsForRowAtIndexPath:(NSIndexPath *)indexPath{UITableViewRowAction *action0 = [UITableViewRowAction rowActionWithStyle:UITableViewRowActionStyleNormal title:@&quot;ç½®é¡¶&quot; handler:^(UITableViewRowAction *action, NSIndexPath *indexPath) {NSLog(@&quot;ç‚¹å‡»äº†ç½®é¡¶&quot;);// ç½®é¡¶ä»£ç ...// æ”¶å›å·¦æ»‘å‡ºç°çš„æŒ‰é’®(é€€å‡ºç¼–è¾‘æ¨¡å¼)tableView.editing = NO;}];UITableViewRowAction *action1 = [UITableViewRowAction rowActionWithStyle:UITableViewRowActionStyleDefault title:@&quot;åˆ é™¤&quot; handler:^(UITableViewRowAction *action, NSIndexPath *indexPath) {[self.wineArray removeObjectAtIndex:indexPath.row];[tableView deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationAutomatic];}];return @[action1, action0];} ç¼–è¾‘æ¨¡å¼ è¿›å…¥ç¼–è¾‘æ¨¡å¼1[self.tableView setEditing:YES animated:YES]; ç¼–è¾‘æ¨¡å¼å¤šé€‰123456// å…è®¸å¤šé€‰self.tableVew.allowMultipleSelectDuringEditing = YES;// è¿›å…¥ç¼–è¾‘æ¨¡å¼[self.tableView setEditing:YES animated:YES];// è·å¾—é€‰ä¸­çš„æ‰€æœ‰è¡Œself.tableView.indexPathsForSelectedRows;","link":"/2016/09/01/my-ios-day7/"},{"title":"my-ios-day8","text":"è¿™ä¸ªæ˜¯16å¹´é‡æ–°å¤ä¹ çš„iOSç¬”è®°ï¼Œå½“æ—¶æ˜¯æ”¾åœ¨äº†gitbookï¼Œç°åœ¨è½¬ç§»è¿‡æ¥ï¼ #day 08 ç®€å•è´­ç‰©è½¦ å…³æ³¨ç‚¹ storyboardè‡ªå®šä¹‰ç­‰é«˜cell ç®€å•MVC ä»£ç†è®¾è®¡æ¨¡å¼ åœ†è§’æŒ‰é’® åŸºæœ¬æ­¥éª¤ storyboardç•Œé¢ æ·»åŠ æ•°æ®æº12345678910111213141516171819202122#pragma mark - æ‡’åŠ è½½ï¼Œæ¨¡å‹è§£æ- (NSArray *)wines {if (_wines == nil) {_wines = [SLWine mj_objectArrayWithFilename:@&quot;wine.plist&quot;];}return _wines;}#pragma mark - UITableViewæ•°æ®æºæ–¹æ³•- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{return self.wines.count;}- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{SLWineTableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@&quot;wine&quot;];if (!cell) {cell = [[SLWineTableViewCell alloc] init];}cell.wine = self.wines[indexPath.row];cell.delegate = self;return cell;} è‡ªå®šä¹‰cell æ–°å»ºSLWineTableViewCellç±»ï¼Œè®¾ç½®storyboardçš„cellä¸ºä½†é’±ç±»ï¼Œæ‹–çº¿æ‹¿åˆ°ç›¸åº”æ§ä»¶å±æ€§å’Œäº‹ä»¶1234567891011121314151617181920212223242526272829303132333435363738394041424344@interface SLWineTableViewCell ()/** å›¾ç‰‡æ ‡ç­¾ */@property (nonatomic, weak) IBOutlet UIImageView *iconView;/** åå­—æ ‡ç­¾ */@property (nonatomic, weak) IBOutlet UILabel *nameLabel;/** ä»·é’±æ ‡ç­¾ */@property (nonatomic, weak) IBOutlet UILabel *priceLabel;/** åŠ ä¸€ä¸ªæŒ‰é’® */@property (nonatomic, weak) IBOutlet SLCircleButton *ad dButton;/** å‡ä¸€ä¸ªæŒ‰é’® */@property (nonatomic, weak) IBOutlet SLCircleButton *removeButton;/** æ•°é‡æ ‡ç­¾ */@property (nonatomic, weak) IBOutlet UILabel *numLabel;@end@implementation SLWineTableViewCell- (IBAction)addButton:(UIButton *)button {self.wine.count += 1;self.removeButton.enabled = YES;self.numLabel.text = [NSString stringWithFormat:@&quot;%d&quot;, self.wine.count];if ([self.delegate respondsToSelector:@selector(wineTableViewCell: addbuttonClick:)]) {[self.delegate wineTableViewCell:self addbuttonClick:button];}}- (IBAction)removeButton:(UIButton *)button {self.wine.count -= 1;self.numLabel.text = [NSString stringWithFormat:@&quot;%d&quot;, self.wine.count];if (self.wine.count == 0) {button.enabled = NO;}if ([self.delegate respondsToSelector:@selector(wineTableViewCell: removebuttonClick:)]) {[self.delegate wineTableViewCell:self removebuttonClick:button];}}- (void)setWine:(SLWine *)wine {_wine = wine;self.iconView.image = [UIImage imageNamed:wine.image];self.nameLabel.text = wine.name;self.priceLabel.text = [NSString stringWithFormat:@&quot;Â¥%@&quot;, wine.money];self.numLabel.text = [NSString stringWithFormat:@&quot;%d&quot;, self.wine.count];if (self.wine.count == 0) {self.removeButton.enabled = NO;}}@end cellçš„ä»£ç† 12345678910111213#import &lt;UIKit/UIKit.h&gt;@class SLWine, SLWineTableViewCell;@protocol SLWineTableViewCelldelegate &lt;NSObject&gt;@optional- (void)wineTableViewCell:(SLWineTableViewCell *)cell addbuttonClick:(UIButton *)button;- (void)wineTableViewCell:(SLWineTableViewCell *)cell removebuttonClick:(UIButton *)button;@end@interface SLWineTableViewCell : UITableViewCell/** é…’æ¨¡å‹ */@property (nonatomic, strong) SLWine *wine;/** Cellçš„ä»£ç† */@property (nonatomic, weak) id&lt;SLWineTableViewCelldelegate&gt; delegate;@end åœ†è§’æŒ‰é’® è‡ªå®šä¹‰æŒ‰é’®SLCircleButton å¤´æ–‡ä»¶SLCircleButton.h123#import &lt;UIKit/UIKit.h&gt;@interface SLCircleButton : UIButton@end å®ç°SLCircleButton.m123456789101112#import &quot;SLCircleButton.h&quot;@implementation SLCircleButton- (void)awakeFromNib{// è®¾ç½®è¾¹æ¡†å®½åº¦self.layer.borderWidth = 1.0;// è®¾ç½®è¾¹æ¡†é¢œè‰²self.layer.borderColor = [UIColor redColor].CGColor;// è®¾ç½®åœ†è§’åŠå¾„self.layer.cornerRadius = self.frame.size.width * 0.5;}@end iOSé€šçŸ¥æœºåˆ¶ è¦ç‚¹ é€šçŸ¥çš„å‘å¸ƒ é€šçŸ¥çš„ç›‘å¬ é€šçŸ¥çš„ç§»é™¤ é€šçŸ¥ä¸­å¿ƒ æ¯ä¸€ä¸ªåº”ç”¨ç¨‹åºéƒ½æœ‰ä¸€ä¸ªé€šçŸ¥ä¸­å¿ƒNSNotificationCenterå®ä¾‹ï¼Œä¸“é—¨è´Ÿè´£ååŠ©ä¸åŒå¯¹è±¡ä¹‹é—´çš„æ¶ˆæ¯é€šä¿¡ ä»»ä½•ä¸€ä¸ªå¯¹è±¡éƒ½å¯ä»¥å‘é€šçŸ¥ä¸­å¿ƒå‘å¸ƒé€šçŸ¥NSNotificationï¼Œæè¿°è‡ªå·±åœ¨åšä»€ä¹ˆ å…¶ä»–æ„Ÿå…´è¶£çš„å¯¹è±¡Observerå¯ä»¥ç”³è¯·åœ¨æŸä¸ªç‰¹å®šé€šçŸ¥å‘å¸ƒæ—¶(æˆ–åœ¨æŸä¸ªç‰¹å®šçš„å¯¹è±¡å‘å¸ƒé€šçŸ¥æ—¶)æ”¶åˆ°è¿™ä¸ªé€šçŸ¥ é€šçŸ¥ç®€ä»‹ ä¸‰ä¸ªå±æ€§123- (NSString *)name; // é€šçŸ¥çš„åç§°- (id)object; // é€šçŸ¥å‘å¸ƒè€…(æ˜¯è°è¦å‘å¸ƒé€šçŸ¥)- (NSDictionary *)userInfo; // ä¸€äº›é¢å¤–çš„ä¿¡æ¯(é€šçŸ¥å‘å¸ƒè€…ä¼ é€’ç»™é€šçŸ¥æ¥æ”¶è€…çš„ä¿¡æ¯å†…å®¹) åˆå§‹åŒ–123+ (instancetype)notificationWithName:(NSString *)aName object:(id)anObject;+ (instancetype)notificationWithName:(NSString *)aName object:(id)anObject userInfo:(NSDictionary *)aUserInfo;- (instancetype)initWithName:(NSString *)name object:(id)object userInfo:(NSDictionary *)userInfo; é€šçŸ¥å‘å¸ƒ é€šçŸ¥ä¸­å¿ƒNSNotificationCenteræä¾›äº†ç›¸åº”çš„æ–¹æ³•æ¥å¸®åŠ©å‘å¸ƒé€šçŸ¥123456// å‘å¸ƒä¸€ä¸ªnotificationé€šçŸ¥ï¼Œå¯åœ¨notificationå¯¹è±¡ä¸­è®¾ç½®é€šçŸ¥çš„åç§°ã€é€šçŸ¥å‘å¸ƒè€…ã€é¢å¤–ä¿¡æ¯ç­‰- (void)postNotification:(NSNotification *)notification;// å‘å¸ƒä¸€ä¸ªåç§°ä¸ºaNameçš„é€šçŸ¥ï¼ŒanObjectä¸ºè¿™ä¸ªé€šçŸ¥çš„å‘å¸ƒè€…- (void)postNotificationName:(NSString *)aName object:(id)anObject;// å‘å¸ƒä¸€ä¸ªåç§°ä¸ºaNameçš„é€šçŸ¥ï¼ŒanObjectä¸ºè¿™ä¸ªé€šçŸ¥çš„å‘å¸ƒè€…ï¼ŒaUserInfoä¸ºé¢å¤–ä¿¡æ¯- (void)postNotificationName:(NSString *)aName object:(id)anObject userInfo:(NSDictionary *)aUserInfo; é€šçŸ¥ç›‘å¬ æ³¨å†Œç›‘å¬å™¨ï¼Œé€šçŸ¥ä¸­å¿ƒNSNotificationCenteræä¾›äº†æ–¹æ³•æ¥æ³¨å†Œä¸€ä¸ªç›‘å¬é€šçŸ¥çš„ç›‘å¬å™¨Observer1234567891011121314/*** observerï¼šç›‘å¬å™¨ï¼Œå³è°è¦æ¥æ”¶è¿™ä¸ªé€šçŸ¥* aSelectorï¼šæ”¶åˆ°é€šçŸ¥åï¼Œå›è°ƒç›‘å¬å™¨çš„è¿™ä¸ªæ–¹æ³•ï¼Œå¹¶ä¸”æŠŠé€šçŸ¥å¯¹è±¡å½“åšå‚æ•°ä¼ å…¥* aNameï¼šé€šçŸ¥çš„åç§°ã€‚å¦‚æœä¸ºnilï¼Œé‚£ä¹ˆæ— è®ºé€šçŸ¥çš„åç§°æ˜¯ä»€ä¹ˆï¼Œç›‘å¬å™¨éƒ½èƒ½æ”¶åˆ°è¿™ä¸ªé€šçŸ¥* anObjectï¼šé€šçŸ¥å‘å¸ƒè€…ã€‚å¦‚æœä¸ºanObjectå’ŒaNameéƒ½ä¸ºnilï¼Œç›‘å¬å™¨éƒ½æ”¶åˆ°æ‰€æœ‰çš„é€šçŸ¥*/- (void)addObserver:(id)observer selector:(SEL)aSelector name:(NSString *)aName object:(id)anObject;/*** nameï¼šé€šçŸ¥çš„åç§°* objï¼šé€šçŸ¥å‘å¸ƒè€…* blockï¼šæ”¶åˆ°å¯¹åº”çš„é€šçŸ¥æ—¶ï¼Œä¼šå›è°ƒè¿™ä¸ªblock* queueï¼šå†³å®šäº†blockåœ¨å“ªä¸ªæ“ä½œé˜Ÿåˆ—ä¸­æ‰§è¡Œï¼Œå¦‚æœä¼ nilï¼Œé»˜è®¤åœ¨å½“å‰æ“ä½œé˜Ÿåˆ—ä¸­åŒæ­¥æ‰§è¡Œ*/- (id)addObserverForName:(NSString *)name object:(id)obj queue:(NSOperationQueue *)queue usingBlock:(void (^)(NSNotification *note))block; ç§»é™¤ç›‘å¬12- (void)removeObserver:(id)observer;- (void)removeObserver:(id)observer name:(NSString *)aName object:(id)anObject; UIDeciveçš„é€šçŸ¥ UIDeviceç±»æä¾›äº†ä¸€ä¸ªå•ç²’å¯¹è±¡ï¼Œå®ƒä»£è¡¨ç€è®¾å¤‡ï¼Œé€šè¿‡å®ƒå¯ä»¥è·å¾—ä¸€äº›è®¾å¤‡ç›¸å…³çš„ä¿¡æ¯ ç”µæ± ç”µé‡å€¼(batteryLevel) ç”µæ± çŠ¶æ€(batteryState) è®¾å¤‡çš„ç±»å‹(modelï¼Œæ¯”å¦‚iPodã€iPhoneç­‰) è®¾å¤‡çš„ç³»ç»Ÿ(systemVersion) é€šè¿‡[UIDevice currentDevice]å¯ä»¥è·å–è¿™ä¸ªå•ç²’å¯¹è±¡ UIDeviceå¯¹è±¡ä¼šä¸é—´æ–­åœ°å‘å¸ƒä¸€äº›é€šçŸ¥UIDeviceOrientationDidChangeNotification // è®¾å¤‡æ—‹è½¬UIDeviceBatteryStateDidChangeNotification // ç”µæ± çŠ¶æ€æ”¹å˜UIDeviceBatteryLevelDidChangeNotification // ç”µæ± ç”µé‡æ”¹å˜UIDeviceProximityStateDidChangeNotification // è¿‘è·ç¦»ä¼ æ„Ÿå™¨(æ¯”å¦‚è®¾å¤‡è´´è¿‘äº†ä½¿ç”¨è€…çš„è„¸éƒ¨) é”®ç›˜çš„é€šçŸ¥ æˆ‘ä»¬ç»å¸¸éœ€è¦åœ¨é”®ç›˜å¼¹å‡ºæˆ–è€…éšè—çš„æ—¶å€™åšä¸€äº›ç‰¹å®šçš„æ“ä½œ,å› æ­¤éœ€è¦ç›‘å¬é”®ç›˜çš„çŠ¶æ€ é”®ç›˜çŠ¶æ€æ”¹å˜çš„æ—¶å€™,ç³»ç»Ÿä¼šå‘å‡ºä¸€äº›ç‰¹å®šçš„é€šçŸ¥UIKeyboardWillShowNotification // é”®ç›˜å³å°†æ˜¾ç¤ºUIKeyboardDidShowNotification // é”®ç›˜æ˜¾ç¤ºå®Œæ¯•UIKeyboardWillHideNotification // é”®ç›˜å³å°†éšè—UIKeyboardDidHideNotification // é”®ç›˜éšè—å®Œæ¯•UIKeyboardWillChangeFrameNotification // é”®ç›˜çš„ä½ç½®å°ºå¯¸å³å°†å‘ç”Ÿæ”¹å˜UIKeyboardDidChangeFrameNotification // é”®ç›˜çš„ä½ç½®å°ºå¯¸æ”¹å˜å®Œæ¯• ç³»ç»Ÿå‘å‡ºé”®ç›˜é€šçŸ¥æ—¶,ä¼šé™„å¸¦ä¸€ä¸‹è·Ÿé”®ç›˜æœ‰å…³çš„é¢å¤–ä¿¡æ¯(å­—å…¸),å­—å…¸å¸¸è§çš„keyå¦‚ä¸‹:UIKeyboardFrameBeginUserInfoKey // é”®ç›˜åˆšå¼€å§‹çš„frameUIKeyboardFrameEndUserInfoKey // é”®ç›˜æœ€ç»ˆçš„frame(åŠ¨ç”»æ‰§è¡Œå®Œæ¯•å)UIKeyboardAnimationDurationUserInfoKey // é”®ç›˜åŠ¨ç”»çš„æ—¶é—´UIKeyboardAnimationCurveUserInfoKey // é”®ç›˜åŠ¨ç”»çš„æ‰§è¡ŒèŠ‚å¥(å¿«æ…¢) é€šçŸ¥å’Œä»£ç† å…±åŒç‚¹åˆ©ç”¨é€šçŸ¥å’Œä»£ç†éƒ½èƒ½å®Œæˆå¯¹è±¡ä¹‹é—´çš„é€šä¿¡(æ¯”å¦‚Aå¯¹è±¡å‘Šè¯‰Då¯¹è±¡å‘ç”Ÿäº†ä»€ä¹ˆäº‹æƒ…, Aå¯¹è±¡ä¼ é€’æ•°æ®ç»™Då¯¹è±¡) åŒºåˆ« ä»£ç† : 1ä¸ªå¯¹è±¡åªèƒ½å‘Šè¯‰å¦1ä¸ªå¯¹è±¡å‘ç”Ÿäº†ä»€ä¹ˆäº‹æƒ… é€šçŸ¥ : 1ä¸ªå¯¹è±¡èƒ½å‘Šè¯‰Nä¸ªå¯¹è±¡å‘ç”Ÿäº†ä»€ä¹ˆäº‹æƒ…, 1ä¸ªå¯¹è±¡èƒ½å¾—çŸ¥Nä¸ªå¯¹è±¡å‘ç”Ÿäº†ä»€ä¹ˆäº‹æƒ…","link":"/2016/09/01/my-ios-day8/"},{"title":"my-ios-day9","text":"è¿™ä¸ªæ˜¯16å¹´é‡æ–°å¤ä¹ çš„iOSç¬”è®°ï¼Œå½“æ—¶æ˜¯æ”¾åœ¨äº†gitbookï¼Œç°åœ¨è½¬ç§»è¿‡æ¥ï¼ #day 09 UIPickerViewç®€ä»‹ ä½¿ç”¨ é€šå¸¸åº”ç”¨åœ¨æ³¨å†Œæ¨¡å—ï¼Œå½“éœ€è¦é€‰æ‹©ä¸€äº›å›ºå®šçš„é€‰é¡¹æ—¶ä½¿ç”¨ è€è™æœºæ•ˆæœ å¸¸è§ç”¨æ³• å•ä¸€åˆ—ï¼Œèœå•ç³»ç»Ÿ å…³è”çš„ï¼Œçœå¸‚é€‰æ‹© å¸¦å›¾ç‰‡çš„ï¼Œå›½æ——é€‰æ‹© UIDatePicker ç³»ç»Ÿè‡ªå¸¦çš„æ—¥æœŸé€‰æ‹© åŸºæœ¬ä½¿ç”¨ æ˜¾ç¤ºæ•°æ® ä¸tableViewä¸€æ ·ï¼Œæ˜¾ç¤ºæ•°æ®éœ€è¦è®¾ç½®æ•°æ®æºå’Œä»£ç†12self.pickerView.dataSource = self;self.pickerView.delegate = self; éµå®ˆç›¸åº”åè®®123@interface ViewController () &lt;UIPickerViewDataSource, UIPickerViewDelegate&gt;@property (weak, nonatomic) IBOutlet UIPickerView *pickerView;@end å®ç°ç›¸åº”æ–¹æ³•123456789101112// æ€»è¿‡æœ‰å¤šå°‘åˆ—- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView{}// ç¬¬componentæœ‰å¤šå°‘è¡Œ- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component{}// è¿”å›æ¯ä¸€åˆ—çš„å®½åº¦- (CGFloat)pickerView:(UIPickerView *)pickerView widthForComponent: (NSInteger)component{}// è¿”å›ç¬¬ä¸€åˆ—çš„é«˜åº¦- (CGFloat)pickerView:(UIPickerView *)pickerView rowHeightForComponent:(NSInteger)component{}// è¿”å›æ¯â¼€â¾çš„æ ‡é¢˜- (nullable NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component{}// è¿”å›æ¯â¼€ä¸€â¾è¡Œçš„è§†å›¾UIView- (UIView *)pickerView:(UIPickerView *)pickerView viewForRow: (NSInteger)row forComponent:(NSInteger)component reusingView: (nullable UIView *)view{} ç®€å•Demo æ‹¦æˆªç”¨æˆ·è¾“å…¥â€”â€” UITextFieldçš„ä»£ç† æ§åˆ¶å™¨æˆä¸ºtextFieldçš„ä»£ç†ï¼Œç›‘å¬æ–‡æœ¬æ¡†çš„æ”¹å˜ å®ç°ä»£ç†æ–¹æ³•1234567891011121314151617181920// æ˜¯å¦å…è®¸å¼€å§‹ç¼–è¾‘- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField {return YES;}// å¼€å§‹ç¼–è¾‘æ—¶è°ƒâ½¤ç”¨ï¼Œ(å¼¹å‡ºé”®ç›˜)ç¬¬ä¸€å“åº”è€…- (void)textFieldDidBeginEditing:(UITextField *)textField {NSLog(@&quot;å¼¹å‡ºé”®ç›˜&quot;);}// æ˜¯å¦å…è®¸ç»“æŸç¼–è¾‘- (BOOL)textFieldShouldEndEditing:(UITextField *)textField {return YES;}// ç»“æŸç¼–è¾‘æ—¶è°ƒâ½¤ç”¨- (void)textFieldDidEndEditing:(UITextField *)textField {NSLog(@&quot;ç»“æŸç¼–è¾‘æ—¶è°ƒâ½¤ç”¨.&quot;);}// æ˜¯å¦å…è®¸â½‚æ–‡å­—æ”¹å˜ï¼Œæ‹¦æˆªâ½¤ç”¨æˆ·è¾“â¼Šå…¥- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {return NO;} è‡ªå®šä¹‰å›½æ——é€‰æ‹© è‡ªå®šä¹‰çœå¸‚é€‰æ‹©","link":"/2016/09/01/my-ios-day9/"},{"title":"nginx é…ç½® gzip","text":"nginx é…ç½®å¼€å¯ gzip å‹ç¼© 123456gzip on;gzip_min_length 1k;gzip_buffers 4 16k;gzip_comp_level 2;gzip_types text/plain application/json application/javascript application/x-javascript text/css application/xml text/javascript image/jpeg image/gif image/png;gzip_vary off;","link":"/2019/09/26/nginx-gzip-md/"},{"title":"openshift-deploy-flask","text":"æ–°ç‰ˆ Openshift éƒ¨ç½² Flask+mongodb åº”ç”¨ Openshift Openshift æ˜¯çº¢å¸½çš„äº‘å¼€å‘å¹³å°å³æœåŠ¡ (Pass)ã€‚ä¹‹å‰çš„æ—§ç‰ˆæœ¬å·²ç»åœæ­¢ä½¿ç”¨ï¼Œæ–°çš„ Openshift V3 å·²ç»å…¨é¢çš„å¼€æ”¾ä½¿ç”¨ã€‚ æ–°ç‰ˆæœ¬çš„å…è´¹ç©ºé—´æä¾› 1 Project (1G Memory, 1G Storage)ï¼Œå¯¹äºæˆ‘ä»¬éƒ¨ç½²ä¸€ä¸ªç®€å•çš„åº”ç”¨è¶³å¤Ÿäº†ã€‚ æƒ³è¦å¼€å§‹éœ€è¦å…ˆæ³¨å†Œ Openshift çš„è´¦å·ï¼Œå…·ä½“æ³¨å†Œæµç¨‹ä¸åšä»‹ç»ï¼Œå¯ä»¥å‚è€ƒå…è´¹èµ„æºéƒ¨è½çš„ç¬¬ä¸€æ­¥ã€‚ Project ç™»å½•è´¦å·åå°±å°±å¯ä»¥åˆ›å»º Project ç‚¹å‡» Create åï¼Œä¼šè¦æ±‚æˆ‘ä»¬é€‰æ‹©æƒ³è¦è¯­è¨€ã€æŠ€æœ¯ç­‰ï¼Œå› ä¸ºè¦ä½¿ç”¨ MongoDBï¼Œæ‰€æœ‰å…ˆé€‰æ‹© Data Stores MongoDB æ¥ä¸‹æ¥åœ¨é€‰æ‹© MongoDB(Persisent) ä¹‹åçš„é¡µé¢éœ€è¦æˆ‘ä»¬å¯¹ MongoDB è®¾ç½®ä¸€äº›å‚æ•° ç­‰å¾…ä¸€æ®µæ—¶é—´å°±ä¼šåˆ›å»ºæˆåŠŸï¼Œåˆ›å»ºæˆåŠŸåæˆ‘ä»¬å¯ä»¥é€šè¿‡ é¢æ¿çš„ Applications-Service æ¥æŸ¥çœ‹ MongoDB çš„ä¸»æœºåœ°å€ Flask æ¥ä¸‹æ¥æ·»åŠ  Flask åº”ç”¨ï¼Œç‚¹å‡»é¡¶éƒ¨çš„ Add to Project - Browse Catalogï¼Œæ¥ä¸‹æ¥çš„é¡µé¢é€‰æ‹© Pythonï¼Œè¿˜éœ€è¦é€‰æ‹© Python ç‰ˆæœ¬ (æˆ‘é€‰æ‹©çš„æ˜¯ 2.7)ã€‚ è®¾ç½® Flask åº”ç”¨çš„ä¸€äº›ä¿¡æ¯ï¼Œè®¾ç½® git ä»“åº“ (å¯ä»¥å‚è€ƒæˆ‘çš„ä»£ç https://github.com/SleenXiu/openshift-flask.git) ç‚¹å‡» advanced options å¡«å†™ä¸€äº›é¢å¤–çš„é…ç½® è®¾ç½®å†…å­˜é™åˆ¶ è®¾ç½®git push è‡ªåŠ¨éƒ¨ç½² æ•°æ®åº“é…ç½® 1234567// å¡«å†™ä¸Šé¢ MongoDB ä¸­å¡«å†™çš„ä¿¡æ¯MONGODB_SETTINGS = { 'db': 'xiudb', 'host': '172.30.224.230:27017', 'username': 'xiu', 'password': 'xiu'} æœ€å åˆ©ç”¨ä¸šä½™æ—¶é—´ç ”ç©¶äº†å¾ˆä¹…ï¼Œç»ˆäºå®Œæˆäº†æ–°ç‰ˆ Openshift çš„éƒ¨ç½²ï¼Œå°ç«™ï¼Œç®—æ˜¯è·‘é€šäº†æµç¨‹å§ï¼Œæœ‰æ—¶é—´å†å»æ·±å…¥ç ”ç©¶ä¸‹ Docker ç¬¬ä¸€æ¬¡ä½¿ç”¨ Dockerï¼Œè¿˜æœ‰å¾ˆå¤šä¸äº†è§£çš„åœ°æ–¹ å‰æœŸä¹Ÿå°±å…ˆè¿™æ ·å§ï¼Œç‰¹åˆ«æ„Ÿè°¢RedHatï¼Œä¸€ç›´æ˜¯ä½¿ç”¨å®ƒçš„å…è´¹äº‘å¹³å°æ¥å­¦ä¹ ã€‚","link":"/2017/09/10/openshift-deploy-flask/"},{"title":"ç”±â€œä¿©æ•°ä¹‹å’Œé—®é¢˜â€æ‰€æƒ³","text":"leetcode ç¬¬ä¸€ä¸ªé—®é¢˜çš„ä¸€äº›åæ€ é—®é¢˜ Given an array of integers, return indices of the two numbers such that they add up to a specific target.You may assume that each input would have exactly one solution, and you may not use the same element twice. Example:Given nums = [2, 7, 11, 15], target = 9,Because nums[0] + nums[1] = 2 + 7 = 9,return [0, 1]. å¯¹äºåŸºæœ¬çŸ¥è¯†çš„ç†è§£ï¼ŒHash Table çš„ä½¿ç”¨ä¸å¤Ÿçµæ´» å¯¹äºé—®é¢˜çš„æ€è€ƒæ–¹å¼ï¼Œéœ€è¦æŠŠé—®é¢˜ç®€å•åŒ–ï¼Œä½†ä¹Ÿä¸èƒ½å› ä¸ºç®€å•è€ŒæŠŠä»£ç æå¤æ‚ 123456789101112131415161718192021222324252627282930313233343536373839class Solution: def twoSum1(self, nums, target): &quot;&quot;&quot; :type nums: List[int] :type target: int :rtype: List[int] &quot;&quot;&quot; for i in range(len(nums)): for j in range(i+1, len(nums)): if (nums[i] + nums[j]) == target: return [i, j] def twoSum2(self, nums, target): &quot;&quot;&quot; :type nums: List[int] :type target: int :rtype: List[int] &quot;&quot;&quot; d = dict() for i in range(len(nums)): d[nums[i]] = i for i in range(len(nums)): a = target - nums[i] if a in d.keys() and d[a] != i: return [i, d[a]] def twoSum(self, nums, target): &quot;&quot;&quot; :type nums: List[int] :type target: int :rtype: List[int] &quot;&quot;&quot; d = dict() for i in range(len(nums)): a = target - nums[i] if a in d.keys(): return [d[a], i] d[nums[i]] = i","link":"/2019/01/16/think-of-two-sum/"},{"title":"â€œæœ€é•¿å­åºåˆ—é—®é¢˜â€ æ€è€ƒ","text":"Longest Word in Dictionary through Deleting â€œæœ€é•¿å­åºåˆ—é—®é¢˜â€ æ€è€ƒ 12345678910111213141516171819202122232425&gt; Longest Word in Dictionary through Deleting&gt; Given a string and a string dictionary, find the longest string in the dictionary that can be formed by deleting some characters of the given string. If there are more than one possible results, return the longest word with the smallest lexicographical order. If there is no possible result, return the empty string.Example 1:Input:s = &quot;abpcplea&quot;, d = [&quot;ale&quot;,&quot;apple&quot;,&quot;monkey&quot;,&quot;plea&quot;]Output:&quot;apple&quot;Example 2:Input:s = &quot;abpcplea&quot;, d = [&quot;a&quot;,&quot;b&quot;,&quot;c&quot;]Output:&quot;a&quot;&gt; Note:&gt; All the strings in the input will only contain lower-case letters.&gt; The size of the dictionary won't exceed 1,000.&gt; The length of all the strings in the input won't exceed 1,000. åŒæŒ‡é’ˆçš„æ–¹å¼è§£å†³ 123456789101112131415161718192021222324class Solution: def findLongestWord(self, s, d): &quot;&quot;&quot; :type s: str :type d: List[str] :rtype: str &quot;&quot;&quot; def is_valid(s, word): i, j = 0, 0 while i &lt; len(s) and j &lt; len(word): if s[i] == word[j]: j += 1 i += 1 return j == len(word) longest = '' for word in d: l1, l2 = len(longest), len(word) if l1 &gt; l2 or (l1 == l2 and longest &lt; word): continue if is_valid(s, word): longest = word return longest é—®é¢˜æè¿°é‡Œæœ‰å¾ˆå¤š python çš„é«˜çº§å†™æ³• LINK 12345def findLongestWord(self, s, d): def isSubsequence(x): it = iter(s) return all(c in it for c in x) return max(sorted(filter(isSubsequence, d)) + [''], key=len) fliter å‡½æ•° è¿‡æ»¤åºåˆ—ï¼Œè¿‡æ»¤æ‰ä¸ç¬¦åˆæ¡ä»¶çš„å…ƒç´ ï¼Œè¿”å›ç¬¦åˆæ¡ä»¶çš„å…ƒç´ ç»„æˆçš„æ–°åºåˆ—ï¼Œæ–°åºåˆ—æ˜¯ä¸€ä¸ªè¿­ä»£å™¨ æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯è¿‡æ»¤å‡½æ•°ï¼Œç¬¬äºŒçš„æ˜¯å¯è¿­ä»£å¯¹è±¡ è¯­æ³• filter(function, iterable) ä¾‹å­1234def is_odd(x): return x%2 == 1list2 = filter(is_odd, [1, 3, 5, 6, 7, 8])print(list(list2)) # out [1, 3, 5, 7] è¿‡æ»¤å‡½æ•°å¯¹æ¯ä¸ªå…ƒç´ è¿›è¡Œæ¡ä»¶åˆ¤æ–­ï¼Œè¿”å› bool å€¼ï¼Œ æ¢ä¸€ç§å†™æ³•123456list1 = [1, 3, 5, 6, 7, 8]list2 = []for x in list1: if x%2 == 1: list2.append(x)print(list2) # out [1, 3, 5, 7] all å‡½æ•° åˆ¤æ–­å¯è¿­ä»£å¯¹è±¡ä¸­æ‰€æœ‰å…ƒç´ æ˜¯å¦ä¸º TRUEï¼Œå¦‚æœæ˜¯æ”¾å› Trueï¼Œä¸æ˜¯è¿”å› False è¿™é‡Œ TRUE çš„å®šä¹‰æ˜¯é™¤ 0ã€ç©ºï¼ˆNoneï¼‰ã€Falseã€â€™â€™ éƒ½ç®— TRUE å…ƒç´ ä¸º 0 ä¸ªçš„å¯è¿­ä»£å¯¹è±¡è¿”å› True è¯­æ³• all(iterable) ä½¿ç”¨12all([1, 2, 3]) # Trueall([1, 2, 0]) # False ç­‰åŒäº12345def all(iterable): for element in iterable: if not element: return False return True ç±»ä¼¼çš„ any å‡½æ•°ï¼Œä»»æ„å…ƒç´ ä¸º TRUE å°±è¿”å› True sorted å‡½æ•° å¯¹å¯è¿­ä»£åºåˆ—æ’åºç”Ÿæˆæ–°åºåˆ— max å‡½æ•° å–å‡ºåºåˆ—ä¸­æœ€å¤§çš„å…ƒç´  æµç¨‹åˆ†æ12345678910it = iter(s) # å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå¯è¿­ä»£åºåˆ— it = ('a','b','p','c','p','l','e','a')# x = 'ale'(c in it for c in x) # c å…ƒç´ åŒæ—¶æŒ‰åœ¨ x ä¸­çš„é¡ºåºåŒæ—¶å‡ºç°åœ¨ it å’Œ x ä¸­ï¼Œ('a', 'l', 'e')all(('a', 'l', 'e')) # ä¸Šä¸€æ­¥æ¯ä¸ªå…ƒç´ éƒ½ä¸ä¸ºç©ºæ—¶è¿”å› Trued = [&quot;ale&quot;,&quot;apple&quot;,&quot;monkey&quot;,&quot;plea&quot;]filter(isSubsequence, d) # å¯¹ d è¿›è¡Œè¿‡æ»¤ï¼Œ('ale', 'apple', 'plea')sorted(('ale', 'apple', 'plea')) # ä¸Šä¸€æ­¥çš„ç»“æœè¿›è¡Œæ’åºï¼Œå­—å…¸é¡ºåº# + [''] å¤„ç†ä¸ºæ‰¾çš„æƒ…å†µmax(('ale', 'apple', 'plea', ''), key=len) # æ ¹æ®å…ƒç´ é•¿åº¦å–å‡ºæœ€é•¿çš„å…ƒç´ # 'apple' ä¸ä½¿ç”¨ sorted123456789def findLongestWord(self, s, d): def isSubsequence(x): it = iter(s) return all(c in it for c in x) return min(filter(isSubsequence, d) + [''], key=lambda x: (-len(x), x))# min(((-3, 'ale'), (-5, 'apple'),(-4, 'plea')))# 'apple'# å·§å¦™åœ°è¿ç”¨ min å‡½æ•°å¯¹å…ƒç»„çš„æ•ˆæœ å¾ªç¯æ›¿ä»£ filter max12345678def findLongestWord(self, s, d): best = '' for x in d: if (-len(x), x) &lt; (-len(best), best): it = iter(s) if all(c in it for c in x): best = x return best å…ˆè¿›è¡Œæ’åº123456def findLongestWord(self, s, d): def isSubsequence(x): it = iter(s) return all(c in it for c in x) d.sort(key=lambda x: (-len(x), x)) return next(itertools.ifilter(isSubsequence, d), '') å…ˆæ’åºï¼Œåœ¨å¾ªç¯123456def findLongestWord(self, s, d): for x in sorted(d, key=lambda x: (-len(x), x)): it = iter(s) if all(c in it for c in x): return x return '' heapq.heapify æ›¿æ¢ sorted123456789def findLongestWord(self, s, d): heap = [(-len(word), word) for word in d] heapq.heapify(heap) while heap: word = heapq.heappop(heap)[1] it = iter(s) if all(c in it for c in word): return word return ''","link":"/2019/01/19/think-of-longest-word/"},{"title":"å›¾ç‰‡ä¸Šä¼ çš„é—®é¢˜","text":"é¡¹ç›®ä¸­ä¸Šä¼ å›¾ç‰‡çš„ä¸€ä¸ªç‰¹ä¾‹ åå°è¦æ±‚çš„ä¸€ä¸ªæ ¼å¼ 12idcards[0].image // å›¾ç‰‡æ–‡ä»¶idcards[0].side // å›¾ç‰‡å‚æ•° å¼€å§‹ç†è§£æ˜¯ï¼Œæ•°ç»„é‡Œçš„ä¸¤ä¸ªå­—å…¸ï¼Œä½†è¿™ç§æ— æ³•è½¬æ¢ä¸º data è®¾ç½®ç»™ http.body 12345678910idcards : [ { image: data, side: front }, { image: data, side: back }] é€šè¿‡postman æ¥æµ‹è¯•æ¥å£ï¼Œå‘ç°ä¼ çš„æ•°æ®åŸæ¥æ˜¯è¿™æ ·ï¼Œç¬é—´æ˜ç™½ æœ€ç»ˆæ„é€ çš„è¯·æ±‚é•¿è¿™æ ·ï¼Œåº”è¯¥å°±æ˜¯æŠŠå›¾ç‰‡æ”¾åœ¨å­—å…¸é‡Œä¸Šä¼ (â•°_â•¯) 12345678910111213[manager POST:url parameters:@{@&quot;idCards[0].side&quot;:@&quot;front&quot;,@&quot;idCards[1].side&quot;:@&quot;back&quot;} constructingBodyWithBlock:^(id&lt;AFMultipartFormData&gt; _Nonnull formData) { [formData appendPartWithFileData:UIImagePNGRepresentation(images[0]) name:@&quot;idCards[0].image&quot; fileName:@&quot;front.png&quot; mimeType:@&quot;image/png&quot;]; [formData appendPartWithFileData:UIImagePNGRepresentation(images[1]) name:@&quot;idCards[1].image&quot; fileName:@&quot;back.png&quot; mimeType:@&quot;image/png&quot;];} progress:^(NSProgress * _Nonnull uploadProgress) {} success:^(NSURLSessionDataTask * _Nonnull task, id _Nullable responseObject) { !success ? : success(responseObject); [self ic_apiLogWithUrl:url params:params error:nil];} failure:^(NSURLSessionDataTask * _Nullable task, NSError * _Nonnull error) { !failure ? : failure([self myErrorWithNSError:error]); [self ic_apiLogWithUrl:url params:params error:error];}]; åå°æ˜¯ç”¨ java å†™çš„ï¼Œå…·ä½“æ€ä¹ˆè§£æè¿˜æœ‰å¾…ç ”ç©¶","link":"/2019/05/15/upload-file-soso/"},{"title":"æ›¾ç»çš„ios01","text":"Objective-Cé¢å‘å¯¹è±¡ ç±» æˆå‘˜å˜é‡å°½é‡ä¸è¦ä½¿ç”¨@publicï¼Œå˜é‡çš„å‘½åä»¥ _ å¼€å¤´ åªè¯»çš„ï¼šåªéœ€è¦æä¾›getæ–¹æ³• setæ–¹æ³•ï¼šæ–¹æ³•åä»¥setå¼€å¤´ï¼Œåé¢è·Ÿä¸Šæˆå‘˜å˜é‡çš„åç§°ï¼Œæˆå‘˜å˜é‡çš„é¦–å­—æ¯å¤§å†™ï¼Œè¿”å›å€¼æ˜¯voidï¼Œæ¥å—ä¸€ä¸ªå‚æ•°ï¼ˆç±»å‹ä¸æˆå‘˜å˜é‡çš„ç±»å‹ä¸€è‡´ï¼‰ getæ–¹æ³•ï¼šè¿”å›å†…éƒ¨æˆå‘˜å˜é‡ï¼Œä¸€å®šåˆè¿”å›å€¼ï¼ˆç±»å‹ä¸æˆå‘˜å˜é‡ä¸€è‡´ï¼‰ï¼Œæ–¹æ³•åä¸æˆå‘˜å˜é‡ä¸€è‡´ï¼ˆå»æ‰ä¸‹åˆ’çº¿ï¼‰ OCæ˜¯ä¸€ç§å¼±è¯­æ³•ï¼Œä¼šåœ¨è¿è¡Œæ—¶æ‰æ£€æµ‹å¯¹è±¡æœ‰æ²¡æœ‰å®ç°ç›¸åº”çš„æ–¹æ³• å¯¹è±¡æ–¹æ³•ï¼šä»¥å‡å· ï¼ å¼€å¤´ï¼Œåªèƒ½é€šè¿‡å¯¹è±¡æ¥è°ƒç”¨ï¼Œå¯¹è±¡æ–¹æ³•ä¸­å¯ä»¥è®¿é—®å½“å‰å¯¹è±¡çš„æˆå‘˜å˜é‡ ç±»æ–¹æ³•ï¼šä»¥åŠ å· ï¼‹ å¼€å¤´ï¼Œåªèƒ½ç”¨ç±»æ¥è°ƒç”¨ï¼Œç±»æ–¹æ³•ä¸­ä¸èƒ½è®¿é—®æˆå‘˜å˜é‡ï¼›ä¸ä¾èµ–å¯¹è±¡ï¼Œæ‰§è¡Œæ•ˆç‡é«˜ï¼Œå½“æ–¹æ³•å†…ä¸éœ€è¦ä½¿ç”¨æˆå‘˜å˜é‡æ—¶ï¼Œå¯ä»¥æ”¹ç”¨ç±»æ–¹æ³•ï¼ˆå¯å…è®¸ç±»æ–¹æ³•ä¸å¯¹è±¡æ–¹æ³•åŒåï¼‰ selfï¼šæŒ‡å‘äº†æ–¹æ³•çš„è°ƒç”¨è€…ï¼Œä»£è¡¨ç€å½“å‰å¯¹è±¡ï¼›è°è°ƒç”¨äº†å½“å‰æ–¹æ³•ï¼Œselfå°±ä»£è¡¨è°ï¼›åœ¨å¯¹è±¡æ–¹æ³•ä¸­ä½¿ç”¨â€˜self-&gt;æˆå‘˜å˜é‡åâ€™è®¿é—®å½“å‰å¯¹è±¡å†…éƒ¨çš„æˆå‘˜å˜é‡ï¼ˆå°±åƒc+ä¸­çš„thisï¼‰ï¼Œæ³¨æ„åœ¨å¯¹è±¡æ–¹æ³•ä¸­ä½¿ç”¨selfè°ƒç”¨æ–¹æ³•æ—¶ï¼Œä¸è¦å¼•å‘æ­»å¾ªç¯ ç»§æ‰¿ï¼š ä¸ºä»€ä¹ˆä½¿ç”¨ç»§æ‰¿ï¼šå‡å°‘ä»£ç é‡å¤ã€å»ºç«‹ç±»ä¹‹é—´çš„å…³ç³»ã€å­ç±»å¯ä»¥æ‹¥æœ‰çˆ¶ç±»çš„æ‰€æœ‰æˆå‘˜çš„æ–¹æ³•ï¼ˆæ‰€æœ‰ç±»éƒ½ç»§æ‰¿ä¸NSObjectï¼‰ æ–¹æ³•çš„é‡å†™ï¼šå­ç±»é‡æ–°å®ç°çˆ¶ç±»ä¸­çš„æŸä¸ªæ–¹æ³•ï¼Œè¦†ç›–æ‰çˆ¶ç±»ä»¥å‰çš„åšæ³•ï¼›çˆ¶ç±»å¿…é¡»å£°æ˜åœ¨å­ç±»çš„å‰é¢ã€å­ç±»ä¸èƒ½å†æ¬¡å£°æ˜çˆ¶ç±»æ‹¥æœ‰çš„æˆå‘˜å˜é‡ã€è°ƒç”¨æ–¹æ³•æ—¶ï¼Œä¼˜å…ˆåœ¨å­ç±»ä¸­å¯»æ‰¾ï¼Œå¦‚æœæ‰¾ä¸åˆ°ï¼Œåœ¨çˆ¶ç±»ä¸­æ‰¾ ä»€ä¹ˆæ—¶å€™ä½¿ç”¨ç»§æ‰¿ï¼šå½“ä¸¤ä¸ªç±»æ‹¥æœ‰ç›¸åŒçš„å±æ€§å’Œæ–¹æ³•æ—¶ï¼Œå¯ä»¥å°†ç›¸åŒçš„ä¸œè¥¿æŠ½å–åˆ°ä¸€ä¸ªçˆ¶ç±»ä¸­ï¼›å½“Aç±»å®Œå…¨æ‹¥æœ‰Bç±»çš„éƒ¨åˆ†å±æ€§å’Œæ–¹æ³•æ—¶ï¼Œå¯ä»¥è€ƒè™‘è®©Bç±»ç»§æ‰¿Aç±»ï¼ˆè€ƒè™‘å®é™…æƒ…å†µï¼‰ï¼›ç»§æ‰¿æ˜¯ is-açš„å…³ç³» åŒºåˆ†ç»„åˆï¼šç»„åˆæ˜¯has-açš„å…³ç³» superï¼šç›´æ¥è°ƒç”¨çˆ¶ç±»ä¸­çš„æŸä¸ªæ–¹æ³•ï¼›superå¤„åœ¨å¯¹è±¡æ–¹æ³•ä¸­ï¼Œé‚£ä¹ˆå°±ä¼šè°ƒç”¨çˆ¶ç±»çš„å¯¹è±¡æ–¹æ³•ï¼›superå¤„åœ¨ç±»æ–¹æ³•ä¸­ï¼Œå°±ä¼šè°ƒç”¨çˆ¶ç±»çš„ç±»æ–¹æ³•ã€‚å½“å­ç±»é‡å†™çˆ¶ç±»çš„æ–¹æ³•æ—¶æƒ³ä¿ç•™çˆ¶ç±»çš„ä¸€äº›è¡Œä¸º å¤šæ€ï¼šæ²¡æœ‰ç»§æ‰¿å°±æ²¡æœ‰å¤šï¼›çˆ¶ç±»ç±»å‹çš„æŒ‡é’ˆæŒ‡å‘å­ç±»å¯¹è±¡ï¼›å½“å‡½æ•°å½¢å‚ä¸ºçˆ¶ç±»ç±»å‹ï¼Œé‚£ä¹ˆæ—¢å¯ä»¥ä¼ å…¥çˆ¶ç±»å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥ä¼ å…¥å­ç±»å¯¹è±¡ï¼›çˆ¶ç±»å¯¹è±¡ä¸èƒ½ç›´æ¥è°ƒç”¨å­ç±»çš„ç‰¹æœ‰æ–¹æ³•ï¼Œå¿…é¡»è¿›è¡Œå¼ºåˆ¶ç±»å‹è½¬æ¢","link":"/2015/10/01/%E6%9B%BE%E7%BB%8F%E7%9A%84ios01/"},{"title":"æ›¾ç»çš„ios02","text":"ä½¿ç”¨æ³¨é‡Š // è¦ç©ºä¸€æ ¼åœ¨å†™ è¦æœ‰ä¸€å®šçš„ç¼–ç¨‹æ€æƒ³ï¼Œåœ¨å¯¹è±¡æ–¹æ³•å’Œç±»æ–¹æ³•éƒ½è®¡ç®—ä¸¤ç‚¹è·ç¦»æ—¶ï¼Œå¯ä»¥åœ¨å¯¹è±¡æ–¹æ³•ï¼ˆç±»æ–¹æ³•ï¼‰ä¸­è°ƒç”¨ç±»æ–¹æ³•ï¼ˆå¯¹è±¡æ–¹æ³•ï¼‰ è¿”å›å€¼æ—¶BOOLç±»å‹æ—¶ï¼Œæ–¹æ³•æˆ–å‡½æ•°ç”¨iså¼€å¤´ ï¼ƒpragm mark â€“ ä¸€æ®µæ³¨é‡Š ï¼ƒpragm mark ä¸€æ®µæ³¨é‡Šï¼Œå¯ä»¥åœ¨å¿«é€ŸæŸ¥çœ‹æ–¹æ³•çš„åœ°æ–¹çœ‹åˆ°æ³¨é‡Š ç‚¹è¯­æ³•ï¼šæ˜¯æŒ‡å®è´¨å°±æ˜¯æ–¹æ³•çš„è°ƒç”¨ï¼Œè¦æ³¨æ„åœ¨ç±»ä¸­ä½¿ç”¨ç‚¹è¯­æ³•ä¸è¦å¼•å‘æ­»å¾ªç¯ æˆå‘˜å˜é‡ä½œç”¨åŸŸï¼š@publicåœ¨ä»»ä½•åœ°æ–¹éƒ½èƒ½ç›´æ¥è®¿é—®å¯¹è±¡çš„æˆå‘˜å˜é‡ï¼›@private åªèƒ½åœ¨å½“å‰ç±»ä¸­ç›´æ¥è®¿é—®ï¼ˆ@implementationä¸­å¦‚æœå£°æ˜æ¯”å˜é‡ï¼Œé»˜è®¤å°±æ˜¯@privateï¼‰ï¼›@protected åœ¨å½“å‰ç±»å’Œå­ç±»ä¸­å¯ä»¥ç›´æ¥è®¿é—®ï¼ˆ@interface ä¸­å°±æ˜¯é»˜è®¤çš„@protectedï¼‰ @property å¯ä»¥è‡ªåŠ¨ç”ŸæˆæŸä¸ªæˆå‘˜å˜é‡çš„setterå’Œgetteræ–¹æ³•çš„å£°æ˜ @synthesize å¯ä»¥è‡ªåŠ¨ç”ŸæˆæŸä¸ªæˆå‘˜å˜é‡setterå’Œgetteræ–¹æ³•çš„å®ç°@synthesize age = _age;ä¼šè®¿é—®_ageå˜é‡ï¼Œå¦‚æœä¸å†™=_ageå°±ä¼šè®¿é—®ageå˜é‡ï¼›å¦‚æœç±»ä¸­æ²¡æœ‰å½“å‰è¦è®¿é—®çš„å˜é‡ï¼Œå°±ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªï¼ˆç±»å‹ä¸º @privateï¼‰ åœ¨æ–°çš„ç‰ˆæœ¬ä¸­ï¼Œ@propertyçš„åŠŸèƒ½æ›´å¼ºå¤§ï¼šåœ¨@interfaceä¸­ç›´æ¥å†™ â€œ@property int ageï¼›â€å°±ä¼šè‡ªåŠ¨æœ‰ä¸€ä¸ªÂ­Â­_ageçš„æˆå‘˜å˜é‡ï¼Œå¹¶ä¸”ç”Ÿæˆä»–çš„setterå’Œgetteræ–¹æ³•çš„å£°æ˜å’Œå®ç° idä¸‡èƒ½æŒ‡é’ˆï¼Œèƒ½æŒ‡å‘ã€æ“ä½œä»»ä½•OCå¯¹è±¡ æ„é€ æ–¹æ³•ï¼šç”¨æ¥åˆå§‹åŒ–å¯¹è±¡çš„æ–¹æ³•ï¼Œæ˜¯ä¸€ä¸ªå¯¹è±¡æ–¹æ³•ï¼Œ-å¼€å¤´ï¼Œå¯ä»¥åœ¨å¯¹è±¡åˆå§‹çš„æ—¶å€™æˆå‘˜å˜é‡å°±æœ‰ä¸€å®šçš„å€¼ï¼›é‡å†™çš„æ—¶å€™è¦è°ƒç”¨çˆ¶ç±»çš„æ„é€ æ–¹æ³•ï¼Œåœ¨è¿›è¡Œå­ç±»å¯¹è±¡çš„åˆå§‹åŒ– è‡ªå®šä¹‰æ„é€ æ–¹æ³•ï¼šå¯¹è±¡æ–¹æ³•ï¼Œä»¥ â€“ å¼€å¤´ï¼Œè¿”å›å€¼ä¸€èˆ¬ä¸º id ç±»å‹ï¼Œæ–¹æ³•åä»¥ initWithå¼€å¤´ åˆ†ç±»ï¼šåœ¨ä¸æ”¹å˜åŸæ¥ç±»å†…å®¹çš„åŸºç¡€ä¸Šï¼Œä¸ºç±»å¢åŠ ä¸€äº›æ–°çš„æ–¹æ³•ï¼›åˆ†ç±»åªèƒ½å¢åŠ æ–¹æ³•ï¼Œä¸èƒ½å¢åŠ æˆå‘˜å˜é‡ï¼åˆ†ç±»çš„å®ç°å¯ä»¥è®¿é—®ç±»ä¸­å£°æ˜çš„æˆå‘˜å˜é‡ï¼åˆ†ç±»å¯ä»¥é‡æ–°å®ç°åŸç±»çš„æ–¹æ³•ï¼Œä½†ä¼šè¦†ç›–æ‰åŸç±»çš„æ–¹æ³•ï¼æ–¹æ³•çš„è°ƒç”¨é¡ºåºï¼šåˆ†ç±»ï¼ŒåŸç±»ï¼Œçˆ¶ç±» åˆ†ç±»ï¼šå¯ä»¥ä¸ºç³»ç»Ÿçš„ç±»æ·»åŠ åˆ†ç±»ã€‚ç½‘ä¸Šæœ‰å¾ˆå¤šå†™å¥½çš„åˆ†ç±»ï¼Œæ‹“å±•äº†ç³»ç»Ÿç±»çš„åŠŸèƒ½ã€‚ ç±»çš„æœ¬è´¨ï¼šç±»ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ˜¯classç±»å‹çš„å¯¹è±¡â€”â€”ç±»Â­Â­Â­Â­å¯¹è±¡ï¼Œç±»ï¼ï¼ç±»å¯¹è±¡ï¼Œæ¯ä¸ªç±»åªæœ‰ä¸€ä¸ªç±»å¯¹è±¡ï¼›è·å–å†…å­˜ä¸­çš„ç±»å¯¹è±¡ï¼šClass c = [Person class]; ï¼‹loadæ–¹æ³•ï¼šåœ¨ç¨‹åºå¯åŠ¨æ—¶ï¼Œå°±ä¼šåŠ è½½é¡¹ç›®ä¸­æ‰€æœ‰çš„ç±»å’Œåˆ†ç±»ï¼Œè€ŒåŠ è½½åå°±ä¼šè°ƒç”¨ï¼‹loadæ–¹æ³•ï¼Œåªè°ƒç”¨ä¸€æ¬¡ ï¼‹initializeæ–¹æ³•ï¼šåœ¨ç¬¬ä¸€æ¬¡ä½¿ç”¨æŸä¸ªç±»æ—¶ï¼Œå°±ä¼šè°ƒç”¨å½“å‰ç±»çš„ï¼‹initializeæ–¹æ³• æ³¨æ„ï¼šå…ˆåŠ è½½çˆ¶ç±»ï¼ŒååŠ è½½å­ç±»ï¼ï¼å…ˆè°ƒç”¨çˆ¶ç±»çš„ï¼‹loadæ–¹æ³•ï¼Œåœ¨è°ƒç”¨å­ç±»çš„ï¼‹loadæ–¹æ³•ï¼›å…ˆåˆå§‹åŒ–çˆ¶ç±»ï¼Œååˆå§‹åŒ–å­ç±»â€”â€”å…ˆè°ƒç”¨çˆ¶ç±»çš„ï¼‹initializeæ–¹æ³•ï¼Œåœ¨è°ƒç”¨å­ç±»çš„ï¼‹initializeæ–¹æ³• ï¼descriptionæ–¹æ³•ï¼šNSLog(@â€%dâ€,p); å°±ä¼šè°ƒç”¨è¯¥æ–¹æ³•ï¼›é»˜è®¤æƒ…å†µä¸‹ï¼Œåˆ©ç”¨NSLog å’Œ ï¼…@è¾“å‡ºå¯¹è±¡æ—¶ï¼Œç»“æœæ˜¾ç¤º&lt;ç±»å:å†…å­˜åœ°å€&gt;ï¼›åœ¨ç±»ä¸­å¯¹ï¼descriptionè¿›è¡Œé‡å†™ï¼Œè®©å…¶è¿”å›ç±»çš„æ‰€æœ‰å±æ€§å€¼ï¼Œ ï¼‹descriptionæ–¹æ³•ï¼šClass c = [Person class]; NSLog(@â€%dâ€,c); å°±ä¼šè°ƒç”¨è¯¥æ–¹æ³•ï¼Œ SEL ç±»å‹ï¼šæ¯ä¸ªç±»æ–¹æ³•åˆ—è¡¨éƒ½å­˜å‚¨åœ¨ç±»å¯¹è±¡ä¸­ï¼Œæ¯ä¸ªæ–¹æ³•éƒ½æœ‰ä¸€ä¸ªä¸ä¹‹å¯¹åº”çš„SELç±»å‹çš„å¯¹è±¡ï¼Œæ ¹æ®SELå¯¹è±¡å°±å¯ä»¥æ‰¾åˆ°æ–¹æ³•çš„åœ°å€ä»è€Œè°ƒç”¨æ–¹æ³•ï¼› _cmd ï¼šä»£è¡¨å½“å‰æ–¹æ³• æ˜¨å¤©å¤ªæ™šäº†ï¼Œå®¿èˆæ²¡ç½‘å°±æ²¡èƒ½è´´ä¸Šä»Šå¤©è¡¥ä¸Š OCå†…å­˜ç®¡ç† æ¯ä¸€ä¸ªOcå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªå¼•ç”¨è®¡æ•°å™¨ï¼ˆå 4 ä¸ªå­—èŠ‚ï¼‰ï¼Œç”¨æ¥ä¿å­˜æœ‰å¤šå°‘äººåœ¨ä½¿ç”¨è¯¥å¯¹è±¡ï¼Œå½“ä½¿ç”¨allocã€newã€copyåˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡æ—¶ï¼Œå¯¹è±¡çš„å¼•ç”¨è®¡æ•°å™¨é»˜è®¤ä¸º1ï¼Œå½“è®¡æ•°å™¨çš„å€¼ï¼0æ—¶ï¼Œå¯¹è±¡å°±ä¼šè¢«å›æ”¶ æ“ä½œè®¡æ•°å™¨çš„ä¸€äº›å¯¹è±¡æ–¹æ³•ï¼š retainæ–¹æ³•ï¼š è®¡æ•°å™¨åŠ 1ï¼Œä¼šè¿”å›å¯¹è±¡æœ¬èº«ï¼› releaseæ–¹æ³•ï¼š è®¡æ•°å™¨å‡1ï¼Œæ²¡æœ‰è¿”å›å€¼ï¼› deallocæ–¹æ³•ï¼š è¿”å›å½“å‰è®¡æ•°å™¨å€¼ï¼ˆldç±»å‹ï¼‰ dealloeæ–¹æ³•ï¼šå½“ä¸€ä¸ªå¯¹è±¡è¢«å›æ”¶çš„æ—¶å€™å°±ä¼šè°ƒç”¨ï¼Œä¸€å®šè¦è°ƒç”¨ä¼šçˆ¶ç±»çš„deallocï¼ˆ[super dealloc];ï¼‰æ”¾åœ¨æœ€åé¢ å‡ ä¸ªæ¦‚å¿µï¼š åƒµå°¸å¯¹è±¡ï¼šæ‰€å ç”¨çš„å†…å­˜å·²ç»è¢«å›æ”¶çš„å¯¹è±¡ï¼Œä¸èƒ½åœ¨è¿›è¡Œä½¿ç”¨ï¼Œ é‡æŒ‡é’ˆï¼šæŒ‡å‘åƒµå°¸å¯¹è±¡ï¼ˆä¸å¯ç”¨å†…å­˜ï¼‰çš„æŒ‡é’ˆï¼Œç»™é‡æŒ‡é’ˆå‘é€æ¶ˆæ¯ï¼ˆè°ƒç”¨æ–¹æ³•ï¼‰å°±ä¼šæŠ¥é”™ï¼ˆEXC_BAD_ACCESSï¼‰ ç©ºæŒ‡é’ˆï¼šæ²¡æœ‰æŒ‡å‘ä»»ä½•ä¸œè¥¿çš„æŒ‡é’ˆï¼ˆnilã€NULLã€0ï¼‰ï¼Œç©ºæŒ‡é’ˆè°ƒç”¨æ–¹æ³•ä¸ä¼šæŠ¥é”™ å¤šå¯¹è±¡çš„å†…å­˜ç®¡ç† è¦ä½¿ç”¨æŸä¸ªå¯¹è±¡çš„æ—¶å€™ï¼Œå°±è¦è®©å¯¹è±¡çš„è®¡æ•°å™¨åŠ 1ï¼ˆè®©å¯¹è±¡åšä¸€æ¬¡retainæ“åšï¼‰ï¼›ä¸æƒ³åœ¨ä½¿ç”¨è«ä¸ªå¯¹è±¡æ—¶ï¼Œå°±è¦è®©å¯¹è±¡çš„è®¡æ•°å™¨å‡1ï¼ˆè®©å¯¹è±¡åšä¸€æ¬¡releaseæ“ä½œï¼‰ è°retain è°releaseï¼›è°alloc è°release ç±»çš„setæ–¹æ³•å’Œdeallocæ–¹æ³• åŸºæœ¬æ•°æ®ç±»å‹ï¼šç›´æ¥èµ‹å€¼ Ocå¯¹è±¡ç±»å‹ï¼šå…ˆåˆ¤æ–­æ˜¯ä¸æ˜¯æ–°å¯¹è±¡ï¼Œå¦‚æœæ˜¯ï¼Œå¯¹æ—§å¯¹è±¡åšä¸€æ¬¡releaseï¼Œåœ¨å¯¹æ–°å¯¹è±¡åšä¸€æ¬¡retainå¹¶èµ‹å€¼ deallocæ–¹æ³•ï¼šè¦å…ˆå¯¹å½“å‰å¯¹è±¡æ‹¥æœ‰çš„æ‰€æœ‰Ocå¯¹è±¡è¿›è¡Œä¸€æ¬¡releaseæ“ä½œï¼Œæœ€åè°ƒç”¨[super dealloc]; @propertyçš„å‚æ•° retainï¼šç”Ÿæˆçš„setæ–¹æ³•é‡Œé¢ï¼Œreleaseæ—§å€¼ï¼Œretainæ–°å€¼ï¼ˆç”¨äºOcå¯¹è±¡ï¼‰ assignï¼šç”Ÿæˆçš„setæ–¹æ³•é‡Œé¢ï¼Œç›´æ¥èµ‹å€¼ï¼ˆç”¨äºéOcå¯¹è±¡ï¼Œé»˜è®¤çš„ï¼‰ copyï¼šreleaseæ—§å€¼ï¼Œcopyæ–°å€¼ readonlyï¼šåªç”Ÿæˆgetæ–¹æ³•ï¼ˆåªè¯»ï¼‰ readwriteï¼šåŒæ—¶ç”Ÿæˆsetå’Œgetæ–¹æ³•ï¼ˆé»˜è®¤çš„ï¼‰ å¤šçº¿ç¨‹ç®¡ç† nonatomicï¼šæ€§èƒ½é«˜ï¼ˆä¸€å®šè¦å†™è¿™ä¸ªï¼‰ atomicï¼šæ€§èƒ½ä½ï¼ˆé»˜è®¤çš„ï¼‰ setå’Œgetæ–¹æ³•å setteré‡æ–°å®šä¹‰setçš„æ–¹æ³•åï¼›getteré‡æ–°å®šä¹‰getçš„æ–¹æ³•åï¼›ï¼ˆä¸€èˆ¬setä¸ä¼šæ”¹ï¼Œå½“getæ–¹æ³•è¿”å›BOOLæ—¶ä¼šæ”¹ä¸ºiså¼€å¤´ï¼‰ å¾ªç¯å¼•ç”¨ï¼ˆä½ ä¸­æœ‰æˆ‘ï¼Œæˆ‘ä¸­æœ‰ä½ ï¼‰ @class xxxï¼šå‘Šè¯‰ç¼–è¯‘å™¨xxxè¿™æ˜¯ä¸€ä¸ªç±»ï¼Œä¸ä¼šåŒ…å«xxxç±»çš„ä»»ä½•å†…å®¹ å¼€å‘ä¸­ï¼šåœ¨ .h æ–‡ä»¶ä¸­ä½¿ç”¨@classæ¥å£°æ˜ç±»ï¼Œåœ¨ .m æ–‡ä»¶ä¸­ä½¿ç”¨#importæ¥åŒ…å«ç±»çš„æ‰€æœ‰ä¸œè¥¿ ä¸¤ç«¯å¾ªç¯çš„è§£å†³åŠæ³•ï¼šåœ¨@propertyä¸­ï¼Œä¸€ç«¯ç”¨retainï¼Œä¸€ç«¯ç”¨assign autoreleaseæ–¹æ³• å°†å¯¹è±¡æ”¾åˆ°ä¸€ä¸ªè‡ªåŠ¨é‡Šæ”¾æ± ä¸­ï¼Œå½“è‡ªåŠ¨é‡Šæ”¾æ± è¢«é”€æ¯æ—¶ï¼Œä¼šå¯¹æ± å­ä¸­çš„æ‰€æœ‰å¯¹è±¡è¿›è¡Œä¸€æ¬¡releaseæ“ä½œ ä¼šè¿”å›å¯¹è±¡æœ¬èº«ï¼Œè°ƒç”¨åï¼Œå¯¹è±¡çš„è®¡æ•°å™¨æ•°å¹¶ä¸å˜ å¼€å‘ä¸­ï¼Œç»å¸¸ä¼šå°† 1[[[Car alloc] init] autorelease]å°è£…åˆ°ä¸€ä¸ªç±»æ–¹æ³•ï¼ˆcarï¼‰ä¸­ï¼›è¦æ˜¯æƒ³è¦å¸¦åˆå§‹å€¼çš„ï¼ˆcarWithSpeedï¼š//æ–¹æ³•ä¸­åˆ›å»ºå¯¹è±¡ä½¿ç”¨selfï¼‰","link":"/2015/10/02/%E6%9B%BE%E7%BB%8F%E7%9A%84ios02/"},{"title":"æ›¾ç»çš„ios03","text":"ä»Šå¤©çš„å¾ˆå¤šï¼Œæœ‰ARC è¿˜æœ‰Ocçš„ä¸€äº›ç»“æ„ä½“å’Œç±»ï¼Œ ARC ARCçš„åˆ¤æ–­å‡†åˆ™ï¼šåªè¦æ²¡æœ‰å¼ºæŒ‡é’ˆæŒ‡å‘å¯¹è±¡ï¼Œå°±ä¼šé‡Šæ”¾å¯¹è±¡ ARCæ˜¯ç¼–è¯‘å™¨ç‰¹æ€§ï¼Œå¹¶ä¸æ˜¯Ocè¯­è¨€ç‰¹æ€§ ARCçš„ç‰¹ç‚¹ï¼šä¸å…è®¸åœ¨è°ƒç”¨ä¸å†…å­˜ç®¡ç†ç›¸å…³çš„æ–¹æ³•ï¼ˆretainã€releaseã€retainCountï¼‰ï¼›å¯ä»¥é‡å†™deallocæ–¹æ³•ï¼Œä½†ä¸å†è°ƒç”¨çˆ¶ç±»çš„deallocæ–¹æ³• @propertyçš„å‚æ•°ï¼šstrong æˆå‘˜å˜é‡æ˜¯å¼ºæŒ‡é’ˆï¼ˆç”¨äºOcå¯¹è±¡ï¼‰ï¼›weakæˆå‘˜å˜é‡æ˜¯å¼±æŒ‡é’ˆï¼ˆç”¨äºOcå¯¹è±¡ï¼‰ï¼›assing ç”¨äºéOcå¯¹è±¡â€”â€”å°±æ˜¯å°†ä»¥å‰çš„retainæ”¹ä¸ºstrong å¼ºæŒ‡é’ˆï¼šé»˜è®¤æƒ…å†µä¸‹ï¼ŒæŒ‡é’ˆéƒ½æ˜¯å¼ºç±»å‹ __strongï¼› å¼±æŒ‡é’ˆï¼š__weak å¾ªç¯å¼•ç”¨ï¼šä¸€ç«¯ç”¨strong ä¸€æ®µç”¨weak block å®šä¹‰blockå˜é‡ï¼š 12int (^myBlock) (int, int);void (^myBlock)(); ä½¿ç”¨blockå°è£…ä»£ç ï¼š 123456 ^(int a, int b){ return a + b; } ^(){ NSLog(@â€_____â€);} è®¿é—®å¤–éƒ¨å˜é‡ é»˜è®¤æ˜¯å¯ä»¥è®¿é—®çš„ï¼Œä½†æ˜¯ä¸èƒ½ä¿®æ”¹ï¼›è¦ä¿®æ”¹æ—¶ï¼Œè¦åœ¨å£°æ˜å˜é‡æ—¶å‰é¢åŠ ä¸Š__block ä½¿ç”¨typedefå®šä¹‰blockç±»å‹ 12345typedef int (^MyBlock) (int, int);MyBlock b;b = ^(int a, int b){ return a + b;} blockå’ŒæŒ‡å‘å‡½æ•°çš„æŒ‡é’ˆå¾ˆåƒ protocol åè®®ï¼ˆprotocolï¼‰çš„å®šä¹‰ 123@protocol åè®®åç§°//æ–¹æ³•å£°æ˜@end å¦‚ä½•éµå®ˆåè®® ç±»ï¼šåœ¨ç±»å£°æ˜æ—¶ï¼Œåœ¨çˆ¶ç±»ååŠ &lt;åè®®å1ï¼Œåè®®å2&gt; åè®®ï¼šå°±æ˜¯åœ¨åè®®åååŠ &lt;åè®®å1ï¼Œåè®®å2&gt; åè®®ä¸­æ–¹æ³•çš„å£°æ˜çš„å…³é”®å­— @requiredï¼ˆé»˜è®¤ï¼‰è¦æ±‚æ–¹æ³•å®ç°ï¼Œä¸å®ç°å°±ä¼šæœ‰è­¦å‘Š @optional ä¸è¦æ±‚å®ç°ï¼Œæ€ä¹ˆéƒ½ä¸ä¼šæœ‰è­¦å‘Š å®šä¹‰ä¸€ä¸ªå˜é‡æ—¶ï¼Œé™åˆ¶å˜é‡ä¿å­˜å¯¹è±¡éµå®ˆæŸä¸ªåè®®ï¼š ç±»å&lt;åè®®å&gt; * å˜é‡åï¼› id&lt;åè®®å&gt; å˜é‡åï¼› â€”â€”å¦‚æœä¿å­˜çš„å˜é‡æ²¡æœ‰éµå®ˆç›¸åº”çš„åè®®å°±ä¼šå‘å‡ºè­¦å‘Š åœ¨@propertyä¸­è¦æ±‚æˆå‘˜å˜é‡éµå®ˆæŸä¸€åè®®ï¼š 12@property (nonatomic,strong) ç±»å&lt;&lt;/span&gt;åè®®å&gt; ï¼Šæˆå‘˜åï¼›@property (nonatomic,strong) id&lt;&lt;/span&gt;åè®®å&gt; æˆå‘˜åï¼› åè®®å¯ä»¥å®šä¹‰åœ¨å•ç‹¬çš„.hæ–‡ä»¶ä¸­ï¼Œä¹Ÿå¯ä»¥å®šä¹‰åœ¨æŸä¸ªç±»ä¸­ï¼›ï¼ˆå¦‚æœåè®®è‡ªç”±æŸä¸€ä¸ªç±»ä½¿ç”¨ï¼Œåº”è¯¥æŠŠä»–å®šä¹‰åœ¨è¯¥ç±»ä¸­ï¼›éƒ½ä¸ªç±»ä½¿ç”¨ä¸€ä¸ªåè®®ï¼Œå°±è¦å•ç‹¬å†™ï¼‰ Ocçš„ç»“æ„ä½“ åŒ…æ‹¬ 1234NSRange(location length)NSPoint\\CGPointNSSize\\CGSizeNSRect\\CGRect(CGPoint CGSize) 12345678// range// @â€I love ocâ€; love çš„èŒƒå›´NSRange r1 = {2, 4};NSRange r2 = {.location = 2, .length = 4};NSRange r3 = NSMakeRange(2, 4); ä¸€èˆ¬éƒ½ç”¨è¿™ä¸ª// æŸ¥æ‰¾æŸä¸ªå­—ç¬¦ä¸²åœ¨strä¸­çš„ä½ç½®NSRange range = [str rangeOfString:@â€loâ€];// å¦‚æœæ²¡æœ‰æ‰¾åˆ°lengthï¼0ã€locationï¼ï¼1 12345678910// ç‚¹CGPoint p1 = NSMakePoint(10, 10);NSPoint p2 = CGPointMake(10, 10);// é•¿åº¦å’Œå®½åº¦NSSize s1 = NSMakeSize(10,5);CGSize s2 = CGSizeMake(10, 5);// çŸ©å½¢CGRect r1 = CGRectMake(0, 0, 10, 5);CGRect r2 = {{0, 0}, (10, 5)};CGRect r3 = {p1, s1}; OCçš„å‡ ä¸ªç±» å­—ç¬¦ä¸²ç±»NSStringå’ŒNSMutableString 12345678910111213141516171819// å­—ç¬¦ä¸²çš„åˆ›å»ºNSString *s1 = @â€Jackâ€;NSString *s2 = [[NSString alloc] initWithString:@â€Jackâ€];NSString *s3 = [[NSString alloc] initWithFormat:@â€age is %dâ€,12];NSString *s4 = [[NSString alloc] initWithUTF8String:â€Jackâ€;cÃ Occonst char * cs = [s4 UTF8String];NSString *s5 = [[NSString alloc] initWihtContentsOFFile:@â€æ–‡ä»¶è·¯å¾„â€ encoding:NSUTF8StringEncoding erroc:nil];NSString *s6 = [[NSString alloc] initWithContentOfURL:@â€èµ„æºè·¯å¾„â€ encoding:NSUTF8StringEncoding error:nil];// å­—ç¬¦ä¸²çš„æ–‡ä»¶æ“ä½œ[@â€xiuxiuâ€ writeToFile:@â€æ–‡ä»¶è·¯å¾„â€ atomically:YES encoding:NSUTF8StringEncoding error:nil];[@â€xiuxiuâ€ writeToURL:@â€èµ„æºè·¯å¾„â€ atomically:YES encoding:NSUTF8StringEncoding error:nil];// å¯å˜å­—ç¬¦ä¸²NSMutableString *s = [NSMutableString stringWuthFormat:@â€xiuxiuâ€];[s appendString:@â€shilinâ€];// ä¸å¯å˜å­—ç¬¦ä¸²ä¹Ÿå¯ä»¥æ‹¼æ¥ä½†ä¼šè¿”å›ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²NSString *s2 =@â€xiuâ€;NSString *s3 = [s2 stringByAppendingString:@â€shilinâ€]; æ•°ç»„ç±»NSArrayå’ŒNSMutableArray 123456789101112131415161718192021// Ocæ•°ç»„ä¸èƒ½å­˜æ”¾nilåªèƒ½æ”¾Ocå¯¹è±¡ï¼Œä¸èƒ½æ”¾åŸºæœ¬æ•°æ®ç±»å‹// æ•°ç»„åˆ›å»ºNSArray *a1 = [NSArray array];//a1æ°¸è¿œéƒ½æ˜¯ç©ºçš„NSArray *a2 = [NSArray arrayWithObjict:@â€Jackâ€];NSArray *a3 = [NSArray arrayWithobjects:@â€xiuâ€,@â€shiâ€,nil];// åé¢å¿…é¡»åŠ ä¸ŠnilNSArray *a4 = @[@â€xiuâ€,@â€shiâ€,@â€linâ€];// å¿«é€Ÿåˆ›å»ºæ•°ç»„NSLog(@â€%ldâ€,a3.count);// æ•°ç»„å…ƒç´ ä¸ªæ•°// å…ƒç´ è®¿é—®NSLog(@â€œ%@â€,[a3 objectAtIndex:1]);NSLog(@â€%@â€,a3[0]);// æ•°ç»„çš„éå†for(int i=0;ifor(id obj in a) obj;[a enumerateObjectUsingBlock:^(id obj, NSUInteger idx,BOOL *stop){obj}//stopæ§åˆ¶æ˜¯å¦éå†// å¯å˜æ•°ç»„NSMutableArray *a = [NSmutableArray arrayWithObject:@â€roseâ€, @â€jimâ€, nil];[a addObject:@â€xxâ€];[a removeAllObjects];[a removeObject:@â€xxâ€];[a removeObjectAtIndex:0];// å¯å˜æ•°ç»„ä¸èƒ½ä½¿ç”¨å¿«é€Ÿåˆ›å»ºæ•°ç»„çš„æ–¹æ³• NSSet:æ²¡æœ‰é¡ºåºï¼Œå…¶ä»–ä¸æ•°ç»„ä¸€æ ·çš„ 1234567NSSet *s = [NSSet set];NSSet *s2 = [NSSet setWithObjects:@â€xiuâ€,@â€shiâ€,nil];NSString *s = [s2 anyObject];// éšæœºå–å‡ºå…ƒç´ NSLog(@â€%ldâ€,s2.count);NSMutableSet *s3 = [NSMutableSet set];[s3 addObject:@â€linâ€];// æ·»åŠ å…ƒç´ [s3 removeObject:@â€xiuâ€];// åˆ é™¤ NSDictionary 123456789101112131415161718192021// é”®å€¼å¯¹ï¼ˆpythonä¸­çš„å­—å…¸ï¼‰// åˆ›å»ºNSDictionary *d = [NSDictionary dictionaryWithObject:@â€jackâ€ forKey:@â€nameâ€];NSArray *k = @[@â€nameâ€,@â€qqâ€];NSArray *obj = @[@â€xiuâ€,@â€3213â€];NSDictionary *d2 = [NSDictionary dicationaryWithObjects:obj forKeys:k];NSDictionary *d3 = [NSDictionary dicationaryWithObjectsAndKeys:@â€xiuâ€:@â€nameâ€,@â€23123â€:@â€qqâ€,nil];NSDicationary *d4 = @{@â€nameâ€:@â€xiuâ€,@â€qqâ€:@â€21312â€};id obj = d4[@â€nameâ€];//--xiud4.count;//é”®å€¼å¯¹çš„ä¸ªæ•°å¯å˜å­—å…¸NSMutableDicationary *d = [NSMutableDicationary dicationary];[d setObject:@â€xiuâ€ forKey:@â€nameâ€];NSMutableDicationary *d2 = @{@â€nameâ€:@â€xiuâ€};//å¯ä»¥å¿«é€Ÿåˆ›å»º[d removeObjectForKey:@â€nameâ€];//å­—å…¸çš„é”®ä¸èƒ½æœ‰ç›¸åŒçš„//å­—å…¸éå†for (int i=0;iNSString *key = keys[i] NSString *obj = d [key][d enumrateKeysAndObjectsUsingBlock:^(id key,id obj,BOOL *stop){key obj} NSNumber 12345æŠŠåŸºæœ¬æ•°æ®ç±»å‹åŒ…è£…æˆOcå¯¹è±¡NSNumber *n = [NSNumber numberWithInt:10];int a = [n intValue];@10;//å¿«é€ŸåŒ…è£…åŒ…è£…æˆOcå¯¹è±¡å°±å¯ä»¥æ”¾åˆ°æ•°ç»„ã€å­—å…¸ä¸­ NSValue 1234NSnumberç»§æ‰¿è‡ªNSValue// å°†ç»“æ„ä½“åŒ…è£…æˆOcå¯¹è±¡CGPoint p = CGPointMake(2,2);NSValue *v = [NSValue valueWithPoint:p]; NSDate 1234567NSDate *d = [NSDate date];// ç›´æ¥æ‰“å°dä¼šæ‰“å°é›¶æ—¶åŒºçš„æ—¶é—´ï¼ŒåŒ—äº¬æ˜¯ä¸œå…«åŒº// æ—¥æœŸæ ¼å¼åŒ–NSDateformatter *df = [[NSDateFormatter alloc] init];df.dateFormat = @â€œyy-MM-dd HH:mm:ssâ€;NSString *s = [df stringFromDate:d];NSLog(@â€%@â€,str);","link":"/2015/10/03/%E6%9B%BE%E7%BB%8F%E7%9A%84ios03/"},{"title":"æ›¾ç»çš„ios04","text":"iOSå­¦ä¹ 061-ä»Šå¤©å®ŒæˆUIScrollViewçš„å°ä¾‹å­2-å®ç°å›¾ç‰‡çš„æåˆç¼©æ”¾ï¼Œ1103-scrollview01ï¼Œæ‹–ä¸€ä¸ªUIScrollViewåœ¨æ§åˆ¶å™¨çš„viewä¸Šï¼Œåœ¨UIScrollViewä¸Šæ·»åŠ ä¸€ä¸ªUIImageViewï¼Œæ·»åŠ ä¸€å¼ å¤§çš„å›¾ç‰‡ï¼ŒæŠŠUIIamgeViewçš„é•¿å®½è®¾ç½®æˆå›¾ç‰‡çš„å®½åº¦ï¼Œ3-å…ˆå®ç°å›¾ç‰‡çš„æ»šåŠ¨ï¼Œè®¾ç½®scrollviewçš„contentSizeçš„å¤§å°ä¸ºUIImageViewçš„sizeå¤§å°ï¼Œå°±èƒ½å®ç°æ»šåŠ¨4-å°†UIScrollViewçš„ä»£ç†è®¾ç½®æˆæ§åˆ¶å™¨selfï¼Œå¹¶è®©æ§åˆ¶å™¨éµå®ˆ ï¼Œå¹¶è®©æ§åˆ¶å™¨å®ç°åè®®ä¸­çš„viewForZoomingInScrollView:æ–¹æ³•ï¼Œè¿”å›è¦å®ç°ç¼©æ”¾çš„æ§ä»¶ï¼Œå¹¶è¦è®¾ç½®ScrollViewçš„minimumZoomScaleå’ŒmaximumZoomScale(æˆå€çš„)ï¼Œå°±å¯ä»¥å®ç°ç¼©æ”¾äº†5-å–œé©¬æ‹‰é›…ç®€å•å®ç°ï¼Œ1103-scroolview02ï¼Œä¸»ç•Œé¢ä¸»è¦æ˜¯UIScrollViewçš„å‡ ä¸ªå±æ€§çš„åº”ç”¨ï¼Œå…ˆç›´æ¥æŠŠå€¼å†™ä¸Šäº†ã€‚ 12345self.scrollView.contentSize = CGSizeMake(0, 560);self.scrollView.contentInset = UIEdgeInsetsMake(64, 0, 44, 0);self.scrollView.contentOffset = CGPointMake(0, -64); 6-å›¾ç‰‡è½®æ’­çš„å®ç°ï¼Œ1103-scrollview03ï¼Œåœ¨æ§åˆ¶å™¨çš„viewä¸Šæ”¾ä¸€ä¸ªUIScrollViewï¼Œå®½åº¦æ˜¯æ§åˆ¶å™¨viewçš„å®½åº¦ï¼Œé«˜åº¦è°ƒæ•´åˆé€‚ 7-é€šè¿‡ä»£ç ç”Ÿæˆä¸€å®šæ•°é‡çš„UIIamgeViewï¼Œå¹¶è®¾ç½®å›¾ç‰‡ 8-è®¾ç½®scrollviewçš„pagingEnabledï¼YESï¼Œä¼šè‡ªåŠ¨åˆ†é¡µ 9-è®¾ç½®è‡ªåŠ¨æ»šåŠ¨ï¼Œå®šæ—¶å™¨ï¼Œå°†æ”¹å˜æ”¾åˆ°æ§åˆ¶å™¨ä¸­ 10-å½“ä½ æ‹–ä½å›¾ç‰‡æ—¶ï¼Œå®šæ—¶å™¨ä¼šç´¯ç§¯æ—¶é—´ï¼Œæ¾å¼€åä¼šå˜å¥½å‡ é¡µï¼Œå½“ä½ æŒ‰ä½å›¾ç‰‡æ—¶ï¼Œè¦åœæ­¢å®šæ—¶å™¨ï¼Œæ¾å¼€åå†å¼€å¯å®šæ—¶å™¨ï¼Œè¦å°†å®šæ—¶å™¨å¼€å¯ï¼Œç”¨åˆ°ä»£ç† 11-ä½¿ç”¨Page Controlå¢å¼ºæ•ˆæœï¼Œè®¾ç½®pagecontrolçš„numberOfPagesç­‰äºå›¾ç‰‡æ•°ï¼Œåœ¨changeImageæ–¹æ³•ä¸­è®¾ç½®å½“å‰é¡µ 12-åŸºæœ¬ä¸ŠåŠŸèƒ½å°±å®ç°äº† åšçš„æ¯”è¾ƒç®€å•ï¼Œæ²¡æœ‰ä»€ä¹ˆç‰¹æ®Šçš„çŸ¥è¯†ï¼Œä¹‹å‰éƒ½å­¦ä¹ è¿‡äº†ï¼Œåæ¥æŠŠå›¾ç‰‡è½®æ’­å’Œå–œé©¬æ‹‰é›…ç»¼åˆä¸€èµ·ï¼Œæ²¡æ€ä¹ˆå†™æ³¨é‡Šï¼ŒæŠŠä»£ç è´´å‡ºæ¥ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111//// ViewController.m// 1103-scrollview04//// Created by ä¿®ä¿® on 15/11/3.// Copyright Â© 2015å¹´ cn.Xsoft. All rights reserved.//#import &quot;ViewController.h&quot;@interface ViewController () &lt;&lt;/span&gt;UIScrollViewDelegate&gt;@property (weak, nonatomic) IBOutlet UIScrollView *bigScroll;@property (weak, nonatomic) IBOutlet UIScrollView *smallScroll;@property (weak, nonatomic) IBOutlet UIPageControl *pageControl;@property (weak, nonatomic) IBOutlet UIButton *lowBtn;@property (weak, nonatomic) IBOutlet UIView *topView;@property (weak, nonatomic) IBOutlet UIView *lowView;@property (nonatomic, strong) NSTimer *time;@end@implementation ViewControllerconst int count = 5;- (void)viewDidLoad { [super viewDidLoad]; CGFloat interval = 10; CGFloat scrollH = self.lowBtn.frame.origin.y + interval + self.lowBtn.frame.size.height; self.bigScroll.contentSize = CGSizeMake(0, scrollH); self.bigScroll.showsVerticalScrollIndicator = NO; CGFloat insetTop = self.topView.frame.size.height - self.smallScroll.frame.origin.y + interval; CGFloat insetLow = self.lowView.frame.size.height; self.bigScroll.contentInset = UIEdgeInsetsMake(insetTop, 0, insetLow, 0); self.bigScroll.contentOffset = CGPointMake(0, 0 - insetTop); CGFloat imageW = self.smallScroll.frame.size.width; CGFloat imageH = self.smallScroll.frame.size.height; for (int i = 0; i &lt; count; i++) { UIImageView *image = [[UIImageView alloc] init]; NSString *imagename = [NSString stringWithFormat:@&quot;img_0%d&quot;, i + 1]; image.image = [UIImage imageNamed:imagename]; CGFloat imageX = i * imageW; image.frame = CGRectMake(imageX, 0, imageW, imageH); [self.smallScroll addSubview:image]; } self.smallScroll.showsHorizontalScrollIndicator = NO; self.smallScroll.contentSize = CGSizeMake(count *imageW, 0); self.smallScroll.pagingEnabled = YES; self.pageControl.numberOfPages = count; self.smallScroll.delegate = self; self.time = [NSTimer scheduledTimerWithTimeInterval:1.5 target:self selector:@selector(changeImage) userInfo:nil repeats:YES]; [[NSRunLoop mainRunLoop] addTimer:self.time forMode:NSRunLoopCommonModes];}- (void)changeImage { if (self.pageControl.currentPage == count - 1) { self.pageControl.currentPage = 0; } else { self.pageControl.currentPage++; } CGFloat changeX = self.smallScroll.frame.size.width * self.pageControl.currentPage; [self.smallScroll setContentOffset:CGPointMake(changeX, 0) animated:YES];}- (void)scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate{ self.time = [NSTimer timerWithTimeInterval:1.5 target:self selector:@selector(changeImage) userInfo:nil repeats:YES]; [[NSRunLoop mainRunLoop] addTimer:self.time forMode:NSRunLoopCommonModes];}- (void)scrollViewWillBeginDragging:(UIScrollView *)scrollView{ [self.time invalidate]; self.time = nil;}- (void)scrollViewDidScroll:(UIScrollView *)scrollView{ if (self.time) return; self.pageControl.currentPage = (scrollView.contentOffset.x + scrollView.frame.size.width * 0.5) / scrollView.frame.size.width;}@end","link":"/2015/10/04/%E6%9B%BE%E7%BB%8F%E7%9A%84ios04/"},{"title":"æ›¾ç»çš„ios05","text":"iOSå­¦ä¹ 07å­¦ä¹ ä¸€ä¸ªæ–°çš„æ§ä»¶UITableViewï¼Œä¸‹é¢ç®€ç§°tableview1-UITableViewçš„æ•°æ®æºå’Œä»£ç†ï¼Œä½¿ç”¨tableviewæ˜¾ç¤ºæ•°æ®è¦ç»‘å®šä»–çš„æ•°æ®æºï¼Œç›‘å¬tableviewä¸Šçš„tableviewcelläº‹ä»¶è¦æŒ‡å®šä»£ç†ã€‚ éƒ½æœ‰ä¸¤ç§æ–¹å¼ï¼šè®¾ç½®ä»–çš„å±æ€§dataSourceï¼Œæˆ–è€…æ‹–çº¿2-ç»‘å®šæ•°æ®æºå°±è¦éµå®ˆæ•°æ®æºçš„åè®®å¹¶å®ç°ç›¸åº”çš„æ–¹æ³•3-tableviewå¯ä»¥å±•ç¤ºå•ç»„æ•°æ®ï¼Œä¹Ÿå¯ä»¥åˆ†ç»„å±•ç¤ºæ•°æ®ï¼Œtableviewæœ‰ä¸¤ç§æ ·å¼UITableViewStylePlainå’ŒUITableViewStyleGrouped(åˆ†ç»„æ¯”è¾ƒæ˜æ˜¾)4-åè®®çš„å‡ ä¸ªæ–¹æ³•ï¼š 123- (NSInteger)numberOfSectionInTableView:(UITableView *)tableView; //è¿”å›ä¸€å…±æœ‰å¤šå°‘ç»„æ•°æ®ï¼Œä¼ å…¥å½“å‰çš„tableview- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section; // è¿”å›æ¯ç»„æœ‰å¤šå°‘è¡Œæ•°æ®ï¼Œä¼ å…¥å•å‰çš„tableviewå’Œå½“å‰çš„ç»„åºå·- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath; // æ¯ä¸€è¡Œæ˜¾ç¤ºçš„å†…å®¹æ˜¯ä»€ä¹ˆï¼Œä¼šè¿”å›ä¸€ä¸ªUITableViewCellï¼Œå°±æ˜¯tableviewçš„ä¸€è¡Œã€‚ä¼ å…¥å½“å‰çš„tableviewå’ŒNSIndexPath(ç»„åºå·ï¼Œåˆ—åºå·) 5-ä»‹ç»ä¸€ä¸‹UITableViewCellï¼Œä»–å°±æ˜¯UITableViewçš„ä¸€è¡Œ6-UITableViewCellä¸­æœ‰ä¸€ä¸ªé»˜è®¤çš„å­è§†å›¾ï¼šcontentViewï¼Œå¯ä»¥ä½¿ç”¨cellçš„accessoryViewå±æ€§æ¥æŒ‡å®šä¸€äº›è¾…åŠ©è§†å›¾7-contentViewä¸‹è¿˜æœ‰ä¸‰ä¸ªå­è§†å›¾textLabelã€detailTextLabelå’ŒUIIamgeViewï¼Œé€šè¿‡è®¾ç½®å½“å‰cellçš„UITableViewCellStyleçš„å±æ€§æ¥å†³å®šæ˜¾ç¤ºå­è§†å›¾çš„ä½ç½®8-å‡ ä¸ªå°ä¾‹å­ æ±½è½¦å“ç‰Œï¼šï¼ˆæ²¡è´´æ¨¡å‹çš„ä»£ç ï¼Œæ¨¡å‹å°±æ˜¯ä¹‹å‰å­¦è¿‡çš„ï¼Œæ”¹ä¸‹å±æ€§å°±å¥½ï¼‰ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091929394//// ViewController.m// 1104-tableview01//// Created by ä¿®ä¿® on 15/11/4.// Copyright Â© 2015å¹´ cn.Xsoft. All rights reserved.//#import &quot;ViewController.h&quot;#import &quot;LSCargroup.h&quot;@interface ViewController () &lt;&lt;/span&gt;UITableViewDataSource&gt;@property (weak, nonatomic) IBOutlet UITableView *tableView; @property (nonatomic, strong) NSArray *cargroups;@end@implementation ViewController- (void)viewDidLoad { [super viewDidLoad]; }# pragma mark - getteræ–¹æ³•æ‡’åŠ è½½- (NSArray *)cargroups{ if (_cargroups == nil) { NSString *path = [[NSBundle mainBundle] pathForResource:@&quot;cars_simple.plist&quot; ofType:nil]; NSArray *array = [NSArray arrayWithContentsOfFile:path]; NSMutableArray *temp = [NSMutableArray array]; for (NSDictionary *dict in array) { LSCargroup *group = [LSCargroup cargroupWithDict:dict]; [temp addObject:group]; } _cargroups = temp; } return _cargroups;}# pragma mark - æ•°æ®æºæ–¹æ³•- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView{ return self.cargroups.count;} - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{ // æ‹¿åˆ°å½“å‰çš„æ¨¡å‹ï¼Œæ¨¡å‹ä¸­carsæ•°ç»„çš„é•¿åº¦å°±æ˜¯æ¯ç»„çš„è¡Œæ•° LSCargroup *ss = _cargroups[section]; return ss.cars.count;} - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{ static NSString *ID = @&quot;car&quot;; // æ€§èƒ½ä¼˜åŒ– // å…ˆåœ¨ç¼“å­˜æ± ä¸­å¯»æ‰¾æœ‰æ²¡æœ‰å¯ä»¥å¾ªç¯åˆ©ç”¨çš„cellï¼ŒæŒ‰ç…§æ ‡è¯†IDæ¥å¯»æ‰¾ UITableViewCell *cell = [self.tableView dequeueReusableCellWithIdentifier:ID]; // è¦æ˜¯æ‰¾ä¸åˆ°ï¼Œå°±è¦è‡ªå·±å»åˆ›å»ºä¸€ä¸ª if (cell == nil) { cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:ID]; } // ç»™cellæ·»åŠ æ•°æ® // æ‹¿åˆ°æ¨¡å‹ LSCargroup *ss = _cargroups[indexPath.section]; NSString *carname = ss.cars[indexPath.row]; // èµ‹å€¼ cell.textLabel.text = carname; return cell;} - (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section{ // æ‹¿åˆ°æ¨¡å‹ LSCargroup *ss = _cargroups[section]; return ss.title;} - (NSString *)tableView:(UITableView *)tableView titleForFooterInSection:(NSInteger)section{ // æ‹¿åˆ°æ¨¡å‹ LSCargroup *ss = _cargroups[section]; return ss.desc;}- (BOOL)prefersStatusBarHidden{ return YES;}@endä¸€äº›å…³é”®çš„æ³¨é‡Šè´´ä¸å‡ºæ¥ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111//// ViewController.m// 1104-tableview02//// Created by ä¿®ä¿® on 15/11/5.// Copyright Â© 2015å¹´ cn.Xsoft. All rights reserved.//#import &quot;ViewController.h&quot;#import &quot;SLHero.h&quot;@interface ViewController () &lt;&lt;/span&gt;UITableViewDataSource, UITableViewDelegate&gt; @property (nonatomic, strong) NSArray *heros;@property (weak, nonatomic) IBOutlet UITableView *tableView;@end@implementation ViewController- (void)viewDidLoad { [super viewDidLoad]; // è®¾ç½®æ¯ä¸€è¡Œçš„é«˜åº¦ï¼Œé»˜è®¤44 self.tableView.rowHeight = 60;}#pragma mark - getteræ–¹æ³•é‡å†™- (NSArray *)heros{ if (_heros == nil) { NSString *path = [[NSBundle mainBundle] pathForResource:@&quot;heros.plist&quot; ofType:nil]; NSArray *herostemp = [NSArray arrayWithContentsOfFile:path]; NSMutableArray *tempary = [NSMutableArray array]; for (NSDictionary *dict in herostemp) { SLHero *hero = [SLHero heroWithDict:dict]; [tempary addObject:hero]; } _heros = tempary; } return _heros;}#pragma mark - æ•°æ®æºæ–¹æ³•// å¯ä»¥ä¸å†™ï¼Œé»˜è®¤å°±æ˜¯ä¸€ç»„- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView{ return 1;}- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{ return self.heros.count;}- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{ // è®¾ç½®ä¸€ä¸ªcellçš„å”¯ä¸€æ ‡è¯† NSString * ID = @&quot;hero&quot;; // åœ¨ç¼“å­˜æ± ä¸­å¯»æ‰¾æœ‰æ²¡æœ‰å¯ä»¥é‡å¤åˆ©ç”¨çš„cellï¼Œå¹¶ä¸”æ ‡è¯†æ˜¯ID UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:ID]; // å¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œå°±è‡ªå·±åˆ›å»ºä¸€ä¸ªcellï¼Œå¹¶è®©ä»–çš„æ ‡è¯†ä¸ºID if (cell == nil) { cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:ID]; } // è®¾ç½®cellæ˜¾ç¤ºçš„å€¼ // æ‹¿åˆ°å½“å‰çš„æ¨¡å‹ SLHero *hero = self.heros[indexPath.row]; cell.textLabel.text = hero.name; cell.detailTextLabel.text = hero.desc; cell.imageView.image = [UIImage imageNamed:hero.icon]; // è¿”å›cell return cell;}#pragma mark - ä»£ç†æ–¹æ³• - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{ // å–å‡ºå½“å‰çš„æ¨¡å‹ SLHero *hero = self.heros[indexPath.row]; // å¼¹æ¡†ï¼ŒiOS9ä¸­Appleæ¨èä½¿ç”¨çš„å¼¹æ¡†æ–¹æ³•ï¼Œä¹‹å‰çš„UIAlertViewåœ¨iOS9ä¸é€‚ç”¨ // å…ˆå®šä¹‰ä¸€ä¸ªå¼¹æ¡†ï¼Œæ ‡é¢˜ã€æ˜¾ç¤ºçš„ä¿¡æ¯ã€ä¼˜å…ˆé€‰å–çš„style UIAlertController *alert = [UIAlertController alertControllerWithTitle:@&quot;è‹±é›„ä¿¡æ¯&quot; message:nil preferredStyle:UIAlertControllerStyleAlert]; // åœ¨å®šä¹‰å¼¹æ¡†çš„æŒ‰é’®ï¼Œæ ‡é¢˜ã€å½¢å¼ã€ä¸€ä¸ªblockï¼ˆç”¨æ¥å†™æŒ‰é’®çš„ç‚¹å‡»æ–¹æ³•ï¼‰ // å–æ¶ˆæŒ‰é’® UIAlertAction *cancelBtn = [UIAlertAction actionWithTitle:@&quot;å–æ¶ˆ&quot; style:UIAlertActionStyleCancel handler:^(UIAlertAction * _Nonnull action) { }]; // ä¿®æ”¹æŒ‰é’® UIAlertAction *deBtn = [UIAlertAction actionWithTitle:@&quot;ä¿®æ”¹&quot; style:UIAlertActionStyleDefault handler:^(UIAlertAction * _Nonnull action) { // æ‹¿åˆ°å¼¹æ¡†ä¸Šçš„textField UITextField *textField = alert.textFields[0]; // ä¿®æ”¹æ¨¡å‹æ•°æ®ï¼Œ hero.name = textField.text; // å±€éƒ¨åˆ·æ–°æ•°æ® [self.tableView reloadRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationBottom]; }]; // ç»™å¼¹æ¡†æ·»åŠ ä¸€ä¸ªUITextFieldï¼Œæ˜¾ç¤ºè‹±é›„çš„åå­— [alert addTextFieldWithConfigurationHandler:^(UITextField *textField) { textField.text = hero.name; }]; // å°†ä¸¤ä¸ªæŒ‰é’®æ”¾ä¸Šå» [alert addAction:cancelBtn]; [alert addAction:deBtn]; // æ˜¾ç¤ºå¼¹æ¡† [self presentViewController:alert animated:YES completion:nil];}@endæ–‡æ¡£æ³¨é‡Šè´´ä¸å‡ºæ¥ï¼Œï¼Œï¼Œï¼Œ","link":"/2015/10/05/%E6%9B%BE%E7%BB%8F%E7%9A%84ios05/"},{"title":"æ›¾ç»çš„ios06","text":"å¥½ä¹…æ²¡å†™äº†ï¼Œç°åœ¨ä¸€èµ·çœ‹å®Œç„¶åå†™çš„æ€»ç»“ï¼Œä»£ç æ²¡æœ‰åœ¨æ–°æµªå‘ï¼Œæ„Ÿè§‰æ–°æµªå¯¹ä»£ç çš„æ”¯æŒä¸æ˜¯å¾ˆå¥½ï¼Œæ‰€ä»¥æˆ‘æŠŠä»£ç éƒ½æ”¾åˆ°äº†csdnï¼Œåœ¨è¿™å†™ä¸ªé“¾æ¥å§è‡ªå®šä¹‰cellçš„ä»£ç 01è‡ªå®šä¹‰cellçš„ä»£ç 02 iOSå­¦ä¹ 08æ€»ç»“UITableViewCellçš„åŸºæœ¬ç”¨æ³• ä½¿ç”¨xibè‡ªå®šä¹‰cell å¦‚æœæ¯ä¸€è¡Œcelléƒ½ä¸€æ ·ï¼Œä¸”ç³»ç»Ÿæä¾›çš„cellä¸èƒ½æ»¡è¶³è¦æ±‚ï¼Œå°±å¯ä»¥åˆ›å»ºxibæ–‡ä»¶è‡ªå®šä¹‰cellï¼Œ ä¸ºxibä¸­çš„cellæ·»åŠ ä¸€ä¸ªç±»ï¼Œå†ç±»ä¸­è§£æxibåˆ›å»ºè‡ªå®šä¹‰çš„cellï¼Œæä¾›ç»™åˆ«äººç”¨ï¼Œè¿˜è¦è®©ç±»æ‹¥æœ‰ç›¸åº”çš„æ¨¡å‹ï¼Œ åœ¨cellçš„ç±»ä¸­å®ç°cellçš„é‡ç”¨ åœ¨æ§åˆ¶å™¨çš„è¿”å›cellçš„æ–¹æ³•ä¸­ï¼Œåˆå§‹åŒ–cellï¼Œå¹¶ä¸ºcellä¼ é€’æ¨¡å‹ï¼Œè®¾ç½®æ•°æ® å…³äºcellé‡ç”¨çš„é—®é¢˜ï¼Œå½“åœ¨ç¼“å­˜æ± ä¸­æ‹¿åˆ°cellçš„æ—¶å€™ï¼Œè¦å°†æ§ä»¶çš„çŠ¶æ€è°ƒæ•´æ­£ç¡® ä½¿ç”¨ä»£ç è‡ªå®šä¹‰cell å½“æ¯ä¸€è¡Œçš„cellçš„é«˜åº¦ä¸ç¡®å®šï¼Œå†…éƒ¨æ˜¾ç¤ºçš„å†…å®¹ä¸ç¡®å®šæ—¶ï¼Œå°±è¦ä½¿ç”¨ä»£ç åˆ›å»ºæˆ‘ä»¬éœ€è¦çš„cell åˆ›å»ºä¸€ä¸ªSLOwnCellçš„ç±»ï¼Œç”¨æ¥è‡ªå®šä¹‰cellï¼Œç»§æ‰¿è‡ªæˆ‘ä»¬ç³»ç»Ÿçš„UITableViewCell é€šè¿‡é‡å†™çˆ¶ç±»çš„initæ–¹æ³•ï¼Œå‘cellä¸­æ·»åŠ è‡ªå·±çš„æ§ä»¶ï¼Œåœ¨è¿™é‡Œè®¾ç½®æ§ä»¶ä¸å˜çš„æ•°æ®ï¼Œï¼ˆä¸»è¦æ€æƒ³å°±æ˜¯å…ˆå°†è¦æ˜¾ç¤ºçš„æ‰€æœ‰æ§ä»¶åŠ è¿›å»ï¼Œä¹‹åå†æ ¹æ®æƒ…å†µè®¾ç½®æ˜¯å¦æ˜¾ç¤ºâ€“æ˜¯å¦è®¾ç½®æ§ä»¶çš„Frameï¼‰ æä¾›ä¸€ä¸ªç±»æ–¹æ³•ï¼Œåˆ›å»ºcellåœ¨ç±»æ–¹æ³•ä¸­å®ç°cellçš„é‡ç”¨ï¼Œè°ƒç”¨initåˆå§‹åŒ–cell æ¯ä¸ªcellä¸­çš„æ§ä»¶æ•°æ®ä¸åŒï¼Œæ‰€ä»¥æ¯ä¸ªæ§ä»¶ä½ç½®å’Œæ¯ä¸ªcellçš„é«˜åº¦å°±ä¸ä¸€å®šï¼Œæ‰€ä»¥æˆ‘ä»¬è¦åˆ›å»ºä¸€ä¸ªä½ç½®æ¨¡å‹ï¼ˆSLXxxFrameï¼‰ è¿™ä¸ªä½ç½®æ¨¡å‹ä¸­åŒ…å«æ•°æ®æ¨¡å‹ï¼Œå’Œä¹‹åæ¯ä¸ªæ§ä»¶çš„ï¼ˆCGRectï¼‰xxxFrame åœ¨è®¡ç®—frameçš„æ—¶å€™ï¼Œè¦è®¡ç®—æ–‡æœ¬åœ¨å±å¹•çš„ä½ç½®ï¼ŒNSStringä¸­æœ‰ä¸€ä¸ªå¯¹è±¡æ–¹æ³•ï¼Œ åœ¨åˆå§‹åŒ–cellåä¸ºSLOwnCellç±»ä¸­çš„ä½ç½®æ¨¡å‹ä¼ é€’å€¼ï¼Œåœ¨ä½ç½®æ¨¡å‹çš„setteræ–¹æ³•çš„é‡å†™ä¸­ï¼Œä¸ºæ§ä»¶è®¾ç½®ä½ç½®å’Œæ•°æ® QQèŠå¤© ä¹Ÿæ˜¯ç”¨ä»£ç åˆ›å»ºcellï¼Œå°±è¯´ä¸€ä¸‹å‡ ä¸ªé‡è¦çš„ ç›¸åŒæ—¶é—´å°±æ˜¾ç¤ºä¸€ä¸ªï¼šåœ¨æ¶ˆæ¯æ¨¡å‹ä¸­å£°æ˜ä¸€ä¸ªBOOLå‹æ ‡è¯†sameTimeã€‚åœ¨æ§åˆ¶å™¨çš„æ¨¡å‹çš„getteræ–¹æ³•ä¸­ï¼Œä½¿ç”¨å®šä¹‰çš„å¯å˜æ•°ç»„å¯ä»¥å–å‡ºä¸Šä¸€ä¸ªå…ƒç´ ï¼Œä¸å½“å‰æ—¶é—´åˆ¤æ–­ï¼Œç›¸åŒå°±è®©sameTime =YESï¼›åœ¨è®¾ç½®timeæ§ä»¶çš„Frameçš„æ—¶å€™ï¼Œå°±ä¸è®¾ç½®å€¼ã€‚ èŠå¤©æ°”æ³¡ï¼šæ¶‰åŠåˆ°å›¾ç‰‡çš„æ‹‰ä¼¸ï¼Œè¦ä¿è¯å›¾ç‰‡çš„è¾¹ç¼˜ä¸å˜ï¼Œå°±è¦æŠŠä¸­å¿ƒæ”¾å¤§ï¼ŒUIImageæä¾›äº†ä¸€ä¸ªæ–¹æ³• é€šçŸ¥æœºåˆ¶ï¼š 123456789101112131415161718192021222324252627// é€šçŸ¥ï¼šNSNotificationï¼Œä¸€èˆ¬åŒ…å«ä¸‰ä¸ªå±æ€§ï¼š(NSString *)nameé€šçŸ¥çš„åç§°ã€(id)objecté€šçŸ¥çš„å‘å¸ƒè€…ã€(NSDictionary *)userInfoé€šçŸ¥çš„ä¸€äº›é¢å¤–ä¿¡æ¯ï¼›åˆå§‹åŒ–ä¸€ä¸ªé€šçŸ¥+ (instancetype)notificationWithName:(NSString *)aName object:(id)anObject;+ (instancetype)notificationWithName:(NSString *)aName object:(id)anObject userInfo:(NSDictionary *)aUserInfo;- (instancetype)initWithName:(NSString *)name object:(id)object userInfo:(NSDictionary *)userInfo;&gt;é€šçŸ¥ä¸­å¿ƒï¼šNSNotificationCenterï¼Œç®¡ç†é€šçŸ¥çš„æ¥æ”¶ï¼Œæ³¨å†Œç›‘å¬å™¨ï¼›å‘å¸ƒé€šçŸ¥ï¼š- (void)postNotification:(NSNotification *)notification; // å‘å¸ƒä¸€ä¸ªnotificationé€šçŸ¥ï¼Œå¯åœ¨notificationå¯¹è±¡ä¸­è®¾ç½®é€šçŸ¥çš„åç§°ã€é€šçŸ¥å‘å¸ƒè€…ã€é¢å¤–ä¿¡æ¯ç­‰ - (void)postNotificationName:(NSString *)aName object:(id)anObject; // å‘å¸ƒä¸€ä¸ªåç§°ä¸ºaNameçš„é€šçŸ¥ï¼ŒanObjectä¸ºè¿™ä¸ªé€šçŸ¥çš„å‘å¸ƒè€… - (void)postNotificationName:(NSString *)aName object:(id)anObject userInfo:(NSDictionary *)aUserInfo;// å‘å¸ƒä¸€ä¸ªåç§°ä¸ºaNameçš„é€šçŸ¥ï¼ŒanObjectä¸ºè¿™ä¸ªé€šçŸ¥çš„å‘å¸ƒè€…ï¼ŒaUserInfoä¸ºé¢å¤–ä¿¡æ¯// ç›‘å¬å™¨ï¼šç”¨æ¥æ¥æ”¶æ¶ˆæ¯ï¼Œç›‘å¬æ˜¯å¦å‘å‡ºæˆ‘æƒ³è¦çš„æ¶ˆæ¯ï¼Œæ³¨å†Œç›‘å¬å™¨ï¼Œ- (void)addObserver:(id)observer selector:(SEL)aSelector name:(NSString *)aName object:(id)anObject;observerï¼šç›‘å¬å™¨ï¼Œå³è°è¦æ¥æ”¶è¿™ä¸ªé€šçŸ¥aSelectorï¼šæ”¶åˆ°é€šçŸ¥åï¼Œå›è°ƒç›‘å¬å™¨çš„è¿™ä¸ªæ–¹æ³•ï¼Œå¹¶ä¸”æŠŠé€šçŸ¥å¯¹è±¡å½“åšå‚æ•°ä¼ å…¥aNameï¼šé€šçŸ¥çš„åç§°ã€‚å¦‚æœä¸ºnilï¼Œé‚£ä¹ˆæ— è®ºé€šçŸ¥çš„åç§°æ˜¯ä»€ä¹ˆï¼Œç›‘å¬å™¨éƒ½èƒ½æ”¶åˆ°è¿™ä¸ªé€šçŸ¥anObjectï¼šé€šçŸ¥å‘å¸ƒè€…ã€‚å¦‚æœä¸ºanObjectå’ŒaNameéƒ½ä¸ºnilï¼Œç›‘å¬å™¨éƒ½æ”¶åˆ°æ‰€æœ‰çš„é€šçŸ¥ä¸€èˆ¬åœ¨ç›‘å¬å™¨é”€æ¯ä¹‹å‰å–æ¶ˆæ³¨å†Œï¼ˆå¦‚åœ¨ç›‘å¬å™¨ä¸­åŠ å…¥ä¸‹åˆ—ä»£ç ï¼‰ï¼š- (void)dealloc { //[super dealloc]; éARCä¸­éœ€è¦è°ƒç”¨æ­¤å¥ [[NSNotificationCenter defaultCenter] removeObserver:self];} UIDeciveçš„é€šçŸ¥ï¼šé€šè¿‡[UIDevice currentDevice]å¯ä»¥è·å–è¿™ä¸ªå•ç²’å¯¹è±¡UIDeciveä¼šä¸æ–­åœ°å‘å¸ƒä¸€äº›é€šçŸ¥ï¼šè®¾å¤‡æ—‹è½¬ã€ç”µæ± çŠ¶æ€æ”¹å˜ã€ç”µæ± ç”µé‡æ”¹å˜ã€è¿‘è·ç¦»ä¼ æ„Ÿå™¨ é”®ç›˜çš„é€šçŸ¥ï¼š 123456&gt;UIKeyboardWillShowNotification // é”®ç›˜å³å°†æ˜¾ç¤º&gt;UIKeyboardDidShowNotification // é”®ç›˜æ˜¾ç¤ºå®Œæ¯•&gt;UIKeyboardWillHideNotification // é”®ç›˜å³å°†éšè—&gt;UIKeyboardDidHideNotification // é”®ç›˜éšè—å®Œæ¯•&gt;UIKeyboardWillChangeFrameNotification // é”®ç›˜çš„ä½ç½®å°ºå¯¸å³å°†å‘ç”Ÿæ”¹å˜&gt;UIKeyboardDidChangeFrameNotification // é”®ç›˜çš„ä½ç½®å°ºå¯¸æ”¹å˜å®Œæ¯• å‘é€èŠå¤©æ¶ˆæ¯ï¼šé”®ç›˜å±äºè°ƒå‡ºä»–çš„é‚£ä¸ªå¯¹è±¡ï¼ˆUITextFiledï¼‰ï¼Œé€šè¿‡ä»–çš„ä¸€äº›å±æ€§å¯ä»¥ä¿®æ”¹é”®ç›˜çš„ä¸€äº›å±æ€§ï¼Œåœ¨UITextFiledçš„ä»£ç†ä¸­æœ‰ç›‘å¬é”®ç›˜ç‚¹å‡»äº‹ä»¶çš„ä»£ç†æ–¹æ³•ï¼Œå¯ä»¥è®©æ§åˆ¶å™¨ç§°ä¸ºä»£ç†ï¼Œå®Œæˆå‘é€æ¶ˆæ¯ é™æ€cellå°†stroyboardä¸­çš„viewControlleræ¢æˆtableViewControllerï¼Œå¹¶è®©tableViewControllerçš„ç±»æŒ‡å‘é»˜è®¤çš„SLViewControllerï¼Œä¿®æ”¹å…¶ä¸­çš„tableviewï¼Œè®©ä»–å˜æˆé™æ€ï¼Œæ·»åŠ é™æ€çš„cell","link":"/2015/10/06/%E6%9B%BE%E7%BB%8F%E7%9A%84ios06/"},{"title":"æ›¾ç»çš„ios07","text":"è¿™äº›å¤©ä¸€ç›´åœ¨å¿™æœŸæœ«å¤ä¹ çš„äº‹ï¼Œè€½è¯¯äº†å¥½äº›å¤©ï¼Œæ¥ä¸‹çš„è€ƒè¯•å‘¨ï¼Œè¯¾å°‘äº†å°±å¯ä»¥æœ‰æ›´å¤šæ—¶é—´çœ‹è§†é¢‘å’Œå†™ä»£ç äº†ï¼Œä¸‹é¢æ˜¯ä»Šå¤©å†™çš„ä¸€ç‚¹ç‚¹ã€‚ iOSå­¦ä¹ 09å‡ ä¸ªå¸¸ç”¨çš„æ§ä»¶1206-PickerVIew åŸå¸‚é€‰æ‹©æ•°æ®æºï¼šUIPickerViewDataSourceè®¾ç½®æœ‰å¤šå°‘åˆ—å’Œå¤šå°‘è¡Œ (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView; (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component;ä»£ç†ï¼šUIPickerViewDelegateè®¾ç½®æ¯ä¸€åˆ—æ¯ä¸€è¡Œæ˜¾ç¤ºçš„æ˜¯ä»€ä¹ˆå†…å®¹ (CGFloat)pickerView:(UIPickerView *)pickerView widthForComponent:(NSInteger)component; (CGFloat)pickerView:(UIPickerView *)pickerView rowHeightForComponent:(NSInteger)component; (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component; (UIView *)pickerView:(UIPickerView *)pickerView viewForRow:(NSInteger)row forComponent:(NSInteger)component reusingView:(UIView *)view; (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component; åˆ·æ–°æ•°æ®(void)reloadAllcomponent;// æ‰€æœ‰åˆ—(void)reloadComponent:(NSInteger)component;//æŒ‡å®šåˆ—ä¸»åŠ¨é€‰æ‹©ç¬¬componentåˆ—å’Œç¬¬rowè¡Œ(void)selectRow:(NSInterger)row inComponent:(NSInteger)component animated:(BOOL)animated;å¾—åˆ°ç¬¬componentåˆ—çš„é€‰ä¸­è¡Œ(NSInteger)selectdRowInComponent:(NSinteger)component;1206-UIDatePicker @property (nonatomic) UIDatePickerMode datePickerMode;// datePickerçš„æ˜¾ç¤ºæ¨¡å¼ @property (nonatomic, retain) NSLocale *locale;// æ˜¾ç¤ºçš„åŒºåŸŸè¯­è¨€ 2.ç›‘å¬UIDatePickerçš„é€‰æ‹© å› ä¸ºUIDatePickerç»§æ‰¿è‡ªUIControl,æ‰€ä»¥é€šè¿‡addTarget:â€¦ç›‘å¬ 1206-Pickerä½œä¸šï¼ˆç»¼åˆï¼Œé”®ç›˜å·¥å…·æ¡ï¼‰ é€šè¿‡textfieldçš„inputViewå±æ€§æ›´æ”¹é”®ç›˜ textFieidçš„inputAccessoryViewå±æ€§è®¾ç½®é”®ç›˜ä¸Šé¢çš„å·¥å…·æ¡ æ³¨ï¼šåŠ æ·±å¯¹ä»£ç†ä½¿ç”¨çš„ç†è§£ è‡ªå·±å†™è¿™äº›å°±æ˜¯æƒ³ä»¥åå¯ä»¥æœ‰ä¸œè¥¿å¤ä¹ ï¼Œå¹¶ä¸èƒ½ç»™æ¯”åˆ«äººå¸¦æ¥ä»€ä¹ˆï¼Œä¸»è¦æ˜¯ä¸ºäº†è‡ªå·±ï¼Œä¸€ç›´åšæŒå§ï¼ è·³ä¸€èŠ‚ï¼Œä¸Šä¸€ä¸ªå†™çš„å¤ªæ•£äº†ï¼Œå°±å…ˆä¸æ”¾è¿™é‡Œäº†iOS11ä¸€ã€æ§åˆ¶å™¨çš„å¤šç§åˆ›å»ºè¿‡ç¨‹æ§åˆ¶å™¨SLViewControllerï¼šUIVIewController*ä»£ç åˆ›å»ºï¼šSLViewController *con = [SLViewController alloc] init];// initç›´æ¥æˆä¸ºæ ¹æ§åˆ¶å™¨*storyboardåˆ›å»ºï¼ˆä¸ä½¿ç”¨main.storyboardï¼‰å…ˆåŠ è½½storyboardæ–‡ä»¶UIStoryboard *sb = [UIStoryboard storyboardWithName:@â€œslâ€ bundle:nil];ç„¶ååˆå§‹åŒ–storyboardä¸­çš„æ§åˆ¶å™¨SLViewController *con = [sb instantiateInitialViewController];//storyboardç®­å¤´æŒ‡å‘çš„æ§åˆ¶å™¨SLViewController *con = [sb instantiateViewControllerWithindetifier:@â€œslâ€];//æ ‡è¯†ä¸ºslçš„æ§åˆ¶å™¨*xibæ–‡ä»¶åˆ›å»ºSLViewController *con = [[SLViewcontroller alloc] initWithNibName:@â€œSLViewControllerâ€];äºŒã€æ§åˆ¶å™¨Viewçš„åˆ›å»ºï¼ˆSLViewControllerï¼‰if loadView ï¼šæ ¹æ®oadViewçš„ä»£ç åˆ›å»ºï¼›else if storyboard ï¼šæ ¹æ®storyboardæè¿°åˆ›å»ºelse if nibNameï¼šæ ¹æ®nibNameå¯¹åº”çš„xibåˆ›å»ºelse if SLView.xibï¼šæ ¹æ®SLView.xibåˆ›å»ºelse if SLViewController.xibï¼šæ ¹æ®SLViewController.xibåˆ›å»ºelse :åˆ›å»ºä¸€ä¸ªç©ºçš„viewæ§åˆ¶å™¨çš„viewæ˜¯å»¶æ—¶åŠ è½½çš„ï¼Œä¸‰ã€å¤šæ§åˆ¶å™¨çš„ç®¡ç†*UINavigationControlleråœ¨æ§åˆ¶å™¨ä¸Šæ–¹ä¼šæœ‰ä¸€ä¸ªå¯¼èˆªæ ï¼ˆè®¾ç½®ï¼‰ åˆå§‹åŒ–UINavigationControllerè®¾ç½®UIWindowçš„æ ¹æ§åˆ¶å™¨ä¸ºUINavigationControllerä½¿ç”¨pushæ–¹æ³•æ·»åŠ å­æ§åˆ¶å™¨UINavigationControllerä»¥æ ˆ(å…ˆè¿›åå‡º)çš„å½¢å¼ä¿å­˜å­æ§åˆ¶å™¨ï¼Œæ€»æ˜¯æ˜¾ç¤ºæ ˆé¡¶æ§åˆ¶å™¨çš„viewNSArray *viewControllers;/NSArray *childViewController;ä½¿ç”¨pushæ–¹æ³•ï¼ŒæŠŠå­æ§åˆ¶å™¨å‹å…¥æ ˆ (void)pushViewController:(UIViewController)viewController animated:(BOOL)animated;ä½¿ç”¨popæ–¹æ³•å¯ä»¥ç§»é™¤å­æ§åˆ¶å™¨ (UIViewController *)popViewControllerAnimated:(BOOL)animated;// ç§»é™¤æ ˆé¡¶çš„æ§åˆ¶å™¨ (NSArray *)popToViewController:(UIViewController *)viewController animated:(BOOL)animated;// å›åˆ°æŒ‡å®šçš„æ§åˆ¶å™¨ (NSArray *)popToRootViewControllerAnimated:(BOOL)animated;// å›åˆ°æ ¹æ§åˆ¶å™¨å¯¼èˆªæ çš„ä½¿ç”¨æ˜¾ç¤ºçš„å†…å®¹ç”±æ ˆé¡¶æ§åˆ¶å™¨çš„navigationItemå±æ€§å†³å®šUINavigationItemæœ‰ä»¥ä¸‹å±æ€§ï¼š@property(nonatomic, retain)UIBarButtonItem *backBarButtonItem;// å·¦ä¸Šè§’çš„è¿”å›æŒ‰é’®@property(nonatomic, retain)UIView *titleView;// ä¸­é—´çš„æ ‡é¢˜è§†å›¾@property(nonatomic, copy)NSString *title;// ä¸­é—´æ ‡é¢˜æ–‡å­—@property(nonatomic, retain)UIBarButtonItem *leftBarButtonItem;// å·¦ä¸Šè§’è§†å›¾@property(nonatomic, retain)UIBarButtonItem *rightBarButtonItem;// å³ä¸Šè§’è§†å›¾ä½¿ç”¨storyboardæ—¶å¯ä»¥ç›´æ¥æ‹–çº¿å®ç°è·³è½¬ï¼Œåœ¨ä¸¤ä¸ªæ§åˆ¶å™¨ä¹‹é—´ä¼šæœ‰ä¸€æ¡çº¿ï¼Œè¿™æ¡çº¿æ˜¯ä¸€ä¸ªUIStoryboardSegueå¯¹è±¡(segue)æ¯ä¸ªsegueéƒ½æœ‰ä¸‰ä¸ªå±æ€§ï¼šidentifier(å”¯ä¸€æ ‡è¯†)ã€sourceViewController(æ¥æºæ§åˆ¶å™¨)ã€destinationViewController(ç›®æ ‡æ§åˆ¶å™¨)segueæœ‰è‡ªåŠ¨è·³è½¬å’Œæ‰‹åŠ¨è·³è½¬ å½“ç‚¹å‡»æŸä¸ªæ§ä»¶ä¸éœ€è¦åšä¸€äº›äº‹æƒ…çš„äº‹åï¼Œå°±å¯ä»¥ç›´æ¥æ‹–çº¿ï¼Œå®ç°è·³è½¬å¦‚æœéœ€è¦åœ¨è·³è½¬å‰åšä¸€äº›åˆ¤æ–­(ç™»é™†)ï¼Œéœ€è¦æ‰‹åŠ¨è·³è½¬ã€‚å°†æ¥æºæ§åˆ¶å™¨æ‹–çº¿åˆ°ç›®æ ‡æ§åˆ¶å™¨ï¼Œä¸ºsegueç»‘å®šå”¯ä¸€æ ‡è¯†ï¼Œæ‰§è¡Œ[self performSegueWithIdentifier:@â€œlogin2otherâ€ sender:nil];æ§åˆ¶å™¨ä¹‹é—´çš„æ•°æ®ä¼ é€’é¡ºä¼ ï¼š (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender;// åœ¨å‡†å¤‡è·³è½¬å‰è°ƒç”¨ï¼Œé€šè¿‡segueæ‹¿åˆ°ç›®æ ‡æ§åˆ¶å™¨ï¼Œå„å¡”ä¼ é€’ä¸€äº›æ•°æ®é€†ä¼ ï¼šé€šè¿‡ä»£ç†ï¼Œè®©æ¥æºæ§åˆ¶å™¨æˆä¸ºç›®æ ‡æ§åˆ¶å™¨çš„ä»£ç†ï¼Œå½“ç›®æ ‡æ§åˆ¶å™¨ç‚¹å‡»å‡ºæ ˆçš„æ—¶å€™é€šçŸ¥ä»£ç†ï¼Œå¹¶å°†ç›¸åº”çš„æ•°æ®ä¼ è¿‡å»*UITabBarControlleråœ¨æ§åˆ¶å™¨çš„åº•éƒ¨æœ‰ä¸€ä¸ªå¯¼èˆªæ¡ï¼ˆQQï¼‰ åˆå§‹æ¢UITabBarControllerè®¾ç½®UIWindowçš„æ ¹æ§åˆ¶å™¨ä¸ºUITabBarControllerä½¿ç”¨addChildViewControlleræ·»åŠ å­æ§åˆ¶å™¨UITabBarControllerä¼šæ ¹æ®å­æ§åˆ¶å™¨çš„ä¸ªæ•°å°†å¯¼èˆªæ å‡åˆ†æˆå‡ ä¸ªéƒ¨åˆ†ï¼Œç‚¹å‡»åå°±ä¼šå®ç°è‡ªåŠ¨è·³è½¬UITabBarItemå†³å®šæ¯ä¸ªéƒ¨åˆ†çš„å†…å®¹ï¼Œæœ‰å‡ ä¸ªå±æ€§ï¼šNSString *title(æ ‡é¢˜æ–‡å­—)ã€UIImage *image(å›¾æ ‡)ã€UIImage *selectedImage(é€‰ä¸­å›¾æ ‡)ã€NSString *badgeValue(æé†’æ•°å­—)â€”-é€šå¸¸çš„UIæ¡†æ¶æ˜¯ä½¿ç”¨ä¸€ä¸ªUITabBarControllerç®¡ç†å‡ ä¸ªUINavigationControllerï¼Œå†ç”±æ¯ä¸ªUINavigationControllerç®¡ç†å¤šä¸ªå­æ§åˆ¶å™¨*Modalæ˜¾ç¤ºæ§åˆ¶å™¨ï¼ˆå¤šæ§åˆ¶å™¨ï¼‰ï¼Œæ§åˆ¶å™¨ä¼šåœ¨åº•éƒ¨å‘ä¸Šé’»å‡º (void)presentViewController:(UIViewController *)viewControllerToPresent animated:(BOLL)flag completion:(void (^) (void))completion;// å±•ç¤ºæ§åˆ¶å™¨ (void)dismissViewContollerAnimated:(BOOL)flag completion(void (^) (void))completion;// é€€å‡ºæ§åˆ¶å™¨ä¸€èˆ¬modalæ–¹æ³•æ˜¾ç¤ºçš„æ§åˆ¶å™¨åº”è¯¥ä¸å½“å‰æ§åˆ¶å™¨æ²¡æœ‰å¤ªå¤šçš„å…³è”å››ã€åº”ç”¨ç¨‹åºç›®å½•ç»“æ„ï¼ˆåº”ç”¨æ²™ç›’ï¼‰Documentsï¼šä¿å­˜åº”ç”¨è¿è¡Œæ—¶ç”Ÿæˆçš„éœ€è¦æŒä¹…åŒ–çš„æ•°æ®ï¼ŒiTuneåŒæ­¥è®¾å¤‡æ—¶ä¼šå¤‡ä»½æ•°æ®tmpï¼šä¿å­˜åº”ç”¨è¿è¡Œæ—¶æ‰€éœ€è¦çš„ä¸´æ—¶æ•°æ®ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æ¸…ç†è¯¥ç›®å½•æ–‡ä»¶ï¼ŒiTunesä¸ä¼šè¢«åˆ†è¯¥ç›®å½•LIbrary/Cachesï¼šä¿å­˜åº”ç”¨è¿è¡Œæ—¶ç”Ÿæˆçš„éœ€è¦æŒä¹…åŒ–çš„æ•°æ®ï¼ŒiTunesä¸ä¼šå¤‡ä»½è¯¥ç›®å½•ï¼Œä¸€èˆ¬æ˜¯ä½“ç§¯è¾ƒå¤§çš„æ–‡ä»¶ï¼Œä¸éœ€å¤‡ä»½çš„éé‡è¦æ•°æ®Library/Preferenceï¼šä¿å­˜åº”ç”¨çš„åå¥½è®¾ç½®ï¼ŒiTunesä¼šå¤‡ä»½è¯¥ç›®å½•äº”ã€æ²™ç›’ç›®å½•è·å–NSHomeDirectory();stringByAppendingPathComponment:@â€œâ€;//è·¯å¾„æ‹¼æ¥å…­ã€æ•°æ®å­˜å‚¨1.é€šè¿‡plistæ–‡ä»¶å­˜å‚¨ï¼ˆxmlï¼‰ è·å¾—è·¯å¾„writeToFile:atomically:ï¼Œåªèƒ½å½’æ¡£NSStringã€NSArrayã€NSDictionaryã€NSDataã€NSNumberarrayWithContentOfFile:â€¦â€¦2.é€šè¿‡preferenceï¼ˆåå¥½è®¾ç½®ï¼‰å•ç²’å¯¹è±¡NSUserDefaults *def = [NSUserDefault standardUserDefaults];[def setObject: forKey:];[def stringForKey];â€¦â€¦[def synchornize];å¼ºåˆ¶å†™å…¥æ–‡ä»¶ä¸­ï¼ˆå¼ºé€€ï¼‰3.NSKeyedArchiverå½’æ¡£ï¼ˆNSCodingï¼‰è·å¾—è·¯å¾„[NSKeyedArchiver archiverRootObject: toFile: ];// å½’æ¡£[NSKeyedUnrchiver unarchiverRootObjectWithFile: ];// è¯»å–ç¬¬ä¸€ç§æ–¹å¼çš„ç±»å‹å¯ä»¥ç›´æ¥å½’æ¡£ï¼Œè‡ªå®šä¹‰çš„ç±»éœ€è¦éµå®ˆåè®®å¹¶å®ç°ç›¸åº”çš„æ–¹æ³•æ‰èƒ½ä½¿ç”¨åœ¨encodeWithCoder:ä¸­ä½¿ç”¨encodeObject:forKey:æ–¹æ³•å½’æ¡£å®ä¾‹åœ¨initWithCoder:ä¸­ä½¿ç”¨decodeObject:forKey:æ–¹æ³•è§£æå®ä¾‹å­˜åœ¨ç»§æ‰¿å…³ç³»çš„å½’æ¡£ï¼Œçˆ¶ç±»å½’æ¡£è‡ªå·±çš„å±æ€§ï¼Œå­ç±»é‡å†™æ—¶è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•ï¼Œå†å½’æ¡£è‡ªå·±çš„å±æ€§4.SQLite3 // åµŒå…¥å¼æ•°æ®åº“ï¼Œåé¢è®²5.Core Data // å¯¹SQLite3çš„å°è£…ï¼ŒCè¯­è¨€API","link":"/2015/10/07/%E6%9B%BE%E7%BB%8F%E7%9A%84ios07/"},{"title":"æ¨¡æ‹Ÿå™¨è·¯å¾„å’Œç›¸å†Œæ–‡ä»¶å¤¹ï¼ˆiOSï¼‰","text":"åœ¨ mac çš„è®¿è¾¾ä¸­ç›´æ¥è®¿é—®æ¨¡æ‹Ÿå™¨çš„ç›¸å†Œå›¾ç‰‡ æ¨¡æ‹Ÿå™¨åœ°å€1~/Library/Developer/CoreSimulator/Devices/ ä½¿ç”¨ cmd + shift + g æ‰“å¼€å‰å¾€æ–‡ä»¶å¤¹ï¼Œæˆ–è€…ä½¿ç”¨ cd å‘½ä»¤ï¼Œå¯ä»¥çœ‹åˆ°ä»¥è®¾å¤‡ udid å‘½åçš„æ¨¡æ‹Ÿå™¨è®¾å¤‡æ–‡ä»¶å¤¹ æ¨¡æ‹Ÿå™¨è®¾å¤‡åç»ˆç«¯å‘½ä»¤ï¼Œåˆ—å‡ºæ‰€æœ‰çš„è®¾å¤‡ï¼Œå‹å·ã€iOSç‰ˆæœ¬ã€çŠ¶æ€ â€¦1xcrun simctl list devices é€šè¿‡ grep åšäº›ç­›é€‰ï¼Œæ³¨æ„å¤§å°å†™ï¼ˆ-iï¼‰ï¼Œç©ºæ ¼çš„è½¬ä¹‰ï¼Œå…·ä½“å¯ä»¥äº†è§£ä¸‹ grep çš„ä½¿ç”¨12345// å¼€å¯çš„xcrun simctl list devices | grep Booted// æŒ‡å®šå‹å·xcrun simctl list devices | grep iPhone\\ 8 ä¹Ÿå¯ä»¥åœ¨ Xcode &gt; Window &gt; Devices and simulators &gt; Simulators çš„æŒ‡å®šè®¾å¤‡é¡µé¢æ‰¾åˆ° Identifier ç›¸å†Œæ–‡ä»¶å¤¹å…¶ä¸­ &lt;device UDID&gt; å¯¹åº”ä½ éœ€è¦æ‰“å¼€çš„æ¨¡æ‹Ÿå™¨ï¼Œåœ¨ç»ˆç«¯ä½¿ç”¨ openï¼Œæˆ–è€… cmd + shift + gï¼Œå°±å¯ä»¥çœ‹åˆ°ç›¸å†Œçš„å›¾ç‰‡äº†ï¼Œæ·»åŠ ã€åˆ é™¤ä¹Ÿå¯ä»¥äº†1open ~/Library/Developer/CoreSimulator/Devices/&lt;device UDID&gt;/data/Media/DCIM/100APPLE å‚è€ƒ","link":"/2018/09/25/%E6%A8%A1%E6%8B%9F%E5%99%A8%E8%B7%AF%E5%BE%84%E5%92%8C%E7%9B%B8%E5%86%8C%E6%96%87%E4%BB%B6%E5%A4%B9/"}],"tags":[{"name":"lambda","slug":"lambda","link":"/tags/lambda/"},{"name":"kappa","slug":"kappa","link":"/tags/kappa/"},{"name":"Hadoop","slug":"Hadoop","link":"/tags/Hadoop/"},{"name":"gitea","slug":"gitea","link":"/tags/gitea/"},{"name":"selfhost","slug":"selfhost","link":"/tags/selfhost/"},{"name":"git","slug":"git","link":"/tags/git/"},{"name":"sentry","slug":"sentry","link":"/tags/sentry/"},{"name":"hacker","slug":"hacker","link":"/tags/hacker/"},{"name":"life","slug":"life","link":"/tags/life/"},{"name":"iOS","slug":"iOS","link":"/tags/iOS/"},{"name":"æ¨¡æ‹Ÿå™¨","slug":"æ¨¡æ‹Ÿå™¨","link":"/tags/%E6%A8%A1%E6%8B%9F%E5%99%A8/"},{"name":"centos","slug":"centos","link":"/tags/centos/"},{"name":"flask","slug":"flask","link":"/tags/flask/"},{"name":"cookbook","slug":"cookbook","link":"/tags/cookbook/"},{"name":"datastruct","slug":"datastruct","link":"/tags/datastruct/"},{"name":"python","slug":"python","link":"/tags/python/"},{"name":"Objective-C","slug":"Objective-C","link":"/tags/Objective-C/"},{"name":"ssh","slug":"ssh","link":"/tags/ssh/"},{"name":"RPC","slug":"RPC","link":"/tags/RPC/"},{"name":"go","slug":"go","link":"/tags/go/"},{"name":"unary","slug":"unary","link":"/tags/unary/"},{"name":"Ad Hoc","slug":"Ad-Hoc","link":"/tags/Ad-Hoc/"},{"name":"objc","slug":"objc","link":"/tags/objc/"},{"name":"test","slug":"test","link":"/tags/test/"},{"name":"ios","slug":"ios","link":"/tags/ios/"},{"name":"gitbook","slug":"gitbook","link":"/tags/gitbook/"},{"name":"nginx","slug":"nginx","link":"/tags/nginx/"},{"name":"gzip","slug":"gzip","link":"/tags/gzip/"},{"name":"openshift","slug":"openshift","link":"/tags/openshift/"},{"name":"mongodb","slug":"mongodb","link":"/tags/mongodb/"},{"name":"think","slug":"think","link":"/tags/think/"}],"categories":[{"name":"architecture exam","slug":"architecture-exam","link":"/categories/architecture-exam/"},{"name":"git","slug":"git","link":"/categories/git/"},{"name":"technology","slug":"technology","link":"/categories/technology/"},{"name":"wAyS","slug":"wAyS","link":"/categories/wAyS/"},{"name":"host","slug":"host","link":"/categories/host/"},{"name":"iOS","slug":"iOS","link":"/categories/iOS/"},{"name":"leetcode","slug":"leetcode","link":"/categories/leetcode/"}],"pages":[{"title":"å…³äº","text":"ç®€ä»‹A CURD Developer è”ç³»æˆ‘ Email: xiushilin@hotmail.com å¾®ä¿¡ï¼šbase64(eDIwMjB5eWc) è‡´è°¢ğŸŒ¸æœŸå¾…èƒ½æœ‰æœºä¼šå’Œæ‚¨å…±äº‹ã€‚","link":"/about/index.html"}]}